(function(){mstrmojo.ObjectBrowserDataProvider=mstrmojo.declare(mstrmojo.Object,null,{scriptClass:"mstrmojo.ObjectBrowserDataProvider",callback:null,ob:null,item:null,path:mstrConfig.taskURL,fetchFolderContents:function(A,B,E){this.ob=A;this.item=B;this.callback=E;var C=this.ob.blockCount,D={taskId:"searchMetadata",styleName:"MojoFolderStyle",blockCount:C,includeAncestorInfo:true,includeObjectDesc:A.includeObjectDesc};if(A.folderLinksContextId){D.folderLinksContextId=A.folderLinksContextId;}if(A.sId){D.sessionState=A.sId;}if(B.fid){D.rootFolderID=B.fid;}else{if(B.fty){D.rootFolderType=B.fty;}}if(A.browsableTypes){D.objectType=A.browsableTypes;}if(B.blockBegin){D.blockBegin=B.blockBegin;}if(B.searchPattern){D.searchPattern=B.searchPattern;if(B.recursive){D.recursive=B.recursive;}}mstrmojo.xhr.request("POST",this.path,E,D,undefined,this.XServer,this.baseParams);},newFolder:function(D,E,C,A){var B={taskId:"createFolder",folderID:D,name:E,description:C};mstrmojo.xhr.request("POST",this.path,A,B,undefined,this.XServer,this.baseParams);}});})();(function(){mstrmojo.requiresDescs(2050,2051,2052,2053,2054,2055,2056,2067,2068,2170,2182,2183,2193,2194,2195,2231,2232,2233,2234,2235,2236,2237,2238,2239,2240,2241,2242,2243,2244,2245,2246,2247,2248,2250,2256,2257,2258,2259,2260,2261,2262,2264,2265,2296,2378,2412,2718,2719,2886,3433,3434,3435,3436,3440,3441,3604,3905,4601,5156,7942,7943,7944,7945);var A=mstrmojo.desc(3604);mstrmojo._FormatDefinition={Formats:[{n:mstrmojo.desc(3433)},{n:mstrmojo.desc(3434)},{n:mstrmojo.desc(3435)},{n:mstrmojo.desc(3436)}],FormatTarget:[{n:mstrmojo.desc(7942),v:1,p:"header_format"},{n:mstrmojo.desc(7943),v:2,p:"grid_format"},{n:mstrmojo.desc(7944),v:3,p:"child_header_format"},{n:mstrmojo.desc(7945),v:4,p:"child_grid_format"}],MetricFormatTarget:[{n:mstrmojo.desc(9710,"Metric Headers"),v:1,p:"header_format"},{n:mstrmojo.desc(9711,"Metric Values"),v:2,p:"grid_format"}],MetricValueFormats:[{n:mstrmojo.desc(3434)},{n:mstrmojo.desc(3435)},{n:mstrmojo.desc(3433)},{n:mstrmojo.desc(2886)},{n:mstrmojo.desc(3905)}],MetricHeaderFormats:[{n:mstrmojo.desc(3434)},{n:mstrmojo.desc(3435)},{n:mstrmojo.desc(3433)},{n:mstrmojo.desc(2886)},{n:mstrmojo.desc(3905)},{n:"Chart"}],DefaultFormat:{FormattingAlignment:{Horizontal:"1",Vertical:"1",TextWrap:"0",TextDirection:"0"},FormattingBorder:{HInsideStyle:"1",VInsideStyle:"1",TopStyle:"1",LeftStyle:"1",BottomStyle:"1",RightStyle:"1",HInsideColor:"0",VInsideColor:"0",TopColor:"0",LeftColor:"0",BottomColor:"0",RightColor:"0",Border3DStyle:"0",Border3DWeight:"0",Border3DBottomColor:"0",Border3DLeftColor:"0",Border3DRightColor:"0",Border3DTopColor:"0"},FormattingFont:{Name:"Arial",Bold:"0",Italic:"0",Size:"10",Strikeout:"0",Underline:"0",Color:"0",Script:"0"},FormattingNumber:{Category:"9",DecimalPlaces:"0",ThousandSeparator:"-1",CurrencySymbol:"$",CurrencyPosition:"0",Format:"General",NegativeNumbers:"3"},FormattingPadding:{LeftPadding:"1",RightPadding:"1",TopPadding:"1",BottomPadding:"1",LineSpacing:"0"},FormattingPatterns:{FillColor:"16777215",PatternColor:"8650752",PatternStyle:"1",FillStyle:"0",ApplyToGraphThreshold:"0",GradientColor:"16777215",GradientAngle:"0",GradientXOffset:"0",GradientYOffset:"0",SelectorSelectionColor:"16167264",SelectorSelectionFillStyle:"0",SeriesFillColor:"pru",SeriesPatternColor:"8650752",SeriesPatternStyle:"1",SeriesFillStyle:"0",SeriesApplyToGraphThreshold:"0",SeriesGradientColor:"16777215",SeriesGradientAngle:"0",SeriesGradientXOffset:"0",SeriesGradientYOffset:"0",SeriesSelectorSelectionColor:"16167264",SeriesSelectorSelectionFillStyle:"0"}},Families:[{n:mstrmojo.desc(2412),v:"pru"},{n:"Arial",v:"Arial"},{n:"Arial Black",v:"Arial Black"},{n:"Arial Narrow",v:"Arial Narrow"},{n:"Arial Unicode MS",v:"Arial Unicode MS"},{n:"Batang",v:"Batang"},{n:"Book Antiqua",v:"Book Antiqua"},{n:"Bookman Old Style",v:"Bookman Old Style"},{n:"Bookshelf Symbol 1",v:"Bookshelf Symbol 1"},{n:"Bookshelf Symbol 2",v:"Bookshelf Symbol 2"},{n:"Bookshelf Symbol 3",v:"Bookshelf Symbol 3"},{n:"Comic Sans MS",v:"Comic Sans MS"},{n:"Courier New",v:"Courier New"},{n:"Garamond",v:"Garamond"},{n:"Haettenschweiler",v:"Haettenschweiler"},{n:"Helvetica",v:"Helvetica"},{n:"Impact",v:"Impact"},{n:"Lucida Console",v:"Lucida Console"},{n:"Lucida Sans Unicode",v:"Lucida Sans Unicode"},{n:"Map Symbols",v:"Map Symbols"},{n:"Marlett",v:"Marlett"},{n:"Monotype Corsiva",v:"Monotype Corsiva"},{n:"Monotype Sorts",v:"Monotype Sorts"},{n:"MS Gothic",v:"MS Gothic"},{n:"MS Outlook",v:"MS Outlook"},{n:"Microsoft Sans Serif",v:"Microsoft Sans Serif"},{n:"MT Extra",v:"MT Extra"},{n:"Symbol",v:"Symbol"},{n:"Tahoma",v:"Tahoma"},{n:"Times New Roman",v:"Times New Roman"},{n:"Trebuchet MS",v:"Trebuchet MS"},{n:"Verdana",v:"Verdana"},{n:"Webdings",v:"Webdings"},{n:"Wingdings",v:"Wingdings"},{n:"Wingdings 2",v:"Wingdings 2"},{n:"Wingdings 3",v:"Wingdings 3"}],Sizes:[{n:mstrmojo.desc(2412),v:"pru"},{n:"2",v:"2"},{n:"3",v:"3"},{n:"4",v:"4"},{n:"5",v:"5"},{n:"6",v:"6"},{n:"7",v:"7"},{n:"8",v:"8"},{n:"9",v:"9"},{n:"10",v:"10"},{n:"11",v:"11"},{n:"12",v:"12"},{n:"14",v:"14"},{n:"16",v:"16"},{n:"18",v:"18"},{n:"20",v:"20"},{n:"22",v:"22"},{n:"24",v:"24"},{n:"36",v:"36"},{n:"48",v:"48"},{n:"72",v:"72"}],Styles:[{n:mstrmojo.desc(2412),v:"pru"},{n:mstrmojo.desc(3440),v:"0,0"},{n:mstrmojo.desc(2718),v:"-1,0",v2:"-1,"},{n:mstrmojo.desc(2719),v:"0,-1",v2:",-1"},{n:mstrmojo.desc(3441),v:"-1,-1"}],Effects:[{n:"Underline",v:0},{n:"Strike",v:1}],Category:[{n:mstrmojo.desc(2412),v:-2},{n:mstrmojo.desc(2378),v:9},{n:mstrmojo.desc(2050),v:0},{n:mstrmojo.desc(2051),v:1},{n:mstrmojo.desc(2052),v:2},{n:mstrmojo.desc(2170),v:3},{n:mstrmojo.desc(2053),v:4},{n:mstrmojo.desc(2054),v:5},{n:mstrmojo.desc(2055),v:6},{n:mstrmojo.desc(2056),v:7}],MaxNegativeDidigts:30,FixedNegative:[{n:"-1,234.12",v:1,f:"#,##0.00"},{n:"-1,234.12["+A+"]",r:true,v:5,f:"#,##0.00;[RED]-#,##0.00"},{n:"1,234.12["+A+"]",r:true,v:2,f:"#,##0.00;[RED]#,##0.00"},{n:"(1,234.12)",v:3,f:"#,##0.00;(#,##0.00)"},{n:"(1,234.12)["+A+"]",r:true,v:4,f:"#,##0.00;[RED](#,##0.00)"}],CurrencyNegative:[{n:"$-1,234.12",v:1,f:'"$"#,##0.00'},{n:"$-1,234.12["+A+"]",r:true,v:5,f:'"$"#,##0.00;[RED]-"$"#,##0.00'},{n:"$1,234.12["+A+"]",r:true,v:2,f:'"$"#,##0.00;[RED]"$"#,##0.00'},{n:"$(1,234.12)",v:3,f:'"$"#,##0.00;("$"#,##0.00)'},{n:"$(1,234.12)["+A+"]",r:true,v:4,f:'"$"#,##0.00;[RED]("$"#,##0.00)'}],CurrencyPosition:[{n:mstrmojo.desc(2194),v:0},{n:mstrmojo.desc(2195),v:1},{n:mstrmojo.desc(2183),v:2},{n:mstrmojo.desc(2182),v:3}],Date:[{n:mstrmojo.desc(2231),v:"m/d"},{n:mstrmojo.desc(2232),v:"mm/dd"},{n:mstrmojo.desc(2233),v:"m/d/yy"},{n:mstrmojo.desc(2234),v:"mm/dd/yy"},{n:mstrmojo.desc(2235),v:"mm/dd/yyyy"},{n:mstrmojo.desc(2236),v:"d-mmm"},{n:mstrmojo.desc(2237),v:"d-mmm-yy"},{n:mstrmojo.desc(2238),v:"mmm-yy"},{n:mstrmojo.desc(2239),v:"mmm 'yy"},{n:mstrmojo.desc(2240),v:"mmmm yyyy"},{n:mstrmojo.desc(2241),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2243),v:"mmmm d, yyyy"}],Time:[{n:mstrmojo.desc(2244),v:"h:mm"},{n:mstrmojo.desc(2245),v:"h:mm AM/PM"},{n:mstrmojo.desc(2246),v:"h:mm:ss"},{n:mstrmojo.desc(2247),v:"h:mm:ss AM/PM"},{n:mstrmojo.desc(2241),v:"m/d/yy h:mm"},{n:mstrmojo.desc(2242),v:"m/d/yy h:mm AM/PM"},{n:mstrmojo.desc(2250),v:"mm/dd/yy h:mm"},{n:mstrmojo.desc(2248),v:"mm/dd/yy h:mm AM/PM"}],PercentNegative:[{n:"-12.12%",v:1,f:"0.00%"},{n:"-12.12%["+A+"]",r:true,v:5,f:"0.00%;[RED]-0.00%"},{n:"12.12%["+A+"]",r:true,v:2,f:"0.00%;[RED]0.00%"},{n:"(12.12%)",v:3,f:"0.00%;(0.00%)"},{n:"(12.12%)["+A+"]",r:true,v:4,f:"0.00%;[RED](0.00%)"}],Fraction:[{n:"12 1/3",v:"# ?/?"},{n:"37/3",v:"?/?"},{n:"12 26/81",v:"# ??/??"},{n:"998/81",v:"??/??"}],TextDirection:[{n:mstrmojo.desc(2412),v:"pru"},{n:mstrmojo.desc(4601),v:0},{n:mstrmojo.desc(5156),v:-90}],Horizontal:[{n:mstrmojo.desc(2296),v:"pru"},{n:mstrmojo.desc(2378),v:1},{n:mstrmojo.desc(2194),v:2},{n:mstrmojo.desc(2193),v:3},{n:mstrmojo.desc(2195),v:4},{n:mstrmojo.desc(2068),v:6}],Vertical:[{n:mstrmojo.desc(2296),v:"pru"},{n:mstrmojo.desc(2256),v:1},{n:mstrmojo.desc(2067),v:2},{n:mstrmojo.desc(2257),v:3}],TextWrap:[{v:0},{v:-1}],BorderStyles:[{n:mstrmojo.desc(2412),v:"pru"},{n:mstrmojo.desc(2258),v:0},{n:mstrmojo.desc(2259),v:3},{n:mstrmojo.desc(2260),v:4},{n:mstrmojo.desc(2261),v:7},{n:mstrmojo.desc(2262),v:1},{n:mstrmojo.desc(2264),v:5},{n:mstrmojo.desc(2265),v:6}],extractModel:function(D,F,C){var H=C||this.DefaultFormat;for(var G in D){var B=D[G];if(!B.attachEventListener){if(!_H.isEmpty(B)){F[G]=B;}}else{for(var E in B){if(H[G]&&H[G][E]){if(!F[G]){F[G]={};}F[G][E]=B[E];}}}}},getStandardFormat:function(C,B){var E=mstrmojo.hash.clone(B||this.DefaultFormat);C=C||{};for(var D in E){C[D]=C[D]||{};}for(var D in C){if(!C[D].attachEventListener){C[D]=mstrmojo.hash.make(C[D],mstrmojo.Obj);}}return C;},saveFormatModel:function(F,L,C,M){var K=M||this.DefaultFormat;for(var H=0;H<C.length;H++){var G=C[H],E=L[G]||null,J=F[G];if(typeof J==="undefined"){delete L[G];continue;}for(var B in K){var I=K[B];if(!E&&!J||E&&!E[B]&&!J[B]){continue;}for(var D in I){if(typeof J[B]==="undefined"||J[B]===""||J[B][D]==="pru"||typeof J[B][D]=="undefined"){if(E&&E[B]&&E[B][D]!=null&&E[B][D]!="pru"){E[B][D]="pru";}}else{E=E||{};E[B]=E[B]||{};E[B][D]=J[B][D];}}}if(E){L[G]=E;}}}};})();(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,L=mstrmojo.hash;function F(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(C.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function B(R){var Q=[],S=R.selectedIndices;for(var P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function N(V,U){var S=[],Q=V.selectedIndices,X=C.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return B(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}for(var R=0,T=U.length;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex==W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V;for(var Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U==V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function H(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function O(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=B(this),S=F(this,[P]);if(Q!==true){H(this,S,R);}}},toggleSelect:function J(P,Q){var S,R;if(this.selectedIndices[P]){R=N(this,[P]);}else{S=F(this,[P]);}if(Q!==true){H(this,S,R);}},rangeSelect:function G(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=B(this);if(P!==true){H(this,null,Q);}},select:function E(R,P){var Q=A(this,C.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){H(this,Q.add,Q.rmv);}},addSelect:function M(R,P){if(R==null){return ;}if(R.constructor!==Array){R=[R];}var Q=F(this,R);if(P!==true){H(this,Q,null);}return Q;},removeSelect:function K(R,P){if(R==null){return ;}if(R.constructor!=Array){R=[R];}var Q=N(this,R);if(P!==true){H(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){H(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof (T)=="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=C.find(U,V,T[V]);}else{if(T!=null){Q=C.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function D(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!=null){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return L.keyarray(this.selectedIndices,true).sort(C.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return C.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],s=this.itemIdField!=null?C.findMulti(S,this.itemIdField,Q):C.indexOfMulti(S,Q),V=Q.length,T=V-s.count,q=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(q&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],f=s.map;if(T&&q){var p=0;for(var e=0;e<V;e++){if(f[e]==null){R.push(Q[e]);U.push(b+p++);}}this.add(R,b);}var W=[];for(var h in f){var o=f[h];if(o>=b){o+=X;}W.push(o);}var r=W.concat(U),Y=this.addSelect(r,!d);if(!d){var Z=C.hash(Y),g=this.selectedIndices,a=[];for(var l in g){if(!Z[l]){a.push(parseInt(l,10));}}var P=this.removeSelect(a,true);H(this,Y,P);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var R=mstrmojo.dom,P=mstrmojo.hash;var M=100;var E=R.supportsTouches?0.5:1;var F=1;var Q=100;var N={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var K=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[R.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[R.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[R.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[R.CSS3_TRANSITION]=this.decelerating?(R.CSS3_PREFIX+"transform 0.2s linear"):"";}},P.copy(N));var G=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},P.copy(N));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function L(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=P.copy(R.isSafari?K:G,P.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}R.attachEvent(U,R.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){R.detachEvent(T,R.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function I(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}R.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=R.getMousePosition(R.firstTouch(T,V),T);this.dragging=false;R.attachEvent(window,R.TOUCHMOVE,this._tmCallback);R.attachEvent(window,R.TOUCHEND,this._teCallback);},touchesMoved:function D(b,d){var Z=R.getMousePosition(R.firstTouch(b,d),b);R.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){R.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>Q){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function H(T,U){R.preventDefault(T,U);R.detachEvent(window,R.TOUCHMOVE,this._tmCallback);R.detachEvent(window,R.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;R.stopPropogation(T,U);if((new Date())-this.lastDragTime<=Q){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=R.getMousePosition(R.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*M*E/d).toFixed(2):0,y:d?Number(b.y*M*E/d).toFixed(2):0};var a=this,U=function(e){return(a.scrollsHoriz&&Math.abs(e.x)>=F)||(a.scrollsVert&&Math.abs(e.y)>=F);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,M);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=(b)?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=(b)?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function J(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function O(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var A=mstrmojo.dom;function E(J,I){var G=[];if(J){for(var F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function D(L,F,N){var I=N.hWin,J=N.e,G=A.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=A.ctrlKey(I,J),O=A.shiftKey(I,J);if(K||O){A.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}},premouseup:function C(H,K,G){var F=G.hWin,J=G.e,L=A.ctrlKey(F,J),I=A.shiftKey(F,J);if(L||I){A.clearBrowserHighlights(F);}},onadd:function B(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=E(K,G);for(var J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function B(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){for(var H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);for(var J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var T=mstrmojo.dom,S,G=mstrmojo.global.document;function P(V){S.startDragCheck(self,V);}var A,O,J="mstrmojo-dnd-avatar",I;function K(X,V,W){if(W!=null){O.innerHTML=W;}I.left=X.x+"px";I.top=X.y+"px";}function H(V,W){if(!A){A=G.createElement("div");I=A.style;A.className=J;A.innerHTML='<div class="'+J+'-inner"></div>';O=A.firstChild;G.body.appendChild(A);}K(W,true,V);I.display="block";}function D(){if(A){I.display="none";}}function B(V){var W=++S.ctxt.moveCount;if(W>=S.minMoves){S.stopDragCheck(self,V);S.startDrag(self,V);}}function E(V){S.stopDragCheck(self,V);}function M(V){S.onDragMove(self,V);}function Q(V){S.stopDrag(self,V);}function N(V){if(!V){return ;}if(!V.hWin){V.hWin=window;}if(!V.e){V.e=V.hWin.event;}V.node=T.eventTarget(V.hWin,V.e);V.pos=T.getMousePosition(V.e,V.hWin);return V;}function F(W){var V=T.findWidget(W);while(V){if(V.draggable){return V;}V=V.parent;}return null;}function U(W,X){var V=T.findWidget(W);while(V){if(V.dropZone){if(V.allowDrop&&V.allowDrop(X)){return V;}}V=V.parent;}return null;}function L(V){if(this.set){this.set("allowingDrop",true);}}function C(V){if(this.set){this.set("allowingDrop",false);}}var R=C;mstrmojo.dnd=mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){T.attachEvent(G,"mousedown",P);mstrmojo.dndEnabled=true;}},disable:function(){T.detachEvent(G,"mousedown",P);},startDragCheck:function(V,W){delete this.ctxt;var X=N({hWin:V,e:W});this.ctxt={src:X,moveCount:0};if(this.minMoves){T.attachEvent(G,"mousemove",B);T.attachEvent(G,"mouseup",E);}else{this.startDrag(V,W);}},stopDragCheck:function(V,W){T.detachEvent(G,"mousemove",B);T.detachEvent(G,"mouseup",E);},startDrag:function(V,X){var Z=this.ctxt;Z.id=new Date();var Y=Z.src,W=F(Y.node);if(!W){return ;}Y.widget=W;Y.data=W.getDragData&&W.getDragData(Z);if(W.ondragstart){if(W.ondragstart(Z)===false){return ;}}T.clearBrowserHighlights();T.preventDefault(self,X);T.attachEvent(G,"mousemove",M);T.attachEvent(G,"mouseup",Q);if(W&&!W.ownAvatar){H(Y.data&&Y.data.html,Y.pos);}},stopDrag:function(V,Z){T.detachEvent(G,"mousemove",M);T.detachEvent(G,"mouseup",Q);var a=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,a);X.widget=W;a.tgt=X;if(W){if(W.ondrop){W.ondrop(a);}else{R.apply(W,[a]);}}var Y=a.src.widget;if(Y&&Y.ondragend){Y.ondragend(a);}if(Y&&!Y.ownAvatar){D();}},onDragMove:function(V,Z){if(T.isSafari){T.clearBrowserHighlights();}var b=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,b);X.widget=W;var a=b&&b.tgt&&b.tgt.widget;b.tgt=X;if(a!==W){if(a){if(a.ondragleave){a.ondragleave(b);}else{C.apply(a,[b]);}}if(W){if(W.ondragenter){W.ondragenter(b);}else{L.apply(W,[b]);}}}else{if(W){if(W.ondragover){W.ondragover(b);}}}var Y=b.src.widget;if(Y&&Y.ondragmove){Y.ondragmove(b);}if(Y&&!Y.ownAvatar){K(X.pos,!!W);}}});S=mstrmojo.dnd;S.enable();})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.QueuedXHR");var F=mstrmojo.hash;function J(K,L){return function(){if(K[L]){K[L]();}};}var B=[];function H(L){var K;switch(L.cacheLevel){case mstrmojo.AjaxCall.CACHELEVEL_LOCAL:if(L._cache==null){L._cache=[];}K=L._cache;break;default:if(B==null){B=[];}K=B;break;}return K;}function E(N){var M=H(N);var P={cache:M,idx:-1},O=N.params;if("xts" in O){delete O.xts;}for(var L=0,K=M.length;L<K;L++){var Q=M[L];if(Q&&F.equals(Q.url,N.url)&&F.equals(Q.params,O)){P.idx=L;break;}}return P;}function C(L){var K=H(L),M=F.copy(L.params);delete M.xts;K.push({url:L.url,params:M,res:F.copy(L.response)});}function D(K){var L=E(K);if(L&&L.idx>=0){K.response=L.cache[L.idx].res;return true;}return false;}mstrmojo.AjaxCall=mstrmojo.declare(mstrmojo.QueuedXHR,null,{scriptClass:"mstrmojo.AjaxCall",method:"GET",url:"",params:null,onsuccess:null,onerr:null,oncomplete:null,oncancel:null,readCache:false,writeCache:false,cacheLevel:"",_cache:null,useQueue:false,init:function I(K){this._super(K);F.copy(K,this);},send:function A(){var K=this;if(this.readCache&&D(this)){this.onsuccess();return ;}this.request(this.method,this.url,{success:function(){if(K.writeCache){C(K);}if(K&&K.onsuccess){K.onsuccess();}},failure:J(K,"onerr"),complete:J(K,"oncomplete")},this.params,!this.useQueue);},cancel:function G(){this._super();if(this.oncancel){this.oncancel();}}});mstrmojo.AjaxCall.CACHELEVEL_GLOBAL="global";mstrmojo.AjaxCall.CACHELEVEL_LOCAL="local";})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var B=mstrmojo.dom;function C(H){if(B.isWK){document.onselectstart=function(I){if(!H){I.preventDefault();}return H;};}}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function F(){return this.domNode;},getMovingTarget:function G(){return this.domNode;},ondragstart:function A(K){var J=this.getMovingHandle(),H=this.getMovingTarget().style;var I=B.contains(J,K.src.node,true,document.body);if(I){C(false);J.style.cursor="move";this._leftPos=parseInt(H.left,10);this._topPos=parseInt(H.top,10);this._hWidth=J.clientWidth;this._hHeight=J.clientHeight;}return I;},ondragmove:function E(K){var J=K.tgt.pos,H=K.src.pos,I=this.getMovingTarget().style;I.left=this.left=Math.max(this._leftPos+J.x-H.x,-this._hWidth+40)+"px";I.top=this.top=Math.max(this._topPos+J.y-H.y,-this._hHeight+10)+"px";},ondragend:function D(H){C(true);this.getMovingHandle().style.cursor="default";delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom,B=A.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function C(E,I,D){var G=E&&E.tree||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.fx.AnimateProp");var T=mstrmojo.css;var Q=10;function F(W,Z,Y){W.pauseScrollRendering(true);var X=W.scrollboxNode,V=W.animate?W.scrollEffect:null;if(V&&V.play){if(V.isPlaying){V.cancel();}V.props={scrollTop:{start:X.scrollTop,stop:Z,isStyle:false}};V.onEnd=function(){W.pauseScrollRendering(false,null,Y);};V.play();}else{X.scrollTop=Z;W.pauseScrollRendering(false,null,Y);}}function M(c,e,V){var W=4;if(!V){V=0;}var f=Math.round(c.renderBlockSize/2);c.fillAt(Math.max(0,e-f),e+f);var b=c.itemsContainerNode,a=b.childNodes[e],Z=c.listMapper.itemOffsetTop(c,b,null,a),d=parseInt(c.scrollboxNode.clientHeight/2,10)-a.offsetHeight/2,X=Math.max(0,c.spacerMargin+Z-d);if(Math.abs(c.scrollboxNode.scrollTop-X)>2){F(c,X,c.renderOnScroll?function(){if(V<=W){M(c,e,V++);}}:null);}else{var Y=c.animate?c.scrollEffect:null;if(Y&&Y.isPlaying&&Y.cancel){Y.cancel();c.pauseScrollRendering(false);}}}function I(X){var Y=X.itemsContainerNode,V=Y.lastChild,W=V?V.offsetTop+V.offsetHeight-Y.firstChild.offsetTop:0;return W;}function P(W){var V=I(W),X=Math.max(0,parseInt((W.scrollboxNode.clientHeight-V)/2,10));F(W,Math.max(0,W.spacerMargin-X));}function G(X){var V=X.selectedIndex,W=V>-1;X.set("hasSelection",W);if(!X.domNode){return ;}if(W){M(X,V);}else{P(X);}}function E(W){var Y=W.scrollboxNode,V=I(W),X=V>Y.clientHeight/2;T.toggleClass(W.upArrowNode,["enabled"],X);T.toggleClass(W.downArrowNode,["enabled"],X);}function U(V,W){var X=V.scrollboxNode;X.scrollTop=Math.min(Math.max(X.scrollTop+W,0),X.scrollHeight-X.offsetHeight);}function S(W,V){if(!W._scrollInter){var X=Q*(V?-1:1);W._scrollInter=window.setInterval(function(){U(W,X);},50);}}function O(V){if(V._scrollInter){window.clearInterval(V._scrollInter);V._scrollInter=null;}}mstrmojo._IsDial=mstrmojo.provide("mstrmojo._IsDial",{markupString:'<div id="{@id}" class="mstrmojo-Dial {@cssClass}" style="position:relative;"><div class="mstrmojo-Dial-uparrow"  onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], true)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], true)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"></div><div class="mstrmojo-Dial-scrollbox {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-Dial-spacer" style="{@spacerCssText}"><div class="mstrmojo-Dial-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div></div></div><div class="mstrmojo-Dial-dnarrow" onmouseover="mstrmojo.all.{@id}.onmouseoverarrow(self, arguments[0], false)" onmouseout="mstrmojo.all.{@id}.onmouseoutarrow(self, arguments[0], false)" onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.childNodes[1];},spacerNode:function(){return this.domNode.childNodes[1].firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1].firstChild.firstChild;},upArrowNode:function(){return this.domNode.childNodes[0];},downArrowNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){T.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);}},animate:true,itemsEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:500,interval:25,slot:"itemsContainerNode",preStart:function(){var W=this.widget[this.slot],V=(W&&W.offsetWidth)||0;this.props=V?{left:{start:-V,stop:0,suffix:"px",isStyle:true}}:{};},revertOnCancel:false},scrollEffect:{scriptClass:"mstrmojo.fx.AnimateProp",duration:250,interval:25,slot:"scrollboxNode",revertOnCancel:false},multiSelect:false,holdJumpOnly:true,audibles:{"*":true,hasSelection:false},initSpacer:function H(){var V=(this.cssText||"").match(/height:\s*(\d*)px/);if(V){this.spacerMargin=parseInt(Number(V[1])/2,10);var W=this.spacerMargin+"px";this.spacerCssText="padding-top: "+W+"; padding-bottom: "+W+";";}else{this.spacerMargin=0;delete this.spacerCssText;}},center:function R(){G(this);},preBuildRendering:function(){this.initSpacer();return this._super();},postBuildRendering:function B(){this._super();this.center();E(this);},refreshScroll:function D(){this.center();E(this);},prechange:function L(V){this._super(V);if(this.hasRendered){if(!this.multiSelect||(V&&V.added&&V.added.length)){this.center();}}},onclickarrow:function A(X,W,V){U(this,Q*(V?-1:1));},onmouseoverarrow:function J(X,W,V){if(!this.holdJumpOnly){S(this,V);}},onmouseoutarrow:function K(X,W,V){O(this);},onmousedownarrow:function C(X,W,V){if(this.holdJumpOnly){S(this,V);}},onmouseuparrow:function N(X,W,V){O(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,J="mstrmojo-itemwrap",I="&nbsp;",S=mstrmojo.array;function F(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}else{if(X===V){break;}}Y=X;X=Y.parentNode;}}return null;}function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=S.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;}function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function L(k,Z,j,n,W,c,o,m){if(!Z){return{start:0,end:0};}var e=this.wrapperNodes(k),g=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,f=j+n,d=e[0].offsetTop,b;for(var l=1;l<=Y;l++){b=e[g].offsetTop-d+m;if(b<j){X=g;}else{if(b>f){V=g;}}var a=Math.round(Z/Math.pow(2,l+1));g+=(b>j)?-a:a;g=Math.min(Math.max(0,g),Z-1);}return{start:X,end:V};},findWrapper:function K(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function E(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function R(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,e;if(Y){a=this._iw2idx(c,V,Y);d=a;e=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+e+Z/2){d++;e+=Z;}}else{return c.dropCuePos;}return{left:0,top:e,idx:d,idxActual:a};},getWrapperCss:function(V){return J;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function O(e,b,h,d,a,i){var l=this.itemWrapperPrefix(h),g=this.itemWrapperSuffix,Z=l+this.itemWrapperPrefill+g,Y=[this.markupPrefix],W=1,V=h.selectedIndices||{},n=function m(k,j){for(var o=k;o<j;o++){Y[W++]=l;var p=b.build(h,d,e[o],o);if(V[o]){p=p.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=p;Y[W++]=g;}};var c=(e&&e.length)||0;a=a&&b?Math.min(a,c):0;if(a){n(0,a);}i=i&&b?Math.min(i,c-a):0;var f=c-i;for(var X=a;X<f;X++){Y[W++]=Z;}if(i){n(f,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,g,d,m,f,W,b,l){var e=(g&&g.length)||0,j=this.wrapperNodes(X),n=f.itemStatus,V=mstrmojo.css,Z=m.selectedIndices||{};for(var c=W,h=Math.min(b+1,e),a=0;c<h;c++){if(n[c]!==A){j[c].innerHTML=d.build(m,f,g[c],c);if(Z[c]){var Y=j[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===l){break;}}}return a;},onadd:function N(e,V,Z,f){if(V&&f){var a=f.value.length,b=this.wrapperNodes(V),d=b[f.index],Y=this.getWrapperCss(e);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=I;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(e,this);}},onremove:function P(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function Q(g,X,c,k){if(X&&k){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,l=c.itemStatus,h;for(var b=0,V=k.removed,f=V&&V.length;b<f;b++){h=V[b];if(l[h]){W.removeClass(d[h].firstChild,["selected"]);}}for(var Z=0,e=k.added,Y=e&&e.length;Z<Y;Z++){h=e[Z];if(l[h]){W.addClass(d[h].firstChild,["selected"]);}}}}},_nd2iw:F,_iw2idx:M,toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,e=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=e.clientHeight,d=e.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}e.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var E=mstrmojo.hash,H=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=E.clone(I);O.data=M;O.parent=N;return H.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length);for(var N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L;for(var O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}for(var M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},mstrmojo.hash.copy(mstrmojo.ListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9\_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')},VALIDATOR:{DEMO:function L(c){var b=parseInt(c,10),d=mstrmojo.validation.STATUSCODE;if(b===0||b===1||b>10){return{code:d.VALID};}return{code:d.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function H(b){var d=this.dtp,c=String(b).replace(/[^\d]/g,"");if(c.length<10){return{code:E.INVALID,msg:mstrmojo.desc(9203)};}if(!J.REGEXP.PHONE_NUMBER.test(b)){return{code:E.INVALID,msg:mstrmojo.desc(9204)};}return{code:E.VALID};},VALIDATE_ZIPCODE:function G(b){var d="",c=this.dtp;if(!J.REGEXP.US_ZIP.test(b)){if(J.isNumeric(c)||J.isInt(c)){d=mstrmojo.desc(9208);}else{if(J.isString(c)){d=mstrmojo.desc(9206);}}return{code:E.INVALID,msg:d};}return{code:E.VALID};},VALIDATE_EMAIL:function P(b){var c=b.indexOf("@");if(c===-1){return{code:E.INVALID,msg:mstrmojo.desc(9197)};}if(b.substring(c).indexOf(".")===-1){return{code:E.INVALID,msg:mstrmojo.desc(9198)};}return J.REGEXP.EMAIL_ADDRESS.test(b)?{code:E.VALID}:{code:E.INVALID,msg:mstrmojo.desc(9207)};},VALIDATE_SSN:function O(b){var d=this.dtp,c;if(J.isNumeric(d)||J.isInt(d)){c=String(b).replace(/[^\d]/g,"");if(c.length!=9){return{code:E.INVALID,msg:mstrmojo.desc(9209)};}}if(!J.REGEXP.SOCIAL_SECURITY_NUMBER.test(b)){return{code:E.INVALID,msg:mstrmojo.desc(9210)};}return{code:E.VALID};}},isInt:function(b){return B[b]==1;},isNumeric:function(b){return B[b]==2||B[b]==5;},isString:function(b){return B[b]==3;}};var V=window.mstrConfig,I=V.listSep,W=mstrmojo.expr,K=W.DTP,J=mstrmojo.validation,F=J.TRIGGER,E=J.STATUSCODE,X=mstrmojo.css,Q=mstrmojo.num,N=mstrmojo.string,a=mstrmojo.date,B={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,21:2,22:2,23:3,24:4,25:3,30:5};function D(j,k){var g=j.dtp,i=j.constraints,m=i.allowedFormatChars?i.allowedFormatChars:"",f=(B[g]==1),b=(B[g]==2),d=(B[g]==6),l=mstrmojo.locales.number.THOUSANDSEPARATOR,e=mstrmojo.locales.number.DECIMALSEPARATOR,h;if(f){if(!j._intRegExp){m+="0-9-"+(j.isList?I:"")+l;j._intRegExp=new RegExp("[^"+m+"]");}h=j._intRegExp;}if(b){if(!j._numericRegExp){m+="0-9-"+(j.isList?I:"")+e+l;j._numericRegExp=new RegExp("[^"+m+"]");}h=j._numericRegExp;}if(d){}return !!h&&h.test(k);}function Y(j,l){var g=j.dtp,i=j.constraints,f=(B[g]==1),b=(B[g]==2),d=(B[g]==6),e=i.min,k=i.max,h;if(e==undefined&&k==undefined){return false;}if(f||b){return Q.inNumericRange(l,e,k)!==0;}if(d){return a.inDateTimeRange(l,e,k)!==0;}return false;}function Z(c,b){return !Q.isNumeric(b);}function A(e,c){var d=(e.dtp===K.DATE),b=(e.dtp===K.TIME);return(d?!a.isDate(c):(b?!a.isTime(c):!a.isDateAndOrTime(c)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:K.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function S(b){this._super(b);if(!this.constraints){this.constraints={};}var d=this.constraints;if(!("trigger" in d)){d.trigger=F.NONE;}},_set_value:function(g,d){var e=this.value,c=(e!==d);if(c){this.value=d;var f=this.constraints.trigger,b=(f&F.VALUESET)>0;if(b){this.validate(d);}}return c;},validate:function M(){var d=(this.value!==null&&this.value!==undefined)?this.value:"",g=this.isList?d.split(I):[d],f,c,h;for(var e=0,b=g.length;e<b;e++){f=this.doValidation(g[e]);c=(f.code>E.VALID);if(c){if(b>1){f.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",g[e]?g[e]:" ");}break;}}h=c?"onInvalid":"onValid";if(!c&&this.autoFormat){this.format();}this.set("validationStatus",f);if(this[h]){this[h](f);}},format:function T(){var g=this.dtp,d=(B[g]==6);if(!d){return ;}var j=mstrConfig.listSep,m=this.value||"",c=this.isList?m.split(j):[m],l=g===14,k=[],b,e=mstrmojo.locales.datetime;for(var f=0,h=c.length;f<h;f++){m=c[f];b=a.parseDateAndOrTime(m);if(b){if(l&&b.date){k.push(a.formatDateInfo(b.date,e.DATEOUTPUTFORMAT));}else{k.push((b.date?a.formatDateInfo(b.date,e.DATEOUTPUTFORMAT):"")+" "+(b.time?a.formatTimeInfo(b.time,e.TIMEOUTPUTFORMAT):""));}}}this.set("value",k.join(j));},isValid:function R(){var b=this.validationStatus;if(!b){this.validate();}return this.validationStatus.code===E.VALID;},clearValidation:function U(){this.set("validationStatus",{code:E.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function C(n){var k=this.constraints,l=k.regExp,e=k.validator,b={id:this.id,code:E.VALID,msg:""},j=this.dtp,i=(B[j]==1),d=(B[j]==2||B[j]==5),f=(B[j]==3),g=(B[j]==6),h=N.isEmpty(n),m=String(n).length;err="",_VAL=mstrmojo.locales.validation;if(this.required&&h){b.code=E.INVALID_EMPTY;b.msg=_VAL.requiredFieldError;return b;}n=N.trim(n);if(!h&&D(this,n)){if(i){err=_VAL.integerDataType;}if(d){err=_VAL.numericDataType;}if(g){err=_VAL.dateDataType;}b.code=E.INVALID_CHAR;b.msg=_VAL.invalidCharError.replace("#",err);return b;}if(!h&&g&&A(this,n)){b.code=E.INVALID_BAD_DATESTRING;b.msg=_VAL.invalidDateStringError;return b;}if(!h&&(d||i)&&Z(this,n)){b.code=E.INVALID_BAD_NUMERICFORMAT;b.msg=_VAL.invalidNumericFormatError;return b;}if(!h&&(i||d||g)&&Y(this,n)){b.code=E.INVALID_OUTOFRANGE;if(k.min!=null&&k.max!=null){err=_VAL.outofRangeError.replace("#","").replace("##",k.min).replace("###",k.max);}else{if(k.min!=null){err=_VAL.noLessMinError.replace("##",k.min).replace("#","");}else{if(k.max!=null){err=_VAL.noGreaterMaxError.replace("###",k.max).replace("#","");}}}b.msg=err;return b;}if(f&&k.minLen!=null&&k.maxLen!=null){if(m<k.minLen||m>k.maxLen){b.code=E.INVALID;b.msg=mstrmojo.desc(9211).replace(/#/,k.minLen).replace(/##/,k.maxLen);return b;}}if(l&&!l.test(n)){b.code=E.INVALID_REGEX;b.msg=mstrmojo.desc(9205);return b;}var o=e&&e.apply(this,[n]);if(o){b.code=o.code;b.msg=o.msg;return b;}return b;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.expr");var C=mstrmojo.array,F=mstrmojo.expr;mstrmojo._IsExprNode=mstrmojo.provide("mstrmojo._IsExprNode",{ind:function E(){var H=this.parent;if(H&&H.indent){var G=this.childIndex();G=(G>-1&&(G>0))?[G,G-1]:null;if(G){H.indent(G);}}},out:function B(){var H=this.parent;if(H&&H.outdent){var G=this.childIndex();G=(G>-1&&(G>0))?[G,G-1]:null;if(G){H.outdent(G);}}},andOrTxt:function D(){var I=this.parent,G=I&&I.data,H="",J=this.data;if(G&&(G.et===F.ET.ANDOR)&&G.fn){H=G.fn+(J&&J.not?"_"+F.FN.NOT:"");H=F.BRANCH_FNS[H];}return'<span class="mstrmojo-text mstrmojo-andor">'+H+"</span>";},childIndex:function A(){var I=this.parent,G=I&&I.data,H=G&&G.nds,J=this.data;if(H&&J){return C.indexOf(H,J);}return -1;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Obj","mstrmojo.string","mstrmojo.hash","mstrmojo.expr");var D=mstrmojo.array,O=mstrmojo.expr,J=O.ET,I=O.TP,M=O.ET2TGT,L=O.ET2COND,B=mstrmojo.meta.TP;function N(R,A){var Q=(A&&A.did)?A.did.split(O.FN_SEP):null,E=Q&&parseInt(Q[0],10),P=Q&&parseInt(Q[1],10),S=R.et;R.fnt=E;R.fn=P;if(S!=J.AE&&O.fn_List(P,E)){R.et=J.AL;R.a2=null;R.cs=null;}else{if(S==J.AL&&!O.fn_List(P,E)){R.et=J.AQ;R.cs=null;}else{if(S==J.MC&&!O.fn_AC_MC(P,E)){R.et=J.MQ;R.m2=null;}else{if(S==J.AC&&!O.fn_AC_MC(P,E)){R.et=J.AQ;R.a2=null;}}}}}function F(V,W,X){var E=true,A=2+W;switch(X.t){case I.PROMPT:var T=V.cs,U;if(!T){T=[];V.cs=T;}T[W]={};U=T[W];U.p=X;V["a"+A]=null;V["m"+A]=null;switch(V.et){case J.AC:V.et=J.AQ;break;case J.MC:V.et=J.MQ;break;}break;case I.METRIC:V["a"+A]=null;V.cs=null;V.et=J.MC;V["m"+A]=X;break;case I.ATTR:V["m"+A]=null;V.cs=null;V.et=J.AC;V["a"+A]=X;V["fm"+A]=null;break;default:V["a"+A]=null;V["m"+A]=null;var T=V.cs;if(!T){T=[];V.cs=T;}if("did" in X){V["a"+A]=null;V["fm"+A]=null;V["m"+A]=null;if(T[W]&&T[W].p){T[W].p=null;}}else{T[W]=X;E=false;}switch(V.et){case J.MC:V.et=J.MQ;break;case J.AC:V.et=J.AQ;break;case J.AL:if(!("did" in X)&&X.v){var P,R=X.dtp,T=[];P=X.v.split(mstrConfig.listSep);for(var Q=0,S=P.length;Q<S;Q++){T.push({v:mstrmojo.string.trim(P[Q]),dtp:R});}V.cs=T;}break;}}return E;}var H={};H[J.AQ]={target:1,fm:1,fn:1,cs:1};H[J.AL]={target:1,fm:1,fn:1,cs:1};H[J.AE]={target:1,fn:1,es:1};H[J.AC]={target:1,a2:1,a3:1,fm:1,fm2:1,fm3:1,fn:1};H[J.MQ]={target:1,fn:1,cs:1,dmy:1};H[J.MC]={target:1,fn:1,m2:1,m3:1,dmy:1};H[J.F]={target:1};H[J.R]=H[J.F];H[J.XML]={target:1};var G=function(A){return A!==null&&A!==undefined;};var K=function(U){if(!U||!G(U.et)){return false;}var T=true,A=H[U.et],R=U.cs,Q;T=T&&(!A.target||U[M[U.et]]);T=T&&(!A.fm||U.fm);T=T&&(!A.fn||G(U.fn));var P=O.fnCstCount(U.fn,U.fnt);if(T&&A.cs){for(Q=0;Q<P;Q++){T=T&&R&&G(R[Q]);}}if(T){var S=[M[U.et],"fm"];for(var E=0;E<2;E++){for(Q=0;Q<P;Q++){var V=S[E]+(2+Q);T=T&&(!A[V]||U[V]);}}}T=T&&(!A.es||U.es&&(U.es.length>0));T=T&&(!A.dmy||U.dmy&&U.dmy.uts&&(U.dmy.uts.length>0));return T;};mstrmojo.ConditionModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ConditionModel",completed:false,init:function(A){if(this._super){this._super(A);}this._updateCompleted();},edit:function(k,X){var R=this[k],j=true;switch(k){case"not":X=!!(X&&X.did===O.FN.NOT);R=!!this.not;if(X===R){return ;}this.not=!!X||null;break;case"target":var z=this.et;if(X){switch(X[B]){case I.ATTR:R=this.a;if(z!==J.AQ&&z!==J.AE){this.et=J.AQ;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}this.fn=null;this.fnt=null;this.fm=null;this.fm2=null;this.fm3=null;this.cs=null;break;case I.METRIC:R=this.m;if((z!==J.MQ)&&(z!==J.MC)){this.et=J.MQ;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.r=null;this.f=null;this.cs=null;}break;case I.REPORT:R=this.r;if(z!==J.R){this.et=J.R;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.f=null;}break;case I.FILTER:R=this.f;if(z!==J.F){this.et=J.F;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;}break;case I.PROMPT:R=this.prms&&this.prms[0];if(z!==J.XML){this.et=J.XML;this.fm=null;this.fm2=null;this.fm3=null;this.fn=null;this.fnt=null;this.a=null;this.a2=null;this.a3=null;this.m=null;this.m2=null;this.m3=null;this.r=null;this.f=null;}break;}}this.es=null;this[M[this.et]]=X;break;case"fm":if(X&&X[B]==="fn"){this.et=J.AE;this.fm=null;N(this,X);}else{this.fm=X;if(X&&(this.et==J.AE)){this.et=J.AQ;}this.fnt=null;this.fn=null;this.cs=null;this.a2=null;this.fm2=null;}break;case"fm2":case"fm3":this[k]=X;break;case"fn":N(this,X);break;case"es":var AC=this.es;if(X&&X.removed&&AC){D.removeItems(AC,X.itemIdField,X.removed);}if(X&&X.added){if(!AC){AC=X.added.concat();this.es=AC;}else{D.insert(AC,AC.length,X.added);}}break;case"c0":j=F(this,0,X);break;case"c1":j=F(this,1,X);break;case"dmy":var w=this.dmy;if(!w){w={cc:true,fres:true,uts:[]};this.dmy=w;}var q=w&&w.uts;if(!q){q=[];w.uts=q;}var P={};P[O.TP.ATTR]=true;P[O.TP.DIM]=true;if(X&&X.removed){var e=[],A=false,V=[],Q=false;for(var h=0,S=X.removed,E=S.length;h<E;h++){var U=S[h],y=U[B] in P;if(y){Q=true;}else{A=true;}var g=y?V:e;g.push(U);}if(A){D.removeItems(q,"did",e);}if(Q){var AB={};for(var Z=0,Y=q&&q.length;Z<Y;Z++){var W=q[Z];if(W&&W.utgt){AB[W.utgt.did]=Z;}}var T=[];for(var x=0,t=V.length;x<t;x++){var f=AB[V[x].did];if(f>-1){T.push(f);}}T.sort(D.numSorter);for(var p=T.length-1;p>-1;p--){q.splice(T[p],1);}}}if(X&&X.added){var AD=[],l=O.DMY_TP.DIM,o=O.DMY_TP.ATTR;for(var AA=0,s=X.added,d=s.length;AA<d;AA++){var m=s[AA];AD.push((m[B] in P)?{utgt:m,utp:m[B]===I.DIM?l:o,agg:1,flt:2,gb:true,rps:0,n:m.n}:m);}D.insert(q,q.length,AD);}break;}this._updateCompleted();if(j){this.raiseEvent({name:"edit",prop:k,value:X,valueWas:R});}},get:function C(){var A=L[this.et]||[];A.push("et");return mstrmojo.hash.copyProps(A,this);},_updateCompleted:function(){this.set("completed",K(this));}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.hash");function A(H,E,G,F){var D=mstrmojo.hash.copy(F,{props:{left:{isStyle:true,start:H,stop:E,suffix:"px",ease:mstrmojo.ease.linear}},duration:G});(new mstrmojo.fx.AnimateProp(D)).play();}function B(J,M,F,K){var H=J.domNode,L=H.offsetWidth;var D=!(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))||Number(RegExp.$1)>3.5,I=K?1:-1,E=parseInt(L,10)*I,G=D?500:0;A(0,-E,G,{target:F,duration:G,preStart:function(){this.target.style.overflowY="hidden";}});A(E,0,G,{target:M,preStart:function(){this.target.style.overflowY="auto";}});if(J.waiting){A(0,-E,G,{widget:J,slot:"loaderNode",onEnd:function(){this.widget.waiting=false;}});}}var C=function(D){var E=D.currentPage;if(E===D.p1Node){E=D.p2Node;}else{E=D.p1Node;}D.currentPage=E;};mstrmojo.Booklet=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Booklet",pageClass:"mstrmojo-BookletPage",markupString:'<div id="{@id}" class="mstrmojo-Booklet {@cssClass}" style="{@cssText}"><div id="{@id}_p1" class="mstrmojo-BookletPage" ></div><div id="{@id}_p2" class="mstrmojo-BookletPage" style="left:-100%;"></div><div id="{@id}_ldr" class="mstrmojo-BookletLoader" ></div></div>',markupSlots:{containerNode:function(){return this.domNode;},p1Node:function(){return this.domNode.firstChild;},p2Node:function(){return this.domNode.childNodes[1];},loaderNode:function(){return this.domNode.childNodes[2];}},markupMethods:{onnextChange:function(){var G=this.next;if(!G){return ;}var D=this.currentPage,F=this.p1Node,E=this.currentPage=(D==F)?this.p2Node:F;if(!(G instanceof mstrmojo.Obj)){G=this.next=mstrmojo.insert(G);}if(!G.hasRendered){G.placeholder=E.appendChild(document.createElement("span"));G.render();}else{if(E.firstChild){E.replaceChild(G.domNode,E.firstChild);}else{E.appendChild(G.domNode);}}this.set("waiting",false);if(E&&D){B(this,E,D,this.turnDirFwd);}},onwaitingChange:function(D){this.loaderNode.style.left=(this.waiting)?0:"-100%";},onheightChange:function(D){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(D){if(this.width){this.domNode.style.width=this.width;}}},enabled:true,waiting:false,next:null,currentPage:null,turnDirFwd:true,FORWARD:true,REVERSE:false,turnFwd:function(D){this.turn(D,this.FORWARD);},turnBack:function(D){this.turn(D,this.REVERSE);},turn:function(D,E){this.set("turnDirFwd",E);this.set("next",D);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");var C=mstrmojo.css;function E(F,H){var G={searchMetadata:{taskId:"searchMetadata",styleName:this.searchStyleName,rootFolderID:this.rootID,searchPattern:this.searchPattern+"*",nameWildcards:(this.qse?16:1),quickSearch:this.qse,sortKey:(this.qse?-1:6),blockBegin:this.blockBegin||1,blockCount:this.blockCount,recursive:1,folderBrowserStyle:0,includeAncestorInfo:"true",includeObjectDesc:this.includeObjectDesc,searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseFolder:{taskId:"searchMetadata",rootFolderID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,recursive:this.hierarchical?0:(this.searchXML?"":1),folderBrowserStyle:this.hierarchical?1:0,includeAncestorInfo:String(!!this.hierarchical),searchXML:this.searchXML||"",dataSourcesXML:this.dataSources||"",objectType:this.objectTypes},browseElements:{taskId:"browseElements",styleName:"MojoAttributeStyle",attributeID:this.rootID,blockBegin:this.blockBegin,blockCount:this.blockCount,filterXML:this.filterXML||"",searchPattern:this.searchPattern||"",matchCase:!!this.matchCase,dataSourcesXML:this.dataSourcesXML||"",includeFormNames:!!this.collectForms,includeFormValues:!!this.bIncludeFormValues,displayedForms:this.displayedForms||1,dimensionID:this.dimensionId||""}}[F];if(typeof H==="object"){mstrmojo.hash.copy(H,G);}return G;}var B="##searchPattern";mstrmojo.SearchBox2=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchBox2",width:"100px",taskId:"searchMetadata",rootID:null,searchStyleName:"MojoFolderStyle",objectTypes:"3,14,256,257,1024,1027,2048,3072,10",token:{searchMetadata:/\//,browseElements:/(^-)|(,)|( OR )|( AND)|([<>]=?)|(&)|( )|(["\[\]\/])/},blockCount:50,blockBegin:1,minSearchLength:2,matchCase:false,enableMatchCase:true,supportIncFetch:true,quickSearch:false,searchAfterSearchPatternRestored:false,includeObjectDesc:true,markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" style="width:{@width};" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-clear" id="{@id}sbClear" mstrAttach:click></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td><td><div class="mstrmojo-SearchBox-options" style="{@cssTextShowMC}"><input id="{@id}sbMatchCase" type="checkbox" mstrAttach:click /><label for="{@id}sbMatchCase">'+mstrmojo.desc(1049,"Match case")+"</label></div></td></tr></table>",markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},clearNode:function(){return this.domNode.rows[0].cells[1].firstChild;},optionNode:function(){return this.domNode.rows[0].cells[3].firstChild.firstChild;}},preBuildRendering:function(){this.cssTextShowMC=this.enableMatchCase?"":"display: none";},postBuildRendering:function(){if(this._super){this._super();}this.matchCase=this.optionNode.checked;},onkeyup:function D(F){var H=this;var G=H.searchTimer;if(G){window.clearTimeout(G);}H.searchTimer=window.setTimeout(function(){H.onkeyupDelayed(F);delete H._searchTimer;},parseInt(F.e.keyCode||F.e.charCode,10)===13?0:H.searchDelay);},onkeyupDelayed:function A(G){var F=G.hWin,I=G.e||F.event;var H=mstrmojo.string.trim(this.inputNode.value);if(this.clearNode){C.toggleClass(this.clearNode,["show"],H.length>0);}this.showTaskError=false;this.click2Search=false;if(H.length==0||this.autoSubmit||this.onEnter&&I.keyCode===13){this._onsearch();}},onEnter:function(){this._onsearch();},onclick:function(G){var F=G.hWin,I=G.e||F.event,K=I.target||I.srcElement,J=K&&K.id;switch(J.replace(this.id,"")){case"sbDown":if(this.enableMatchCase){var H=this.optionNode.parentNode.style;H.display=H.display=="block"?"none":"block";}break;case"sbSearch":if(this.onEnter&&I.keyCode===13){this.onEnter();}this.showTaskError=true;this.click2Search=true;this._onsearch();break;case"sbMatchCase":this.set("matchCase",this.optionNode.checked);break;case"sbClear":this.clearSearch();break;case"sbSpinner":break;}},clearSearch:function(){this.inputNode.value="";C.removeClass(this.clearNode,["show"]);var G=this.searchCache,F=this.rootID;if(G&&G[F]){G[F][B]="";}this._onsearch(true);},onmatchCaseChange:function(){this.matchCaseChanged=true;this._onsearch();},onrootIDChange:function(){this.rootChanged=true;this._setupCache();var G=this.searchCache[this.rootID];if(G){var F=G[B]||"";this.inputNode.value=F;if(F.length>0){if(F.length>=this.minSearchLength&&this.searchAfterSearchPatternRestored){this._onsearch();}}}},getRootID:function(){},contentWidget:null,_notifyContentWidget:function(G){var F=this.contentWidget||this;F.set("items",G[0]);if(this.supportIncFetch){var H=G[1],J=G[2],I=this.blockCount;F.set("ifs",{np:Math.floor(H/I)+((H%I>0)?1:0),cp:Math.floor(J/I)+((J%I>0)?1:0)});}},_onsearch:function(F){this.getRootID();this._setupCache();var I=mstrmojo.string.trim(this.inputNode.value);if(I.length===0){F=true;}var J=this.token[this.taskId];if(J.test(I)){}if(this.searchPattern==I&&!this.rootChanged&&!this.matchCaseChanged&&!this.click2Search){return ;}var K=this.rootID,H=this.searchCache[K];if((I.length<this.minSearchLength&&!this.click2Search)&&!F){if(this.searchPattern&&this.searchPattern.length>=this.minSearchLength){this._notifyContentWidget(H[K]);this.searchPattern=I;}}else{this.searchPattern=I;H[B]=this.searchPattern;var G=this.filterCache(I,H,F);if((this.click2Search||G===null)&&!F){this.blockBegin=1;this.fetch();return ;}else{this._notifyContentWidget(G);}}H[B]=I;},_setupCache:function(){var H=this.searchCache,G=this.rootID;if(H&&!H[G]){H[G]=H[G]||{};var F=this.contentWidget&&this.contentWidget.items||this.rootCacheItems||[];H[G][G]=[F,this.totalSize||0,this.blockBegin||1].concat();}},taskCallId:0,path:mstrConfig.taskURL,method:"POST",fetch:function(){this.rootChanged=false;this.matchCaseChanged=false;if(this.spinnerNode){this.spinnerNode.style.display="block";}if(this.preFetch){this.preFetch();}var F=this,G=E.apply(this,[this.taskId]);G.searchPattern=this.searchPattern;callback={success:function(H){var I=H.items||H.es||[];I=[I,H.totalSize||H.sz||0,H.blockBegin||H.bb];mstrmojo.all[F.id].searchCache[F.rootID][(G.searchPattern.length==0?F.rootID:F.buildIndex(G.searchPattern))]=I;F._notifyContentWidget(I);},failure:function(H){if(F.showTaskError){mstrmojo.alert(mstrmojo.desc(8117,"Data request failed:")+" \n"+H.getResponseHeader("X-MSTR-TaskFailureMsg"));}},complete:function(){if(F.spinnerNode){F.spinnerNode.style.display="none";}if(F.postFetch){F.postFetch();}}};if(this.sessionState!==undefined){G.sessionState=this.sessionState;}mstrmojo.xhr.request(this.method,this.path,callback,G,undefined,this.XServer,this.baseParams);},fetchPage:function(F){this.blockBegin=F*this.blockCount+1;this.fetch();},filterCache:function(K,G,N){var J=G&&G[N?this.rootID:this.buildIndex(K)];if(J){return J;}var H=this.token[this.taskId];if(H.test(K)||this.totalSize>this.blockCount){return null;}var M=K.replace(/.$/,"");J=G&&G[this.buildIndex(M)];while(J===undefined&&(M=M.replace(/.$/,"")).length>0){J=G&&G[this.buildIndex(M)];}if(J!==undefined){if(J[1]>this.blockCount){return null;}var L=J[0],F=[];for(var I in L){if(L[I].n.search(new RegExp(K,this.matchCase?"":"i"))>-1){F.push(L[I]);}}this.totalSize=F.length;return(G[this.buildIndex(K)]=[F,F.length,this.blockBegin].concat());}return null;},buildIndex:function(F){if(F.replace(/^\s|\s$/g,"").length===0){return"";}return !this.matchCase?F.toUpperCase():F+"::0";},init:function(F){if(this._super){this._super(F);}this.qse=mstrApp.useQuickSearch&&mstrApp.useQuickSearch()||0;this.autoSubmit=this.quickSearch&&(mstrApp.searchAutoComplete&&mstrApp.searchAutoComplete()||false);this.searchDelay=mstrApp.searchAutoCompleteDelay&&mstrApp.searchAutoCompleteDelay()||0;this.xhr=new mstrmojo.SimpleXHR();this.searchCache=this.searchCache||{};},clear:function(){this.inputNode.value="";C.removeClass(this.clearNode,["show"]);}});})();(function(){mstrmojo.requiresCls("mstrmojo.expr","mstrmojo.css","mstrmojo._IsExprNode","mstrmojo._HasPopup","mstrmojo.Widget");var O=mstrmojo.dom,B=mstrmojo.css,F=mstrmojo.string.htmlAngles,M=mstrmojo.expr,N=M.ET,L=M.FN,A=M.BRANCH_FNS[L.NOT],E={};E[L.BETWEEN]=1;E[L.NOT_BETWEEN]=1;var D={"*":function(Q,P){return Q?('<span class="mstrmojo-unknown">'+(F(Q.n||Q.xml)||"...")+"</span>"):null;}};function I(Q,P,S,R){return S&&((R?'<span class="mstrmojo-ListIcon t'+R+'"></span>':"")+'<span class="mstrmojo-text mstrmojo-embedobj">'+F(S)+"</span>");}D[N.R]=function(Q,P){return I(Q,P,Q.r&&Q.r.n,Q.r&&Q.r.t);};D[N.F]=function(Q,P){return I(Q,P,Q.f&&Q.f.n,Q.f&&Q.f.t);};D[N.XML]=function(Q,P){return I(Q,P,Q.n||Q.p&&Q.p.n||Q.xml,Q.p&&Q.p.t);};D[N.AE]=function(V,S){var R=[];if(V&&V.a&&V.a.n){R.push('<span class="mstrmojo-text mstrmojo-attr">'+F(V.a.n)+"</span>");if(V.fn!==M.FN.IN_LIST){R.push('<span class="mstrmojo-text mstrmojo-fn">'+F(M.fnName(V.et,V.fn,V.fnt))+"</span>");}var U=V.es,P=U&&U.length||0;if(P){R.push('<span class="mstrmojo-elems">');var Q=R.length;for(var T=0;T<P;T++){R[Q++]='<span class="mstrmojo-text mstrmojo-elem">';R[Q++]=F(U[T].n);if(T<P-1){R[Q++]=",";}R[Q++]="</span>";}R[Q++]="</span>";}else{R.push('<span class="mstrmojo-text mstrmojo-emptyelems">(Empty)</span>');}}return R.join("");};D[N.AQ]=function(W,X){var T=[];if(W&&W.a&&W.a.n){T.push('<span class="mstrmojo-text mstrmojo-attr">'+F(W.a.n)+"</span>");if(W.fm&&W.fm.n){T.push('<span class="mstrmojo-text mstrmojo-form">'+F(W.fm.n)+"</span>");if(W.fn!=null){T.push('<span class="mstrmojo-text mstrmojo-fn">'+F(M.fnName(W.et,W.fn,W.fnt,W.fm.dtp))+"</span>");var P=M.fnCstCount(W.fn,W.fnt);if(W.et===N.AC){if(P>=1){if(W.a2&&W.a2.n){T.push('<span class="mstrmojo-text mstrmojo-attr2">'+F(W.a2.n)+"</span>");if(W.fm2&&W.fm2.n){T.push('<span class="mstrmojo-text mstrmojo-form2">'+F(W.fm2.n)+"</span>");}}if(P>1){T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");if(W.a3&&W.a3.n){T.push('<span class="mstrmojo-text mstrmojo-attr3">'+F(W.a3.n)+"</span>");if(W.fm3&&W.fm3.n){T.push('<span class="mstrmojo-text mstrmojo-form3">'+F(W.fm3.n)+"</span>");}}}}}else{if(W.et===N.AL){var U=W.cs,Y=[];for(var R=0,V=U.length;R<V;R++){Y.push(U[R].v);}T.push('<span class="mstrmojo-text mstrmojo-c1">'+Y.join(mstrConfig.listSep)+"</span>");}else{if(P>=1){var U=W.cs,S=U&&U[0];T.push('<span class="mstrmojo-text mstrmojo-c1">'+F(S&&S.p&&S.p.n||S&&S.v)+"</span>");if(P>1){var Q=U&&U[1];T.push('<span class="mstrmojo-text mstrmojo-btwn">'+X.betweenText+"</span>");T.push('<span class="mstrmojo-text mstrmojo-c1">'+F(Q&&Q.p&&Q.p.n||Q&&Q.v)+"</span>");}}}}}}}return T.join("");};D[N.AC]=D[N.AQ];D[N.AL]=D[N.AQ];D[N.MQ]=function(a,b){var W=[];if(a&&a.m&&a.m.n){W.push('<span class="mstrmojo-text mstrmojo-metric">'+F(a.m.n)+"</span>");if(a.fn!=null){W.push('<span class="mstrmojo-text mstrmojo-fn">'+F(M.fnName(a.et,a.fn,a.fnt,M.DTP.REAL))+"</span>");var T=M.fnCstCount(a.fn,a.fnt);if(a.et==M.ET.MC){if(T>=1){var X=(a.m2&&a.m2.n)||"?";W.push('<span class="mstrmojo-text mstrmojo-m2">'+F(X)+"</span>");if(T>1){W.push('<span class="mstrmojo-text mstrmojo-btwn">'+b.betweenText+"</span>");var R=(a.m3&&a.m3.n)||"?";W.push('<span class="mstrmojo-text mstrmojo-m3">'+F(R)+"</span>");}}}else{if(T>=1){var Z=a.cs,V=Z&&Z[0];var Y=function(e){var d=e.v;if(a.fnt==M.FNT.PER){e.v=e.v.replace(/%$/,"");d=e.v+"%";}return d;};W.push('<span class="mstrmojo-text mstrmojo-c1">'+F(V&&V.p&&V.p.n||V&&V.v&&Y(V))+"</span>");if(T>1){var U=Z&&Z[1];W.push('<span class="mstrmojo-text mstrmojo-btwn">'+b.betweenText+"</span>");W.push('<span class="mstrmojo-text mstrmojo-c2">'+F(U&&U.p&&U.p.n||U&&U.v)+"</span>");}}}var Q=a.dmy&&a.dmy.uts,P=Q&&Q.length;if(P){W.push('<span class="mstrmojo-text mstrmojo-at">'+b.atText+"</span>");W.push('<span class="mstrmojo-dmy">');for(var c=0;c<P;c++){var S=Q[c];W.push('<span class="mstrmojo-text mstrmojo-dmyunit">');W.push(F(S.utgt?S.utgt.n:S.n));if(c<P-1){W.push(",");}W.push("</span>");}W.push("</span>");}}}return W.join("");};D[N.MC]=D[N.MQ];function H(P){var Q=P.data;if(Q.not){return'<span class="mstrmojo-text mstrmojo-not">'+A+"</span>";}return"";}function G(P){var R=P.data,Q=D[R&&R.et]||D["*"];return H(P)+((Q&&Q(R,P))||('<span class="mstrmojo-text">'+P.emptyText+"</span>"));}mstrmojo.ConditionNode=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._IsExprNode,mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionNode",data:null,markupString:'<div id="{@id}" class="mstrmojo-cond mstrmojo-ConditionNode {@cssClass}"><div class="mstrmojo-onhoverparent mstrmojo-cond-prefix {@cssClass}" mstrAttach:mousedown><span class="mstrmojo-textset mstrmojo-cond-prefix-text" mstrAttach:click></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><img class="mstrmojo-outdent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'" /><img class="mstrmojo-outdent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5896,"Ungroup conditions")+'"onclick="mstrmojo.all[\'{@id}\'].out()" /><img class="mstrmojo-indent disable" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'" /><img class="mstrmojo-indent" src="../images/1ptrans.gif" title="'+mstrmojo.desc(5895,"Group conditions")+'"onclick="mstrmojo.all[\'{@id}\'].ind()" /></span></div><div class="mstrmojo-onhoverparent mstrmojo-cond-contents {@cssClass}"><span class="mstrmojo-textset mstrmojo-cond-text {@cssClass}" mstrAttach:click></span><span class="mstrmojo-rel mstrmojo-cond-popupNode {@cssClass}"></span><span class="mstrmojo-onhover-bl mstrmojo-abs mstrmojo-topleft mstrmojo-cond-tools {@cssClass}"><img class="mstrmojo-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(7931,"Delete condition")+'"onclick="mstrmojo.all[\'{@id}\'].del()" /></span></div></div>',markupSlots:{prefixNode:function(){return this.domNode.firstChild.firstChild;},condNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.childNodes[1].firstChild;},popupNode:function(){return this.domNode.childNodes[1].childNodes[1];}},markupMethods:{oneditableChange:function(){B.toggleClass(this.textNode,["editable"],this.editable);B.toggleClass(this.prefixNode,["editable"],this.editable);},onselectedChange:function(){B.toggleClass(this.condNode,["selected"],this.selected);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();this.textNode.innerHTML=G(this);}},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),emptyText:mstrmojo.desc(7930,"Empty condition"),del:function K(){var P=this.parent;if(P&&P.remove&&this.data){P.remove(this.data);}},isEmpty:function(){var Q=this.data,P=Q&&Q.et,R=P&&mstrmojo.expr.ET2TGT[P];return !(R&&Q[R]);},premousedown:function C(P){O.stopPropogation(P.hWin,P.e);},preclick:function J(P){var R=null,Q=O.eventTarget(P.hWin,P.e);if(O.contains(this.prefixNode,Q,true)){R="andor";}else{if(O.contains(this.textNode,Q,true)){R="condition";}}P.part=R;}});})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var Z=mstrmojo.hash,e=mstrmojo.array,d=mstrmojo.boxmodel,b=mstrmojo.dom;function A(h,j,g){var i=h.listSelector;if(i){i[j](h,h.itemsContainerNode,g);}}function K(h,g){var i=h.lastPagePos;if(!i||i.dragId!==g){i=d.offset(h.itemsContainerNode);i.dragId=g;h.lastPagePos=i;var j=h.scrollboxNode;h.lastScrollPos={left:j.scrollLeft,top:j.scrollTop,width:j.clientWidth,height:j.clientHeight};}}function N(j,m,h){var i=m&&m.node;if(i===j.dropCueNode||i===j.dropCueNode.firstChild){return j.dropCuePos;}var k=j.listMapper;var g=k&&k.whereDrop(j,j.itemsContainerNode,i,m.pos,{left:j.lastPagePos.left-j.lastScrollPos.left,top:j.lastPagePos.top-j.lastScrollPos.top,width:j.lastScrollPos.width,height:j.lastScrollPos.height});var l=j.dropCuePos;return((h!==false)&&l&&g&&(l.idx===g.idx)&&(l.left===g.left)&&(l.top===g.top))?l:g;}var f="attachEventListener";function C(h,g){if(h.makeObservable){g=g||[];if(!g[f]){mstrmojo.hash.make(g,h.itemsScriptClass||mstrmojo.Arr);}}return g;}function G(h,g){if(g&&g[f]){h._sub_its=g;h._sub_add=g[f]("add",h.id,"preadd");h._sub_rmv=g[f]("remove",h.id,"preremove");}}function F(g){if(g._sub_its){var h=mstrmojo.publisher;h.unsubscribe(g._sub_add);h.unsubscribe(g._sub_rmv);delete g._sub_add;delete g._sub_rmv;delete g._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var h=this.dropCueNode,g=h&&h.style;if(!g){return ;}var j=this.dropCuePos,i=!!j;if(i){g.left=j.left+"px";g.top=j.top+"px";}g.display=i?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Y(l){this._super(l);this.items=this.initItems(this.items);var k=this.selectedIndices,g=this.selectedIndicesList,j=this.selectedIndex,m=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(k||g||(j>-1)||m){this.initSelections(k,g,j,m);}if(this.postInitItems){this.postInitItems();}},initItems:function H(g){return C(this,g);},preBuildRendering:function V(){var k=this.listBuilder,n=k.newContext(this);this.ctxtBuilder=n;var h=this.markupSlots,j=!!(this.renderOnScroll&&this.renderBlockSize&&h&&h.scrollboxNode),i=this.items,g=(i&&i.length)||0,l=j?this.firstRenderBlockSize:g,m=j?this.firstRenderBlockSize:0;this._eros=j;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(i,k,this,n,l,m).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function D(){delete this.itemsHtml;var l=this.listMapper;if(l&&l.postBuildRendering){l.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}G(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var o=this.id;this._cb_scroll=function(){var i=mstrmojo.all[o];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var j=0,h=["itemsEffect","scrollEffect"],g=h.length;j<g;j++){var m=h[j],k=this[m];if(k&&k.constructor===Object){k=mstrmojo.insert(mstrmojo.hash.clone(k));k.widget=this;this[m]=k;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function W(k){F(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var h=0,j=["itemsEffect","scrollEffect"],g=j.length;h<g;h++){var l=this[j[h]];if(l&&l.isPlaying){l.cancel();}}this._super(k);},pauseScrollRendering:function O(i,g,h){if(i!==false){i=true;}if(this.paused===!!i){return ;}this.paused=!!i;if(i){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(g,h);}},onscroll:function J(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var g=this;this._fillTmr=self.setTimeout(function(){g.fill();g=null;},50);}}if(this._super){this._super();}},fill:function a(g,k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var l=(this.items&&this.items.length)||0;if(!l){if(k){k();}}else{var i=this.scrollboxNode,m=this.itemsContainerNode,j=mstrmojo.boxmodel.offset(m,i),o=this.listMapper,n=o.findScrollRange(m,l,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||i.scrollTop,i.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||i.scrollLeft,i.clientWidth,j.left,j.top);if(this.fillAt(n.start,n.end)){if(g){g();}var h=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[h].fill(g,k);},100);}else{if(k){k();}}}},fillAt:function L(i,h){var g=this.listMapper;if(g){return g.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,i,h,this.renderBlockSize);}else{return false;}},add:function Q(h,g){if(!h||!h.length){return -1;}var i=this.items;if(g==null){g=Z.min(this.selectedIndices,false,true);if(g!==null&&g!==undefined){g++;}}if(g==null||g===-1){g=(i&&i.length)||0;}if(i&&i.add){i.add(h,g);}else{this.set("items",i?e.insert(i.concat(),g,h):h);}return g;},preadd:function B(j){if(this.hasRendered){var m=this.listMapper;if(m){m.onadd(this,this.itemsContainerNode,this.ctxtBuilder,j);}var l=this.listBuilder;if(l){l.onadd(this,this.ctxtBuilder,j);}var h=this.listSelector;if(h){h.onadd(this,j);}if(this._eros){this.onscroll();}else{var k=j.index,g=j.value.length;this.fillAt(k,k+g-1);}}if(this.onadd){this.onadd(j);}if(this._super){this._super(j);}},remove:function T(g){if(g==null){return -1;}if(g.constructor!==Array){return this._remove(g);}var j=this.items;if(j){var h;if(j.remove){for(h=g.length-1;h>-1;h--){j.remove(g[h],1);}}else{j=j.concat();for(h=g.length-1;h>-1;h--){j.splice(g[h],1);}this.set("items",j);}return g[0];}return -1;},_remove:function T(i){var h=this.items;if(!h||(i==null)){return -1;}var g;if(!isNaN(i)){g=i;}else{g=this.itemIndex(i);}if(g>-1){if(h.remove){h.remove(g,1);}else{h=h.concat();h.splice(g,1);this.set("items",h);}}return g;},duplicate:function X(l,h,i){var j=this.items,g=-1;if(!j||(l==null)){return -1;}if(!isNaN(l)){if(h===null||h===undefined){h=l+1;}l=j[l];}else{if(h===null||h===undefined){h=this.itemIndex(l)+1;}}if(l){var k;k=Z.copy(i,Z.clone(l));g=this.add([k],h);}return g;},preremove:function M(h){if(this.hasRendered){var j=this.listMapper;if(j){j.onremove(this,this.itemsContainerNode,this.ctxtBuilder,h);}var i=this.listBuilder;if(i){i.onremove(this,this.ctxtBuilder,h);}var g=this.listSelector;if(g){g.onremove(this,h);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(h);}if(this._super){this._super(h);}},move:function R(k,p){function n(q,i){return(p>=q)&&(p<=q+i);}var o=(this.items&&this.items.length)||0;if(p===-1||p==null||isNaN(p)){p=o;}else{p=Math.min(p,o);}var j,g,m,l;if(k.constructor===Array){g=k;m=k;l=(g&&g.length)||0;if(n(k[0],k.length)){return false;}j=e.get(this.items,k);}else{if(typeof (k)==="object"){j=[k];l=1;g=this.itemIndex(j[0]);m=[g];if(n(g,1)){return false;}}else{g=k;m=[k];l=1;if(n(g,1)){return false;}j=[this.items[g]];}}for(var h=0;h<l;h++){if(m[h]<=p){p--;}}if(j[0]!=null){this.remove(g);this.add(j,p);}return true;},itemIndex:function E(g){if(g==null){return -1;}var h=this.itemIdField;return h?e.find(this.items,h,g[h]):e.indexOf(this.items,g);},prechange:function S(j){if(this.hasRendered){var h=[this.listBuilder,this.listMapper];for(var k=0,g=h.length;k<g;k++){var l=h[k];if(l&&l.onchange){l.onchange(this,this.itemsContainerNode,this.ctxtBuilder,j);}}}},makeObservable:false,_set_items:function I(l,g){var k=this.items;g=this.initItems(g);this.items=g;if(k!==g){var j=this,i=function(){if(j.autoHide){j.set("visible",!!(g&&g.length));}j=null;},h=this.hasRendered;if(h){this.refresh(i);}else{i();}}return k!==g;},premousedown:function c(g){A(this,"premousedown",g);},premouseup:function P(g){A(this,"premouseup",g);},scrollTo:function U(h){var g,i=this.listMapper;if(i&&i.toItem){if(!isNaN(h)){g=h;}else{g=this.itemIndex(h);}if(g>=0){i.toItem(this,g);}}},draggable:false,getDragData:function(k){K(this,k.id);var i=N(this,k.src),h=i&&i.idxActual;if((h>-1)&&this.selectedIndices[h]){var j=this.sortSelectedIndices(),g=e.get(this.items,j)||[];switch(g.length){case 1:return Z.copy(g[0],{html:g[0][this.itemDisplayField],index:j[0]});case 0:return null;default:return Z.copy({html:g.length+" selections",indices:j},g);}}},dropZone:false,ondragenter:function(g){K(this,g.id);this.set("dropCuePos",N(this,g.tgt));},ondragover:function(g){this.set("dropCuePos",N(this,g.tgt));},ondragleave:function(g){this.set("dropCuePos",null);},ondragstart:function(g){if(!(g&&g.src&&g.src.data)){return false;}},allowCopy:false,ondragend:function(j){var h=j&&j.tgt,g=h&&h.widget;if(g===this){}else{if(this.tree&&g&&g.tree===this.tree){if(!this.allowCopy||!b.ctrlKey(h.hWin,h.e)){var i=j.src&&j.src.data;if(i&&(i.indices||(i.index!==null))){this.remove(i.indices||i.index);}}}}},ondrop:function(o){var r=o&&o.src,n=r&&r.data;if(n){var h=N(this,o.tgt,false),p=h&&h.idx,j=(n&&n.constructor===Array);var l=this.items;p=Math.min(p,(l&&l.length)||0);var q=true;if(r.widget===this){q=this.move(this.sortSelectedIndices(),p);}else{this.add(j?n:[n],p);}if(q){var m=j?n.length:1,g={};for(var k=0;k<m;k++){g[p+k]=true;}this.set("selectedIndices",g);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.WaitIcon=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.WaitIcon",cssFloat:"left",visible:false,markupString:'<div id="{@id}" class="mstrmojo-WaitIcon {@cssClass}" style="float:{@cssFloat};{@cssText};"></div>',markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},markupSlots:{}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapperHoriz","mstrmojo.ListBuilder");mstrmojo.ListHoriz=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.ListHoriz",renderOnScroll:true,listMapper:mstrmojo.ListMapperHoriz,listBuilder:mstrmojo.ListBuilder,itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.CheckBox");var D=mstrmojo.hash,E=mstrmojo._FormatDefinition;var C=function(F){return mstrmojo.hash.copy(F,{scriptClass:"mstrmojo.TextBox",alias:"decimalPlaces",bindings:{m:F.modelBinding,value:function(){return this.m.DecimalPlaces||"2";},category:function(){var G=this.m.Category;this.onkeyup();}},onkeyup:function(G){if(/^\d{1,2}$/.test(this.value)){var N=this.m.DecimalPlaces,I=this.value;this.m.DecimalPlaces=I;if(N!=I&&this.negative){var J=this.parent[this.negative],L;if(J&&J.refreshFormatList){J.refreshFormatList();}else{L=mstrmojo.hash.clone(E[this.negative]);if(L){var M=I>0?".":"",H=M;for(var K=0;K<Math.min(I,E.MaxNegativeDidigts);K++){M+=K%9;H+="0";}for(K=0;K<L.length;K++){L[K].n=L[K].n.replace(/\.\d{2}/g,M);L[K].f=L[K].f.replace(/\.\d{2}/g,H);}J.set("items",L);}}}}}});},A=function(F){return mstrmojo.hash.copy(F,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",itemMarkupFunction:function(I,G,J){var H=I.r?"color: red":"";return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="'+H+'">'+I.n+"</div></div>";},selectionPolicy:"reselect",bindings:{m:F.modelBinding,selectedIndex:function(){var G=mstrmojo.array.find(this.items,"v",this.m.NegativeNumbers);if(G===-1){G=mstrmojo.array.find(this.items,"f",this.m.Format);}this.singleSelect(G);return G==-1?3:G;},category:function(){var G=this.m.Category;this.onchange();}},onchange:function(G){if(this.parent.idx==mstrmojo.array.find(E.Category,"v",this.m.Category)&&this.selectedItem){this.m.NegativeNumbers=this.selectedItem.v;this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}},onmChange:function(G){if(this.m){var L=this.m.DecimalPlaces;if(L!=2){var J=mstrmojo.hash.clone(E[this.alias]);if(J){var K=L>0?".":"",H=K;for(var I=0;I<Math.min(L,E.MaxNegativeDidigts);I++){K+=I%9;H+="0";}for(var I=0;I<J.length;I++){J[I].n=J[I].n.replace(/\.\d{2}/g,K);J[I].f=J[I].f.replace(/\.\d{2}/g,H);}this.set("items",J);}}}},postCreate:function(){this.onmChange();}});},B=function(F){return mstrmojo.hash.copy(F,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList "+F.alias,itemMarkupFunction:function(H,G,I){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+H.n+"</div></div>";},selectedIndex:0,bindings:{m:F.modelBinding,selectedIndex:function(H){var G=mstrmojo.array.find(this.items,"v",this.m.Format);return G===-1?0:G;},category:function(){var G=this.m.Category;this.onchange();}},onchange:function(G){if(this.parent.idx==mstrmojo.array.find(E.Category,"v",this.m.Category)){this.m.set("Format",this.selectedItem.f||this.selectedItem.v);}}});};mstrmojo.NumberFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.NumberFormatter",cssClass:"mstrmojo-NumberFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{colSpan:2}]},{cells:[{},{}]}],children:[{slot:"0,0",scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7940),cssClass:"category",cssText:"font-weight: bold"},{slot:"1,0",scriptClass:"mstrmojo.List",alias:"numberCategory",cssClass:"mstrmojo-FormatEditor-numberCategory",items:E.Category,selectionPolicy:"reselect",bindings:{m:"this.parent.parent.model",selectedIndex:function(){var G=this.m.Category,F=mstrmojo.array.find(this.items,"v",(G==="pru"?-2:G));return(F==-1)?0:F;}},onchange:function(F){if(this.m){this.m.set("Category",this.selectedIndex===0?"pru":this.selectedItem.v);}}},{slot:"1,1",scriptClass:"mstrmojo.Container",alias:"numberSubpanelContainer",width:"300px",markupString:'<div id={@id} class="mstrmojo-FormatEditor-numberPanel-subpanel {@cssClass}"><div class="mstrmojo-FormatEditor-numberPanel-subpanel-container"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},postBuildRendering:function(){var F=mstrmojo.Container.prototype.postBuildRendering.apply(this);this.parent.numberCategory.singleSelect(this.parent.numberCategory.selectedIndex);return F;},children:[{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:0,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:"&nbsp;",slot:"0,0"}],bindings:{visible:'this.parent.parent.parent.model.Category=="pru"',category:function(){var G=this.parent.parent.parent.model,F=this.parent.parent.parent.model.Category;if(G&&this.idx==mstrmojo.array.find(E.Category,"v",F)){G.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item",idx:1,rows:1,cols:1,children:[{scriptClass:"mstrmojo.Label",text:"&nbsp;",slot:"0,0"}],bindings:{visible:"this.parent.parent.parent.model.Category==9",category:function(){var G=this.parent.parent.parent.model,F=this.parent.parent.parent.model.Category;if(G&&this.idx==mstrmojo.array.find(E.Category,"v",F)){G.set("Format","");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item fixed",idx:2,rows:3,cols:2,layout:[{cells:[{},{}]},{cells:[{},{}]},{cells:[{colSpan:2}]}],bindings:{visible:"this.parent.parent.parent.model.Category==0"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",negative:"FixedNegative",alias:"FixedDecimalPlaces",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"1,0"},A({modelBinding:"this.parent.parent.parent.parent.model",items:E.FixedNegative,refreshFormatList:function(){var G=this.parent,J=G&&G.FixedDecimalPlaces,M=G&&G.ThousandSeparator;if(!J||!M){return ;}var H=J.value||0,Q=mstrmojo.hash.clone(E.FixedNegative),F=M.checked,P=H>0?".":"",O=P,N;for(var L=0,K=Math.min(H,E.MaxNegativeDidigts);L<K;L++){P+=L%9;O+="0";}for(var I=0;I<Q.length;I++){N=Q[I].n.replace(/\.\d{2}/g,P);if(!F){N=N.replace("1,234","1234");}Q[I].n=N;N=Q[I].f.replace(/\.\d{2}/g,O);if(!F){N=N.replace(/#,##/g,"###");}Q[I].f=N;}this.set("items",Q);},alias:"FixedNegative",slot:"1,1"}),{scriptClass:"mstrmojo.ImageCheckBox",alias:"ThousandSeparator",label:mstrmojo.desc(2049),cssText:"width:auto;",bindings:{m:"this.parent.parent.parent.parent.model",checked:function(){var F=this.m.ThousandSeparator;if(F==null){F=-1;}return parseInt(F,10)!==0;}},oncheckedChange:function(){if(this.m&&this.parent.idx==mstrmojo.array.find(E.Category,"v",this.m.Category)){this.m.ThousandSeparator=this.checked?-1:0;this.parent.FixedNegative.refreshFormatList();}},slot:"2,0"}]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item currency",idx:3,rows:4,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==1"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",negative:"CurrencyNegative",alias:"currencyDecimal",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2047),slot:"1,0"},{scriptClass:"mstrmojo.TextBox",alias:"currencySymbol",maxLength:5,bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.CurrencySymbol||mstrmojo.desc("2369");},category:function(){var F=this.m.Category;this.onkeyup();}},onkeyup:function(F){this._update();},onvalueChange:function(){this._update();},_update:function(){if(this.m){var G=this.m.CurrencySymbol;this.m.CurrencySymbol=this.value;var F=this.parent.CurrencyNegative;if(F&&(G!=this.value)){F.refreshFormatList();}}},slot:"1,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2048),slot:"2,0"},{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-numberFormatList",alias:"CurrencyPosition",items:E.CurrencyPosition,itemMarkupFunction:function(G,F,H){return'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">'+G.n+"</div></div>";},bindings:{m:"this.parent.parent.parent.parent.model",selectedIndex:function(){var F=mstrmojo.array.find(E.CurrencyPosition,"v",this.m.CurrencyPosition);return(F==-1?0:F);},category:function(){var F=this.m.Category;this.onchange();}},onchange:function(F){if(this.m){this.m.CurrencyPosition=this.selectedItem.v;var G=this.parent.CurrencyNegative;if(G){G.refreshFormatList();}}},slot:"2,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"3,0"},A({modelBinding:"this.parent.parent.parent.parent.model",items:E.CurrencyNegative,refreshFormatList:function(){var N=this.parent,I=N&&N.currencyDecimal,M=N&&N.CurrencyPosition,J=N&&N.currencySymbol;if(!I||!M||!J){return ;}var L=I.value||0,H=M.selectedIndex||0,G=J.value||"",G=(H==2?G+" ":(H==3?" "+G:G)),K=mstrmojo.hash.clone(E.CurrencyNegative),X=L>0?".":"",V=X,P;for(var W=0,T=Math.min(L,E.MaxNegativeDidigts);W<T;W++){X+=W%9;V+="0";}var O=mstrConfig.decimalSep,F=mstrConfig.thousandsSep;for(var S=0;S<K.length;S++){var Q=K[S].n,U=K[S].f;if(H==1||H==3){P=U.split(";");for(var R=0,T=P.length;R<T;R++){P[R]=P[R].replace(/(\"\$\")(.*)/g,"$2$1");}Q=Q.replace(/(\$)(.*)/g,"$2$1");U=P.join(";");}Q=Q.replace(/\$/g,G).replace(/\.\d{2}/g,X);U=U.replace(/\$/g,G).replace(/\.\d{2}/g,V);K[S].n=Q.replace(/,/,F).replace(/(\d{2,3})\./,"$1"+O);K[S].f=U.replace(/,/,F).replace(/(\d{2,3})\./,"$1"+O);}this.set("items",K);},alias:"CurrencyNegative",slot:"3,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Date",idx:4,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==2"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:E.Date,alias:"Date",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Time",idx:5,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==3"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:E.Time,alias:"Time",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item percentage",idx:6,rows:2,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==4"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},C({modelBinding:"this.parent.parent.parent.parent.model",negative:"PercentNegative",slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2044),slot:"1,0"},A({modelBinding:"this.parent.parent.parent.parent.model",items:E.PercentNegative,alias:"PercentNegative",slot:"1,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item Fraction",idx:7,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==5"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2869),slot:"0,0"},B({modelBinding:"this.parent.parent.parent.parent.model",items:E.Fraction,alias:"Fraction",slot:"0,1"})]},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item scientific",idx:8,rows:1,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2046),slot:"0,0"},C({slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"})],bindings:{m:"this.parent.parent.parent.model",visible:"this.m.Category==6",category:function(){if(this.m&&this.idx==mstrmojo.array.find(E.Category,"v",this.m.Category)){this.m.set("Format","0.00E+00");}}}},{scriptClass:"mstrmojo.Table",cssClass:"mstrmojo-FormatEditor-numberPanel-subpanel-item custom",idx:9,rows:1,cols:2,bindings:{visible:"this.parent.parent.parent.model.Category==7"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2133),slot:"0,0"},{scriptClass:"mstrmojo.TextBox",alias:"custom",value:"",bindings:{m:"this.parent.parent.parent.parent.model",value:function(){return this.m.Format;}},onvalueChange:function(){if(this.m&&this.parent.idx==mstrmojo.array.find(E.Category,"v",this.m.Category)){this.m.Format=this.value;}},slot:"0,1"}]}]}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.css");var F="",B="row-",E=mstrmojo.css.DISPLAY_TABLE;mstrmojo.Table=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Table",cellCssClass:"",rows:-1,cols:-1,_trows:-1,cellPadding:0,cellSpacing:0,layout:null,markupString:'<table id="{@id}" class="mstrmojo-Table {@cssClass}" style="{@cssText}" cellpadding="{@cellPadding}" cellspacing="{@cellSpacing}">{@tableHtml}</table>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?E:"none";}},preBuildRendering:function G(){var I=[],P=this.cellCssClass;if(this.layout){var Q=this._trows=this.layout.length;for(var K=0;K<Q;K++){var H=this.layout[K],R=H.cells,O=R.length,L=[];for(var J=0;J<O;J++){var N=R[J],M="";M+=((N.cssClass||P)?' class="'+(N.cssClass||P)+'"':"");M+=(N.cssText?' style="'+N.cssText+'"':"");M+=(N.rowSpan?' rowspan="'+N.rowSpan+'"':"");M+=(N.colSpan?' colspan="'+N.colSpan+'"':"");L[J]="<td"+M+"></td>";}var S="";S+=(H.cssClass?' class="'+H.cssClass+'"':"");S+=(H.cssText?' style="'+H.cssText+'"':"");I[K]="<tr"+S+">"+L.join("")+"</tr>";}}else{this._trows=this.rows;var M=(P?' class="'+P+'"':""),L=[];for(var K=0;K<this.rows;K++){for(var J=0;J<this.cols;J++){L[J]="<td"+M+"></td>";}I[K]="<tr>"+L.join("")+"</tr>";}}this.tableHtml=I.join("");if(this._super){this._super();}},postBuildRendering:function C(){if(this._trows){var M={},I=this.containerNode.rows,N=I.length;for(var L=0;L<N;L++){var K=I[L].cells,H=K.length;M[B+L]=I[L];for(var J=0;J<H;J++){M[F+L+","+J]=K[J];}}this.addSlots(M);}this._super();},childRenderCheck:function D(I){if(I&&!I.hasRendered){var H=I.slot||this.defaultChildSlot;return !!this[H]||H.match(/^([\d]+),([\d]+)$/);}return false;},on_child_change_rendering:function A(L){var H=(L&&L.src)||L,O=H&&H.domNode;if(O){var U=H.slot;if(!this[U]){var M=U&&U.match(/^([\d]+),([\d]+)$/);if(M){var R=parseInt(M[1],10),V=parseInt(M[2],10),Q=this.containerNode,T=this[(B+R)],N=[];if(!T){var J=Q.rows,S=J&&J.length||0;for(var K=S;K<=R;K++){N[B+K]=Q.insertRow();}T=N[B+R];}var P=T.cells&&T.cells.length||0;for(var K=P;K<=V;K++){var I=T.insertCell(K);N[F+R+","+K]=I;if(this.cellCssClass){I.className=this.cellCssClass;}}this.addSlots(N);}}}this._super(L);}});})();mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.TBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TBox",markupString:'<table id="{@id}" class="mstrmojo-TBox {@cssClass}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}" style="{@cssText}"><tbody><tr><td></td></tr></tbody></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},cellSpacing:0,cellPadding:0});(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.FieldSet=mstrmojo.declare(mstrmojo.Container,null,{legend:null,scriptClass:"mstrmojo.FieldSet",markupString:'<fieldset id="{@id}" class="mstrmojo-FieldSet {@cssClass}" style="{@cssText}"><legend class="{@cssClass}-legend">{@legend}</legend></fieldset>',markupSlots:{legendNode:function(){return this.domNode.firstChild;},containerNode:function(){return this.domNode;}},markupMethods:{onlegendChange:function(){this.legendNode.innerHTML=mstrmojo.string.encodeHtmlString((this.legend!=null)?this.legend:"");},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.HTMLButton","mstrmojo.CheckBox","mstrmojo.HBox","mstrmojo.VBox","mstrmojo.Box","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");var A=function(E){E.attachEventListener("pfChange",E.id,"positionChange");E.boxes.left.flat.attachEventListener("checkedChange",E.id,"flatChange");var D={pf:"this.boxes.left.pf.value",flat:"!this.boxes.left.flat.checked",agg:function(){return this.boxes.left.agg.checked?"2":"1";},rfi:"this.boxes.left.rfi.value"};E.set("bindings",D);},C=function(E){var D=E.boxes.left;D.pf.set("value",E.pf);D.flat.set("checked",!E.flat);D.agg.set("checked",E.agg==2);D.rfi.set("value",E.rfi);};function B(M,I,E,F,L,D,H,K){var J={target:I,onEnd:function(){if(D){D();}},props:{}};J.props[E]={ease:H||mstrmojo.ease.sin,start:parseInt(F,10),stop:parseInt(L,10),suffix:"px"};J=mstrmojo.hash.copy(K,J);var G=new mstrmojo.fx.AnimateProp(J);G.play();}mstrmojo.CGEOptions=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.CGEOptions",children:[{scriptClass:"mstrmojo.HBox",alias:"boxes",cellCssClass:"cell",children:[{alias:"left",scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGEOptions-options",children:[{scriptClass:"mstrmojo.ImageCheckBox",alias:"flat",cssClass:"row",label:mstrmojo.desc(7954,"Enable hierarchical display")},{scriptClass:"mstrmojo.ImageCheckBox",alias:"agg",cssClass:"row",label:mstrmojo.desc(7955,"Enable subtotals display")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7956,"Position parent header:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"pf",cssClass:"CGE-parent-header mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7957,"Above child items"),v:true},{n:mstrmojo.desc(7958,"Below child items"),v:false}],bindings:{value:"this.parent.parent.parent.pf"}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7959,"Interaction with report filter:"),cssClass:"row"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",alias:"rfi",cssClass:"CGE-report-filter mstrmojo-FormatEditor-DropDownButton",items:[{n:mstrmojo.desc(7960,"Default (Database Instance level)"),v:-1},{n:mstrmojo.desc(7961,"No interaction"),v:0},{n:mstrmojo.desc(2398,"Apply"),v:1},{n:mstrmojo.desc(7962,"Apply but ignore related elements"),v:2}],bindings:{value:function(){var D=this.parent.parent.parent.rfi,D=D==undefined?"-1":D;return D;}}}]},{scriptClass:"mstrmojo.Box",alias:"preview",cssClass:"mstrmojo-CGEOptions-preview",children:[{scriptClass:"mstrmojo.Label",cssClass:"title",text:mstrmojo.desc(3389,"Preview")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),alias:"g1t"},{scriptClass:"mstrmojo.Box",alias:"e1",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7965,"Item 1-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7966,"Item 1-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7963,"Element Header 1"),cssText:"margin-bottom:10px;",alias:"g1b"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),cssText:"margin-top:10px;",alias:"g2t"},{scriptClass:"mstrmojo.Box",alias:"e2",cssClass:"e",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7967,"Item 2-1")},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7968,"Item 2-2")}],onflatChange:function(){mstrmojo.css.toggleClass(this.domNode,["flat"],this.flat);}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(7964,"Element Header 2"),alias:"g2b"}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",cssText:"margin-top: 10px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(2397,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(2399,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.cancel();}}]}],pf:true,flat:false,agg:"1",rfi:"-1",postBuildRendering:function(){if(this._super){this._super();}A(this);this.preview();},open:function(E,F){var D=E.cgp;this.pp=D;this.set("pf",D.pf);this.set("flat",D.flat);this.set("agg",D.agg);this.set("rfi",D.rfi);C(this);for(var G in F){this[G]=F[G];}this.set("visible",true);if(!this.hasRendered){this.render();}},cancel:function(){var D=this.closeCB;if(D){D[0][D[1]]();}},save:function(){this.pp.pf=this.pf;this.pp.flat=this.flat;this.pp.agg=this.agg;this.pp.rfi=this.rfi;this.cancel();},positionChange:function(D){this.preview(D.value,null);},flatChange:function(D){this.preview(null,!D.value);},preview:function(G,E){G=!!G?String(G)==="true":!(String(this.pf)==="false");E=(E==null?this.flat:E);var F=!!G,D=this.boxes.preview;D.g1t.set("visible",F);D.g1b.set("visible",!F);D.g2t.set("visible",F);D.g2b.set("visible",!F);D.e1.set("flat",E);D.e2.set("flat",E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.TristateCheckBox","mstrmojo.FieldSet","mstrmojo.Table");var A=mstrmojo.hash,B=mstrmojo._FormatDefinition;mstrmojo.AlignmentFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.AlignmentFormatter",cssClass:"mstrmojo-AlignmentFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){A.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"textAlignment",cssClass:"mstrmojo-FormatEditor-textAlignment",legend:mstrmojo.desc(2065),children:[{scriptClass:"mstrmojo.Table",rows:2,cols:2,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3691),slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Horizontal,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Horizontal"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Horizontal=this.value;}},slot:"0,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3692),slot:"1,0"},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.Vertical,bindings:{m:"this.parent.parent.parent.model",value:"this.m.Vertical"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.Vertical=this.value;}},slot:"1,1"}]}]},{scriptClass:"mstrmojo.FieldSet",alias:"textControl",cssClass:"mstrmojo-FormatEditor-textControl",legend:mstrmojo.desc(2884),children:[{alias:"TextWrap",scriptClass:"mstrmojo.TristateCheckBox",text:mstrmojo.desc(2070),checked:false,grayed:false,pr:"TextWrap",bindings:{m:"this.parent.parent.model",checked:function(){return this.m[this.pr]==-1;},grayed:function(){return(typeof this.m[this.pr]=="undefined")||this.m[this.pr]=="pru";}},oncheckedChange:function(C){if(this.m){this.m.set(this.pr,this.checked?-1:0);}}},{scriptClass:"mstrmojo.HBox",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(5159)},{scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:B.TextDirection,bindings:{m:"this.parent.parent.parent.model",value:"this.m.TextDirection"},onvalueChange:function(){if(this.m&&this.value!=null){this.m.TextDirection=this.value;}},slot:"1,1"}]}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Container","mstrmojo._FormatDefinition","mstrmojo.FieldSet","mstrmojo.Table");var D=mstrmojo.hash,B=mstrmojo.num;var C=function(E){return mstrmojo.hash.copy(E,{scriptClass:"mstrmojo.ValidationTextBox",maxLength:6,dtp:4,min:0,max:100,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP},bindings:{m:E.modelBinding,value:function(){var F=this.m[this.pr];return F==null?"":this._PT2UserUnits(F).replace(/([\.,][1-9]{1,})0{1,}$/,"$1").replace(/\.$/,".0").replace(/,$/,",0");}},postCreate:function(){this.markupMethods=mstrmojo.hash.copy({onvalueChange:function(){this.inputNode.value=this.value;}},mstrmojo.hash.copy(this.markupMethods));},onValid:function(){this.m[this.pr]=this._UserUnits2PT(this.value);},_PT2UserUnits:function(F){return B.toLocaleString(B.convertToLocalUnits(B.toString(F),mstrApp.units));},_UserUnits2PT:function(F){return B.toLocaleString(B.toString(B.convertToUSUnits(F,mstrApp.units)));}});};var A=function(E,F){return{scriptClass:"mstrmojo.Label",text:E,slot:F};};mstrmojo.PaddingFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.PaddingFormatter",cssClass:"mstrmojo-PaddingFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"padding",cssClass:"mstrmojo-FormatEditor-padding",legend:mstrmojo.desc(2883),children:[{scriptClass:"mstrmojo.HBox",cssClass:"paddingBox",children:[{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3528),"0,0"),C({pr:"LeftPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(mstrApp.unitsLabel,"0,2"),A(mstrmojo.desc(3526),"1,0"),C({pr:"TopPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(mstrApp.unitsLabel,"1,2")]},{scriptClass:"mstrmojo.Table",rows:2,cols:3,children:[A(mstrmojo.desc(3529),"0,0"),C({pr:"RightPadding",slot:"0,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(mstrApp.unitsLabel,"0,2"),A(mstrmojo.desc(3527),"1,0"),C({pr:"BottomPadding",slot:"1,1",modelBinding:"this.parent.parent.parent.parent.model"}),A(mstrApp.unitsLabel,"1,2")]}]}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox");mstrmojo.TextArea=mstrmojo.declare(mstrmojo.TextBox,null,{scriptClass:"mstrmojo.TextArea",markupString:'<textarea id="{@id}" class="mstrmojo-TextArea {@cssClass}"  style="{@cssText}" title="{@tooltip}" placeholder="{@placeholderText}" rows="{@rows}" cols="{@cols}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keydown,keyup,blur ></textarea>',maxLength:256,markupSlots:{inputNode:function(){return this.domNode;}},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.oncssClassChange=function(){this.domNode.className="mstrmojo-TextArea "+(this.cssClass||"");};},onkeydown:function(D){var C=(this.value&&this.value.length)||0;if(this.maxLength<=C){this.isDeleteKeys=D.e.keyCode===8||D.e.keyCode===46;this.isArrowKeys=D.e.keyCode===37||D.e.keyCode===38||D.e.keyCode===39||D.e.keyCode===40;var B=(this.domNode.selectionEnd!==undefined)?(this.domNode.selectionEnd-this.domNode.selectionStart)>0:document.selection.createRange().text.length>0;if(!this.isDeleteKeys&&!this.isArrowKeys&&!B){if(mstrmojo.dom.isIE7||mstrmojo.dom.isIE8){var A=this.domNode;A.blur();window.setTimeout(function(){A.focus();},1);}mstrmojo.dom.preventDefault(window,D.e);return false;}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate");var A=mstrmojo.css,D=mstrmojo.validation,H=D.TRIGGER,G=D.STATUSCODE,E=mstrmojo.TextBox.prototype.markupMethods;mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,markupMethods:{onvisibleChange:E.onvisibleChange,onvalueChange:E.onvalueChange,onenabledChange:E.onenabledChange,onreadOnlyChange:E.onreadOnlyChange,ontooltipChange:E.ontooltipChange,onvalidationStatusChange:function(){var M=this.validationStatus;if(!M){return ;}var L=this.inputNode,J=(M.code>G.VALID),K=this.constraints.invalidCssClass;A.toggleClass(L,K?K:["mstrmojo-TextBox-ErrValidation"],J);if(J){L.setAttribute("title",M.msg);}else{if(this._original_tooltip!==undefined&&this._original_tooltip!==null){L.setAttribute("title",this._original_tooltip);}}}},postBuildRendering:function I(){if(this._super){this._super();}this._original_tooltip=this.inputNode.title;},prekeyup:function B(J){if(this._super){this._super(J);}var L=(this.constraints.trigger&H.ONKEYUP)>0;if(L){if(this.validationDelay>0){if(this._valDelayTimer){window.clearTimeout(this._valDelayTimer);}if(!this._validateHandler){var K=this;this._validateHandler=function(){K.validate();if(K._valDelayTimer){window.clearTimeout(K._valDelayTimer);delete K._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(this._validateHandler,this.validationDelay);}else{this.validate();}}},preinput:function(J){if(this._super){this._super(J);}var K=(this.constraints.trigger&H.ONKEYUP)>0;if(K){this.validate();}},preblur:function F(J){if(this._super){this._super(J);}var K=(this.constraints.trigger&H.ONBLUR)>0;if(K){this.validate();}},clearValidation:function C(){if(this._super){this._super();}var K=this.inputNode,J=this.constraints.invalidCssClass;A.removeClass(K,J?J:["mstrmojo-TextBox-ErrValidation"]);K.title=this._original_tooltip;}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(F,D){var E=this.items;this.items=D||[];return E!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var E=this.value,D=this.selectedIndex,G=this.items||[],H,F;if(D===undefined||(E!==null&&(D===-1||(D!==-1&&G[D]&&G[D][this.itemIdField]!==E)))){D=mstrmojo.array.find(G,this.itemIdField,E);D=(D>-1)?D:this.defaultSelection;this.selectedIndex=D;}else{if(E===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=H=G[this.selectedIndex];if(H){F=H[this.itemField];}else{F=this.defaultText||"";}this.set("text",F);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function(E){var F=this.value,D=-1;if(F!==null){D=mstrmojo.array.find(this.items,this.itemIdField,F);}if(D>-1){this.selectedItem=this.items[D];this.selectedIndex=D;}},togglePopup:function C(){if(this.popupToBody){var G=mstrmojo.dom.position(this.popupNode,true),F=this.popupRef,D={left:Math.round(G.x)+"px",top:Math.round(G.y)+"px"};if(!F.hasRendered){delete F.slot;D.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(D,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var E=this.popupRef.domNode;if(E){if(this.fixWidth){E.style.width=(this.domNode.offsetWidth-2)+"px";}else{E.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(D){this.togglePopup();},unrender:function B(D){var E=this.popupRef;if(this.popupToBody&&E.hasRendered){E.unrender(false);}if(this._super){this._super(D);}},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var F=this.opener,E=F&&F.popupZIndex,G=F&&F.popupCssClass||"",D=this.domNode;if(E){D.style.zIndex=E;}if(G){mstrmojo.css.addClass(D,[G]);}if(F&&F.fixWidth){mstrmojo.css.addClass(D,["fix-width"]);}if(F&&F.fixHeight){mstrmojo.css.addClass(D,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(F,D,E){return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+(F[E.itemCSS]||"")+'" title="'+F[E.itemField]+'">'+(F[E.itemField]||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var F=this.parent,G=F.visible,D=F.opener,E=this.selectedItem;if(!D||!E||!G){return ;}D.set("value",E[this.itemIdField]);}}]}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.DropDownButton","mstrmojo.Label");mstrmojo.IncFetch=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.IncFetch",markupString:'<div id="{@id}" class="mstrmojo-IncFetch {@cssClass}" style="{@cssText}"><div></div><div class="mstrmojo-clearMe"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},preBuildRendering:function A(){var J=[],F=this.ds,M=this.cp,P=this.np,C=this.ps,E=this.id,G=2;var L=function(){mstrmojo.all[E].set("cp",this.text);};var H={f:1,p:Math.max(M-1,1),n:Math.min(M+1,P),l:P};for(var O in H){J.push(new mstrmojo.Button({iconClass:"arrow "+O,title:F[O],enabled:(H[O]!==M),text:H[O],onclick:L}));}var D=Math.max(Math.min(M-2,P-4),1),I=Math.min(D+4,P);for(var K=D;K<=I;K++){var N;if(K===M){if(I-D===4&&P!==5){N=new mstrmojo.DropDownButton({height:"13px",title:F.a?F.a:"",text:K,direction:"up",popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"goto",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left;",text:F.gt},{scriptClass:"mstrmojo.TextBox",cssText:"float:left;",size:3,maxLength:String(P).length,onEnter:function(){var R=this.inputNode.value,T=this.parent.parent;if(R===""){T.close();return ;}var Q=parseInt(R,10),S=!(isNaN(Q)||Q<1||Q>P);if(S){mstrmojo.all[E].set("cp",Q);T.close();}else{this.setInvalidState(F.v.replace("###",P).replace("##",1).replace(" #",""));}}},{scriptClass:"mstrmojo.Button",cssText:"float:left",iconClass:"apply",title:F.ap?F.ap:"",onclick:function(){this.parent.children[1].onEnter();}}]}],onOpen:function(){mstrmojo.css.addClass(this.parent.domNode,["open"]);var Q=this.children[0].children[1].inputNode;window.setTimeout(function(){Q.focus();},0);},onClose:function(){mstrmojo.css.removeClass(this.parent.domNode,["open"]);this.children[0].children[1].cleanUp();}}});}else{N=new mstrmojo.Button({iconClass:"pg on",text:K});}}else{N=new mstrmojo.Button({iconClass:"pg",text:K,onclick:L});}J.splice(G++,0,N);}J.splice(G++,0,new mstrmojo.Label({text:F.pgs.replace("###",P).replace("##",""),cssText:"float:left;margin:1px 1px 1px 3px;"}));this._iWait=new mstrmojo.WaitIcon({cssText:"margin-top:-2px;"});J.push(this._iWait);this.addChildren(J);return this._super?this._super():true;},_set_cp:function B(D,C){if(parseInt(C,10)!==this.cp){this.raiseEvent({name:"fetch",v:C,iWait:this._iWait});}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListHoriz","mstrmojo.fx");mstrmojo.FishEye=mstrmojo.declare(mstrmojo.ListHoriz,null,{scriptClass:"mstrmojo.FishEye",alias:"fishEyeList",width:16,size:10,step:16,speed:2,cssClass:"mstrmojo-FishEye",cssClassItem:"mstrmojo-dot",itemMarkupFunction:function(B,A,C){return'<div class="mstrmojo-fisheye-item '+C.cssClassItem+'" title="'+B.n+'" idx="'+A+'" did="'+B.did+'">&nbsp;</div>';},onchange:function(){this.scroll2();this.parent.set("selectedIndex",this.selectedIndex);},as:new mstrmojo.fx.AnimateProp(),onitemsChange:function(){if(this._super){this._super();}this.last=this.items.length-1;this.first=Math.max(0,this.last-this.size);if(this.items.length>this.size){this.scroll("left",this.width);}},scroll2:function(){var A=this.selectedIndex-this.last;if(this.selectedIndex==this.first&&this.first>0){this.scroll("right",this.width);}else{if(this.selectedIndex==this.last&&this.last<this.items.length-1){this.scroll("left",this.width);}else{if(this.selectedIndex>this.last){A=this.selectedIndex-this.last;this.scroll("left",this.width*A,A);this.last=Math.min(this.items.length-1,this.last+A);}else{if(this.selectedIndex<this.first){A=this.first-this.selectedIndex;this.scroll("right",this.width*A,A);this.first=Math.max(0,this.first-A);}}}}},scroll:function(C,F,E){var B=this.itemsContainerNode,I=B&&B.style;var D=this.as,H=parseInt(mstrmojo.css.getStyleValue(B,{left:"right",right:"left"}[C]),10),H=isNaN(H)?0:H,A=parseInt(I.left,10)||0,G=A+(C=="left"?-1:1)*(F||(Math.min(this.step,(-1)*H)));D.target=B;D.props={left:{start:A,stop:G,duration:100,interval:10,suffix:"px"}};D.play();E=E===undefined?1:E;this.first+=(C=="left"?1:-1)*E;this.last=this.first+this.size-1;this.parent.set("scrollable",this.last<this.items.length-1);this.parent.set("rightScrollable",this.first>0);return G;},srcId:null,postBuildRendering:function(){if(this._super){this._super();}this.hasRendered=!!this.domNode;var E=this.itemsContainerNode,A=E&&E.firstChild,B=A&&A.rows&&A.rows[0],D=B&&B.cells&&B.cells[0];this.first=0;this.last=this.size-1;var C=this.srcId;if(C&&mstrmojo.all[C]&&mstrmojo.all[C].attachEventListener){mstrmojo.all[C].attachEventListener("change",this.id,function(F){if(this.items[this.items.length-1]!=F.src.selectedItem){this.items.add([mstrmojo.hash.copy(F.src.selectedItem)]);this.set("selectedIndex",this.items.length-1);}if(this.items.length>this.size){this.set("rightScrollable",this.items.length>this.size);this.scroll("left",this.width*(this.selectedIndex-this.last),(this.selectedIndex-this.last));}});}this.itemsContainerNode.style.left=Math.min(0,(this.size-this.items.length+1))*this.width+"px";}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListSelector","mstrmojo.List","mstrmojo.string");mstrmojo.OBList=mstrmojo.declare(mstrmojo.List,null,{scriptClass:"mstrmojo.OBList",cssClass:"mstrmojo-OBList",itemClass:"mstrmojo-OBListItem",iconClass:"mstrmojo-OBListItemIcon",textClass:"mstrmojo-OBListItemText",iconCssPrefx:"mstrmojo-OBIcon_",itemMarkupFunction:function(C,A,B){return'<div class="'+B.itemClass+'"><table cellspacing="0" cellpadding="0"><tbody><tr><td>'+B.getIcon(C)+'</td><td><div class="'+B.textClass+'" title="'+B.getTooltip(C)+'">'+mstrmojo.string.htmlAngles(C.n)+"</div></td></tr></tbody></table></div>";},getIcon:function(E){var D=E[this.itemType],C=E[this.itemSubType],A=" t"+D,B=(D==1||D==3)?" st"+C:"",F=E[this.itemISC]?'class="mstrmojo-ListIcon isc"':"";return'<span class="mstrmojo-ListIcon '+A+B+'"><span '+F+"></span></span>";},getTooltip:function(C){var D="",F=C.anc&&C.anc.items,A=F&&F.length;if(A>0){for(var B=0;B<A-1;B++){D+=F[B].n+" > ";}D+=F[A-1].n;}var E=C.desc,G=128;if(E){D+="\r\n\r\n"+E.substring(0,G)+(E.length>G?"...":"");}return D;},listSelector:mstrmojo.ListSelector,selectionPolicy:"reselect",itemType:"t",itemSubType:"st",itemISC:"isc"});})();(function(){mstrmojo.requiresCls("mstrmojo.List","mstrmojo._IsDial");mstrmojo.Dial=mstrmojo.declare(mstrmojo.List,[mstrmojo._IsDial],{scriptClass:"mstrmojo.Dial",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onhasSelectionChange:function(){mstrmojo.css.toggleClass(this.domNode,["hasSelection"],!!this.hasSelection);},hideIfEmpty:function(){this.onadd();}},hideIfEmpty:false,onadd:function(A){if(this._super){this._super(A);}if(this.hideIfEmpty){if(this.domNode){this.domNode.style.display=(!this.items||this.items.length==0)?"none":"block";}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var A=mstrmojo.dom,B={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(B[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=A.eventTarget(D.hWin,D.e);if(F==this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo._IsDial");mstrmojo.WidgetDial=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._IsDial],{scriptClass:"mstrmojo.WidgetDial"});})();(function(){mstrmojo.requiresCls("mstrmojo.Arr","mstrmojo.Button","mstrmojo.HBox","mstrmojo.FishEye");var A=function(B){return mstrmojo.hash.copy(B,{scriptClass:"mstrmojo.Button",text:"",enabled:false,dir:"left",cssClass:"mstrmojo-icon left",onclick:function(){var D=this.parent.fishEyeList,C=D&&D.scroll(this.dir,D.step);}});};mstrmojo.FishEyeContainer=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.FishEyeContainer",cssClass:"mstrmojo-FishEyeContainer",selectedIndex:-1,setItems:function(B){this.fishEyeList.set("items",B);},setSelectedIndex:function(B){this.fishEyeList.set("selectedIndex",B);},scrollable:false,rightScrollbale:false,children:[A({bindings:{enabled:"!!this.parent.scrollable"}}),new mstrmojo.FishEye({items:mstrmojo.Arr.makeObservable([]),srcId:"obList"}),A({alias:"feScrollRight",cssClass:"mstrmojo-icon right",dir:"right",bindings:{enabled:"!!this.parent.rightScrollable"}})]});mstrmojo.css=mstrmojo.hash.copy({getStyleValue:function(D,E){var B=null;if(D.currentStyle){E=(E=="float"?"styleFloat":E);B=D.currentStyle[E];}if(document.defaultView&&document.defaultView.getComputedStyle){E=(E=="float"?"cssFloat":E);var C=document.defaultView.getComputedStyle(D,null);B=C?C[E]:null;}return B;},setStyleValue:function(D,F,E){var B=function(G){return !!(G&&(typeof (G)=="object")&&(typeof (G.length)=="number"));};if(B(F)&&B(E)){for(var C in F){D.style[F[C]]=E[C];}}else{D.style[F]=E;}}},mstrmojo.css);})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.Container","mstrmojo.Box","mstrmojo.List","mstrmojo.SearchBox2","mstrmojo.WaitIcon","mstrmojo.IncFetch");var A=mstrmojo.array,B=mstrmojo.hash;mstrmojo.ElementsBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ElementsBrowser",cssClass:"mstrmojo-ElementBrowser",rootCached:null,attributeID:null,onOK:null,init:function(C){this._super(C);this.rootCached={};},postBuildRendering:function(){if(this._super){this._super();}var E=this.ebIncFetch,C=this.ebSearchBox,D=this.ebList;E.attachEventListener("fetch",C.id,function(F){E.cp=F.v;E.children=null;E.refresh();this.fetchPage(F.v-1);});C.attachEventListener("ifsChange",E.id,function(F){var G=this.np;B.copy(F.value,this);if(this.np>1){this.children=null;this.refresh();}if(G<=1&&this.np>1||G>1&&this.np<=1||G===0&&this.np>0){this.set("visible",this.np>1);}});C.attachEventListener("itemsChange",D.id,function(F){this.set("items",F.value||[]);});},initBrowser:function(){var C=this.ebSearchBox,D=this.attributeID;C.set("rootID",D);C.clear();C.searchPattern="";if(D&&!this.rootCached[D]){C.set("items",[]);C.blockBegin=1;C.fetch();this.rootCached[D]=true;}else{if(D){C._notifyContentWidget(C.searchCache[D][D]);this.ebList.updateSelections();}}},children:[{alias:"ebSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-ElementsBrowser-SearchBox",taskId:"browseElements",quickSearch:true,getRootID:function(){this.rootID=this.parent.attributeID;}},{alias:"ebList",scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ELementsBrowser-List",itemIdField:"v",allowUnlistedValues:false,itemMarkup:'<div class="mstrmojo-bullet"><div class="mstrmojo-ebIcons ae"><div class="mstrmojo-text">{@n}</div></div></div>',updateSelections:function(){var C=this.parent,D=C.selectedItems;if(D){this.initializing=true;this.clearSelect(false);this.setSelectedItems(D,false);this.initializing=false;}},onitemsChange:function(){this.updateSelections();},onchange:function(N){if(this.initializing){return ;}var I=this.items,J=this.parent,D=J.selectedItems,G,M;for(var H=0,C=N.removed,L=C&&C.length;H<L;H++){G=I[C[H]];M=A.find(D,this.itemIdField,G[this.itemIdField]);if(M>-1){D.splice(M,1);}}for(var F=0,K=N.added,E=K&&K.length;F<E;F++){G=B.clone(I[K[F]]);D.push(G);}},multiSelect:true,selectionPolicy:"toggle"},{alias:"ebIncFetch",scriptClass:"mstrmojo.IncFetch",cssClass:"mstrmojo-ElementsBrowser-IncFetch",height:"20px",np:0,cp:0,ds:{f:mstrmojo.desc(4046),p:mstrmojo.desc(1058),n:mstrmojo.desc(1059),l:mstrmojo.desc(4049),pgs:mstrmojo.desc(5972),gt:mstrmojo.desc(5878),v:mstrmojo.desc(6079)},onvisibleChange:function(C){this.domNode.style.display=C.value?"block":"none";}}]});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasPopup","mstrmojo.string","mstrmojo.Pulldown","mstrmojo.Container");var C=mstrmojo.css;mstrmojo.CustomGroupEl=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.CustomGroupEl",markupString:'<div id="{@id}" class="mstrmojo-onhoverparent mstrmojo-CustomGroupEl {@cssClass}" style="{@cssText}" mstrAttach:mouseover><div class="mstrmojo-CustomGroupEl-title {@cssClass}" mstrAttach:click><img class="mstrmojo-CustomGroupEl-state {@cssClass}" src="../images/1ptrans.gif" align="absmiddle" onclick="var w = mstrmojo.all[\'{@id}\']; w.set(\'state\', !w.state)" /><span class="mstrmojo-text"></span></div><div class="mstrmojo-onhover mstrmojo-abs mstrmojo-topright mstrmojo-CustomGroupEl-tools {@cssClass}"><img class="mstrmojo-dup" src="../images/1ptrans.gif" title="'+mstrmojo.desc(3397,"Duplicate")+'" onclick="mstrmojo.all[\'{@id}\'].dup()" /><img class="mstrmojo-ops" src="../images/1ptrans.gif"onclick="var w = mstrmojo.all[\'{@id}\'].showOps();" title="'+mstrmojo.desc(7932,"Element display options")+'" /><img class="mstrmojo-del" src="../images/1ptrans.gif" onclick="mstrmojo.all[\'{@id}\'].del()" title="'+mstrmojo.desc(7933,"Delete element")+'"/></div><div class="mstrmojo-CustomGroupEl-details {@cssClass}"><div class="mstrmojo-CustomGroupEl-expr {@cssClass}"></div><div class="mstrmojo-CustomGroupEl-expr-tools {@cssClass}"></div></div></div>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},titleNode:function(){return this.domNode.firstChild.lastChild;},detailsNode:function(){return this.domNode.lastChild;},exprNode:function(){return this.domNode.lastChild.firstChild;},exprToolsNode:function(){return this.domNode.lastChild.lastChild;},titlebarNode:function(){return this.domNode.firstChild;}},markupMethods:{ondataChange:function(){var G=this.data,F=G&&G.n;this.titleNode.innerHTML=(F!=null)?mstrmojo.string.encodeHtmlString(F):"";},onstateChange:function(){var F=this.stateNode;F.className="mstrmojo-CustomGroupEl-state "+(this.state?"opened":"closed");this.detailsNode.style.display=this.state?"block":"none";},onselectedChange:function(){C.toggleClass(this.domNode,["selected"],this.selected);},onshowaddChange:function(){this.exprToolsNode.style.display=this.showadd?"block":"none";}},_set_data:function A(H,F){var G=this.data;this.data=F;this.set("expr",F&&F.expr);return G!==F;},optionsRef:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(7934,"Element Options"),contentNodeCssClass:"mstrmojo-balloon",cssClass:"mstrmojo-CGEOptionsEditor",help:"element_options_dialog_box.htm",ce:false,isp:false,onOpen:function(){var F=this.opener.data,G=this.ops.dsplb.dspl;G.set("value",F.ce?2:(F.isp?1:0));},save:function(){var F=this.ops.dsplb.dspl.value,G=this.opener.data;G.ce=(F==2);G.isp=(F==1);this.close();},children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ElementOptions",alias:"ops",children:[{scriptClass:"mstrmojo.HBox",alias:"dsplb",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(168,"Display:"),cssText:"margin: 0 5px;"},{alias:"dspl",scriptClass:"mstrmojo.Pulldown",itemIdField:"v",items:[{n:mstrmojo.desc(7935,"Display element name only (Default)"),v:0},{n:mstrmojo.desc(7936,"Display individual items only"),v:1},{n:mstrmojo.desc(7937,"Display element name and individual items"),v:2}]}]},{scriptClass:"mstrmojo.HBox",alias:"btns",cssText:"float:right;width:150px;margin:5px;",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(118,"Save"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;",onclick:function(){this.parent.parent.parent.save();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin: 5px;",onclick:function(){this.parent.parent.parent.close();}}]}]}]},showOps:function(){var G=this.titlebarNode,F=mstrmojo.dom.position(G,true);this.openPopup("optionsRef",{zIndex:30,left:Math.round(F.x+F.w-300)+"px",top:Math.round(F.y+F.h)+"px"});},init:function E(F){this._super(F);var G=this.data;if(G){delete this.data;this._set_data(null,G);}},del:function B(){var F=this.parent;if(F&&F.remove){F.remove(this.data);}},dup:function D(){var F=this.parent;if(F&&F.duplicate){var K=this.data,L=F.items,N=K.did,M=1,O=new RegExp(K.n+"_(\\d+)");for(var I=0,J=L.length;I<J;I++){var H=L[I],G=H.n&&H.n.match(O);if(G){M=Math.max(M,G[1]);}N=Math.max(N,parseInt(H.did,10));}F.duplicate(this.data,null,{n:mstrmojo.desc(3651,"Copy of ##").replace("##",K.n),did:F.getNextId(),state:1});}},onmouseover:function(F){this.set("showadd",this.state?true:false);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.List","mstrmojo.Button","mstrmojo.color","mstrmojo.Model","mstrmojo.Table","mstrmojo._CanValidate","mstrmojo.ValidationTextBox");var H=mstrmojo.color;function I(U,Q,M,N,T,L,P,S){var R={target:Q,onEnd:function(){if(L){L();}},props:{}};R.props[M]={ease:P,start:parseInt(N,10),stop:parseInt(T,10),suffix:"px"};R=mstrmojo.hash.copy(S,R);var O=new mstrmojo.fx.AnimateProp(R);O.play();}var B=function(P){if(P===null){return ;}var O=mstrmojo.locales.color.userPalette;var L=O.length;if(L==8){O.remove(L-1,1);}O.add([{n:P,v:P}],0);var M="";for(var N=0;N<8;N++){if(O[N]&&O[N].v){M+=O[N].v+",";}}M=M.replace(/,$/,"");mstrmojo.xhr.request("GET",mstrConfig.taskURL,{success:function(Q){},failure:function(Q){mstrmojo.alert(Q.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"setPreference",prefs:"userPalette\u001E"+M});};var J=function(L,M,N){return{scriptClass:"mstrmojo.Label",text:L+":",cssClass:M,slot:N};};var E=function(L,O,N,M){return mstrmojo.hash.copy(M||{},{scriptClass:"mstrmojo.ValidationTextBox",cssDisplay:"block",cssText:"padding: "+(mstrmojo.dom.isIE7?"0":"1px"),bindings:{value:function(){return this.parent.parent.colorModel[N]||"0";}},onValid:function(){this.parent.parent.colorModel.set(N,this.value);},min:0,max:255,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(Q){var R=this.min,P=this.max;Q=parseInt(Q,10);if(Q>=R&&Q<=P){return{code:mstrmojo.validation.STATUSCODE.VALID};}else{return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7883).replace("##",R).replace("###",P)};}}},slot:O});};var G=function(L){return mstrmojo.hash.copy({scriptClass:"mstrmojo.Slider",alias:L+"Slider",cssClass:"sc "+L,isHoriz:true,width:130,cssBkBW:0,items:[],getItemTooltip:function(){return this.items[this.min].n;},postCreate:function(){for(var M=0;M<{r:256,g:256,b:256,s:101,v:101,h:360}[L];M++){this.items.push({n:M,v:M});}},bindings:{selectedIndex:function(){return this.parent.parent.colorModel[L]||"0";}},onselectedIndexChange:function(){this.parent.parent.colorModel.set(L,this.selectedIndex);if(this.domNode){this.min=this.max=this.selectedIndex;this.typeHelper.updateThumb();}},select:function(M){this.set("selectedIndex",M);},slot:"1,3"});};var A=function(M,L,N){return'<div mstridx="'+L+'" class="mstrmojo-ColorPicker-item '+N.itemCssClas+'" style="background-color:'+M.v+';" type="button" title="'+M.n+'"></div>';};var D=mstrmojo.hash.copy({findIndex:function(L,N,M){return M.getAttribute("mstridx")||-1;}},mstrmojo.hash.copy(mstrmojo.ListMapper));var F=function(L,M){return mstrmojo.hash.copy(M,{scriptClass:"mstrmojo.List",cssClass:"mstrmojo-ColorPicker-list",itemMarkupFunction:A,listMapper:D,onchange:null,_onchange:function(){this.set("selectedColor",this.selectedItem.v);L.set("selectedColor",this.selectedItem.v);if((L.isSimple||!L.expanded)&&L.onChange){L.onChange();}},onselectedColorChange:function(){L.colorModel.set("hex",this.selectedColor);}});};mstrmojo.ColorPicker=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ColorPicker",markupString:'<div id={@id} class="mstrmojo-ColorPicker {@cssClass} {@shadowCssClass}" style="height:{@height}; width:{@width};{@cssText}"><div class="mstrmojo-ColorPicker-box"></div></div>',markupSlots:{containerNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onexpandedChange:function(L){this.domNode.className=this.domNode.className.replace(/ expanded/,"")+(this.expanded?" expanded":"");}},useAnimate:true,useShadow:true,isSimple:false,showNoColor:true,showMoreColors:true,showGradients:true,showUserPalette:true,height:"168px",fullHeight:"326px",width:"158px",fullWidth:"366x",expanded:false,onexpandedChange:function(M){var P=this.domNode,L=parseInt(this.height,10),O=parseInt(this.width,10),N=parseInt(this.fullHeight,10),Q=Math.max(parseInt(this.fullWidth,10),P.scrollWidth);if(this.useAnimate!=false){if(M.value){I(true,P,"width",O,Q);I(true,P,"height",L,N);}else{I(true,P,"width",Q,O);I(true,P,"height",N,L);}}else{if(M.value){P.style.width=Q+"px";P.style.height=N+"px";}else{P.style.width=O+"px";P.style.height=L+"px";}}},selectedColor:null,onChange:null,_updateSelection:function(M){var N=(this.isSimple)?this:this.layout.cp;if(M){var L=mstrmojo.array.find(N.basicColors.items,"v",M);if(L>-1){N.basicColors.set("selectedIndex",L);}else{L=mstrmojo.array.find(N.userPalette.items,"v",M);if(L>-1){N.userPalette.set("selectedIndex",L);}}}},visible:false,onvisibleChange:function(){if(this.visible){this.selectedColor=this.selectedColor&&this.selectedColor.replace(/transparent/,"#FFFFFF")||"#FFFFFF";this.colorModel.set("hex",this.selectedColor);this._updateSelection(this.selectedColor);}},onselectedColorChange:function(){this._updateSelection(this.selectedColor);},init:function(L){var M=this;this.colorModel=new mstrmojo.Model({h:0,s:0,v:100,_hsvChange:function(O){this.hex="#"+H.hsv2hex(this.h,this.s,this.v);var N=H.hsv2rgb(this.h,this.s,this.v);this.r=N[0];this.g=N[1];this.b=N[2];M.set("colorModel",mstrmojo.hash.copy(this,{}));},_rgbChange:function(O){this.hex="#"+H.rgb2hex(this.r,this.g,this.b);var N=H.rgb2hsv(this.r,this.g,this.b);this.h=N[0];this.s=N[1];this.v=N[2];M.set("colorModel",mstrmojo.hash.copy(this,{}));},onhChange:function(){this._hsvChange(this.s!==0);},onsChange:function(){this._hsvChange(false);},onvChange:function(){this._hsvChange(false);},onrChange:function(){this._rgbChange();},ongChange:function(){this._rgbChange();},onbChange:function(){this._rgbChange();},onhexChange:function(){var O=H.hex2rgb(this.hex);this.r=O[0];this.g=O[1];this.b=O[2];var N=H.hex2hsv(this.hex);this.h=N[0];this.s=N[1];this.v=N[2];M.set("colorModel",mstrmojo.hash.copy(this,{}));}});this._super(L);},postBuildRendering:function(){if(this._super){this._super();}this.colorModel.set("hex",this.selectedColor||"#FFFFFF");this.colorModel.set("s",50);},preBuildRendering:function(){if(this._super){this._super();}var O=this.isSimple?100:124;if(this.showNoColor){O+=20;}if(this.showUserPalette){O+=25;}this.height=O+"px";if(this.isSimple){this.width="155px";}this.shadowCssClass=this.useShadow?"shadow":"";var P=this,L={scriptClass:"mstrmojo.Button",cssClass:"nocolor",text:mstrmojo.desc(959,"Default"),visible:this.showNoColor,onclick:function(){P.set("selectedColor","transparent");if(P.onChange){P.onChange();}}},N=F(this,{alias:"basicColors",items:mstrmojo.locales.color.colors,onchange:function(){if(this.selectedIndex>-1){this.parent.userPalette.set("selectedIndex",-1);this._onchange();}}}),Q=F(this,{alias:"userPalette",cssClass:"mstrmojo-ColorPicker-list userPalette",makeObservable:true,visible:this.showUserPalette,bindings:{items:function(){return P.showUserPalette!=false?mstrmojo.locales.color.userPalette:[];}},onchange:function(){if(P.visible){if(this.selectedIndex>-1){this.parent.basicColors.set("selectedIndex",-1);this._onchange();}}},onadd:function(){this.refresh();if(P.visible){this.parent.basicColors.set("selectedIndex",-1);this.set("selectedIndex",0);}}});if(this.isSimple){if(this.showNoColor){this.addChildren(L,0);}this.addChildren(N);this.addChildren(Q);return ;}var M={scriptClass:"mstrmojo.Table",alias:"layout",rows:2,cols:5,layout:[{cells:[{colSpan:2},{colSpan:2},{}]},{cells:[{},{},{},{},{}]}],children:[{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-ColorPicker-palette shadow",alias:"cp",children:[L,N,Q],slot:"0,0"},{scriptClass:"mstrmojo.Container",cssClass:"sbSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousemove,mousedown,mouseup,mouseout><div class="sbThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},hex:null,bindings:{hex:"this.parent.parent.colorModel.hex",bgColor:function(){return"#"+H.hsv2hex(this.parent.parent.colorModel.h,100,100);}},onhexChange:function(){if(this.domNode){this.thumbNode.style.left=this.parent.parent.colorModel.s/100*160-3+"px";this.thumbNode.style.top=(1-this.parent.parent.colorModel.v/100)*160-3+"px";}},onmousedown:function(R){var T=this.domNode.getBoundingClientRect();this.mouseX0=T.left;this.mouseY0=T.top;this.onmousemove=this._update;var S=this;this.onmouseup=function(U){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",this.onmouseup);},onclick:function(R){this._update(R);},_update:function(R){var U={x:R.e.clientX,y:R.e.clientY},T=Math.min(Math.max(0,U.x-this.mouseX0),160),S=Math.min(Math.max(0,U.y-this.mouseY0),160);this.thumbNode.style.left=(T-3)+"px";this.thumbNode.style.top=(S-3)+"px";this.parent.parent.colorModel.s=Math.floor(100*T/160);this.parent.parent.colorModel.set("v",Math.floor(100*(1-S/160)));},slot:"0,1"},{scriptClass:"mstrmojo.Container",cssClass:"hueSlider",markupString:'<div class="{@cssClass}" style="position:relative; {@cssText}" mstrAttach:click,mouseover,mousedown,mouseup,mousemove,mouseout><div class="hThumb"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},thumbNode:function(){return this.domNode.firstChild;}},bindings:{hex:"this.parent.parent.colorModel.hex",h:"this.parent.parent.colorModel.h"},onhexChange:function(){this._moveThumb();},onhChange:function(){this._moveThumb();},_moveThumb:function(){if(this.thumbNode){this.thumbNode.style.top=(1-this.parent.parent.colorModel.h/360)*160-1+"px";}},onmousedown:function(R){this.mouseY0=this.domNode.getBoundingClientRect().top;this.onmousemove=this._update;var S=this;this.onmouseup=function(T){S.onmousemove=null;mstrmojo.dom.detachEvent(document.body,"mouseup",S.onmouseup);};mstrmojo.dom.attachEvent(document.body,"mouseup",S.onmouseup);},onclick:function(R){this._update(R);},_update:function(R){var T={x:R.e.clientX,y:R.e.clientY},S=Math.min(Math.max(0,T.y-this.mouseY0),160);this.thumbNode.style.top=(S-1)+"px";this.parent.parent.colorModel.set("h",Math.max(0,Math.floor(360*(1-S/160))));},slot:"0,2"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-ColorPicker-preview",markupMethods:{onbgColorChange:function(){this.domNode.style.backgroundColor=this.bgColor;}},bindings:{bgColor:"this.parent.parent.colorModel.hex"},onclick:function(){if(P.showUserPalette){B(this.bgColor);}},slot:"1,0"},J(mstrmojo.desc(7848),"Hex","1,0"),E(mstrmojo.desc(7848),"1,0","hex",{cssClass:"hex",cssDisplay:"block",inputNodeCssClass:"hex",dtp:25,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,validator:function(R){if(/^#[0-9a-fA-F]{6}$/.test(R)){return{code:mstrmojo.validation.STATUSCODE.VALID};}else{return{code:mstrmojo.validation.STATUSCODE.INVALID,msg:mstrmojo.desc(7882)};}}}}),J(mstrmojo.desc(3604),"Red","1,1"),J(mstrmojo.desc(3606),"Green","1,1"),J(mstrmojo.desc(3608),"Blue","1,1"),J(mstrmojo.desc(3605),"Hue","1,1"),J(mstrmojo.desc(3607),"Saturation","1,1"),J(mstrmojo.desc(3609),"Brightness","1,1"),E(mstrmojo.desc(3604),"1,2","r"),G("r"),E(mstrmojo.desc(3606),"1,2","g"),G("g"),E(mstrmojo.desc(3608),"1,2","b"),G("b"),E(mstrmojo.desc(3695),"1,2","h",{cssClass:"h",max:360}),G("h"),E(mstrmojo.desc(3607),"1,2","s",{max:100}),G("s"),E(mstrmojo.desc(3609),"1,2","v",{max:100}),G("v")]};if(this.showMoreColors){M.children.push({scriptClass:"mstrmojo.Button",cssClass:"more",alias:"more",title:mstrmojo.desc(7833),onclick:function(){var R=this.parent.parent;R.set("expanded",!R.expanded);this.domNode.setAttribute("title",R.expanded?mstrmojo.desc(7834):mstrmojo.desc(7833));this.domNode.className=R.expanded?"less":"more";},slot:"0,0"});}if(this.showGradients){M.children.push({scriptClass:"mstrmojo.Button",alias:"showGradients",cssClass:"ge",text:mstrmojo.desc(4786,"Gradients..."),title:mstrmojo.desc(7970,"Open Graident Editor"),onclick:function(){var R=this.parent.parent;R.set("show",false);R.parent.ge.set("show",true);},slot:"0,0"});}this.addChildren(M);this.addChildren({scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-ColorPicker-buttonBar",children:[new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),function(){var R=this.parent.parent;if(!R.useAnimate){R.set("visible",false);}var S=R.colorModel.hex;if(R.showUserPalette){B(S);}R.set("selectedColor",S);if(R.onOK){R.onOK();}},"#999",{alias:"ok",cssClass:"mstrmojo-Editor-button"}),new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(221),function(){var R=this.parent.parent;if(!R.useAnimate){R.set("visible",false);}if(R.onCancel){R.onCancel();}},"#999",{alias:"cancel",cssClass:"mstrmojo-Editor-button"})]});}});var K={scriptClass:"mstrmojo.Popup",slot:"popupNode",contentNodeCssClass:"mstrmojo-ColorPicker-popup-content",autoCloses:false,locksHover:true,onOpen:function(){this.colorPicker.set("selectedColor",this.opener.fillColor);var M=this;var L=function(){M.lastOpener=M.lastOpener||M.opener;if(M.opener!==M.lastOpener){M.opener.popupNode.appendChild(M.lastOpener.popupRef.domNode);M.lastOpener=M.opener;}M.colorPicker.set("show",true);};window.setTimeout(function(){L();},100);},onClose:function(){this.colorPicker.set("show",false);if(this.ge){this.ge.set("show",false);}},postCreate:function(){this.markupMethods=mstrmojo.hash.copy(this.markupMethods);this.markupMethods.onvisibleChange=null;},preBuildRendering:function(){if(this.showGradients||this.colorPicker.showGradients){this.addChildren(this.gradientRef);}},gradientRef:{scriptClass:"mstrmojo.GradientEditor",alias:"ge",cssText:"height:0; display:none; position:absolute; z-index: 4;",left:"0px",top:"0px",visible:false,showTitle:false,height:240,_resizeHandler:function(){},onOK:function(){this.parent.opener.set("gradient",this.gradient);this.parent.opener.set("gradientCss",this.gradient.css);this.set("show",false);},onCancel:function(){this.set("show",false);},onshowChange:function(N){var M=N.value,L=parseInt(this.height,10);var Q=this.domNode.firstChild;if(M){this.set("model",this.parent.opener.gradient);Q.style.display="block";}if(this.useAnimate!=false){var R=M?0:L,O=L-R,P=this;Q.style.overflow="hidden";if(M){Q.style.display="block";}I(N.value,Q,"height",R,O,function(){if(!M){Q.style.display="none";var S=P.parent.opener;if(S){S.closePopup();}}else{Q.style.overflow="visible";}});}else{Q.style.height=M?L+"px":0;Q.style.display=M?"block":"none";}},postCreate:function(){this.bindings={useAnimate:"this.parent.opener.useAnimate"};}},children:[{scriptClass:"mstrmojo.ColorPicker",alias:"colorPicker",onChange:function(){if(!this.parent.opener){return ;}this.parent.opener.set("fillColor",this.selectedColor);this.set("show",false);this.parent.opener.closePopup();},onOK:function(){this.onApply();this._closePopup();},onApply:function(){this.parent.opener.set("fillColor",this.selectedColor);},onCancel:function(){this._closePopup();},_closePopup:function(){this.set("show",false);if(!this.showGradients||!this.parent.ge||this.parent.ge&&!this.parent.ge.show){this.parent.opener.closePopup();}},show:false,onEnd:function(){this.set("visible",this.show);},onshowChange:function(){var L=parseInt(this.expanded?this.fullHeight:this.height,10);if(this.useAnimate!=false){var P=this.show?0:L,N=L-P,O=this,M=(!this.show?function(){O.onEnd();}:null);if(this.show){this.set("visible",true);}I(this.show,this.domNode,"height",P,N,M);}else{this.set("visible",this.show);this.domNode.style.height=L+"px";}},postCreate:function(){this.bindings={showUserPalette:function(){return this.parent.opener?this.parent.opener.showUserPalette:this.showUserPalette;},useAnimate:function(){return this.parent.opener?this.parent.opener.useAnimate:this.useAnimate;},isSimple:function(){return this.parent.opener?this.parent.opener.isSimple:this.isSimple;},showGradients:function(){return this.parent.opener?this.parent.opener.showGradients:this.showGradients;},showNoColor:function(){return this.parent.opener?this.parent.opener.showNoColor:this.showNoColor;}};}}]};mstrmojo.colorPickerPopupRef=mstrmojo.insert(K);mstrmojo.simpleColorPickerPopupRef=mstrmojo.insert(mstrmojo.hash.copy({isSimple:true},mstrmojo.hash.copy(K)));mstrmojo.gradientColorPickerPopupRef=mstrmojo.insert(mstrmojo.hash.copy({showGradients:true},mstrmojo.hash.copy(K)));mstrmojo.ColorPicker.createDropDown=function C(N,M){N=N||{};var L=mstrmojo.colorPickerPopupRef;if(M){if(M.isSimple){L=mstrmojo.simpleColorPickerPopupRef;N.isSimple=M.isSimple;}else{if(M.showGradients){L=mstrmojo.gradientColorPickerPopupRef;N.showGradients=M.showGradients;}}}else{if(N){if(N.isSimple){L=mstrmojo.simpleColorPickerPopupRef;}else{if(N.showGradients){L=mstrmojo.gradientColorPickerPopupRef;}}}}return mstrmojo.hash.copy(N,{scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-ColorPicker-DropDownButton",markupMethods:{onfillColorChange:function(){if(this.boxNode&&this.fillColor){this.boxNode.style.cssText="background-color: "+this.fillColor;this.gradient=null;this.gradientCss=null;}},ongradientCssChange:function(){if(this.boxNode&&this.gradientCss){this.boxNode.style.cssText=this.gradientCss;this.fillColor=null;}}},popupRef:L,showUserPalette:true,useAnimate:true,showGradients:false,isSimple:false});};})();(function(){mstrmojo.requiresCls("mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.Popup","mstrmojo._HasPopup","mstrmojo.locales","mstrmojo.string");var A=mstrmojo.ValidationTextBox.prototype.markupMethods,B=mstrmojo.string;mstrmojo.DateTextBox=mstrmojo.declare(mstrmojo.ValidationTextBox,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DateTextBox",calendarToBody:false,calendarZIndex:100,changeValueOnOK:false,isList:false,dtp:14,autoFormat:true,markupString:'<div id="{@id}" class="mstrmojo-DateTextBox {@cssClass}" style="{@cssText}"><input class="mstrmojo-DateTextBox-input" type="text" title="{@tooltip}"value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur /><div class="mstrmojo-DateTextBox-icon" mstrAttach:click> </div><div class="mstrmojo-DateTextBox-popup"></div></div>',markupSlots:{inputNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.childNodes[1];},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";},onwidthChange:function(){if(this.width){this.inputNode.style.width=(this.width-20)+"px";this.iconNode.style.left=(this.width-18)+"px";this.domNode.style.width=this.width+"px";}},onvalueChange:A.onvalueChange,onenabledChange:A.onenabledChange,onvalidationStatusChange:A.onvalidationStatusChange},calConfig:null,calendar:{scriptClass:"mstrmojo.Popup",cssClass:"mstrmojo-DateTextBox-calendar",locksHover:true,slot:"popupNode",onOpen:function(){var F=this.opener,E=F&&F.calendarZIndex,G=this.cal,C=F&&F.calConfig;if(E){this.domNode.style.zIndex=E;}for(var D in C){G.set(D,C[D]);}},children:[{scriptClass:"mstrmojo.Calendar",alias:"cal",forceNonEmptySelection:true,bindings:{dtp:"this.parent.opener.dtp",value:"this.parent.opener.value",changeValueOnOK:function(){var D=this.parent.opener.dtp,C=this.parent.opener.changeValueOnOK;return D===15||D===16||C;}},onValueUpdate:function(D){var F=this.parent&&this.parent.opener;if(F){var E=F.value,C=window.mstrConfig&&window.mstrConfig.listSep||";";if(F.isList&&!B.isEmpty(E)){F.set("value",F.value+C+this.value);}else{F.set("value",this.value);}F.closePopup();}}}]},onclick:function(C){var D=this._lastOpened,E=this._calendarConfig;if(!E){E={};if(this.calendarToBody){delete this.calendar.slot;E.placeholder=document.body.appendChild(document.createElement("div"));E.nudge=function(){var H=this.opener;if(H){var G=mstrmojo.dom.position(H.popupNode,true),F=this.domNode.style;F.left=G.x+"px";F.top=G.y+"px";}};}this._calendarConfig=E;}if(D&&D.visible){this.closePopup();}else{this.openPopup("calendar",E);}},unrender:function(){this._super();if(this.calendar.hasRendered){this.calendar.unrender();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable");var D=mstrmojo.dom;mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mousedown>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div style="position:absolute;width:100%;"><table cellspacing="0" cellpadding="0" class="mstrmojo-Editor-titlebar"><tr><td class="mstrmojo-Editor-titleCell"><div class="mstrmojo-Editor-title"></div></td><td><a href="#" target="_new" class="mstrmojo-Editor-help"><img class="mstrmojo-Editor-help" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1143,"help")+'"></img></a></td><td><div class="mstrmojo-Editor-close" title="'+mstrmojo.desc(2102,"Close")+'"></div></td></tr></table></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},titlebarNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[0].firstChild:null;},helpNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[1].firstChild:null;},closeNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[2].firstChild:null;},containerNode:function(){return this.domNode.firstChild.childNodes[2];},buttonNode:function(){return this.domNode.firstChild.childNodes[3];},curtainNode:function(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var G=this.zIndex;this.editorNode.style.zIndex=G;this.curtainNode.style.zIndex=G-1;},onvisibleChange:function(J){if(J){return ;}var G=this.visible,H="closeEffect",I="none";if(G){H="openEffect";I="block";}if(this[H]){this.playEffect(H);}else{this.editorNode.style.display=I;if(this.modal){this.curtainNode.style.display=I;}}},onhelpChange:function(){if(this.showTitle){if(this.help===null){this.helpNode.style.display="none";}this.helpNode.href=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm")+"#"+(this.help||"");}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";}},preBuildRendering:function C(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function E(){return this.titlebarNode;},getMovingTarget:function F(){return this.editorNode;},onPreClose:function(){return true;},premousedown:function B(G){var H=D.eventTarget(G.hWin,G.e);if(H===this.closeNode){if(this.onPreClose()){this.close();}}},_set_visible:function A(L,I){var H=(this[L]!==I);if(H){this[L]=I;var K=this._close_handler;if(I){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var J=this;K=this._close_handler=K||function(M){var N=D.eventTarget(self,M);if(N&&N.parentNode&&!D.contains(J.editorNode,N,true,document.body)){J.close();}};D.attachEvent(document.body,"mousedown",K);}}else{var G=this._curtain_handler;if(G){D.detachEvent(window,"resize",G);}if(K){D.detachEvent(document.body,"mousedown",K);}}}return H;}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(G){G=Math.round(G);return["rgb(",G,",",G,",",G,")"].join("");}}},preStart:function(){var H=this.target,G=this.widget;G.editorNode.style.display="block";if(!G.modal){return false;}H.style.display="block";mstrmojo.css.setOpacity(H,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var G=this.widget;G.editorNode.style.display="none";return !!G.modal;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo._FormatDefinition","mstrmojo.Table","mstrmojo._HasLayout","mstrmojo.color","mstrmojo.ColorPicker");var D=mstrmojo.hash,C=mstrmojo.array,F=mstrmojo._FormatDefinition,B=mstrmojo.color;var A=function(G){var H={scriptClass:"mstrmojo.List",cssClass:"mstrmojo-FormatEditor-fontFamily",itemCssClass:"mstrmojo-FormatEditor-bullet",selectedIndex:0,itemIdField:"v",itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>'};return D.copy(G,H);};var E=function(I){var H=I.alias,G=I.label,J=I.pr;return{alias:H,scriptClass:"mstrmojo.TristateCheckBox",text:G,checked:false,grayed:false,bindings:{m:I.modelBinding,checked:function(){return this.m[J]==-1;},grayed:function(){return(typeof this.m[J]=="undefined")||this.m[J]=="pru";}},oncheckedChange:function(K){if(this.m){this.m.set(J,this.checked?-1:0);}}};};mstrmojo.FontFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FontFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){D.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.Table",layout:[{cells:[{},{},{}]},{cells:[{},{colSpan:2}]}],children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2172),slot:"0,0"},A({items:F.Families,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text" style="font-family:{@n}">{@n}</div></div>',pr:"Name",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Name,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Name",this.selectedItem.v);}},slot:"0,0"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3059),slot:"0,1"},A({items:F.Styles,cssClass:"mstrmojo-FormatEditor-fontStyle",bindings:{selectedIndex:function(){var K=this.parent.parent.model;if(K){var I=K.Bold||"",H=K.Italic||"",J=I==""&&H==""?"":I+","+H,G=mstrmojo.array.find(this.items,this.itemIdField,J);G=G==-1?mstrmojo.array.find(this.items,"v2",J):G;return(G==-1?0:G);}}},onchange:function(){var I=this.parent.parent.model;if(I&&this.selectedItem){var H=this.selectedItem.v.split(","),G=italic="pru";if(H[0]!="pru"){G=H[0]=="-1"?"-1":"0";italic=H[1]=="-1"?"-1":"0";}I.set("Bold",G);I.set("Italic",italic);}},slot:"0,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2178),slot:"0,2"},A({items:F.Sizes,cssClass:"mstrmojo-FormatEditor-fontSize",bindings:{selectedIndex:function(){var H=this.parent.parent.model;if(H){var I=H.Size,G=C.find(this.items,this.itemIdField,I);return G==-1?0:G;}}},onchange:function(){var G=this.parent.parent.model;if(G){G.set("Size",this.selectedItem.v);}},slot:"0,2"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3060),slot:"1,0"},{scriptClass:"mstrmojo.VBox",cssClass:"mstrmojo-FormatEditor-fontEffect",postCreate:function(){this.addChildren(E({alias:"Underline",label:mstrmojo.desc(3061),pr:"Underline",modelBinding:"this.parent.parent.parent.model"}));this.addChildren(E({alias:"Strikeout",label:mstrmojo.desc(3062),pr:"Strikeout",modelBinding:"this.parent.parent.parent.model"}));},slot:"1,0"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3063),slot:"1,1"},mstrmojo.ColorPicker.createDropDown({pr:"Color",bindings:{fillColor:function(){var G=this.parent.parent.model;if(G){var H=G[this.pr];if(typeof (H)!="undefined"&&/^\d{1,8}$/.test(H)){return B.decodeColor(H);}}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.model){this.parent.parent.model.set(this.pr,this.fillColor=="transparent"?"pru":B.encodeColor(this.fillColor));}},slot:"1,1"}),{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2036),slot:"1,1"},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-FormatEditor-fontPreview",text:mstrmojo.desc(2037),bindings:{m:"this.parent.parent.model",cssText:function(){var H=this.m.Color,J=this.m.Size,K=this.m.Name,I=this.m.Bold,G=this.m.Italic,M=this.m.Underline,L=this.m.Strikeout;H=/^\d{1,8}$/.test(H)?B.decodeColor(H):B.decodeColor(F.DefaultFormat.FormattingFont.Color);J=J||F.DefaultFormat.FormattingFont.Size;K=K||F.DefaultFormat.FormattingFont.Name;I=I=="-1"?"bold":"normal";G=G=="-1"?"italic":"normal";M=parseInt(M)==-1;L=parseInt(L)==-1;return";font-family:"+K+";font-style:"+G+";font-weight:"+I+";font-size:"+J+"pt;color:"+H+";text-decoration:"+(M?" underline ":"")+(L?" line-through ":"");}},slot:"1,1"}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo._FormatDefinition","mstrmojo.Label","mstrmojo.Pulldown","mstrmojo.ColorPicker");var C=mstrmojo.hash,A=mstrmojo.color,D=mstrmojo._FormatDefinition;var B=function(F,I,E){var H=["Left","Right","Top","Bottom"];for(var G=0;G<3;G++){F[H[G]+I]=E;}F.set(H[3]+I,E);};mstrmojo.BorderFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.BorderFormatter",cssClass:"mstrmojo-BorderFormatter",markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){C.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"borders",cssClass:"mstrmojo-FormatEditor-border",legend:mstrmojo.desc(2886),children:[{scriptClass:"mstrmojo.Table",alias:"borderTable",cssText:"width:100%;",rows:1,cols:2,children:[{scriptClass:"mstrmojo.List",alias:"borderTypes",selectedIndex:0,cssClass:"borderTypes",items:[{n:'<img border="0" align="absmiddle" src="../images/borders_none.gif" alt=""> '+mstrmojo.desc(2057),v:1},{n:'<img border="0" align="absmiddle" src="../images/borders_all.gif" alt=""> '+mstrmojo.desc(2058),v:2},{n:'<img border="0" align="absmiddle" src="../images/borders_custom.gif" alt=""> '+mstrmojo.desc(2056),v:3}],slot:"0,0",bindings:{m:"this.parent.parent.parent.model",selectedIndex:function(){var E=this.m;if(C.isEmpty(E)){return 0;}if(E.LeftStyle==0&&E.TopStyle==0&&E.RightStyle==0&&E.BottomStyle==0){return 0;}else{if(E.LeftStyle==E.TopStyle&&E.LeftStyle==E.RightStyle&&E.LeftStyle==E.BottomStyle){return 1;}}return 2;}},onchange:function(E){if(this.m){var G=this.parent.borderAndColor;if(!G){return ;}if(this.selectedIndex===0){var H=["Left","Right","Top","Bottom"];for(var F=0;F<4;F++){this.m.set(H[F]+"Style","0");this.m.set(H[F]+"Color","0");}}}}},{scriptClass:"mstrmojo.Container",alias:"borderAndColor",markupString:'<div class="borderStyles"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.Container",alias:"allBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==1"},children:[{scriptClass:"mstrmojo.Table",alias:"allBorders",rows:1,cols:3,onshowChange:function(){if(this.show){B(this.m,"Style",this.styles.value);B(this.m,"Color",A.encodeColor(this.colors.fillColor));}},bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var F=["Left","Right","Top","Bottom"];var E=[{scriptClass:"mstrmojo.Pulldown",alias:"styles",items:D.BorderStyles,itemIdField:"v",bindings:{m:"this.parent.m",value:function(){var I=this.m.LeftStyle,K=this.m.RightStyle,J=this.m.TopStyle,H=this.m.BottomStyle;var G=0;if(I==K&&K==H&&H==J){G=mstrmojo.array.find(D.BorderStyles,"v",I);}G=G==-1?0:G;return this.items[G][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){B(this.m,"Style",this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({alias:"colors",bindings:{m:"this.parent.m",fillColor:function(){var H=this.m.LeftColor,K=this.m.RightColor,J=this.m.TopColor,G=this.m.BottomColor;if(H==K&&K==G&&G==J){var I=H;}if(typeof (I)!="undefined"&&/^\d{1,8}$/.test(I)){return A.decodeColor(I);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){B(this.m,"Color",this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"})];this.addChildren(E);}}]},{scriptClass:"mstrmojo.Container",alias:"customBordersContainer",markupString:'<div class="mstrmojo-FormatEditor-ColorLine-borders"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},bindings:{visible:"this.parent.parent.borderTypes.selectedIndex==2"},children:[{scriptClass:"mstrmojo.Table",alias:"customBorders",rows:1,cols:3,bindings:{m:"this.parent.parent.parent.parent.parent.model"},postCreate:function(){var H=["Left","Right","Top","Bottom"];var G=[];for(var F=0;F<H.length;F++){var E=H[F];G.push({scriptClass:"mstrmojo.Label",text:mstrmojo.desc({Left:3528,Right:3529,Top:3526,Bottom:3527}[E]),alias:E,slot:"0,0"},{scriptClass:"mstrmojo.Pulldown",items:D.BorderStyles,itemIdField:"v",pr:E+"Style",bindings:{m:"this.parent.m",value:function(){var K=this.m.LeftStyle,M=this.m.RightStyle,L=this.m.TopStyle,J=this.m.BottomStyle;var I=mstrmojo.array.find(D.BorderStyles,"v",this.m[this.pr]);I=I==-1?0:I;return this.items[I][this.itemIdField];}},onvalueChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.value);}},slot:"0,1"},mstrmojo.ColorPicker.createDropDown({cssClassx:"mstrmojo-FormatEditor-colorPicker",alias:E+"Color",pr:E+"Color",bindings:{m:"this.parent.m",fillColor:function(){var J=this.m.LeftColor,M=this.m.RightColor,L=this.m.TopColor,I=this.m.BottomColor;var K=this.m[this.pr];if(typeof (K)!="undefined"&&/^\d{1,8}$/.test(K)){return A.decodeColor(K);}return"transparent";}},onfillColorChange:function(){if(this.parent.parent.visible){this.m.set(this.pr,this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));}},slot:"0,2"}));}this.addChildren(G);}}]}],slot:"0,1"}]},{scriptClass:"mstrmojo.Label",cssClass:"borderPreview",text:mstrmojo.desc(7941),bindings:{m:"this.parent.parent.model",cssText:function(){var G={0:"None",3:"Dashed",4:"Dotted",6:"Double",7:"Solid"},E={1:"Thin",5:"Thick",6:"medium"};var F=this.parent.borderTable.borderTypes.selectedIndex;return";border-left-style: "+(G[this.m.LeftStyle]||"solid")+";border-right-style: "+(G[this.m.RightStyle]||"solid")+";border-top-style: "+(G[this.m.TopStyle]||"solid")+";border-bottom-style: "+(G[this.m.BottomStyle]||"solid")+";border-left-color: "+A.decodeColor(this.m.LeftColor||"0")+";border-right-color: "+A.decodeColor(this.m.RightColor||"0")+";border-top-color: "+A.decodeColor(this.m.TopColor||"0")+";border-bottom-color: "+A.decodeColor(this.m.BottomColor||"0")+";border-left-width: "+(E[this.m.LeftStyle]||"thin")+";border-right-width: "+(E[this.m.RightStyle]||"thin")+";border-top-width: "+(E[this.m.TopStyle]||"thin")+";border-bottom-width: "+(E[this.m.BottomStyle]||"thin");}}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.FieldSet","mstrmojo.Label","mstrmojo.ColorPicker");var B=mstrmojo.hash,A=mstrmojo.color;mstrmojo.FillFormatter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.FillFormatter",cssClass:"mstrmojo-FillFormatter",isChart:false,markupString:'<div id={@id} class="{@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},postCreate:function(){this.onmodelChange();},onmodelChange:function(){if(this.model&&!this.model.scriptClass){B.make(this.model,mstrmojo.Obj);}},children:[{scriptClass:"mstrmojo.FieldSet",alias:"fill",cssClass:"mstrmojo-FormatEditor-fill",legend:mstrmojo.desc(2885,"Fill"),bindings:{legend:"this.parent.isChart ? mstrmojo.desc(3902, 'Series Colors') : mstrmojo.desc(2885, 'Fill')"},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2060),cssClass:"label"},mstrmojo.ColorPicker.createDropDown({bindings:{m:"this.parent.parent.model",fillStyle:function(){var H=this.m,J=H.FillStyle;if(J==2){var E=parseInt(H.GradientAngle,10),I=E===0?1:0,D=A.decodeColor(H.FillColor),K=A.decodeColor(H.GradientColor),C=parseInt(H["Gradient"+(E===0?"X":"Y")+"Offset"],10)==100?1:0,G=(C!=1)?mstrmojo.css.buildGradient(I,D,K):mstrmojo.css.buildGradient(I,K,D);this.set("gradientCss",G.n+":"+G.v);this._updateGradientInfo();}else{var F=this.m.FillColor;if(typeof (F)!="undefined"&&/^\d{1,8}$/.test(F)){F=A.decodeColor(F);}else{F="transparent";}this.set("fillColor",F);}return J||0;}},_updateGradientInfo:function(){var C=this.m;this.gradient=mstrmojo.hash.copy({FillColor:A.decodeColor(C.FillColor),GradientColor:A.decodeColor(C.GradientColor)},B.copy(C));},onfillColorChange:function(){this.m.FillColor=(this.fillColor=="transparent"?"pru":A.encodeColor(this.fillColor));this.m.FillStyle=0;},ongradientChange:function(C){var F=["FillStyle","FillColor","GradientColor","GradientXOffset","GradientYOffset","GradientAngle"];for(var E=0;E<F.length;E++){var D=C.value[F[E]];this.m[F[E]]=/Color$/.test(F[E])?A.encodeColor(D):D;}this.m.FillStyle=2;}},{showGradients:true})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.TreeNode","mstrmojo._IsExprNode","mstrmojo.array","mstrmojo.dom","mstrmojo.css","mstrmojo.expr");var E=mstrmojo.array,K=mstrmojo.expr,N=mstrmojo.dom,A=mstrmojo.css;function I(P,O){var R=P.data,Q=R&&R.nds;if(!Q){return null;}if(O){O.sort(E.numSorter);}else{O=P.sortSelectedIndices();}if(!O.length){return null;}return{idxs:O,nds:E.get(Q,O)};}function L(Q){var P=Q.ctxtBuilder,S=P&&P.itemWidgets,O=S&&S[0],R=O&&O.data;if(R&&R.not&&(S.length>1)){R.not=false;O.paint();}}mstrmojo.AndOrNode=mstrmojo.declare(mstrmojo.TreeNode,[mstrmojo._IsExprNode],{scriptClass:"mstrmojo.AndOrNode",data:null,markupString:'<div id="{@id}" class="mstrmojo-andor mstrmojo-AndOrNode {@cssClass}"  style="position:relative;{@cssText}" mstrAttach:mousedown><div class="mstrmojo-onhoverparent mstrmojo-andor-prefix" mstrAttach:click><span class="mstrmojo-textset mstrmojo-andor-prefix-text"></span><span class="mstrmojo-onhover-in mstrmojo-andor-tools {@cssClass}"><img class="mstrmojo-outdent disable" src="../images/1ptrans.gif" title="Ungroup Conditions" /><img class="mstrmojo-outdent" src="../images/1ptrans.gif" title="Ungroup Conditions" onclick="mstrmojo.all[\'{@id}\'].out()" /><img class="mstrmojo-indent disable" src="../images/1ptrans.gif" title="Group Conditions" /><img class="mstrmojo-indent" src="../images/1ptrans.gif" title="Group Conditions" onclick="mstrmojo.all[\'{@id}\'].ind()" /></span></div><div class="mstrmojo-andor-top"></div><div class="mstrmojo-andor-contentsWrapper" style="position:relative"><div class="mstrmojo-andor-contents" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue mstrmojo-AndOrNode-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner mstrmojo-AndOrNode-dropCue-inner"></div></div></div><div class="mstrmojo-andor-bottom"></div></div>',markupSlots:{prefixNode:function(){return this.domNode.firstChild.firstChild;},itemsContainerPrefix:function(){return this.domNode.childNodes[1];},itemsContainerNode:function(){return this.domNode.childNodes[2].firstChild;},dropCueNode:function(){return this.domNode.childNodes[2].lastChild;},itemsContainerSuffix:function(){return this.domNode.lastChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onitemCntChange:function(){A.toggleClass(this.itemsContainerNode,["multi"],this.itemCnt>2);},oneditableChange:function(){A.toggleClass(this.prefixNode,["editable"],this.editable);},ondataChange:function(){this.prefixNode.innerHTML=this.andOrTxt();},ondropCuePosChange:mstrmojo.TreeNode.prototype.markupMethods.ondropCuePosChange},multiSelect:true,itemIdField:null,init:function(O){this._super(O);var P=this.data;if(P){delete this.data;this._set_data(null,P);}},itemCnt:0,postBuildRendering:function(){var O;this.set("itemCnt",this.items.length);if(this._super){O=this._super();}L(this);return O;},preadd:function J(O){if(this._super){this._super(O);}this.set("itemCnt",this.items.length);L(this);},preremove:function M(O){if(this._super){this._super(O);}this.set("itemCnt",this.items.length);L(this);},_set_data:function(R,O){var P=this.data,Q=(P!==O);if(Q){this.data=O;if(O&&!O.nds){O.nds=[];}this.set("items",O&&O.nds);}return Q;},getDragData:function(O){var Q=this._super(O);if(Q&&!Q.html){var P=Q.et&&K.ET2TGT[Q.et];Q.html=P?Q[P]&&Q[P].n||"":Q.n||"";}return Q;},remove:function H(P,Q){var O=this._super(P);if(O>-1){var R=(Q===true)||((Q==null)&&this.suppressConsolidation);if(!R){this.consolidate(false);}}return O;},move:function(P,O){this.suppressConsolidation=true;var Q;if(this._super){Q=this._super(P,O);}this.suppressConsolidation=false;return Q;},consolidate:function D(){var S=this.parent;if(!S||!S.remove){return ;}var Q=this.items,P=Q&&Q.length;if(P<2){var R=P?Q[0]:null,O=this.childIndex();if(R){S.add([R],O);}S.remove(this.data);}},indent:function F(Q,O){var P=I(this,Q);if(!P){return ;}this.remove(P.idxs,true);var S={et:K.ET.ANDOR,nds:P.nds};var R=O&&O.fn;if(!R){R=this.data&&this.data.fn===K.FN.AND?K.FN.OR:K.FN.AND;}S.fn=R;this.add([S],P.idxs[0]);this.consolidate(false);},outdent:function B(P){var Q=this.parent,O=Q&&Q.data;if(!O||O.et!==K.ET.ANDOR){return ;}var R=I(this,P);if(!R){return ;}this.remove(R.idxs,true);Q.add(R.nds,this.childIndex());this.consolidate(false);},edit:function C(X,Y,Q){if(!X){return ;}var W=this.data,V=W&&W.fn,P=X.data,b=P&&P.not;if(!P){P={};X.data=P;}P.not=!!Q;if(V!==Y){var O=W.nds;if(O&&O.length>2){var a=X.childIndex();if(a>0){this.indent([a-1,a],{fn:Y});}}else{W.fn=Y;var T=this.ctxtBuilder,S=T&&T.itemWidgets;for(var R=0,U=(S&&S.length)||0;R<U;R++){var Z=S[R];if(Z){Z.paint();}}}}else{X.paint();}},preclick:function G(O){var Q=null,P=N.eventTarget(O.hWin,O.e);if(P===this.prefixNode){}else{if(N.contains(this.prefixNode,P,true)){Q="andor";}}O.part=Q;}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetTree","mstrmojo.expr","mstrmojo.AndOrNode","mstrmojo.ConditionNode");var F=mstrmojo.expr,C=F.ET,B={};B[C.ANDOR]=mstrmojo.AndOrNode;B["*"]=mstrmojo.ConditionNode;function A(G){var I=G&&G.src,J=I&&I.data,H=J&&J.et;return(H in F.ETs);}mstrmojo.FilterExpr=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.FilterExpr",allowDrop:A,renderOnScroll:false,itemIdField:null,itemFunction:function(L,H,M){var J=(L.et===C.ANDOR),K=M.tree||M,I={data:L,tree:K,parent:M,itemFunction:J?M.itemFunction:null,draggable:J?K.draggable:false,dropZone:J?K.dropZone:false,allowDrop:J&&K.dropZone?K.allowDrop:null,allowCopy:J?K.allowCopy:false,editable:K.isEditable?K.isEditable(L):K.editable,makeObservable:J&&M.makeObservable,onclick:K.onnodeclick,onadd:K.onnodeadd,onremove:K.onnoderemove},G=B[L.et]||B["*"];return G&&(new G(I));},getDragData:function(G){var I=this._super(G);if(I&&!I.html){var H=I.et&&F.ET2TGT[I.et];I.html=H?I[H]&&I[H].n||"":I.n||"";}return I;},newCondition:function E(K){K=K||{et:C.AQ};var J=this.selectionParentNode||this,G;if(J!==this){G=J.add([K]);}else{var I=this.addCondition([K],null,true);G=I.index;J=I.widget;}var H={widget:J,index:G,data:K};if(this.onNew){this.onNew(H);}return H;},addCondition:function D(I,K){var L=this.items,H=L&&L.length,N=I&&I.length;if(!N){return null;}var J,G;if(H&&L[0].et===C.ANDOR){J=this.ctxtBuilder.itemWidgets[0];G=J.add(I,null);}else{if(!H&&(N===1)){J=this;G=0;this.add(I,0);}else{if(H){var M=L[0];this.remove(M);I.unshift(M);}this.add([{et:C.ANDOR,fn:F.FN.AND,nds:I}],0);J=this.ctxtBuilder.itemWidgets[0];G=H?1:0;}}return{widget:J,index:G};},ondrop:function(J){if(this._super){this._super(J);}var H=this.items,G=H&&H.length,I=H.concat();if(G>1){this.set("items",null);this.add([{et:C.ANDOR,fn:F.FN.AND,nds:I}],0);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HBox","mstrmojo.Box","mstrmojo.DropDownButton","mstrmojo.Popup","mstrmojo.WidgetTree","mstrmojo.ObjectBrowserDataProvider","mstrmojo.OBList","mstrmojo.FishEyeContainer","mstrmojo.SearchBox2","mstrmojo.Booklet","mstrmojo.IncFetch");var A=mstrmojo.meta.TP,K="5CECE58CC1D549F890EB61C4DB2156A3",H="E0CCB9CF22104A489CBE78D974AFD19E",B=function(R,S){var Q=mstrmojo.insert({scriptClass:"mstrmojo.OBList",items:S});Q.render();return Q;},D={success:function(S){var T=this.ob,R=S.items,Q=T.pageCache[T.currentPage]._w;Q.set("items",R);this.ob=null;this.item=null;window.clearTimeout(T._btm);T.booklet.set("waiting",false);},failure:function(Q){window.alert(Q.getResponseHeader("X-MSTR-TaskFailureMsg"));this.ob.booklet.set("waiting",false);}},C=function(T,S,Q){var U=O(T,S,false),R=!U;U=U||O(T,S,true);if(!U){T._btm=window.setTimeout(function(){T.booklet.set("waiting",true);},300);Q.ob=T;Q.item=S;T.dataProvider.fetchFolderContents(T,S,Q);}else{G(T,S,U,true,R);}},N=function(R,S,T,Q){C(R,{fid:R.pageCache[R.currentPage].did,blockBegin:S,searchPattern:T,recursive:Q},D);},I=function(R,S){var Q=S.anc;Q=Q&&Q.items;Q=Q&&Q[0];Q=Q&&Q.items;R.set("canGoUp",!(!S.pf||!Q));},G=function(U,T,V,S,R){delete U._btm;var Q;if(!S){Q=B(this,V.items);Q.attachEventListener("change",U.id,"navigate");}else{Q=V._w;}U.booklet.turn(Q,!R);if(!S){E(U,T,Q,V);}U.set("currentFolder",V);U.set("currentPage",U.currentPage+(R?-1:1));I(U,V);},F={success:function(R){var S=this.ob;if(S){window.clearTimeout(S._btm);if(!R.items){R.items=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}var Q=function T(U){var X=U.length;for(var V=0;V<X;V++){var W=U[V];if(W.did===K||W.did===H){W.n=(W.did===K)?mstrmojo.desc(8112):mstrmojo.desc(9277);}if(W.items){Q(W.items);}}};if(R.did===K||R.did===H){R.n=(R.did===K)?mstrmojo.desc(8112):mstrmojo.desc(9277);if(R.anc&&R.anc.items){Q(R.anc.items);}}G(S,this.item,R,false,false);this.ob=null;this.item=null;}},failure:function(Q){this.ob.booklet.set("waiting",false);if(this.ob.onError){this.ob.onError(Q);}else{window.alert(Q.getResponseHeader("X-MSTR-TaskFailureMsg"));}}},E=function(U,T,S,V){var W=U.currentPage+1;var R=U.pageCache.length;for(var Q=W;Q<R;Q++){U.pageCache[Q]._w.destroy();delete U.pageCache[Q].items;}U.pageCache=U.pageCache.slice(0,W);V._w=S;V._k=T.k;U.pageCache[W]=V;U.cacheChange();},O=function(T,S,R){var U=T.currentPage+(R?-1:1);if(T.pageCache.length>U&&U>=0){var Q=T.pageCache[U];if(Q._k==S.k){return Q;}}return false;},M=function(S){var R=S.pageCache.length;for(var Q=0;Q<R;Q++){S.pageCache[Q]._w.destroy();}S.pageCache=[];S.currentPage=-1;S.cacheChange();},J=function(S,R){if(R&&R.acg==33){return ;}var Q={};if(R){Q.k=R.did;Q.fid=R.did;}else{if(S.rootFolderID){Q.k=S.rootFolderID;Q.fid=S.rootFolderID;}else{if(S.rootFolderType){Q.k=S.rootFolderType;Q.fty=S.rootFolderType;}else{if(S.folderLinksContextId){Q.k=S.folderLinksContextId;}}}}C(S,Q,F);},P=function(V,Q,S){if(!S){return Q;}var T=V.showCompletePath,X=Q[0],U,R;while(X){for(var W=0;W<S.length;){if(X.did==S[W].did){S.splice(W,1);X._isSc=true;}else{W++;}}R=X;X._open=true;X=X.items;X=X&&X[0];if(!X){R.lastLeaf=true;}}if(!T){X=Q[0];while(X){if(X._isSc){Q[0]=X;break;}X=X.items;X=X&&X[0];}}return Q.concat(S);},L=function(R,Q,S){R._naviInfo=P(R,Q,S);};mstrmojo.ObjectBrowser=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.ObjectBrowser",rootFolderType:null,rootFolderID:null,sId:null,closeOnSelect:true,browsableTypes:null,includeObjectDesc:false,closeable:true,fishEyeVisible:false,searchVisible:true,currentFolder:null,pageCache:[],currentPage:-1,blockCount:50,canGoUp:true,folderLinksContextId:null,showCompletePath:true,dataProvider:mstrmojo.insert({scriptClass:"mstrmojo.ObjectBrowserDataProvider"}),markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},children:[{scriptClass:"mstrmojo.HBox",alias:"titleBar",cssClass:"mstrmojo-OB-titleTable",children:[{alias:"title",scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-FormatEditor-DropDownButton",cssText:"margin:0px;",popupRef:{scriptClass:"mstrmojo.Popup",contentNodeCssClass:"mstrmojo-OBNavigatorPopup",cssText:"position:relative;",slot:"popupNode",locksHover:true,onOpen:function(){var Q=this.opener.parent.parent,S=this.tree,R=Q._naviInfo;if(S.items!=R){S._pup=this;this.ob=Q;S.set("items",R);}},children:[{alias:"tree",scriptClass:"mstrmojo.WidgetTree",itemIdField:"did",itemFunction:function(T,Q,R){var S=mstrmojo.WidgetTree.prototype.itemFunction(T,Q,R);if(T._open){S.state=1;}S._ll=!!T.lastLeaf;S._pup=R._pup;S.onmousedown=function(U){if(!this._ll){var V=mstrmojo.dom.eventTarget(U.hWin,U.e);if(V==this.domNode||V==this.textNode){var W=this._pup;W.close();J(W.ob,this.data);}}};S.markupMethods.onstateChange=function(){var U=this.data.items?this.state:0;this.stateNode.className="mstrmojo-TreeNode-state "+({0:"closed",1:"opened",2:"leaf"}[U]||"closed");this.itemsContainerNode.style.display=(U===1)?"block":"none";};return S;}}]}},{alias:"upButton",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon up",title:mstrmojo.desc(1152,"Up one level"),onclick:function(){this.parent.parent.goUp();},bindings:{enabled:"this.parent.parent.canGoUp"}},{alias:"closebtn",scriptClass:"mstrmojo.Button",iconClass:"mstrmojo-OBCloseButton",title:mstrmojo.desc(2102,"Close"),bindings:{visible:"this.parent.parent.closeable"},onclick:function(){this.parent.parent.close();}}]},{alias:"fishEye",scriptClass:"mstrmojo.FishEyeContainer",cssText:"width:100%",bindings:{visible:"this.parent.fishEyeVisible"}},{alias:"searchUpBar",scriptClass:"mstrmojo.HBox",children:[{alias:"obSearchBox",scriptClass:"mstrmojo.SearchBox2",cssClass:"mstrmojo-charcoalbox mstrmojo-dxsprite",cssText:"margin: 5px 0; ",width:"105px",contentWidget:mstrmojo.all.obList,taskId:"searchMetadata",searchIncFetch:true,enableMatchCase:false,bindings:{quickSearch:"this.parent.parent.quickSearch"},preFetch:function(){this.objectTypes=(this.parent.parent.browsableTypes)?this.parent.parent.browsableTypes:this.objectTypes;this.parent.parent.booklet.set("waiting",true);},postFetch:function(){this.parent.parent.booklet.set("waiting",false);}}],bindings:{visible:"this.parent.searchVisible"}},{scriptClass:"mstrmojo.Booklet",cssText:"width:100%;background-color:white;",alias:"booklet"},{alias:"obIncFetch",scriptClass:"mstrmojo.IncFetch",height:"17px",cssText:"height:0px;overflow:hidden;",visible:false,np:0,cp:0,ds:{f:mstrmojo.desc(4046),p:mstrmojo.desc(1058),n:mstrmojo.desc(1059),l:mstrmojo.desc(4049),pgs:mstrmojo.desc(5972),gt:mstrmojo.desc(5878),v:mstrmojo.desc(6079)},onvisibleChange:function(R){var T=parseInt(this.height,10),Q=this.np>1,S={target:this.domNode,props:{height:{start:(Q?0:T),stop:(Q?T:0),suffix:"px"}},onEnd:function(){if(Q){this.target.style.overflow="visible";}}},U=new mstrmojo.fx.AnimateProp(S);this.domNode.style.overflow="hidden";U.play();},onifsChange:function(Q){var R=this.np;mstrmojo.hash.copy(Q.value,this);if(this.np>1){this.children=null;this.refresh();}if(R<=1&&this.np>1||R>1&&this.np<=1||R===0&&this.np>0){this.set("visible",this.np>1);}this.cssText="";}}],postBuildRendering:function(){if(this._super){this._super();}if(this.fishEye&&this.fishEyeVisible){this.fishEye.attachEventListener("selectedIndexChange",this.id,"onFishEyeChange");}var S=this.searchUpBar;if(S&&S.obSearchBox&&this.searchVisible){this.obSearchBox=this.searchUpBar.obSearchBox;this.obSearchBox.attachEventListener("itemsChange",this.id,"onSearchItemsChange");var Q=this.obSearchBox.contentWidget||this.obSearchBox;Q.attachEventListener("ifsChange",this.id,function(T){this.obIncFetch.set("ifs",T.value);});}if(this.obIncFetch){var R=this.obIncFetch;R.attachEventListener("fetch",this.id,function(T){R.cp=T.v;R.children=null;R.refresh();N(this,(T.v-1)*this.blockCount+1,this.searchVisible?this.obSearchBox.inputNode.value:"",1);});}},onSearchItemsChange:function(R){var S=R.value,Q=this.pageCache[this.currentPage]._w;if(!S||S.length==0){S=[{did:"empty",n:"("+mstrmojo.desc(2210)+")",t:"e"}];}Q.set("items",S);},navigate:function(Q){var R=Q&&Q.src.selectedItem;if(R&&R.did=="empty"){return ;}if(!R||R[A]==8){J(this,R);}else{if(R){this.select(R);}}},onFishEyeChange:function(Q){this.goToPage(Q.value);},goToPage:function(Q){if(Q<this.pageCache.length&&Q!=this.currentPage){var S=Q>this.currentPage,R=this.pageCache[Q];this.set("currentPage",Q);this.booklet.turn(R._w,S);this.set("currentFolder",R);I(this,R);}},oncurrentPageChange:function(Q){if(this.fishEye){this.fishEye.setSelectedIndex(Q.value);}var R=this.pageCache[this.currentPage];this.titleBar.title.set("text",mstrmojo.string.encodeHtmlString(R.n));if(this.searchVisible&&this.obSearchBox){this.obSearchBox.set("rootCacheItems",R.items||[]);this.obSearchBox.set("totalSize",R.sz);this.obSearchBox.set("rootID",R.did);this.obSearchBox.clearSearch();}if(this.obIncFetch){this.obIncFetch.set("ifs",{np:Math.floor(R.sz/R.bc)+((R.sz%R.bc>0)?1:0),cp:Math.floor(R.bb/R.bc)+((R.bb%R.bc>0)?1:0)});}},cacheChange:function(){if(this.fishEye&&this.fishEyeVisible){this.fishEye.setItems(this.pageCache);}},browse:function(R){for(var Q in R){this[Q]=R[Q];}if(this.searchVisible&&this.obSearchBox){this.obSearchBox.clear();}M(this);this.navigate();},close:function(){var R=this.ctx||this,Q=R.onCloseCB;if(Q){Q[0][Q[1]]();}R.set("visible",false);},select:function(R){var Q=this.onSelectCB;if(Q){Q[0][Q[1]](R);}if(this.closeOnSelect){this.close();}},goUp:function(){if(this.canGoUp){J(this,{did:this.currentFolder.pf});}},oncurrentFolderChange:function(Q){var R=Q.value;L(this,R.anc.items,R.sc);},refreshContent:function(Q){N(this,Q);},onError:null,onheightChange:function(){var Q=["titleBar","fishEye","searchUpBar","obIncFetch"],T=0,S=0;for(var R in Q){T+=parseInt(this[Q[R]].domNode.offsetHeight);}S=parseInt(this.height)-T;this.booklet.set("height",S+"px");}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.Editor","mstrmojo._FormatDefinition","mstrmojo.FontFormatter","mstrmojo.NumberFormatter","mstrmojo.AlignmentFormatter","mstrmojo.PaddingFormatter","mstrmojo.FillFormatter","mstrmojo.BorderFormatter");var B=mstrmojo.hash,C=mstrmojo._FormatDefinition;var A=["header_format","grid_format","child_header_format","child_grid_format"];mstrmojo.CGFormatEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.CGFormatEditor",cssClass:"mstrmojo-FormatEditor",title:mstrmojo.desc(2116),model:null,obModel:null,_initModel:function(){if(!this.obModel){var D=this;this.obModel=new mstrmojo.Model({level1Index:A[0],onlevel0IndexChange:function(E){if(E.valueWas>-1){this._updateModel(E.valueWas,this.level1Index);}this._setCurrentFormat();},onlevel1IndexChange:function(E){if(E.valueWas!=undefined){this._updateModel(this.level0Index,E.valueWas);}this._setCurrentFormat();},onmodelChange:function(){return this.model.items.length>0?this._setCurrentFormat():false;},_updateModel:function(H,F){H=(typeof H!="undefined")?H:this.level0Index;F=F||this.level1Index;var G=mstrmojo.hash.copy(this.currentFormat);var E=this.model.items[H][F]||{};C.extractModel(G,E);this.model.items[H].set(F,E);},_setCurrentFormat:function(){var E=mstrmojo.hash.copy(this.model.items[this.level0Index||0][this.level1Index]);E=C.getStandardFormat(E);this.set("currentFormat",E);}});}},init:function(D){this._initModel();this._super(D);},onmodelChange:function(){this._initModel();var E=this.obModel;E.level0Index=E.level0Index||0;E.set("model",mstrmojo.hash.clone(this.model));var D=E.model.selectedIndex;E.set("level0Index",(D==-1?0:D));},onClearFormat:function(){var D=this.obModel.currentFormat;for(var G in D){delete D[G];}for(var F=0;F<A.length;F++){var E=this.obModel;delete E.model.items[E.level0Index][A[F]];}this.obModel._setCurrentFormat();},onOK:function(){this.obModel._updateModel();var D=this.obModel.model;for(var E=0;E<D.items.length;E++){C.saveFormatModel(D.items[E],this.model.items[E],A);}},postBuildRendering:function(){if(this._super){this._super();}var D=this.obModel.model.selectedIndex;this.obModel.set("level0Index",(D==-1?0:D));},children:[{scriptClass:"mstrmojo.VBox",children:[{scriptClass:"mstrmojo.HBox",alias:"btns",children:[{scriptClass:"mstrmojo.Pulldown",itemIdField:"did",bindings:{items:function(){return this.parent.parent.parent.obModel.model.items||[];},value:function(){var D=this.parent.parent.parent.obModel.level0Index;D=(D==-1?0:D);return this.items[D][this.itemIdField];}},cssClass:" mstrmojo-FormatEditor-DropDownButton",popupToBody:true,popupZIndex:100,value:1,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level0Index",this.selectedIndex);}}},{scriptClass:"mstrmojo.Pulldown",alias:"targetSelector",itemIdField:"v",cssClass:" mstrmojo-FormatEditor-DropDownButton",popupToBody:true,popupZIndex:100,value:1,items:C.FormatTarget,onvalueChange:function(){var D=this.parent.parent.parent;if(D&&D.obModel){D.obModel.set("level1Index",this.selectedItem.p);}}},new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(5976),function(D){var E=this.parent.parent.parent;if(E.onClearFormat){E.onClearFormat();}},"#999",{alias:"btnClear",cssClass:"mstrmojo-Editor-button clear"})]},{scriptClass:"mstrmojo.HBox",alias:"formatPanels",cssClass:"mstrmojo-FormatEditor-box",bindings:{currentModel:"this.parent.parent.obModel.currentFormat"},children:[{scriptClass:"mstrmojo.VBox",alias:"formatList",cssClass:"mstrmojo-FormatEditor-leftPanel",children:[{scriptClass:"mstrmojo.List",alias:"feFMTList",cssClass:"mstrmojo-FormatEditor-formatList",items:C.Formats,selectedIndex:0,itemMarkup:'<div class="mstrmojo-FormatEditor-bullet"><div class="mstrmojo-text">{@n}</div></div>',height:"200px"}]},{scriptClass:"mstrmojo.Container",alias:"rightPanelContainer",cssClass:"mstrmojo-FormatEditor-rightPanel-container mstrmojo-FormatEditor-rightPanel",markupString:'<div id={@id} class="{@cssClass}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},children:[{scriptClass:"mstrmojo.FontFormatter",cssClass:"mstrmojo-FormatEditor-fontTable",cellPadding:5,bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==0",model:"this.parent.parent.currentModel.FormattingFont"}},{scriptClass:"mstrmojo.NumberFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==1",model:"this.parent.parent.currentModel.FormattingNumber"}},{scriptClass:"mstrmojo.AlignmentFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingAlignment"}},{scriptClass:"mstrmojo.PaddingFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==2",model:"this.parent.parent.currentModel.FormattingPadding"}},{scriptClass:"mstrmojo.FillFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingPatterns"}},{scriptClass:"mstrmojo.BorderFormatter",bindings:{visible:"this.parent.parent.formatList.feFMTList.selectedIndex==3",model:"this.parent.parent.currentModel.FormattingBorder"}}]}]}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",slot:"buttonNode",children:[new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2397),function(){var D=this.parent.parent;D.close();if(D.onOK){D.onOK();}},"#999",{alias:"btnOk",cssClass:"mstrmojo-Editor-button"}),new mstrmojo.Button.newInteractiveButton(mstrmojo.desc(2399),function(){var D=this.parent.parent;D.close();},"#999",{alias:"btnCancel",cssClass:"mstrmojo-Editor-button"})]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.Label","mstrmojo.TextBox","mstrmojo.TextArea","mstrmojo.Table","mstrmojo.HBox","mstrmojo.Editor","mstrmojo.ObjectBrowser");function B(){var E={alias:"newFolder",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-OBListItemIcon nf",title:mstrmojo.desc(3245,"Create New Folder"),onclick:function(){var F=this.parent.parent.parent;F.openPopup("newFolder",{zIndex:F.zIndex+10});}},D=mstrmojo.hash.clone(mstrmojo.ObjectBrowser.prototype.children);tc=D[0].children;if(tc&&tc.length>2){tc.splice(2,1,E);}return D;}mstrmojo.SaveAsObjectBrowser=mstrmojo.declare(mstrmojo.ObjectBrowser,null,{scriptClass:"mstrmojo.SaveAsObjectBrowser",cssClass:"mstrmojo-SaveAs-OB",children:B()});var A={success:function(D){var E=this.parent;if(E.onObjectSaved){E.onObjectSaved({name:E.name,did:D.did,desc:E.desc});}mstrmojo.confirm(mstrmojo.desc(7987,"The ## '###' has been saved successfully.").replace("##",E.typeDesc||"Object").replace("###",E.name),[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:72px;"})],mstrmojo.desc(7984,"Object Saved"));E.ob.refreshContent();E.close();},failure:function(E){var D=parseInt(E.getResponseHeader("X-MSTR-TaskErrorCode"),10)+4294967296,F=this.parent;if(D==2147749923){mstrmojo.confirm(mstrmojo.desc(7986,"The ## '###' already exists. Do you want to replace the existing one?").replace("##",F.typeDesc||"Object").replace("###",F.name),[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(219),function(){F.saveAs(true);},null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:72px;"}),mstrmojo.Button.newInteractiveButton(mstrmojo.desc(218),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:72px;"})],mstrmojo.desc(3179));}else{mstrmojo.alert(mstrmojo.desc(7985,"Error while saving: ")+E.getResponseHeader("X-MSTR-TaskFailureMsg"));}}};mstrmojo.SaveAsEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SaveAsEditor",cssClass:"mstrmojo-SaveAsEditor",title:mstrmojo.desc(3167,"Save As"),sId:null,rootFolderID:null,rootFolderType:null,folderLinksContextId:null,browsableTypes:null,showCompletePath:true,desc:"",name:"",help:"Save_As_dialog_box.htm",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(3379,"To the folder:"),cssText:"padding-bottom:6px;"},{scriptClass:"mstrmojo.SaveAsObjectBrowser",alias:"ob",closeable:false,closeOnSelect:false,fishEyeVisible:false,searchVisible:false,bindings:{showCompletePath:"this.parent.showCompletePath",rootFolderID:"this.parent.rootFolderID",rootFolderType:"this.parent.rootFolderType",folderLinksContextId:"this.parent.folderLinksContextId",browsableTypes:"this.parent.browsableTypes",sId:"this.parent.sId"},postCreate:function(){this.onSelectCB=[this.parent,"onOBSelect"];}},{scriptClass:"mstrmojo.Table",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:"this.parent.parent.name"}},{scriptClass:"mstrmojo.Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",bindings:{value:"this.parent.parent.desc"},rows:5}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.saveAs();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.close();}}]}],newFolder:{scriptClass:"mstrmojo.NewFolderEditor"},onOpen:function(){this.ob.browse();},onOBSelect:function(D){this.set("name",D.n);},saveAsCallback:function C(){return A;},saveAs:function(F){var E=this.contPanel;this.name=E.name.value;this.desc=E.desc.value;if(!this.name){mstrmojo.confirm(mstrmojo.desc(3380,"Please enter valid name"),[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:72px;"})]);return ;}var G=this.saveParams||{};G.folderID=this.ob.currentFolder.did;G.description=this.desc||"";G.name=this.name||"";G.saveAsOverwrite=!!F;if(this.sId){G.sessionState=this.sId;}var D=this.saveAsCallback();D.parent=this;mstrmojo.xhr.request("POST",mstrConfig.taskURL,D,G);},createFolder:function(F,I){if(!F){mstrmojo.confirm(mstrmojo.desc(3380),[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:72px;"})]);return -1;}var G=this.newFolder,E=this.ob,J=E&&E.dataProvider,H=E&&E.currentFolder.did,D={success:function(K){E.refreshContent();G.contPanel.name.set("value","");G.contPanel.desc.set("value","");},failure:function(K){window.alert(K.getResponseHeader("X-MSTR-TaskFailureMsg"));}};J.newFolder(H,F,I,D);}});mstrmojo.SaveAsEditor.SAVEAS_CALLBACK=A;mstrmojo.NewFolderEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.NewFolderEditor",cssClass:"mstrmojo-NewFolderEditor",title:mstrmojo.desc(663,"Create Folder"),help:"Create_a_new_folder.htm",children:[{scriptClass:"mstrmojo.Table",rows:2,cols:2,alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",slot:"0,0",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",slot:"0,1",value:mstrmojo.desc(8116,"New Folder"),alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput"},{scriptClass:"mstrmojo.Label",slot:"1,0",text:mstrmojo.desc(1154,"Description:")},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",slot:"1,1",alias:"desc",rows:5}]},{scriptClass:"mstrmojo.HBox",alias:"btns",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){var E=this.parent.parent,G=E&&E.opener,D=E.contPanel.name.value,F=E.contPanel.desc.value;if(G.createFolder(D,F)!=-1){E.close();}}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.close();}}]}]});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.css","mstrmojo.Arr","mstrmojo.expr","mstrmojo.Label","mstrmojo.AjaxCall","mstrmojo.HTMLButton","mstrmojo.Container","mstrmojo._HasPopup","mstrmojo.HBox","mstrmojo.Dial","mstrmojo.WidgetDial","mstrmojo.ValidationTextBox","mstrmojo.Calendar","mstrmojo.DateTextBox","mstrmojo.Editor","mstrmojo.ObjectBrowser","mstrmojo.ElementsBrowser","mstrmojo.ConditionModel");var T=mstrmojo.css,I=mstrmojo.registry,O=mstrmojo.hash,U=mstrmojo.array,AB=mstrmojo.Arr,Q=mstrmojo.expr,m=Q.ET,AD=Q.DTP,k=Q.DTP2FN_DTP,X=Q.ET2TGT,j=Q.ET2TP,y=mstrmojo.meta.TP,G=mstrmojo.meta.STP,AA=mstrmojo.string.encodeXMLAttribute;var M={};M[m.AQ]={target:1,fm:1,fn:1,c0:1,c1:1};M[m.AL]={target:1,fm:1,fn:1,c0:1};M[m.AE]={target:1,fm:1,es:1};M[m.AC]={target:1,fm:1,fm2:1,fm3:1,fn:1,c0:1,c1:1};M[m.MQ]={target:1,fn:1,c0:1,c1:1,dmy:1};M[m.MC]=M[m.MQ];M["*"]={target:1};var r={};r[m.MQ]={key:"metricFns",def:Q.METRIC_FNS};r[m.MC]={key:"metricFns",def:Q.METRIC_FNS};r[m.AQ]={key:"formFns",def:Q.FORM_FNS};r[m.AL]={key:"formFns",def:Q.FORM_FNS};r[m.AC]={key:"formFns",def:Q.FORM_FNS};r[m.AE]={key:"elemFns",def:Q.ELEM_FNS};var g={};g[m.AQ]=mstrmojo.desc(7925,"Select Attribute...");g[m.AL]=mstrmojo.desc(7926,"Browse...");g[m.MQ]=mstrmojo.desc(7927,"Select Metric...");g[m.MC]=mstrmojo.desc(7927,"Select Metric...");g[m.AC]=mstrmojo.desc(7925,"Select Attribute...");function e(C,H,A){var E=C[H].style;if(mstrmojo.dom.isFF){E.overflow="hidden";E.width=A?"auto":"0px";E.visibility=A?"inherit":"hidden";}else{E.display=A?"block":"none";}}function q(AM){var C=AM.model,AP=C&&C.et,AN=M[AP]||M["*"],A=AM.children;for(var E=0,H=A.length;E<H;++E){var AL=A[E];if(!AL.isStep){continue;}var AO=AL.alias,R=AN[AO];e(AM,AL.slot,R);if(R&&AL&&AL.update){AL.update();}}if(!AN.c1){e(AM,"btwnNode",false);}if(!AN.dmy){e(AM,"atNode",false);}x(AM);}function d(){var C=this.parent,A=((C&&C.cssText)||"").match(/height:\s*(\d*)px/);this.cssText=A&&A[0];}var c="dummy",h={did:"idBrowse",v:"idBrowse",n:mstrmojo.desc(6571,"Browse..."),t:c,css:"unselectable link"},v={did:"idErr",v:"idErr",n:mstrmojo.desc(7929,"Error loading data."),t:c,css:"unselectable"},AE={did:"idWait",v:"idWait",n:mstrmojo.desc(2901,"Loading..."),t:c,css:"unselectable"};function V(E){if(this.updating){return ;}var H=this.multiSelect,AL=this.selectedItem;if(AL&&AL[y]===c){this.updating=true;if(H){this.removeSelect([this.selectedIndex]);}else{var C=E&&E.removed&&Number(E.removed[0]);C=(C==null)?-1:C;this.set("selectedIndex",C);}this.updating=false;if(AL===h){this.parent.browse(this);}}else{var A=this.parent.model;if(H){var R=this.items;A.edit(this.alias,{added:E.added&&U.get(R,E.added),removed:E.removed&&U.get(R,E.removed),itemIdField:this.itemIdField});}else{A.edit(this.alias,AL);}}}function N(E,R,C){var H=E.items,A=U.indexOf(H,R);if((A===0)&&(H.length===1)){C=mstrmojo.Arr.makeObservable((C&&C.length)?C.concat():[]);E.set("items",C);}else{if(A>-1){H.remove(A,1);}if(C&&C.length){H.add(C,(A>-1)?A:null);}}}function i(A){return O.copy(A,{scriptClass:"mstrmojo.Dial",slot:A.alias+"Node",isStep:true,cssClass:"mstrmojo-walkstep mstrmojo-"+A.alias,itemIdField:"did",itemMarkupFunction:function(E,C,H){var R=AA(E.n);return'<div class="dial-item '+E.css+'" title="'+R+'">'+R+"</div>";},allowUnlistedValues:true,insertUnlistedValuesAt:0,onchange:V,postCreate:d});}function J(C,A,E){var H=C.cfg;if(H){H.data=C;H.parent=E;return I.ref(H);}else{H=new mstrmojo.Label({text:C.n,cssClass:"dial-item"});H.markupMethods.onselectedChange=function(){mstrmojo.css.toggleClass(this.domNode,["selected"],this.selected);};H.data=C;H.parent=E;return H;}}function AK(C,A){var E=A+Q.FN_SEP+C;return(C!=null)?{did:E,n:E}:null;}function b(C,A){if(A){if(!A.attachEventListener){mstrmojo.requiresCls("mstrmojo.ConditionModel");mstrmojo.hash.make(A,mstrmojo.ConditionModel,{});}A.attachEventListener("edit",C.id,"onmodeledit");}}function B(C){var A=Q.TP.ATTR,E=C.targets?U.filter(C.targets,function(H){return H[y]===A;}):[];return E;}function l(C,A){if(A&&A.detachEventListener){A.detachEventListener("edit",C.id,"onmodeledit");}}function F(C,A,E,AL){C.updating=true;e(C.parent,C.slot,A);if(A){if(E!=null){C.clearSelect();C.set("items",E);}var R=C.itemIdField,H=C.selectedItem;if((H&&H[R])!=(AL&&AL[R])){C.set("selectedItem",AL);}else{C.center();}}C.updating=false;}function AJ(A,C,H,E){A.updating=true;if(C!=null){}A.clearSelect();if(C){A.set("items",C);}if(H&&H.length){A.setSelectedItems(H);}else{if(E&&E.length){A.select(E);}else{A.center();}}A.updating=false;}function w(C,A,E,R,H){e(C.parent,C.slot,A);if(A){AJ(C,E,R,H);}}function a(E,C){var A=E.model||{},H=A.fn;return(H!=null)&&((A.et===m.MQ)||(A.et===m.MC)||(A.et===m.AQ)||(A.et===m.AL)||(A.et===m.AC))&&(Q.fnCstCount(H,A.fnt)>C);}var AI={};AI[AD.DATE]=1;AI[AD.TIME]=1;AI[AD.TIMESTAMP]=1;var K=mstrmojo.array.find;function p(H,E,AL){var C=[],A=H.length;for(var R=0;R<A;R++){if(K(E,AL,H[R][AL])<0){C.push(H[R]);}}return C;}function z(AZ,AM,AY){var A=AZ.targetsLastMod,AV=AM.targetsLastMod,AO=AM.model,AX=AZ._lastTargetId,Aa=AM.target.itemIdField,AS=AO&&AO[X[AO.et]]&&AO[X[AO.et]][Aa],AL=AO&&AO.fm,H=AL&&AL.dtp,AQ=Q.fn_AC_MC(AO&&AO.fn),E=false;if(!A||!AV||(A!=AV)||AX!==AS){AZ.targetsLastMod=AM.targetsLastMod;E=true;}else{if(this.lastFmDtp!==H){this.lastFmDtp=H;E=true;}else{if(this.lastFnTp!==AQ){this.lastFnTp=AQ;E=true;}}}if(E){if(!AQ){AZ.clearSelect();AZ.set("items",AZ.items.slice(0,AZ.preLen));}else{var R=D(AO);var AW=AM.targets?U.filter(AM.targets,function(Ab){return R[Ab[y]]||R[Ab[G]];}):[];var AN=AZ.items.slice(AZ.preLen),AU=AZ.itemIdField,AT=p(AN,AW,AU),C=p(AW,AN,AU);for(var AP=0,AR=AT&&AT.length||0;AP<AR;AP++){AZ.remove(AT[AP]);}if(C&&C.length>0){AZ.add(C,-1);}}AZ._lastTargetId=AS;}}function AC(Aa,AN){Aa.updating=true;var AO=Aa.parent,AZ=a(AO,AN),AS;e(Aa.parent,Aa.slot,AZ);if(AZ){var AR=AO.model||{},H=AR.cs,AX=H&&H[AN],AM=AX&&AX.v,R;z(Aa,AO,AZ);switch(AR.et){case m.MQ:case m.MC:R=Q.METRIC_DTP;break;case m.AQ:case m.AC:case m.AE:R=AR.fm&&AR.fm.dtp;break;case m.AL:R=AR.fm&&AR.fm.dtp;AM=[];for(var AT=0,AV=H&&H.length;AT<AV;AT++){AM.push(H[AT].v);}AM=AM.join(mstrConfig.listSep);break;}R=R||AD.CHAR;var AP=Q.fn_List(AR.fn,AR.fnt),AU=AI[R],AW=AU&&!AP;var C=Aa.ctxtBuilder,A=C&&C.itemWidgets,AY=AU?(AW?Aa.calIndex:Aa.dtxtIndex):Aa.txtIndex,AQ=A&&A[Aa.bwIndex],E;for(var AT=0,AV=Aa.preLen-1;AT<AV;AT++){E=A[AT];if(AT==AY){E.set("dtp",R);E.set("isList",AP);E.set("value",AM);E.set("visible",true);try{E.focus&&E.focus();}catch(AL){}if(E.clearValidation){E.clearValidation();}}else{E.set("visible",false);}if(AP){E.set("tooltip",mstrmojo.desc(8191,"value1## value2## ...## valueN").replace(/##/g,mstrApp.listSep));}else{E.set("tooltip","");}}if(AQ){AQ.set("text",g[AR.et]);AQ.set("visible",Q.fn_AC_MC(AR&&AR.fn));}switch(AR.et){case m.AQ:case m.AL:case m.MQ:if(AX&&AX.p){Aa.set("selectedItem",AX.p);}else{Aa.set("selectedIndex",AY);}break;case m.MC:case m.AC:Aa.set("selectedItem",AR[X[AR.et]+(2+AN)]);break;}}e(AO,"btwnNode",AZ);Aa.refreshScroll();Aa.updating=false;}function Y(E){var R=this.parent,C=R.parent,H=(this.isValid&&this.isValid())||(!this.isValid&&!mstrmojo.string.isEmpty(this.value)),A=C.model;C["invalid"+R.cstIndex]=!H;if(!this.updating&&H){this.updating=true;if(A){A.edit(R.alias,{v:this.value,dtp:this.dtp});}this.updating=false;}x(C);}function x(R){var H=true,A=R.model;if(!A){return ;}switch(A.et){case m.AQ:case m.AL:case m.MQ:for(var E=0,C=Q.fnCstCount(A.fn,A.fnt);E<C;E++){H=H&&!R["invalid"+E];}break;}H=H&&!!A.completed;R.okBtn.set("enabled",H);return ;}function AG(){var C=this.parent,A=C.parent;A["invalid"+C.cstIndex]=false;}function AH(A){return i(O.copy(A,{scriptClass:"mstrmojo.WidgetDial",makeObservable:true,itemFunction:J,selectionPolicy:"reselect",items:[{did:0,cfg:{scriptClass:"mstrmojo.ValidationTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:Y,onInvalid:Y,onClearValidation:AG,size:6,cssText:"text-align:right",visible:false}},{did:1,cfg:{scriptClass:"mstrmojo.Calendar",onvalueChange:Y,visible:false}},{did:2,cfg:{scriptClass:"mstrmojo.DateTextBox",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ALL},onValid:Y,onInvalid:Y,onClearValidation:AG,calendarToBody:true,calConfig:{onmousedown:function(C){mstrmojo.dom.stopPropogation(C.hWin,C.e);}},visible:false}},{did:3,t:c,cfg:{scriptClass:"mstrmojo.Label",cssClass:"dial-item link",text:"Browse...",onclick:function(){this.parent.parent.browse(this.parent);},visible:false}}],txtIndex:0,calIndex:1,dtxtIndex:2,bwIndex:3,preLen:4,insertUnlistedValuesAt:-1,update:function(){AC(this,this.cstIndex);}}));}function u(A){return i(O.copy(A,{insertUnlistedValuesAt:-1,postCreate:function(){d.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,readCache:true,writeCache:true,params:{taskId:"getAttributeForms",attributeId:null,displayedForms:"0",styleName:"MojoAttributeStyle"},onsuccess:function(){var AO=this.parent,H=AO&&AO.parent&&AO.parent.model,AL=this.response;if((AL&&AL.did)!==AO.lastAttrId){return ;}var R=AL.fms||[],AN=AO.selectedItem;R=U.filter(R,function(AP){return(!AP.icf);});if(AN){var E=U.find(R,AO.itemIdField,AN[AO.itemIdField]);if(E>-1){R=R.concat();R.splice(E,1);}}N(AO,AE,R);var AM=AO.items,C=AM.length;if(C===1){AO.singleSelect(0);}},onerr:function(){N(this.parent,AE,[v]);}});},update:function(){var AR=this.fmPost,C=this.parent,H=C.model,AP=H&&H["a"+AR],AN=!!AP,E,AM,AS=H&&H.tfm,AL=AS&&AS.dtp,AQ;if(AN){switch(H.et){case m.AQ:case m.AL:AM=H.fm;break;case m.AC:AM=H["fm"+AR];break;case m.AE:AM=AK(H.fn,1);break;}if(this.lastAttrId!==AP.did){this.lastAttrId=AP.did;E=[];if(H.et!==m.AC){if(!AP.ilk&&(!C.ets||C.ets[m.AE])){var R=r[m.AE],AO=R&&R.key;E=E.concat((AO&&C[AO])||R.def||[]);}}if(AM&&(H.et!==m.AE)){E.push(AM);}AQ=this.ajx;AQ.params.attributeId=AP.did;E.push(AE);AB.makeObservable(E);}}F(this,AN,E,AM);if(AN&&AQ){if(AQ._delayId){window.clearTimeout(AQ._delayId);delete AQ._delayId;}AQ._delayId=window.setTimeout(function(){delete AQ._delayId;AQ.send();},500);}}}));}var P=[Q.STP.PROMPT,Q.STP.PROMPT_OBJECTS,Q.STP.PROMPT_ELEMENTS,Q.STP.PROMPT_EXPRESSION,Q.STP.PROMPT_EXPRESSION_DRAFT];function L(H){var A=H&&H.length;if(A){var E=U.hash(P);for(var C=0;C<A;C++){E[j[H[C]]]=true;}return E;}return null;}function D(C){var R=C&&j[C.et],H=C&&C.fm&&C.fm.dtp,A=H&&Q.DTP2PROMPT_STP[H],E={};E[R]=true;if(A){E[A]=true;}return E;}function AF(H,E,AL){H.openPopup("eb",{zIndex:H.parent.zIndex+10,left:Math.round(AL.x)+"px",top:Math.round(AL.y)+"px"});var C=H.eb.browser,A=H.model,R=A&&A.a&&A.a.did;if(!R){return ;}C.set("attributeID",R);C.set("selectedItems",A.es?O.clone(A.es):[]);C.initBrowser();}function Z(AM,A,C){AM.openPopup("ob",{zIndex:AM.parent.zIndex+10,left:Math.round(C.x)+"px",top:Math.round(C.y)+"px"});var E=AM.ob.browser;E.target=A;var H;switch(A.alias){case"dmy":H=[Q.TP.ATTR,Q.TP.DIM];break;case"c0":case"c1":var R=AM.model,AO=R&&R.et,AN=R&&R.fm,AL=AN&&AN.dtp||(R.m?Q.DTP.DECIMAL:Q.DTP.UNKNOWN);H=(AO===m.MQ||AO===m.MC)?[Q.TP.METRIC,Q.DTP2PROMPT_STP[AL]]:[Q.TP.ATTR,Q.DTP2PROMPT_STP[AL]];break;default:H=L(AM.ets);H=H?O.keyarray(H,true):[Q.TP.ATTR,Q.TP.METRIC,Q.STP.REPORT_GRID,Q.STP.REPORT_GRAPH,Q.STP.REPORT_ENGINE,Q.STP.REPORT_TEXT,Q.STP.REPORT_DATAMART,Q.STP.REPORT_BASE,Q.STP.REPORT_GRIDGRAPH,Q.STP.REPORT_NONINTERACTIVE,Q.STP.FILTER].concat(P);}H[H.length]=Q.TP.FOLDER;E.browse({folderLinksContextId:R&&(R.et===m.MQ||R.et===m.MC)?27:23,onSelectCB:[AM,"onOBSelect"],browsableTypes:H.join(",")});}mstrmojo.ConditionWalk=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.ConditionWalk",markupString:'<table id="{@id}" class="mstrmojo-walk mstrmojo-ConditionWalk {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0" mstrAttach:click><tr><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-notNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-targetNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7926,"Browse...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fmNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-esNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7928,"Browse elements...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fnNode"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c0Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm2Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-btwnNode"><div class="mstrmojo-walkstep-wrapper">{@betweenText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-c1Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-fm3Node"><div class="mstrmojo-walkstep-wrapper"></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-atNode"><div class="mstrmojo-walkstep-wrapper">{@atText}</div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-dmyNode"><div class="mstrmojo-walkstep-wrapper"><div class="mstrmojo-walkstep-browse">'+mstrmojo.desc(7925,"Select Attribute...")+'</div></div></td><td class="mstrmojo-walkcell mstrmojo-ConditionWalk-okNode"><div class="mstrmojo-walkstep-wrapper"><div></div></td></tr></table>',markupSlots:{notNode:function(){return this.domNode.rows[0].cells[0].firstChild;},targetNode:function(){return this.domNode.rows[0].cells[1].firstChild;},fmNode:function(){return this.domNode.rows[0].cells[2].firstChild;},esNode:function(){return this.domNode.rows[0].cells[3].firstChild;},fnNode:function(){return this.domNode.rows[0].cells[4].firstChild;},c0Node:function(){return this.domNode.rows[0].cells[5].firstChild;},fm2Node:function(){return this.domNode.rows[0].cells[6].firstChild;},btwnNode:function(){return this.domNode.rows[0].cells[7].firstChild;},c1Node:function(){return this.domNode.rows[0].cells[8].firstChild;},fm3Node:function(){return this.domNode.rows[0].cells[9].firstChild;},atNode:function(){return this.domNode.rows[0].cells[10].firstChild;},dmyNode:function(){return this.domNode.rows[0].cells[11].firstChild;},okNode:function(){return this.domNode.rows[0].cells[12].firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?T.DISPLAY_TABLE:"none";}},children:[i({alias:"target",insertUnlistedValuesAt:0,makeObservable:true,hideIfEmpty:true,update:function(){var AL=this.parent,C=AL.model;if(this.lastModel!==C){this.lastModel=C;var A=AL.targets,AM=AL.ets;if(AM&&A&&A.length){var H=L(AL.ets);A=U.filter(A,function(AN){return H[AN[y]];});}else{A=A?A.concat():[];}var R=C&&C.et,E=C&&C[X[R]];F(this,true,A,E);}}}),u({alias:"fm",fmPost:"",filter:false}),i({alias:"es",itemIdField:"v",insertUnlistedValuesAt:0,makeObservable:true,itemMarkupFunction:function(C,A,E){var H=AA(C.n);return'<div class="dial-checkitem '+C.css+'" title="'+H+'">'+H+"</div>";},multiSelect:true,selectionPolicy:"toggle",postCreate:function W(){d.apply(this,[]);this.ajx=mstrmojo.insert({parent:this,scriptClass:"mstrmojo.AjaxCall",isTask:true,params:{taskId:"browseElements",attributeId:null,styleName:"MojoAttributeStyle",blockBegin:1,blockCount:mstrApp.elementsBlockCount||30},onsuccess:function(){var E=this.parent,A=this.response;if((A&&A.did)!==E.lastAttrId){return ;}var C=(A&&A.es)?A.es.concat():[];AJ(E,C,E.parent.model&&E.parent.model.es,null);},onerr:function(){N(this.parent,AE,[v]);}});},update:function S(){var A=this.parent,E=A.model,AM=E&&E.a,AN=!!AM&&!AM.ilk,AO,C,AL,AP;if(AN){if(this.lastAttrId!==AM.did){this.lastAttrId=AM.did;AO=E.es;var R=AO&&AO.length;AO=R?AO.concat():[];AO.push(AE);if(R){AL=[];for(var H=1;H<=R;H++){AL[H]=H;}}AP=this.ajx;AP.params.attributeId=AM.did;}else{C=E.es;}}w(this,AN,AO,C,AL);if(AN&&AP){AP.send();}}}),i({alias:"fn",allowUnlistedValues:false,update:function(){var A=this.parent,E=A.model||{},AM=E.et,AL,AN=false,AO,C;switch(AM){case m.AE:AN=!!E.a;break;case m.AQ:case m.AC:case m.AL:AN=!!(E.fm&&E.fm.did);AL=AN?E.fm.dtp:null;break;case m.MQ:case m.MC:AN=!!E.m;AL=AN?Q.METRIC_DTP:null;break;}if(AN){var AP=k[AL];if((this.lastEt!==AM)||(this.lastFnDtp!==AP)){this.lastEt=AM;this.lastFnDtp=AP;var R=AM?r[AM]:null,H=R&&R.key;AO=(H&&A[H])||R.def||[];if(typeof (AO)==="object"){AO=AO[AP]||AO["*"];}}C=AK(E.fn,E.fnt||1);}F(this,AN,AO,C);}}),AH({alias:"c0",cstIndex:0}),u({alias:"fm2",fmPost:"2"}),AH({alias:"c1",cstIndex:1}),u({alias:"fm3",fmPost:"3"}),i({alias:"dmy",itemIdField:"did",hideIfEmpty:true,itemMarkupFunction:function(C,A,E){var H=AA(C.n);return'<div class="dial-checkitem '+C.css+'" title="'+H+'">'+H+"</div>";},multiSelect:true,selectionPolicy:"toggle",insertUnlistedValuesAt:0,makeObservable:true,postCreate:function(){d.apply(this,[]);this.set("items",B(this.parent));},update:function o(){var E=this.parent,AM=E.model,AO=AM.et,AR=AM&&AM.m,AP=!!AR&&(AM.fn!==null)&&((AO===m.MQ)||(AO===m.MC)),AN,H;if(AP){var R=this.targetsLastMod,AS=E.targetsLastMod;if(!R||!AS||(R!=AS)){this.targetsLastMod=E.targetsLastMod;AN=B(E);}H=[];var C=AM.dmy&&AM.dmy.uts;for(var AQ=0,A=(C&&C.length)||0;AQ<A;AQ++){var AL=C[AQ];H.push(AL.utgt?AL.utgt:AL);}}w(this,AP,AN,H);e(E,"atNode",AP);}}),{alias:"okBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(1442,"OK"),cssText:"width:66px;min-width:58px;",onclick:function(){var A=this.parent;if(A.onOK){A.onOK();}}},{alias:"cancelBtn",slot:"okNode",scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",cssText:"width:66px;min-width:58px;",text:mstrmojo.desc(221,"Cancel"),onclick:function(){var A=this.parent.parent;if(A&&A.close){A.close();}}}],eb:{scriptClass:"mstrmojo.Editor",cssClass:mstr.utils.ISIE7?"mstrmojo-ElementsEditorIE7":"mstrmojo-ElementsEditor",title:mstrmojo.desc(6149,"Select Elements"),help:"element_browser_dialog_box.htm",children:[{scriptClass:"mstrmojo.ElementsBrowser",alias:"browser"},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",cssText:"width:72px;margin-right:2px;",onclick:function(){var A=this.parent.parent,C=A&&A.opener;if(C){C.onEBSelect();C.closePopup();}}}]}]},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",cssText:"width:200px;",fishEyeVisible:false,closeable:false,closeOnSelect:false,browsableTypes:"3,4,8,10,12,256",includeObjectDesc:true,quickSearch:true}]},betweenText:mstrmojo.desc(308,"and"),atText:mstrmojo.desc(5923,"at"),model:null,targets:null,ets:null,defaultEt:null,defaultAttrEt:null,metricFns:null,formFns:null,elemFns:null,metricLevels:null,defaultMetricLevel:null,postBuildRendering:function t(){b(this,this.model);q(this);return this._super();},_set_model:function f(H,A){var C=this.model,E=(A!==C);if(E){l(this,C);this.model=A;b(this,A);if(this.hasRendered){q(this);}}return E;},onmodeledit:function(A){switch(A&&A.prop){case"es":case"dmy":x(this);return ;}q(this);},browse:function n(A){var E=this.parent.editorNode,C=function(R,AM){var H=mstrmojo.dom.position(R,true),AL=mstrmojo.dom.position(AM,true);return{x:H.x+H.w,y:AL.y};};switch(A&&A.alias){case"target":case"dmy":Z(this,A,C(A.alias=="target"?this.targetNode:this.dmyNode,E));break;case"c0":case"c1":Z(this,A,C(A.alias=="c0"?this.c0Node:this.c1Node,E));break;case"es":AF(this,A,C(this.esNode,E));break;}},onOBSelect:function(H){var C=this.ob.browser,AL=C.target;this.closePopup();var R=AL.itemIdField,E=this.targets||[],A=U.find(this.targets,R,H[R]);if(A===-1){E.push(H);this.targets=E;this.targetsLastMod=new Date();}AL.setSelectedItems([H],AL.multiSelect);AL.refreshScroll();},onEBSelect:function(){var A=this.eb.browser;var C=this.es;C.set("selectedIndices",{});C.setSelectedItems(A.selectedItems,false);},onclick:function s(A){var C=mstrmojo.dom.eventTarget(A.hWin,A.e);if(C==this.targetNode.firstChild){this.browse(this.target);}else{if(C==this.esNode.firstChild){this.browse(this.es);}else{if(C==this.dmyNode.firstChild){this.browse(this.dmy);}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.expr","mstrmojo.dom","mstrmojo.boxmodel","mstrmojo.Obj","mstrmojo.Arr","mstrmojo.string","mstrmojo.Box","mstrmojo.TBox","mstrmojo.HBox","mstrmojo.Label","mstrmojo.Button","mstrmojo.HTMLButton","mstrmojo.TextBox","mstrmojo.Popup","mstrmojo.Editor","mstrmojo.Dial","mstrmojo.WidgetList","mstrmojo.FilterExpr","mstrmojo.CGEOptions","mstrmojo.ConditionWalk","mstrmojo.SaveAsEditor","mstrmojo.CGFormatEditor");var T=mstrmojo.expr,D=T.ET,J=T.BRANCH_FNS,Q=mstrmojo.hash,W=mstrmojo.boxmodel,F=mstrmojo.Arr,R=mstrmojo.Obj,K=mstrmojo.string,U=mstrmojo.dom;function E(Y){var d={};if(Y){var b=Y.items;for(var a=0,X=(b&&b.length)||0;a<X;a++){var c=b[a],Z=c&&c.expr;if(Z){T.findTargets(Z,"did",d);}}}return Q.valarray(d);}function O(Z){var Y=Z.model;Z.targets=E(Y);Z.targetsLastMod=new Date();if(!Y){Y=new R({});Z.model=Y;}var b=Y.items;if(!b){b=mstrmojo.Arr.makeObservable([]);Y.items=b;}else{if(!b.attachEventListener){b=Q.make(b,F);}}for(var a=0,X=b.length;a<X;a++){var c=b[a];if(!c.attachEventListener){c=Q.make(c,R);}}}var L=mstrmojo.desc(4778,"Element"),S=new RegExp(L+"\\s*(\\d+)","i"),B=10000;function M(c){var b=1;for(var Z=0,Y=(c&&c.length)||0;Z<Y;Z++){var d=c[Z].n,X=d&&d.match(S);if(X){var a=parseInt(X[1],10);b=Math.max(a+1,b);}}return L+" "+b;}var G=200;function C(b,a,Z){var Y=mstrmojo.all.mstrCGE,c=U.delta(a.domNode,Y.editorNode);c.y+=(Z=="andor"?16:parseInt(a.domNode.offsetHeight,10));var X={condition:a,zIndex:Y.zIndex+10,left:c.x+"px",top:c.y+"px"},d;switch(Z){case"andor":d="andOrPopupRef";break;case"condition":d="conditionPopupRef";X.model=Q.clone(b);X.targets=Y.targets;X.targetsLastMod=Y.targetsLastMod;break;}Y.openPopup(d,X);}function V(Y){var Z=Y.parent.data;if(Z){var X=Y.items;Z.expr=X&&X[0];}}function I(Z){if(Z.constructor!==Array){Z=[Z];}var e,d={b:0,c:0},f,c,Y;for(var a=0,X=Z.length;a<X;a++){e=Z[a];if(!(e&&e.et)){continue;}f=e.nds;if(f){c=I(f);d.b+=c.b;d.c+=c.c;}else{Y=(e.et===D.B);d[Y?"b":"c"]++;}}return d;}function N(X){var Z=I(X.value),Y=this.tree;Y.set("bandingCount",Y.bandingCount+Z.b);Y.set("conditionCount",Y.conditionCount+Z.c);}function A(X){var Z=I(X.value),Y=this.tree;Y.set("bandingCount",Y.bandingCount-Z.b);Y.set("conditionCount",Y.conditionCount-Z.c);}function H(Y){var b=mstrmojo.all.mstrCGE,X=b.model,c=X.did,a=X.cgp,Z=b.getXML();return{taskId:"saveCustomGroup",xml:Z,objectID:c||"",description:X.desc||"",name:X.n||"",saveAs:Y,aggregation:a.agg,flatten:a.flat,parentFirst:a.pf,reportFilterInteraction:a.rfi};}mstrmojo.CustomGroupEditor={id:"mstrCGE",title:mstrmojo.desc(7919,"Custom Group Editor"),scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-charcoalboxe",cssText:"width:750px;background-color:#e6e6e6;",zIndex:10,model:null,readOnly:false,help:"custom_group_editor.htm",formatPopupRef:{scriptClass:"mstrmojo.CGFormatEditor",contentNodeCssClass:"mstrmojo-balloon",alias:"formatEditor",title:mstrmojo.desc(2116),left:"100px",top:"100px",useAnimate:false,height:350,slot:"containerNode",help:"formatting_a_custom_group.htm",locksHover:true,model:null,_set_model:function(Y,X){O(mstrmojo.all.mstrCGE);this.model=X;this.model.selectedIndex=mstrmojo.all.mstrCGEls.selectedIndex;return true;},bindings:{model:function(){return mstrmojo.all.mstrCGE.model;}},onOpen:function(){this.set("model",mstrmojo.all.mstrCGE.model);}},saveasRef:{scriptClass:"mstrmojo.SaveAsEditor",typeDesc:mstrmojo.desc(2105,"Custom Group"),browsableTypes:"8,257",onObjectSaved:function(Z){var Y=mstrmojo.all.mstrCGE,X=Y&&Y.model;if(X){X.set("did",Z.did);X.set("n",Z.name);X.set("desc",Z.desc);}}},optionsRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGEOptions",contentNodeCssClass:"mstrmojo-balloon",left:"100px",top:"230px",slot:"containerNode",help:"Custom_Group_Options_dialog_box.htm",showTitle:true,title:mstrmojo.desc(7969,"Custom Group Options"),onOpen:function(){var X=mstrmojo.all.mstrCGE,Y=this.optionsEditor;Y.open(X.model,{closeCB:[this,"close"]});},children:[{scriptClass:"mstrmojo.CGEOptions",alias:"optionsEditor"}]},postCreate:function(){O(this);},_set_model:function(b,X){var Z=this.model,a=Z!==X,Y=mstrmojo.all.mstrCGEls;if(a){this.model=X;O(this);if(Y){Y.clearSelect();}}return a;},children:[{scriptClass:"mstrmojo.TBox",alias:"header",cssText:"width: 100%",children:[{scriptClass:"mstrmojo.Label",alias:"name",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-name",emptyText:mstrmojo.desc(7920,"Enter Custom Group name here."),bindings:{text:function(){var X=mstrmojo.all.mstrCGE.model.n||this.emptyText;return K.encodeHtmlString(X);}},onclick:function(){var X=mstrmojo.all.mstrCGE,Y=U.delta(this.domNode,X.editorNode);X.openPopup("inlineTextRef",{left:Y.x-1+"px",top:Y.y-(U.isIE7?2:1)+"px",txtConfig:{cssClass:"mstrmojo-cge-name-edit",value:X.model.n||"",onEnter:function(){var Z=K.trim(this.value);if(Z){X.model.set("n",Z);}this.parent.close({enter:true});},onCancel:function(){this.set("value",X.model.n);},prevTab:null,nextTab:X.header.desc}});}},{scriptClass:"mstrmojo.Label",alias:"desc",cssClass:"mstrmojo-charcoalbox subtle mstrmojo-cge-desc",emptyText:mstrmojo.desc(7921,"Enter Custom Group description here."),rows:1,bindings:{text:function(){var X=mstrmojo.all.mstrCGE.model.desc||this.emptyText;return K.encodeHtmlString(X);}},onclick:function(){var X=mstrmojo.all.mstrCGE,Y=U.delta(this.domNode,X.editorNode);X.openPopup("inlineTextRef",{left:Y.x-1+"px",top:Y.y-(U.isIE7?2:1)+"px",txtConfig:{cssClass:"mstrmojo-cge-desc-edit",value:X.model.desc||"",onEnter:function(){X.model.set("desc",K.trim(this.value));this.parent.close({enter:true});},onCancel:function(){this.set("value",X.model.desc);},prevTab:X.header.name,nextTab:null}});}}]},{scriptClass:"mstrmojo.Box",cssClass:"mstrmojo-CGE-content",alias:"content",children:[{id:"mstrCGEls",scriptClass:"mstrmojo.WidgetList",cssClass:"mstrmojo-CustomGroupEls",bindings:{items:"mstrmojo.all.mstrCGE.model.items"},multiSelect:false,renderOnScroll:false,draggable:true,dropZone:true,allowCopy:false,allowDrop:function(Z){var Y=Z&&Z.src,X=Y&&Y.widget;return(X===this);},itemIdField:null,itemDisplayField:"n",onchange:function(b){var Y=this.selectedIndex,a=this.ctxtBuilder.itemWidgets,Z;for(var c=0,X=a.length;c<X;c++){Z=a[c];if(Z&&c!=Y){Z.filterExpr.clearTreeSelect();}}},getNextId:function(){return ++B;},itemFunction:function(Z,X,Y){return new mstrmojo.CustomGroupEl({cssClass:"mstrmojo-charcoalbox",data:Z,parent:Y,state:Z.isNew?1:0,onRender:Z.isNew?function(){this.filterExpr.newCondition();delete this.data.isNew;}:mstrmojo.emptyFn,onclick:function(a){var b=U.eventTarget(a.hWin,a.e);if(b===this.titleNode){var c=mstrmojo.all.mstrCGE,e=U.delta(this.titleNode,c.editorNode),d=this;c.openPopup("inlineTextRef",{left:e.x+(U.isIE?1:0)+"px",top:e.y+(U.isIE7?-2:0)+"px",txtConfig:{cssClass:"mstrmojo-cge-elname-edit",value:this.data.n||"",onEnter:function(){var f=K.trim(this.value);if(f){d.data.n=f;d.paint();}this.parent.close({enter:true});},onCancel:function(){this.set("value",d.data.n);},prevTab:null,nextTab:null}});}},postCreate:function(){this.children=[{scriptClass:"mstrmojo.FilterExpr",slot:"exprNode",alias:"filterExpr",bindings:{items:"var ex = this.parent.data.expr; return ex ? [ex] : []"},draggable:true,dropZone:true,allowCopy:false,makeObservable:true,bandingCount:0,conditionCount:0,onadd:function(e){V(this);N.apply(this,[e]);},onremove:function(e){V(this);A.apply(this,[e]);},editable:true,onRender:function(){var f=I(this.items),e=this.tree;e.set("bandingCount",f.b);e.set("conditionCount",f.c);},isEditable:function d(f){if(!this.editable){return false;}var e=false;switch(f&&f.et){case D.ANDOR:case D.MQ:case D.AQ:case D.AL:case D.AC:case D.MC:case D.AE:case D.R:case D.F:e=true;break;case D.XML:e=!f.xml;}if(!e){mstrmojo.all.mstrCGE.set("readOnly",true);}return e;},onnodeclick:function c(e){if(!this.editable){return ;}C(this.data,this,e&&e.part);},onnodeadd:N,onnoderemove:A,allowDrop:function a(e){var g=e&&e.src,j=g&&g.data,i=j&&j.et,h=(i===D.B),f=this.tree;return i&&((h&&(f.conditionCount===0))||(!h&&(f.bandingCount===0)));},onNew:function b(e){C(e.data,e.widget.ctxtBuilder.itemWidgets[e.index],"condition");}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-addCondition",text:mstrmojo.desc(1994,"Add Condition"),slot:"exprToolsNode",onclick:function(){this.parent.filterExpr.newCondition(null,true);},bindings:{enabled:function(){return this.parent.filterExpr.bandingCount===0;}}}];}});}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-CGE-newElement",text:mstrmojo.desc(7922,"New Custom Group Element"),alias:"addBtn",title:mstrmojo.desc(7923,"Add new Custom Group Element"),onclick:function(){var X=mstrmojo.all.mstrCGEls;var Y=X.add([{n:M(X.items),did:++B,isNew:true}]);X.scrollTo(Y);}}]},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBar",cssText:"width: 100%",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HBox",cssClass:"left",cssText:"border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(4596,"Format..."),onclick:function(){var X=mstrmojo.all.mstrCGE;X.openPopup("formatPopupRef",{zIndex:X.zIndex+10});},bindings:{enabled:function(){return mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(7924,"Options..."),onclick:function(){var X=mstrmojo.all.mstrCGE;X.openPopup("optionsRef",{zIndex:X.zIndex+10});}}]},{scriptClass:"mstrmojo.HBox",cssText:"float:right; border-collapse: separate",cellSpacing:3,children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(5891,"Save"),onclick:function(){var Y=mstrmojo.all.mstrCGE,X=Y.model,d=X.did,b=Y.isValid(true),a=mstrmojo.desc(8113,"New Custom Group");if(b){if(!d){Y.openPopup("saveasRef",{name:X.n||a,desc:X.desc||"",folderLinksContextId:22,rootFolderID:X.pf,saveParams:H(true),zIndex:Y.zIndex+10});return ;}var Z=this,c=H(false);this.set("enabled",false);this.set("iconClass","mstrmojo-WaitIcon");mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){Z.set("enabled",true);Z.set("iconClass","");},failure:function(e){Z.set("enabled",true);Z.set("iconClass","");mstrmojo.alert(e.getResponseHeader("X-MSTR-TaskFailureMsg"));}},c);}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(628,"Save As"),onclick:function(){var Y=mstrmojo.all.mstrCGE,X=Y&&Y.model,a=Y.isValid(true),Z=mstrmojo.desc(8113,"New Custom Group");if(a){Y.openPopup("saveasRef",{name:X.n||Z,desc:X.desc||"",folderLinksContextId:22,rootFolderID:X.pf,saveParams:H(true),zIndex:Y.zIndex+10});}},bindings:{enabled:function(){return !mstrmojo.all.mstrCGE.readOnly&&mstrmojo.all.mstrCGE.model.items.length>0;}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",text:mstrmojo.desc(221,"Cancel"),onclick:function(){mstrmojo.all.mstrCGE.close();}}]}]}],onOpen:function(){if(this.readOnly){mstrmojo.all.mstrCGE.set("title",mstrmojo.desc(8031,"Custom Group Editor (Read Only)"));mstrmojo.alert(mstrmojo.desc(8022));}},onClose:function(){this.readOnly=false;},getXML:function P(){var Y=this.model;var e='<exp> <nd et="14" n="OR" fn="20" ce="'+(Y.cgp.ce?-1:0)+'" isp="'+(Y.cgp.isp?-1:0)+'" ><nds>',Z="</nds></nd></exp>",d={a:true,a2:true,a3:true,agg:true,cc:true,ce:true,cgp:true,cs:true,desc:true,did:true,dmt:true,dmy:true,dtp:true,es:true,et:true,expr:true,f:true,flat:true,flt:true,fm:true,fm2:true,fm3:true,fn:true,fnt:true,fres:true,gb:true,isp:true,items:true,m:true,m2:true,m3:true,n:true,nds:true,not:true,pf:true,p:true,r:true,rps:true,st:true,t:true,utgt:true,utp:true,uts:true,v:true,xml:true},X={getArrItemName:function(k,h,j){return k.substr(0,k.length-1);},isSerializable:function(p,n,m){if(p=="xml"){var i=n[m].xml;return{att:'hasXML = "-1"',child:i};}else{if(mstrmojo.array.indexOf(["header_format","grid_format","child_header_format","child_grid_format"],p)>-1){var q=n[m][p];if(!q){return{};}var k="<"+p+">";for(var o in q){k+="<prs n='"+o+"'>";var j=q[o];for(var h in j){var l=j[h];k+="<pr n='"+h+"' v='"+(l=="pru"?"":l)+"'";k+=l=="pru"?' pru="1"':"";k+="/>";}k+="</prs>";}k+="</"+p+">";return{child:k};}}return(d[p])?true:false;},skipNull:true},c=Y.items,g=[];for(var a=0,b=c.length;a<b;a++){var f=c[a];expr=f.expr;expr.n=f.n;if(expr.fnt&&expr.fnt==T.FNT.PER&&expr.cs&&expr.cs[0]){expr.cs[0].v+="%";}g[a]=K.json2xml("nd",[{ce:f.ce||false,isp:f.isp||false,header_format:f.header_format,grid_format:f.grid_format,child_header_format:f.child_header_format,child_grid_format:f.child_grid_format},f.expr],X);}return e+g.join("")+Z;},inlineTextRef:{scriptClass:"mstrmojo.Popup",locksHover:true,slot:"containerNode",children:[{scriptClass:"mstrmojo.TextBox",alias:"txt",onTab:function(Y){if(this.onEnter){this.onEnter();}var X=U.shiftKey(Y.hWin,Y.e)?this.prevTab:this.nextTab;if(X&&X.onclick){X.onclick();}},onblur:function(){if(this.onEnter){this.onEnter();}},onEsc:function(){if(this.onCancel){this.onCancel();}this.parent.close({cancel:true});}}],onOpen:function(){var Y=this.txt,Z=this.txtConfig;if(Z){for(var X in Z){Y.set(X,Z[X]);}}Y.focus();},onClose:function(X){if(!X||(!X.cancel&&!X.enter)){this.txt.onEnter();}}},andOrPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-CGE-andOrPopup mstrmojo-ConditionWalk",cssText:"width: auto;",contentNodeCssClass:"mstrmojo-balloon",left:"250px",top:"15px",slot:"containerNode",autoClose:true,showTitle:false,draggable:false,openEffect:null,closeEffect:null,onOpen:function(){var X=this.condition,a=X&&X.data&&X.data.not,b=X&&X.parent,Y=b&&b.data,Z=(Y&&Y.fn)+(a?21:0);this.list.opening=true;this.list.set("selectedItem",isNaN(Z)?null:{did:Z});this.list.opening=false;},children:[{scriptClass:"mstrmojo.Dial",cssClass:"mstrmojo-CGE-andOrDial",alias:"list",itemMarkup:'<div class="dial-item {@css}">{@n}</div>',itemIdField:"did",items:[{did:19,n:J[19]},{did:20,n:J[20]},{did:19+21,n:J["19_21"]},{did:20+21,n:J["20_21"]}],onchange:function(){if(this.opening){return ;}var Y=this.parent,X=Y.condition,e=this.selectedItem,c=e&&e.did,b=c>21?true:null,a=c-(b?21:0);Y.close();var Z=X&&X.parent;if(Z&&Z.data&&Z.data.et===T.ET.ANDOR){Z.edit(X,a,b);}else{var f=X&&X.data;if(f&&(f.not!==b)){f.not=b;X.paint();}}}}]},conditionPopupRef:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-Editor-ConditionWalk",contentNodeCssClass:"mstrmojo-balloon",title:mstrmojo.desc(7953,"Condition Editor"),help:"condition_editor.htm",slot:"containerNode",onOpen:function(){this.walk.set("targets",this.targets);this.walk.set("targetsLastMod",this.targetsLastMod);this.walk.set("model",this.model);},onClose:function(){var X=this.condition;if(X.isEmpty()){X.del();}},children:[{scriptClass:"mstrmojo.ConditionWalk",alias:"walk",cssText:"height:"+G+"px",targets:null,ets:null,onOK:function(){var X=this.parent,Y=X.condition;Q.copy(this.model.get(),Q.clear(Y.data));Y.paint();X.close();}}]},isValid:function(a){var Z=mstrmojo.all.mstrCGE.model.items,X=Z.length,Y,b="";if(X>0){for(Y=0;Y<X;Y++){if(!Z[Y].expr){b+=Z[Y].n+",";}}if(b){b=b.replace(/,$/,"");mstrmojo.confirm(mstrmojo.desc(7947).replace("#",b),[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button"})]);return false;}}else{mstrmojo.confirm("Custom Group does not have any element defined. Please fix it before saving.",[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),null,null,{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button"})]);return false;}return true;}};})();