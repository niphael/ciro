var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},now:function now(){return new Date().getTime();},usesFrames:false};mstrmojo.gmaps={};(function(){var F=mstrmojo;F.global=(function(){var G=function(){return this;};return G.call(null);}());F.dbg=F.emptyFn;F.dbg_stack=F.emptyFn;F.dbg_xhr=F.emptyFn;F.dbg_profile=F.emptyFn;F.platform={};F.prompt={};F.settings={};F.ui={};F.ACL={};F.storage={};F.utils={};F.maps={};F.maps.androidmap={};F.maps.jsmap={};F.graph={};F.IPA={};F.ME={};F.Architect={};F.plugins={};F.gmaps={};F.DI={};F.qb={};F.WH={};F.txEditor={};F.express={ui:{}};F.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{}},selectors:{},ui:{}};F.iphone={};F.winphone={};F.mstr={};F.err=function E(I){var H=I.name+': "'+I.message+'"';if(F.debug){if(I.fileName){H+=" at\n    "+I.fileName;}if(I.hasOwnProperty("lineNumber")){H+=": "+I.lineNumber;}else{if(I.hasOwnProperty("line")&&I.sourceURL){var G=I.sourceURL.split("/");H+="("+G[G.length>1?G.length-1:0]+":"+I.line+")";}}}this.dbg(H);if(F.Dialog){F.alert(I.message,null,I.name);}else{window.alert(H);}};F.confirm=function B(G){return window.confirm(G);};F.alert=function D(G){window.alert(G);};var C=!!(/return true/.test(function(){return true;}));F.mixin=function A(K,I){if(K){I=I||{};var J=/this\.\_super/;var H=function(O,N){return function M(){var Q=this._super;this._super=N;var P=O.apply(this,arguments||[]);this._super=Q;return P;};};var G=K.__onmixin__;if(G){delete K.__onmixin__;}var L;for(L in K){if((typeof K[L]==="function")&&(!C||J.test(K[L]))){I[L]=H(K[L],I[L]);}else{I[L]=K[L];}}if(G){K.__onmixin__=G;}}return I;};}());(function(){var _xhr;var _missing={};var _G=mstrmojo.global,_app=_G.mstrApp||{},_jsRoot=_app.jsRoot||"../javascript/",_jsMojoRoot=_app.jsMojoRoot||"../javascript/mojo/js/source/",_isIE=!!document.all;function _fqcn2File(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../plugins/"+pluginName+"/javascript/"+_jsMojoRoot+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=_jsMojoRoot+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=_jsRoot+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}function _getXHR(){_xhr=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function _syncGet(file){var result=null;if(!_xhr){_getXHR();}if(_xhr){try{_xhr.open("GET",file,false);_xhr.send(null);result=_xhr.responseText||null;}catch(localerr){}if(!_isIE&&_xhr.abort){_xhr.abort();}}return result;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function _syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!_xhr){_getXHR();}if(_xhr){try{var config=mstrConfig,m=null;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(config&&config.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}_xhr.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);_xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}_xhr.send(params);result=_xhr.responseText||null;}catch(localerr){window.console.log(localerr);}}return result;}function _jsGet(file,nullCheck){var js=_syncGet(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if(_missing[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(_fqcn2File(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}_missing[fqcn]=true;return false;}};var _L=mstrmojo.loader,_LL=_L.loaded;var _reqCache={};mstrmojo.requiresCls=function reqCls(){var as=arguments,ns=[],len=as.length,i;for(i=0;i<len;i++){var n=as[i];if(!n||_LL[n]||_reqCache[n]||_missing[n]){continue;}if(!n.match(/^mstrmojo\.plugins\./)){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!_reqCache[s]){ns.push(s);_reqCache[s]=true;}}}ns.push(n);_reqCache[n]=true;}var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!_L.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}return true;};var _D=mstrmojo.descriptors,_dPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];_D[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var _reqDesc=function(prefix,ids){var as=ids,ns=[],len=as.length,i;for(i=0;i<len;i++){var k=as[i];if(k&&!(_D.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=_syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var p=prefix,args=[].slice.call(arguments);args[0]=null;_reqDesc(p,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){_reqDesc(_dPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if(_D.hasOwnProperty(_dPrefix+descID)){return _D[_dPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";_D[_dPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if(_D.hasOwnProperty(prefix+descID)){return _D[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";_D[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){_LL[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){_reqCache[fqcn]=false;_LL[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function dcl(SuperCls,mixins,config){function constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){constr.prototype=new SuperCls({dontInit:true});constr.prototype.constructor=constr;}var proto=constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){_LL[config.scriptClass]=true;}}return constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getVRN(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));if(!isSameWebApp){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>0){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};}());(function(){var L=/\{\@([^\}]+)\}/gm,H=/\</gm,P=/\>/gm,D=/\S/,O=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],E=new RegExp("(\\"+O.join("|\\")+")","g"),Q={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'};var J=function(S){if(S==null){return"null";}var T=typeof (S);if(T!="object"){return T;}else{if(S.length===undefined){return"object";}else{return"array";}}};var R={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function F(T,V){if(!T){return"";}var U=[];for(var S in V){U.push(S.k||S);}return T.replace(new RegExp(U.join("|"),"g"),function(W){var X=V[W];return X.v||X;});},trim:function N(S){return(S&&S.replace)?S.replace(/^\s+/,"").replace(/\s+$/,""):S;},ellipsize:function A(U,T){var S=this.trim(U.substr(0,(T||1)-1));if(S!==U){S+="&hellip;";}return S;},isEmpty:function I(S){return(S==null)||!(D.test(S));},regEscape:function M(S){return S.replace(E,"\\$1");},encodeXMLAttribute:function(S){return mstrmojo.string.multiReplace(S,Q);},encodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,C);},decodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,K);},htmlAngles:function(S){S=String(S);if(S!=null){return S.replace(H,"&lt;").replace(P,"&gt;");}return S;},apply:function G(S,T){if(!S){return"";}return S.replace(L,function U(V,W){return(W in T&&T[W]!==null)?T[W]:"";});},json2xml:function(f,b,V){if(!(b instanceof Array)){b=[b];}var T=V&&V.isSerializable,Z=(V.convertBoolean===false)?false:true;var c=[],S=[],U,g,k;for(var Y=0,h=b.length;Y<h;Y++){var j=b[Y];for(U in j){if(T){var a=T(U,b,Y);if(a!==true){if(a===false){continue;}else{if(a.att){c.push(a.att);}if(a.child){S.push(a.child);}continue;}}}g=j[U];k=J(g);switch(k){case"array":S.push("<"+U+">");for(var W=0,X=g.length;W<X;W++){var d=V.getArrItemName(U,g,W)||W;S.push(this.json2xml(d,g[W],V));}S.push("</"+U+">");break;case"object":S.push(this.json2xml(U,g,V));break;case"string":c.push(U+'="'+mstrmojo.string.encodeXMLAttribute(g)+'"');break;case"boolean":c.push(U+'="'+((Z)?(g?"-1":"0"):g)+'"');break;case"null":if(!V.skipNull){c.push(U+'="'+V.nullValue+'"');}break;default:c.push(U+'="'+g+'"');break;}}}return"<"+f+" "+c.join(" ")+">"+S.join("")+"</"+f+">";},escape4HTMLText:function B(Z){if(!Z||!Z.replace){return Z;}var W=/\"/gm;var U="&quot;";var a=/\&/gm;var Y="&amp;";var X=/\</gm;var S="&lt;";var V=/\>/gm;var T="&gt;";return Z.replace(a,Y).replace(W,U).replace(X,S).replace(V,T);},parseUri:function(W,T){T=T||R;var S=T.parser[((T.strictMode)?"strict":"loose")].exec(W),V={},U=14;while(U--){V[T.key[U]]=S[U]||"";}V[T.q.name]={};V[T.key[12]].replace(T.q.parser,function(Y,X,Z){if(X){V[T.q.name][X]=Z;}});return V;}});})();(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function C(D){if(!D||!D.length){return function(){};}return function(){for(var F=0,E=D.length;F<E;F++){D[F].apply(this,arguments);}};},wrapMethods:function B(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){D[G]=(G in D&&typeof (F)=="function")?mstrmojo.func.composite([F,D[G]]):F;});return D;},addMethods:function A(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){if(!(G in D)&&typeof (F)=="function"){D[G]=F;}});return D;}});})();mstrmojo._ShowsStatus=mstrmojo.provide("mstrmojo._ShowsStatus",{showStatus:function shwSts(C,B,D){var E=this._STATUS;if(!this.hasRendered||!E){return ;}if(!C){if(this.showingStatus){E.style.display="none";}}else{if(E){var A=this._STATUS_TXT&&(this._STATUS_TXT.innerHTML=B||"");A=this._STATUS_BAR&&(this._STATUS_BAR.style.width=(D||0)+"%");if(!this.isStatusBarPositioned){E.style.top=Math.max((this.scrollboxHeight||0)-50,12)+"px";this.isStatusBarPositioned=true;}if(!this.showingStatus){E.style.display="block";}}}this.showingStatus=C;},updateStatus:function updSts(A,B){this.showStatus(this.showingStatus,A,B);}});(function(){mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function K(R,T){var S=0,Q=(R&&R.length)||0;for(;S<Q;S++){if(R[S]==T){return S;}}return -1;},indexOfMulti:function N(U,X){if(!X){return{indices:null,map:{},count:0};}var V=X.length,W=new Array(V),Q={},Y=0;for(var T=0,S=(U&&U.length)||0;T<S;T++){var Z=U[T];for(var R=0;R<V;R++){if(X[R]===Z){W[R]=T;Q[R]=T;Y++;break;}}}return{indices:W,map:Q,count:Y};},forEach:function G(R,U,T){for(var S=0,Q=(R&&R.length)||0;S<Q;S++){if(T){if(U.call(T,R[S],S,R)===false){break;}}else{if(U(R[S],S,R)===false){break;}}}},filter:function B(S,V,T){var R=[],W=0;for(var U=0,Q=S&&S.length||0;U<Q;U++){if(V(S[U])){R[W]=S[U];W++;if(T&&T.max&&(W>=T.max)){break;}}}return R;},find:function H(R,V,S){for(var T=0,Q=R&&R.length||0;T<Q;T++){var U=R[T];if(U&&U[V]==S){return T;}}return -1;},findBin:function E(S,W,X,R){var V=R?R:S.length,T=-1,Q,U=W[X];while(V-T>1){if(S[Q=V+T>>1][X]<U){T=Q;}else{V=Q;}}return S[V][X]===U?V:-1;},search:function P(X,T,V){var U=X.length,S=-1,R,W=T.toUpperCase(),Q=T.length;while(U-S>1){if(X[R=U+S>>1][V].substr(0,Q).toUpperCase()<W){S=R;}else{U=R;}}return U;},findMulti:function N(V,R,Y){if(!Y){return{indices:null,map:{},count:0};}var W=Y.length,X=[],Q={},Z=0;for(var U=0,T=(V&&V.length)||0;U<T;U++){var b=V[U][R];for(var S=0;S<W;S++){if(Y[S][R]===b){X[S]=U;Q[S]=U;Z++;break;}}}return{indices:X,map:Q,count:Z};},removeItem:function I(Q,S){var R=this.indexOf(Q,S);if(R>-1){this.removeIndices(Q,R,1);}return R;},removeItems:function C(Q,V,R){var T=this.findMulti(Q,V,R);if(T.count){var S=T.indices.concat().sort(this.numSorter).slice(0,T.count);for(var U=S.length-1;U>-1;U--){Q.splice(S[U],1);}}},numSorter:function J(R,Q){return Number(R)-Number(Q);},stringSorter:function O(S,R){var Q=S.toLowerCase();var T=R.toLowerCase();if(Q<T){return -1;}else{if(Q>T){return 1;}else{return 0;}}},removeIndices:function M(Q,S,R){Q.splice(S,R);},insert:function F(R,Q,S){if(!R){R=[];}if(Q==null){Q=R.length;}Array.prototype.splice.apply(R,[Q,0].concat(S));return R;},hash:function L(R){var T={};for(var S=0,Q=(R&&R.length)||0;S<Q;S++){T[R[S]]=true;}return T;},get:function A(R,T){if(!T){return null;}var S=[];for(var U=0,Q=T.length;U<Q;U++){S[U]=R[T[U]];}return S;},deepSortArr:function D(R,T,Q,S){return R.sort(function(V,U){return(!S?(V[Q][T]<=U[Q][T]):(V[Q][T]>U[Q][T]))?-1:1;});}});})();(function(){var R=Math;function AA(G,b){return b||(G||window).event;}var Ab=!!document.all,r=navigator.userAgent,g=!Ab&&!!r.match(/Firefox/),n=0,s=!!r.match(/Android/),AV=!!r.match(/iPad/),AP=!!document.createTouch||s,q=!!r.match(/PlayBook/),S=!!r.match(/Windows Phone/),V=Ab&&!!r.match(/MSIE 10/),Ac=!Ab&&!!r.match(/Trident.*rv/),t=Ab&&!V,f=g?"-moz-":Ab?"":"-webkit-",AG=g?"Moz":V?"":Ab?"ms":"webkit",AN=(V?"t":"T"),AJ=AG+AN+"ransition",AZ=AW(),AS=AD(),z=W(),A=Q(),o=h();function AW(){return AG+AN+"ransform";}function AD(){return AJ+"Property";}function W(){return AJ+"Duration";}function Q(){return(V||g)?"transitionend":"webkitTransitionEnd";}function h(){return AG+"BoxShadow";}function AM(){if(!n&&g){var G=r.match(/.*Firefox\/([\d|\.]*).*/);if(G){n=parseFloat(G[1],10);}}return n;}function Aa(){var Ae=0,Ai=0,Af=window,Ag=document,G=Ag.body,Ah=Ag.documentElement;if(typeof Af.pageYOffset=="number"){Ai=Af.pageYOffset;Ae=Af.pageXOffset;}else{if(G&&(G.scrollLeft||G.scrollTop)){Ai=G.scrollTop;Ae=G.scrollLeft;}else{if(Ah&&(Ah.scrollLeft||Ah.scrollTop)){Ai=Ah.scrollTop;Ae=Ah.scrollLeft;}}}return{x:Ae,y:Ai};}function AE(G){G=G||0;G=String(G);return((G.indexOf("%",0))!=-1)?G:(G+"px");}function AK(d,Ag,Af,Ae,w){if(!mstrmojo.dom.isWinPhone){Ae=(Ae||false||this.isHWAccelerated);}else{Ae=false;}var b=w+(Ae?"3d":"")+"(",G=Ae?(","+Af+")"):")";return b+d+","+Ag+G;}var L=1,AT=2,Y=3,D=4,K=5;function x(Ag,Af,Aj){var Ai=Ag.style,b=Ai.display,Ae=this.windowDim(),w=Aa();Ai.display="block";var Ah=Ae.w-Ag.clientWidth,Ak=Ae.h-Ag.clientHeight,G={4:0,5:Ah,3:Ah/2},d={1:0,3:Ak/2,2:Ak};Ai.left=G[Af]+w.x+"px";Ai.top=d[Aj]+w.y+"px";Ai.display=b;}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:r,isIE:Ab,isIE6:Ab&&!!r.match(/MSIE 6/),isIE7:Ab&&!!r.match(/MSIE 7/),isIE8:Ab&&!!r.match(/MSIE 8/),isIE9:Ab&&!!r.match(/MSIE 9/),isIE10:V,isIEW3C:Ac,isNSIE:Ab&&!V,isDXIE:t,isFF:g,isWK:!!r.match(/AppleWebKit/),isSafari:!!r.match(/Safari/)&&!r.match(/Chrome/),isHWAccelerated:!s,isAndroid:s,isIPad:AV,isPlayBook:q,isWinPhone:S,supportsTouches:AP,TOUCHSTART:AP?"touchstart":"mousedown",TOUCHMOVE:AP?"touchmove":"mousemove",TOUCHEND:AP?"touchend":"mouseup",TOUCHCANCEL:AP?"touchcancel":"",RESIZE:AP?"orientationchange":"resize",CSS3_PREFIX:f,CSS3_BOXSHADOW:o,CSS3_TRANSFORM:AZ,CSS3_TRANSITION:AJ,CSS3_TRANSITION_PROPERTY:AS,CSS3_TRANSITION_DURATION:z,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},supports:function B(b){var G=this.isFF&&AM();switch(b){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||G>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||G>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);}return false;},replace:function F(d,G){if(!d||!G){return ;}var b=d.parentNode;if(b){b.replaceChild(G,d);}},attachEvent:function u(d,b,w,G){if(d.addEventListener){return d.addEventListener(b,w,!!G);}else{return d.attachEvent("on"+b,w);}},detachEvent:function AQ(d,b,w,G){if(!d){return ;}if(d.removeEventListener){d.removeEventListener(b,w,!!G);}else{d.detachEvent("on"+b,w);}},attachOneTimeEvent:function Z(w,b,Ae,G){var d=function(Af){Ae(Af);mstrmojo.dom.detachEvent(this,b,d,G);};this.attachEvent(w,b,d,G);w=null;return d;},captureDomEvent:function AI(Af,w,b,Ae,d){var G=mstrmojo.all[Af];if(G){G.captureDomEvent(w,b,Ae,d);}},translate:function O(d,b,Af,Ae,G,w){G=(G&&" "+G)||"";d.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(b,Af,Ae,w)+G;},createTranslateString:function T(G,w,d,b){G=AE(G);w=AE(w);d=AE(d);return AK(G,w,d,b,"translate");},createScaleString:function y(G,w,d,b){G=G||0;w=w||0;d=d||0;return AK(G,w,d,b,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function E(d,G,w,Af){var b=d.id+"-"+G,Ae=this._bufferConnects[b];if(!Ae){Ae=this._bufferConnects[b]={elId:d.id,eventName:G,timer:null,bufferSize:Af,listeners:[],callback:function(Ag){mstrmojo.dom._callback(Ag,mstrmojo.global,b);return true;}};this.attachEvent(d,G,Ae.callback);}Ae.listeners.push(w);},_callback:function N(Ae,G,d){if(!Ae){Ae=G.event;}var w=this._bufferConnects[d],Af=w&&w.timer;if(w&&!Af){var b=(w.bufferSize===null)?this._bufferSize:w.bufferSize;if(w.bufferSize){w.timer=G.setTimeout(function(){mstrmojo.dom.updateBuffers(d);},b);}else{mstrmojo.dom.updateBuffers(d);}}},updateBuffers:function AU(w){var Ae=this._bufferConnects[w],b=Ae&&Ae.listeners;for(var d=0,G=b&&b.length||0;d<G;d++){b[d]();}if(Ae&&Ae.timer){delete Ae.timer;}},detachBufferedEvent:function a(Af,d,Ag){if(!Af){return ;}var Ae=Af.id+"-"+d,Ah=this._bufferConnects[Ae],b=Ah&&Ah.listeners,G=(b&&b.length)||0;if(G){for(var w=G-1;w>-1;w--){if(b[w]==Ag){b.splice(w,1);}}if(!b.length){this.detachEvent(Af,d,Ah.callback);delete this._bufferConnects[Ae];if(Ah.timer){mstrmojo.global.clearTimeout(Ah.timer);}}}},eventTarget:function AB(G,b){b=AA(G,b);return b.target||b.srcElement;},ctrlKey:function AX(G,b){return AA(G,b).ctrlKey;},shiftKey:function AC(G,b){return AA(G,b).shiftKey;},getButton:function AO(G,b){return((AA(G,b)).button==2)?2:1;},getMousePosition:function j(Af,Ae){Ae=Ae||window;var w,Ai;if(mstrmojo.dom.isIE){Af=Af||Ae.event;var Ag=document,G=Ag.body,Ah=Ag.documentElement;w=Af.clientX+G.scrollLeft+(Ah.scrollLeft||0);Ai=Af.clientY+G.scrollTop+(Ah.scrollTop||0);}else{w=Af.pageX;Ai=Af.pageY;}return{x:w,y:Ai};},position:function(b,d){var Af={x:0,y:0};if(b&&b.getBoundingClientRect){try{Af=b.getBoundingClientRect();}catch(Ae){Af={left:0,top:0,right:0,bottom:0,height:0,width:0};}Af={x:Af.left,y:Af.top,w:Af.right-Af.left,h:Af.bottom-Af.top};if(this.isIE6||this.isIE7){var G=b.ownerDocument;if(G){var Ah=G.documentElement,Ag=Ah.getBoundingClientRect();Af.x-=Ag.left;Af.y-=Ag.top;}}}if(d){var w=Aa();Af.x+=w.x;Af.y+=w.y;}return Af;},delta:function J(d,G){G=G||document.body;var b=this.position(d),w=this.position(G);return{x:Math.round(b.x-w.x),y:Math.round(b.y-w.y)};},windowDim:function Ad(){var G=0,Ae=0,Af=window,Ag=document,Ah=Ag.documentElement,b=Ag.body;if(typeof (Af.innerWidth)=="number"){G=Af.innerWidth;Ae=Af.innerHeight;}else{if(Ah&&(Ah.clientWidth||Ah.clientHeight)){G=Ah.clientWidth;Ae=Ah.clientHeight;}else{if(b&&(b.clientWidth||b.clientHeight)){G=b.clientWidth;Ae=b.clientHeight;}}}return{w:G,h:Ae};},center:function AH(G){x.call(this,G,Y,Y);},bottomCenter:function H(G){x.call(this,G,Y,AT);},clearBrowserHighlights:function P(G){G=G||self;if(Ab){var Ag=G.document,Af=Ag&&Ag.selection,w=Af&&Af.empty;if(w){try{Af.empty();}catch(d){}}}else{var b=G.getSelection,Ae=b&&G.getSelection();if(Ae&&!Ae.isCollapsed){if(Ae.empty){Ae.empty();}else{if(Ae.removeAllRanges){Ae.removeAllRanges();}}}}},findAncestorByAttr:function AL(Ae,d,b,G){var Af=b?Ae:Ae&&Ae.parentNode;while(Af&&(Af!=G)){var w=Af.getAttribute&&Af.getAttribute(d);if(w!=null){return{node:Af,value:w};}Af=Af.parentNode;}return null;},findAncestorByName:function AY(d,Af,b,G){Af=Af&&Af.toLowerCase();var w=b?d:d&&d.parentNode;while(w&&(w!=G)){var Ae=w.nodeName;if(Ae&&(Ae.toLowerCase()==Af)){return w;}w=w.parentNode;}return null;},contains:function M(w,Ae,b,G){var d=Ae;if(!b){d=d.parentNode;}while(d){if(d==w){return true;}if(d===G){break;}d=d.parentNode;}return false;},preventDefault:function AR(G,b){if(!b){b=G.event;}if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}},stopPropogation:function k(G,b){if(!b){b=G.event;}if(b.stopPropogation){b.stopPropogation();}else{b.cancelBubble=true;}},firstTouch:function C(G,b){return b&&b.touches&&b.touches.length?b.touches[0]:(b||G.event);},firstChangedTouch:function I(G,b){return b&&b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:(b||G.event);},isLandscape:function X(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function(G){while(G){var b=G.mstrmojoId;if(b!=null){return mstrmojo.all[b];}G=G.parentNode;}return null;},setCaret:function(G,d){if(G.setSelectionRange){G.focus();G.setSelectionRange(d,d);}else{if(G.createTextRange){var b=G.createTextRange();b.move("character",d);b.select();}}}});var AF=mstrmojo.dom,c=window,l=document,U=l&&l.documentElement,p=l&&l.body;if(c.innerWidth){AF.getHorizontalScroll=function(){return c.pageXOffset;};AF.getVerticalScroll=function(){return c.pageYOffset;};}else{if(U&&U.clientWidth){AF.getHorizontalScroll=function(){return U.scrollLeft;};AF.getVerticalScroll=function(){return U.scrollTop;};}else{if(p.clientWidth){AF.getHorizontalScroll=function(){return p.scrollLeft;};AF.getVerticalScroll=function(){return p.scrollTop;};}}}})();(function(){mstrmojo.all={};var _A=mstrmojo.all;var _freeIdCounter=0;function _freeId(){for(;_freeIdCounter++;){if(!_A["mstr"+_freeIdCounter]){break;}}return"mstr"+_freeIdCounter;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function add(obj){if(!obj){return ;}var id=obj.id;if(id==null){id=_freeId();obj.id=id;}else{if(_A[id]){throw new Error("Tried to register 2 objects with same id: "+id);}}_A[id]=obj;},remove:function rmv(obj){if(obj&&obj.id!=null){delete _A[obj.id];}},dumpAll:function(){for(var o in _A){if(_A[o].id!=null){mstrmojo.dbg(_A[o].id+"("+(_A[o].scriptClass||"[unknown class]")+")");}}},ref:function ref(config,flags){if(!config){return null;}if(!flags){flags={};}var C=config;while(C){switch(typeof (C)){case"string":if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(config);}C=eval(C);break;case"function":return(flags.dontInst!==true)?new C():C;case"object":if(C.constructor===Object){var sc=C.scriptClass;if(sc){if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(sc);}var cls=eval(sc);if(cls){return new cls((flags.clone===true)?mstrmojo.hash.clone(C):C);}return null;}else{return C;}}else{return C;}break;default:return null;}}}});mstrmojo.insert=mstrmojo.registry.ref;})();mstrmojo.EnumRWUnitType={LAYOUT:0,HEADER:2,FOOTER:3,SUBSECTION:4,DETAILS:5,PAGEHEADER:6,PAGEFOOTER:7,PANELSTACK:8,PANEL:9,GRID:521,GRAPH:522,GRIDGRAPH:527,RECTANGLE:101,IMAGE:102,LINE:105,TEXTFIELD:106,HTMLCONTAINER:107,SELECTOR:111,ROUNDEDRECTANGLE:112,VISUALIZATION:114,MOJOVISUALIZATION:115};mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function rqMth(B){if(!B){return ;}if(typeof (this[B])==="function"){return true;}else{var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof (A)==="string"){this.requiresCls(A);return typeof (this[B])==="function";}return false;}},requiresCls:function req(mixins,callback){if(mixins){if(typeof (mixins)=="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin;for(var i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof (A)=="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresES(E,F,B){if(E&&E instanceof Array){if(E.length==0){F&&F.call(B);return ;}if(E[0].forceReload&&E[0].forceReload==false&&mstrmojo.LoadedExternalJSURLs[E[0].url]){E.splice(0,1);return this.requiresExternalScripts(E,F,B);}var A=document.createElement("script"),C=!!document.all;A.type="text/javascript";A.src=E[0].url;if(!E[0].callbackParamName){if(C){A.onreadystatechange=function(){if(A.readyState=="loaded"||A.readyState=="complete"){A.onreadystatechange=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}}};}else{A.onload=function(){A.onload=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}};}}else{if(E[0].callbackParamName.length!=0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy==true){var D=this;window.setTimeout(function(){D.requiresExternalScripts(E,F,B);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+E[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=E;mstrmojo._LoadsScript.callback=F;mstrmojo._LoadsScript.esScritsContext=B;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function A(N,M){if(N){M=M||{};for(var O in N){M[O]=N[O];}}return M;},copyProps:function C(P,Q,N){N=N||{};if(Q){for(var O=0,M=(P&&P.length)||0;O<M;O++){var R=P[O];if(R in Q){N[R]=Q[R];}}}return N;},forEach:function F(P,O,N){if(P){for(var M in P){if(N){if(O.call(N,P[M],M,P)===false){break;}}else{if(O(P[M],M,P)===false){break;}}}}},walk:function J(Q,O){if(!O){O=mstrmojo.global;}var P=Q.split(".");if(P.length==1){return O[Q];}for(var N=0,M=P&&P.length||0;N<M;N++){O=O[P[N]];if(!O){break;}}return O;},isEmpty:function(N){if(!N){return true;}for(var M in N){if(N[M]!=null){return false;}}return true;},clear:function L(N){if(N){for(var M in N){delete N[M];}}return N;},any:function(N,O){if(N){for(var M in N){return O?M:N[M];}}return undefined;},clone:function B(Q){if(!Q){return null;}var S;if(Q.constructor===Array){S=Q.concat();var R=S[0];if(R&&typeof (R)==="object"){for(var P=0,M=S.length;P<M;P++){S[P]=this.clone(Q[P]);}}}else{S={};for(var O in Q){var N=Q[O];if(N&&typeof (N)=="object"){S[O]=this.clone(N);}else{S[O]=N;}}}return S;},cloneArray:function I(N){var O=[];for(var P=0,M=(N&&N.length)||0;P<M;P++){O[P]=this.clone(N[P]);}return O;},keyarray:function G(O,P){var M=[];if(O){for(var N in O){M.push(P?Number(N):N);}}return M;},valarray:function H(O){var M=[];if(O){for(var N in O){M.push(O[N]);}}return M;},equals:function K(S,R){var T=mstrmojo.hash,N=S&&R||(!S&&!R&&(S===R));if(N&&S){N=(S.constructor===R.constructor);if(N){if(S.constructor===Array){var Q=S.length;N=(Q===R.length);if(N&&Q){for(var O=0;O<Q;O++){N=N&&T.equals(S[O],R[O]);}}}else{if(typeof (S)==="object"){var U=T.keyarray(S),P=T.keyarray(R);N=U.length===P.length;if(N){for(var M in S){N=N&&(T.equals(S[M],R[M]));}}}else{N=(S===R);}}}}return N;},obj2array:function(Q){for(var R in Q){var P=Q[R];if(P&&typeof (P)=="object"){Q[R]=this.obj2array(P);}}if("isArray" in Q&&(Q.isArray===true)){var O=[];for(var N=0,M=Q.length;N<M;N++){O.push(Q[N]);}return O;}else{return Q;}},min:function D(P,Q,R){var M;if(P){for(var O in P){var N=Q?P[O]:O;if(R){N=Number(N);}if((M==null)||(N<M)){M=N;}}}return M;},make:function E(N,O,M){if(!N||!O){return null;}if(N.attachEventListener){return N;}if(O.makeObservable){N=O.makeObservable(N,M)||N;}else{this.copy(O.prototype,N);if(N.init){N=N.init(M)||N;}}return N;}});})();(function(){mstrmojo.boxmodel={rangeIntersect:function C(H,F,G,E){if(H<G){return G<=F;}else{if(H>G){return H<=E;}else{return true;}}},px2Inches:function A(F,E){E=parseInt(E,10);return parseFloat((E/F.zf/F.dpi).toFixed(4),10);},offset:function D(G,F){var I=G,E=0,H=0;while(G){E+=G.offsetLeft;H+=G.offsetTop;G=G.offsetParent;if(G===F){break;}}for(e=I&&I.parentNode;e&&e!=F;e=e.parentNode){if(e.scrollTop){H-=e.scrollTop;}if(e.scrollLeft){E-=e.scrollLeft;}}return{left:E,top:H};},convert2px:function B(H,F){if(!/px$/.test(F)){var E=document.createElement("img"),G;E.style.zIndex=-1;E.style.left=F;H.appendChild(E);G=E.style.pixelLeft;H.removeChild(E);return G+"px";}else{return F;}}};})();(function(){mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,tooltipNode:null,postBuildRendering:function(){var B;if(this._super){B=this._super();}if(this.useRichTooltip){var D=this.tooltipNode||this.domNode,C=mstrmojo.dom,A=D&&D.getAttribute("title");if(A){D.setAttribute("title","");}if(!this._ontooltipover){var E=this.id;this._ontooltipover=function(G){var F=mstrmojo.all[E];F.showTooltip(G,self);};this._ontooltipout=function(G){var F=mstrmojo.all[E];F.hideTooltip(G,self);};}C.attachEvent(D,"mouseover",this._ontooltipover);C.attachEvent(D,"mouseout",this._ontooltipout);}return B;},showTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.open(this,B,A);},hideTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.close();},unrender:function(A){var C=this.tooltipNode||this.domNode,B=mstrmojo.dom;if(C&&this._ontooltipover){B.detachEvent(C,"mouseover",this._ontooltipover);}if(C&&this._ontooltipout){B.detachEvent(C,"mouseout",this._ontooltipout);}if(this._super){this._super(A);}}});})();(function(){var L=false;var W=null;var K=null;var D=null;var G=null;var Y=null;mstrmojo._CanLoadMapExternalScript={_mixinName:"mstrmojo._CanLoadMapExternalScript",callback:null,mixinParentMapObj:null,setPremiere:function O(Z){L=Z;},isPremiere:function C(){return L;},setPremiereKey:function A(Z){W=Z;},getPremiereKey:function P(){return W;},setTrialKey:function J(Z){G=Z;},getTrialKey:function E(){return G;},setLocaleLang:function N(Z){K=Z;},getLocaleLang:function I(){return K;},setLocaleRegion:function V(Z){D=Z;},getLocaleRegion:function X(){return D;},setChannel:function U(Z){Y=Z;},getChannel:function H(){return Y;},loadExternalScript:function M(b,c){var Z,a=this.getChannel();if(window.location.protocol=="https:"){Z="https://maps-api-ssl.google.com/maps/api/js?v=3&sensor=false&libraries=drawing,geometry";}else{Z="http://maps.google.com/maps/api/js?v=3&sensor=false&libraries=drawing,geometry";}Z+="&language="+this.getLocaleLang()+"&region="+this.getLocaleRegion();if(this.isPremiere()){Z=Z+"&client="+this.getPremiereKey();}else{Z=Z+"&key="+this.getTrialKey();}if(!!a){Z+="&channel="+a;}this.callback=b;this.mixinParentMapObj=c;mstrmojo._LoadsScript.requiresExternalScripts([{url:Z,callbackParamName:"callback",forceReload:true}],this.loadMarkerScript,this);},loadMarkerScript:function S(){mstrmojo.googleMapLibLoaded=true;mstrmojo.invalidateCls("mstrmojo.gmaps.CustomMarker");mstrmojo.invalidateCls("mstrmojo.gmaps.CircleMarker");mstrmojo.invalidateCls("mstrmojo.gmaps.TextMarker");mstrmojo.invalidateCls("mstrmojo.gmaps.DensityOverlay");mstrmojo.requiresCls("mstrmojo.gmaps.CustomMarker","mstrmojo.gmaps.TextMarker","mstrmojo.gmaps.CircleMarker","mstrmojo.gmaps.DensityOverlay");this.loadCoreCss();var a=this;this.loadGoogleMapVisCss();var Z=window.setInterval(function(){if(a.isGoogleMapVisCssLoaded()){window.clearInterval(Z);a.loadMap();}},50);},loadMap:function B(){this.callback.call(this.mixinParentMapObj);var Z=0;for(Z;Z<mstrmojo.gmaps.loadScriptListeners.length;Z++){mstrmojo.gmaps.loadScriptListeners[Z]();}},isOIVM:function R(){return !(!mstrApp||!mstrApp.isOIVM||!mstrApp.isOIVM());},loadCoreCss:function F(){var c=document.styleSheets;if(c){var a,b;for(a=0;a<c.length;a++){b=c[a];if(b.id=="mojocore"){return ;}}}var Z=document.createElement("link");Z.setAttribute("rel","stylesheet");Z.setAttribute("type","text/css");Z.setAttribute("href","../javascript/mojo/css/core.css");Z.setAttribute("id","mojocore");document.getElementsByTagName("head")[0].appendChild(Z);},isGoogleMapVisCssLoaded:function Q(){var b=document.styleSheets;if(b){var Z,a;for(Z=0;Z<b.length;Z++){a=b[Z];if((a.id=="googleMapVis")||(!!a.ownerNode&&a.ownerNode.id=="googleMapVis")){return true;}}}return false;},loadGoogleMapVisCss:function T(){if(this.isGoogleMapVisCssLoaded()){return ;}var Z=document.createElement("link");Z.setAttribute("rel","stylesheet");Z.setAttribute("type","text/css");Z.setAttribute("href","../style/mstr/googleMap.css");Z.setAttribute("id","googleMapVis");document.getElementsByTagName("head")[0].appendChild(Z);}};})();(function(){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var D=String.fromCharCode;function A(F){F=F.replace(/\r\n/g,"\n");var E="";for(var H=0;H<F.length;H++){var G=F.charCodeAt(H);if(G<128){E+=D(G);}else{if((G>127)&&(G<2048)){E+=D((G>>6)|192);E+=D((G&63)|128);}else{E+=D((G>>12)|224);E+=D(((G>>6)&63)|128);E+=D((G&63)|128);}}}return E;}function C(E){var F="",H=0,J=0,I=0,G=0;while(H<E.length){J=E.charCodeAt(H);if(J<128){F+=D(J);H++;}else{if((J>191)&&(J<224)){I=E.charCodeAt(H+1);F+=D(((J&31)<<6)|(I&63));H+=2;}else{I=E.charCodeAt(H+1);G=E.charCodeAt(H+2);F+=D(((J&15)<<12)|((I&63)<<6)|(G&63));H+=3;}}}return F;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function(H){var F=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(H&&H.indexOf("=?UTF-8?B?")===0){var G="",E;while((E=F.exec(H))!==null){G+=mstrmojo.base64.decode(E[1]);}return G;}return H;},encode:function(G){var E="";var N,L,J,M,K,I,H;var F=0;G=A(G);while(F<G.length){N=G.charCodeAt(F++);L=G.charCodeAt(F++);J=G.charCodeAt(F++);M=N>>2;K=((N&3)<<4)|(L>>4);I=((L&15)<<2)|(J>>6);H=J&63;if(isNaN(L)){I=H=64;}else{if(isNaN(J)){H=64;}}E+=B.charAt(M)+B.charAt(K)+B.charAt(I)+B.charAt(H);}return E;},decode:function(G){var E="",F=0;var N,L,J,M,K,I,H;G=G.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(F<G.length){M=B.indexOf(G.charAt(F++));K=B.indexOf(G.charAt(F++));I=B.indexOf(G.charAt(F++));H=B.indexOf(G.charAt(F++));N=(M<<2)|(K>>4);L=((K&15)<<4)|(I>>2);J=((I&3)<<6)|H;E+=D(N);if(I!=64){E+=D(L);}if(H!=64){E+=D(J);}}E=C(E);return E;}});})();mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){function G(S,V,U){var W=this._layoutWidgets[V],Z=S.slot,X=W.f,Y=W.p,T=(X&&X[Z]!==undefined),R=(Y&&Y[Z]!==undefined);if(Z&&((!U&&T)||R)){return T?X[Z]:(W.x*parseInt(Y[Z],10)/100)+"px";}return S[(V==="h")?"height":"width"];}function Q(T,S,R){if(T.ignoreLayout){return ;}if(T.setDimensions){T.setDimensions(S,R);}else{if(T.set){T.set("height",S);T.set("width",R);}}}function I(U){var S=this.children,W,Y;for(W=0,Y=(S&&S.length)||0;W<Y;W++){var T=S[W],Z=T.slot;if(Z){var X=G.call(this,T,"h",U),a=G.call(this,T,"w",U);this.setSlotDimensions(Z,X,a);Q(T,X,a);var R=G.call(this,T,"h",U),V=G.call(this,T,"w",U);if(R!==X||V!==a){Q(T,R,V);}this.setSlotDimensions(Z,R,V);}}this.afterLayout();}function F(X,T,V){var W=X.slot,U=T&&T.a;if(!U||U[W]===undefined){return ;}var R=this[W]["offset"+V],S=U[W];if(R===S){return ;}T.x-=(R-S);U[W]=R;}function N(R){this.beforeLayout();var S=this._layoutWidgets,T=R.src;F.call(this,T,S.h,"Height");F.call(this,T,S.w,"Width");I.call(this,true);}function E(T,W){if(!T){return null;}var R=this.children,d=W.toLowerCase(),X=parseInt(this[d],10),a,b,V,S,Y,Z,U,f,c;for(c in T){f=T[c];if(f.match(/px$/)){X-=parseInt(f,10);a=a||{};a[c]=f;}else{if(f.match(/\%$/)){b=b||{};b[c]=f;}else{V=V||{};V[c]=f;}}}if(V&&b){for(Y=0,Z=(R&&R.length)||0;Y<Z;Y++){U=R[Y];c=U.slot;if(U.slot&&V[c]&&!U.ignoreLayout){S=S||{};if(U.hasRendered){S[c]=this[U.slot]["offset"+W];X-=S[c];}else{S[c]=0;U.attachEventListener((U instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,N);}}}}return{f:a,p:b,a:S,x:X};}mstrmojo._HasLayout={_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function O(R){this._super(R);this.layoutConfig=mstrmojo.hash.clone(this.layoutConfig);},preBuildRendering:function M(){var T=this.cssText||"";var R=this.height;if(R&&R!=="auto"){T+="height:"+this.height+";";}var S=this.width;if(S&&S!=="auto"){T+="width:"+this.width+";";}this.cssText=T;return(this._super)?this._super():true;},postBuildRendering:function B(){this.doLayout();return this._super();},doLayout:function A(){var R=this.layoutConfig;if(!R){return ;}this.beforeLayout();this._layoutWidgets={h:E.call(this,R.h,"Height"),w:E.call(this,R.w,"Width")};I.call(this,false);},browserResized:function L(R){this.setDimensions(R.h,R.w);return true;},onwidthChange:function P(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.width=this.width;this.doLayout();},onheightChange:function D(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.height=this.height;this.doLayout();},adjustParentDimensions:function C(){var S=this.parent,R=S&&S._layoutWidgets;if(R){F.call(S,this,R.h,"Height");F.call(S,this,R.w,"Width");}},setDimensions:function K(T,S){if(this.height!==T||this.width!==S){this.height=T;this.width=S;var R=this.domNode;if(R){R.style.height=T;R.style.width=S;this.doLayout();}return true;}return false;},setSlotDimensions:function H(U,T,S){var R=this[U]&&this[U].style;if(!R){return ;}if(T!==undefined&&R.height!==T){R.height=T;}if(S!==undefined&&R.width!==S){R.width=S;}}};mstrmojo._HasLayout.getSlotSize=function J(U,V){var S=U&&U.prototype.layoutConfig;if(S){var T=S.h,R=S.w;return{h:(T&&T[V])||undefined,w:(R&&R[V])||undefined};}return null;};}());(function(){mstrmojo._IsPopup={visible:false,opener:null,onOpen:null,onClose:null,open:function B(E,D){if(this.updatePopupConfig){this.updatePopupConfig(D,E);}else{if(D){for(var C in D){this.set(C,D[C]);}}}this.set("opener",E);if(!this.hasRendered){this.render();}if(this.nudge){this.domNode.style.top="-10000px";}this.set("visible",true);if(this.nudge){this.nudge();}if(this.onOpen){this.onOpen();}},close:function A(C){if(this.onClose){this.onClose(C);}this.set("visible",false);this.set("opener",null);}};})();(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1;var url=[];if(params){for(var p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp;m=null;if(typeof (microstrategy)!="undefined"&&microstrategy){m=microstrategy;}if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();baseUrl=baseUrl||mstrConfig.taskURL;}if(params&&!params.sessionState&&app&&app.sessionState){params.sessionState=app.sessionState;}var ptp=app.persistTaskParams||m&&m.persistParams;if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){params=null;}else{params=encodeParams(params);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}xhr.send(params);if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var i=0,cnt=methods.length;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var _rtn=null;try{_rtn=eval("("+rt+")");}catch(ex){_rtn=rt&&mstrmojo.string.trim(rt);}return _rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&("upload" in xhr)&&("onprogress" in xhr.upload));}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status==0){}else{var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp();}else{var _orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(_orig.apply?_orig.apply(xhr,[name]):_orig(name));};if(typeof callback.failure=="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);}finally{if(typeof callback.complete==="function"){callback.complete();}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestInProgress:false,retryDelay:1,lookup:null,cancel:function(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestInProgress--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestInProgress&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestInProgress){this.cancel();}this.requestInProgress++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:function(ths){return function(){ths.advanceQueue.call(ths);};}(this),success:function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this)});xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}sendXhr.call(this,xhr,method,baseUrl,params);}}}},advanceQueue:function advanceQueue(){this.requestInProgress--;if(this.queue.length===0){return ;}var req=this.queue.shift();this.request(req.method,req.baseUrl,req.callback,req.params,true);},_searchForCacheRequest:function _searchForCacheRequest(params){for(var i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i]["params"])){return this.lookup[i];}}return null;}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){mstrApp.onSessionExpired();}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);script.src=appendUrlParams("GET",url,params);setTimeout(function(){window[jsonp]&&window[jsonp]();},this.timeToWait);}};})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var B=false,D="mstrmojo.Binding",A="bindings",C=mstrmojo.registry;function E(K){for(var L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function F(K,M){if(!B){mstrmojo.requiresCls(D);B=true;}for(var N in K){var J=K[N];if(J==null){continue;}var L=typeof (J);if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=C.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function G(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[A]);if(K){delete this[A];this._set_bindings(A,K,true);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children;if(M){for(var L=0,J=M.length;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function I(){var J=this.bindings;if(J){E(J);delete this.bindings;}},_set_bindings:function H(L,J){var K=this[A];if(J!==K){if(K){E(K);}this[A]=J;if(J){F(J,this);}return true;}return false;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo._HasPopup={openPopup:function B(G,D){var C=!!G&&(typeof (G)==="string")&&!G.match(/\./)&&!!this[G],I=mstrmojo.registry.ref(C?this[G]:G,true);if(I&&I.open){if(C){this[G]=I;}this.disposables.push(I);var F=I.slot&&this[I.slot];if(F){if(I.parent!==this){if(this.addChildren){this.addChildren(I);}else{var H=false,E=I.domNode||I.placeholder;if(E&&typeof (E)==="string"){E=document.getElementById(E);}if(!E){H=true;E=document.createElement("span");I.placeholder=E;}if(H||(E.parentNode!==F)){F.appendChild(E);}}}}I.open(this,D);this._lastOpened=I;}},closePopup:function A(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}};})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,f,V,X){var W=b,Z;while(Z=W.match(f)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,h=S.idx2evt,Z=S.parts;var f=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[h[f-1].context][Z[f-1]]:(S.host?W[S.host]:this.parent),T=Z[f];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var g=c[T+"_bindEvents"]||(T+"Change");if(typeof (g)=="string"){g=[g];}var Y=[];for(var a=0,X=g.length;a<X;a++){Y[a]=c.attachEventListener(g[a],b,"_callback");}for(var a=0;a<g.length;a++){d[c.id+"_"+g[a]]=f;}h[f]={context:c.id,evts:g,subs:Y};}c=c[T];T=S.parts[++f];}},_detachChain:function G(S,T){var U=mstrmojo.all,k=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=k.length;if(Y<b){for(;Y<b;Y++){var Z=k[Y];if(!Z){break;}var W=Z.context,c=U[W],h=Z.evts;if(c&&c.detachEventListener){var l=Z.subs;for(var g=0,V=l.length;g<V;g++){c.detachEventListener(l[g]);}}k[Y]=null;for(var X=0,f=h.length;X<f;X++){delete d[W+"_"+h[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var T=mstrmojo.dom,S,G=mstrmojo.global.document;function P(V){S.startDragCheck(self,V);}var A,O,J="mstrmojo-dnd-avatar",I;function K(X,V,W){if(W!=null){O.innerHTML=W;}I.left=X.x+"px";I.top=X.y+"px";}function H(V,W){if(!A){A=G.createElement("div");I=A.style;A.className=J;A.innerHTML='<div class="'+J+'-inner"></div>';O=A.firstChild;G.body.appendChild(A);}K(W,true,V);I.display="block";}function D(){if(A){I.display="none";}}function B(V){var W=++S.ctxt.moveCount;if(W>=S.minMoves){S.stopDragCheck(self,V);S.startDrag(self,V);}}function E(V){S.stopDragCheck(self,V);}function M(V){S.onDragMove(self,V);}function Q(V){S.stopDrag(self,V);}function N(V){if(!V){return ;}if(!V.hWin){V.hWin=window;}if(!V.e){V.e=V.hWin.event;}V.node=T.eventTarget(V.hWin,V.e);V.pos=T.getMousePosition(V.e,V.hWin);return V;}function F(W){var V=T.findWidget(W);while(V){if(V.draggable){return V;}V=V.parent;}return null;}function U(W,X){var V=T.findWidget(W);while(V){if(V.dropZone){if(V.allowDrop&&V.allowDrop(X)){return V;}}V=V.parent;}return null;}function L(V){if(this.set){this.set("allowingDrop",true);}}function C(V){if(this.set){this.set("allowingDrop",false);}}var R=C;mstrmojo.dnd=mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){T.attachEvent(G,"mousedown",P);mstrmojo.dndEnabled=true;}},disable:function(){T.detachEvent(G,"mousedown",P);},startDragCheck:function(V,W){delete this.ctxt;var X=N({hWin:V,e:W});this.ctxt={src:X,moveCount:0};if(this.minMoves){T.attachEvent(G,"mousemove",B);T.attachEvent(G,"mouseup",E);}else{this.startDrag(V,W);}},stopDragCheck:function(V,W){T.detachEvent(G,"mousemove",B);T.detachEvent(G,"mouseup",E);},startDrag:function(V,X){var Z=this.ctxt;Z.id=new Date();var Y=Z.src,W=F(Y.node);if(!W){return ;}Y.widget=W;Y.data=W.getDragData&&W.getDragData(Z);if(W.ondragstart){if(W.ondragstart(Z)===false){return ;}}T.clearBrowserHighlights();T.preventDefault(self,X);T.attachEvent(G,"mousemove",M);T.attachEvent(G,"mouseup",Q);if(W&&!W.ownAvatar){H(Y.data&&Y.data.html,Y.pos);}},stopDrag:function(V,Z){T.detachEvent(G,"mousemove",M);T.detachEvent(G,"mouseup",Q);var a=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,a);X.widget=W;a.tgt=X;if(W){if(W.ondrop){W.ondrop(a);}else{R.apply(W,[a]);}}var Y=a.src.widget;if(Y&&Y.ondragend){Y.ondragend(a);}if(Y&&!Y.ownAvatar){D();}},onDragMove:function(V,Z){if(T.isSafari){T.clearBrowserHighlights();}var b=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,b);X.widget=W;var a=b&&b.tgt&&b.tgt.widget;b.tgt=X;if(a!==W){if(a){if(a.ondragleave){a.ondragleave(b);}else{C.apply(a,[b]);}}if(W){if(W.ondragenter){W.ondragenter(b);}else{L.apply(W,[b]);}}}else{if(W){if(W.ondragover){W.ondragover(b);}}}var Y=b.src.widget;if(Y&&Y.ondragmove){Y.ondragmove(b);}if(Y&&!Y.ownAvatar){K(X.pos,!!W);}}});S=mstrmojo.dnd;S.enable();})();(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof (W)=="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget.apply(this,[]);}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children;for(var Y=0,W=(X&&X.length)||0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);for(var X=0,W=(Y&&Y.length)||0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props;for(var Z in Y){var X=Y[Z],W=X.ease;if(typeof (W)=="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props;for(var a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}else{return parseInt(W*Y,10)/W;}}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}else{if(X===0){return W;}else{return W+Z*I(X,Y);}}},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}else{return W+Z*Math.sin((Math.PI/2)*X/Y);}},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}else{return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}else{if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}else{if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}else{return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;}}}},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}else{return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var F=mstrmojo.dom,L=mstrmojo.string;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:F.isNSIE?"block":"table",DISPLAY_CELL:F.isNSIE?"block":"table-cell",MINHEIGHT:F.isIE6?"height":"minHeight",addClass:function H(V,U){if(!V){return ;}if(U.constructor!==Array){U=[U];}var R=V.className||"",X=" "+R+" ",S=false;for(var T=0,Q=U.length;T<Q;T++){var W=U[T];if(!X.match(new RegExp("\\s"+W+"\\s"))){R+=" "+W;S=true;}}if(S){V.className=L.trim(R);}},removeClass:function M(U,T){if(!U){return ;}if(T.constructor!==Array){T=[T];}var R=" "+(U.className||"")+" ";for(var S=0,Q=T.length;S<Q;S++){R=R.replace(new RegExp("\\s"+T[S]+"\\s","g")," ");}U.className=L.trim(R);},addWidgetCssClass:function G(T,R){var Q=T.cssClass,S=(Q&&Q.split(" "))||[];if(R.constructor!==Array){R=[R];}T.cssClass=S.concat(R).join(" ");},toggleClass:function N(S,R,Q){if(Q){this.addClass(S,R);}else{this.removeClass(S,R);}},applyShadow:function D(U,V,T,S,Q){var R=U.style;if(F.isDXIE){R.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+V+"px, OffY="+T+"px, Color='"+Q+"')";}else{if(F.isFF||F.isWK||F.isIE10){R[F.CSS3_BOXSHADOW]=V+"px "+T+"px "+S+"px "+Q;}}},removeShadow:function O(R){var Q=R.style;if(F.isDXIE){}else{if(F.isFF||F.isWK||F.isIE10){Q[F.CSS3_BOXSHADOW]="";}}},setOpacity:function A(R,T){if(F.isDXIE&&!F.isIE9){var U=R.currentStyle.filter;var Q=null;if(U.length>0){Q=R.filters["DXImageTransform.Microsoft.Alpha"];}if(Q){Q.opacity=T;Q.enabled=(T!=100);}else{if(T<100){var S="progid:DXImageTransform.Microsoft.Alpha(Opacity="+T+")";R.style.filter=(U?U:"")+" "+S;}}}else{R.style.opacity=T/100-(F.isIE9?0.00001:0);}},buildGradient:function C(R,T,Q){if(F.supports(F.cssFeatures.GRADIENTS)){var S={};if(F.isDXIE){S.n="filter";S.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+R+",StartColorStr='"+T+"',EndColorStr='"+Q+"')";}else{if(F.isFF){S.n="background-image";S.v="-moz-linear-gradient("+((R===0)?"top":"left")+","+T+","+Q+")";}else{if(F.isWK){S.n="background";S.v="-webkit-gradient(linear,"+((R===0)?"left top, left bottom":"left top, right top")+",from("+T+"),to("+Q+"))";}else{if(F.isIE10||F.isIEW3C){S.n="background";S.v="linear-gradient("+((R===0)?"to bottom":"to right")+","+T+","+Q+")";}}}}return S;}return null;},buildRoundCorners:function K(V,U){if(F.supports(F.cssFeatures.ROUND_CORNERS)){var R=V+"px";var X=R+((U)?" "+R+" 0 0":"")+";";if(F.isFF){return"-moz-border-radius:"+X;}else{if(F.isWinPhone||F.isIE10){return"border-radius:"+X;}else{if(F.isWK){if(!U){return"-webkit-border-radius:"+R+";";}else{var W=["left","right"],T=[],Q=-1;for(var S=0;S<2;S++){T[++Q]="-webkit-border-top-"+W[S]+"-radius:"+R;T[++Q]="-webkit-border-bottom-"+W[S]+"-radius:0";}return T.join(";");}}}}}return"";},getBorderWidthsOrPaddings:function E(R,U){var V={t:0,r:0,b:0,l:0,h:0,w:0};if(!R){return V;}var S=R.split(" "),Q=S.length;for(var T=0;T<Q;T++){S[T]=Math.round(U*parseFloat(S[T],10)/72);}if(Q<4){if(Q===1){S[1]=S[2]=S[3]=S[0];}else{S[3]=S[1];if(Q===2){S[2]=S[0];}}}V.t=S[0];V.r=S[1];V.b=S[2];V.l=S[3];V.h=V.t+V.b;V.w=V.l+V.r;return V;},getBorderWidths:function I(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},getPaddings:function J(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},parkAfterFade:function P(Q){var R=Q.target.style;if(R.opacity==0){R.left="-10000px";window.setTimeout(function(){R.opacity=0.99;},0);return true;}return false;},getStyleValue:function B(Q,S){if(Q.currentStyle){S=S=="float"?"styleFloat":S;value=Q.currentStyle[S];}else{if(document.defaultView&&document.defaultView.getComputedStyle){S=S=="float"?"cssFloat":S;var R=document.defaultView.getComputedStyle(Q,null);value=R?R[S]:null;}}return value;},getComputedStyle:function(Q,S){var R=(window.getComputedStyle)?function(T,U){return window.getComputedStyle(T,U||null);}:function(T){return T.currentStyle||{};};mstrmojo.css.getComputedStyle=R;return R(Q,S);}});})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom");var M=mstrmojo.string,T=mstrmojo.dom;var N=mstrmojo.useFrames?null:document.createElement("span");var B=/\mstrAttach\:([\w\,]+)/g;var R;function O(X){if(R===undefined){R=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return X.replace(B,function W(c,f){var Z=f.split(","),a=[],Y=Z.length,b;for(b=0;b<Y;b++){var d=Z[b];if(d){if(R){if(d.indexOf("mouse")>-1){continue;}else{if(d==="click"){d="touchend";}}}a.push("on"+d+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+d+"', self, event)\"");}}return a.join(" ");});}var P="preBuildRendering",D="buildRendering",A="postBuildRendering";function E(Y){var X=Y.markupString;if(X.match(/mstrAttach:/)){X=O(X);if(Y.markupString===Y.constructor.prototype.markupString){Y.constructor.prototype.markupString=X;}}var W=M.apply(X,Y);if(W){if(mstrmojo.useFrames){var Z=(Y.domNode&&Y.domNode.ownerDocument)||self.document;if(!N||N.ownerDocument!==Z){N=Z.createElement("span");}}N.innerHTML=W;var a=N.firstChild;a.mstrmojoId=Y.id;return a;}return null;}function J(Y){var X=Y.markupSlots,W,Z;if(X){W={};for(Z in X){W[Z]=X[Z].apply(Y,[]);}}return W;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function G(){if((this[P]&&this[P]()===false)||(this[D]()===false)||(this[A]&&this[A]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var W="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,W)){this.raiseEvent({name:W});}return true;},buildDom:function S(){return E(this);},preBuildRendering:mstrmojo.emptyFn,buildRendering:function C(){var W=this.domNode,X=this.buildDom();this.domNode=X;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(J(this));this.paint();if(X){var a=W;if(!a){a=this.placeholder;if(a){if(typeof a==="string"){a=document.getElementById(a);}delete this.placeholder;}}if(a){T.replace(a,X);}}var Y="onchildRenderingChange",Z=this.parent;if(Z&&Z[Y]){Z[Y](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function Q(Y){if(this.hasRendered){if(!Y){try{var W=this.domNode;if(W.parentNode){W.parentNode.removeChild(W);}if(mstrmojo.dom.isIE&&W.outerHTML!=="undefined"){W.outerHTML="";}}catch(X){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function V(){var X=this.markupMethods;if(!X){return ;}var a=this,b=function(h){var d=X[h];if(d){try{d.apply(a,[true]);}catch(g){throw new Error(["Error in markup method.","Widget id: "+a.id,"Method name: "+h,"Err: "+g.message].join("\n\n"));}}};var Z=X.sequence,W,Y,c;if(Z){W=Z.length||0;for(Y=0;Y<W;Y++){b(Z[Y]);}}else{for(c in X){b(c);}}},refresh:function F(W){if(this.hasRendered){var X=this.domNode;this.unrender(true);this.placeholder=X;if(W){W();}this.render();}},set:function L(Z,W){this._super(Z,W);if(this.domNode){var X=this.markupMethods,Y=X&&X["on"+Z+"Change"];if(Y){Y.apply(this);}}return this;},slotNames:null,addSlots:function I(X){var W=this.slotNames,Y;if(!W){W={};this.slotNames=W;}for(Y in X){this[Y]=X[Y];W[Y]=true;}},removeSlots:function K(W){if(W){var X=this.slotNames,Y;for(Y in W){delete this[Y];if(X){delete X[Y];}}}},captureDomEvent:function H(Y,W,Z,X){if(this.enabled!==false){this.raiseEvent({name:Y,hWin:W,e:Z||W.event,config:X});}},playEffect:function U(X){var W=this[X];if(W&&W.constructor===Object){W=mstrmojo.insert(mstrmojo.hash.clone(W));W.widget=this;this[X]=W;}if(W){W.play();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,D=mstrmojo.hash;function C(X,V){if(!V){return ;}var Y=[],O=X.selectedIndices,N=X.allIdx,T=X.noneIdx,P=X.parent&&X.parent.include;if(X.multiSelect&&(T>-1)&&(G.indexOf(V,T)>-1)){return Y;}var R,S,W=X.items,U=X.itemIdField,Q=X.selectedItems,a;if(X.multiSelect&&(N>-1)&&(G.indexOf(V,X.allIdx)>-1)){for(R=0,S=W.length;R<S;R++){if(!O[R]){Y.push(R);O[R]=true;X.selectedIndex=R;X.selectedItem=W[R];}}}else{for(R=0,S=V.length;R<S;R++){var Z=V[R];if(!O[Z]){O[Z]=true;Y.push(Z);X.selectedIndex=Z;a=X.selectedItem=W[Z];if(Q){Q[a[U]]=a;}}}}return Y;}function A(P){var O=[],Q=P.selectedIndices,R=P.selectedItems;for(var N in Q){delete Q[N];O.push(parseInt(N,10));}P.selectedIndex=-1;P.selectedItem=null;if(R){P.selectedItems={};}return O;}function L(W,V){if(!V){return ;}var S=[],O=W.selectedIndices,Y=G.indexOf,N=W.allIdx,T=W.noneIdx,U=W.itemIdField,P=W.selectedItems;if(W.multiSelect&&(((N>-1)&&(Y(V,N)>-1))||((T>-1)&&(Y(V,T)>-1)))){return A(W);}if(V.length>0&&O[N]){if(Y(V,N)<0){V.push(N);}}for(var Q=0,R=V.length;Q<R;Q++){var X=V[Q];if(O[X]){delete O[X];S.push(X);if(P){delete P[W.items[X][U]];}if(W.selectedIndex==X){W.selectedIndex=-1;W.selectedItem=null;}}}return S;}function F(Q,P,R,N){if(Q.raiseEvent){Q.raiseEvent({name:"select",idxs:N||[]});if((P&&P.length)||(R&&R.length)){try{Q.raiseEvent({name:"selectionChange",added:P,removed:R});}catch(O){L(Q,P);C(Q,R);throw O;}}}}function I(P,O){if(O==null){return -1;}var N=typeof (O)=="object",Q=P.itemIdField;if(N&&Q!=null){return G.find(P.items,Q,O[Q]);}else{return G.indexOf(P.items,O);}}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(N){this._super(N);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function M(W){if(!W){return ;}if(W.constructor!=Array){W=[W];}var U=this.items,N=this.items.length,Q=this.selectedItems,S=[],P;U=this.items=U.concat(W);P=U.length;if(Q){var O=this.selectedIndices,T=this.itemIdField,R,V;for(R=N;R<U.length;R++){V=U[R];if(Q[V[T]]){S.push(R);}}}if(S&&S.length){C(this,S);}if(P>N){this.itemsContainerNode.innerHTML+=this._buildItemsMarkup(N,P-1).join("");}},addSelectedItems:function H(N){this.selectItems(N,false);},setSelectedItems:function K(N){this.selectItems(N,true);},selectItems:function J(W,Y){if(!W){return ;}if(W.constructor!=Array){W=[W];}var U=this;if(Y&&U.selectedItems){U.selectedItems={};}var P=U.selectedItems,T=U.itemIdField,X,V,Q,N=[],S=U.items.length,R=[],O=U.allowUnlistedValues;for(Q=0;Q<W.length;Q++){X=W[Q];V=I(this,X);if(V===-1){if(P===null){if(O){N.push(v);V=S++;}}else{P[X[T]]=X;}}if(V!==-1){R.push(V);}}if(N.length>0){U.addItems(N);}if(R.length>0){if(Y){U.select(R);}else{U.addSelect(R);}}},unselectItems:function J(O){if(!O){return ;}if(O.constructor!=Array){O=[O];}var S=this,U=S.selectedItems,P=[],T=S.itemIdField,R,N,Q;if(U===null){return ;}for(Q=0;Q<O.length;Q++){R=O[Q];if(U){delete U[R[T]];}N=I(this,R);if(N!==-1){P.push(N);}}if(P.length>0){S.removeSelect(P);}},getSelectedItems:function B(){if(this.selectedItems!=null){return D.valarray(this.selectedItems);}else{return G.get(this.items,D.keyarray(this.selectedIndices,true));}},singleSelect:function(N,O){if(N!==-1){this.select([N],O);}},singleSelectByField:function E(O,P,N){this.singleSelect(G.find(this.items,P,O),N);},toggleSelect:function(N){var P,O;if(this.selectedIndices[N]){O=L(this,[N]);}else{P=C(this,[N]);}F(this,P,O,[N]);},rangeSelect:function(N){},select:function(O,N){if(O==null){return ;}if(O.constructor!=Array){O=[O];}var Q=A(this),S=C(this,O),P=Q.length-1;if(this.selectionPolicy!=="reselect"){for(;P>=0;P--){var R=G.indexOf(S,Q[P]);if(R>-1){Q.splice(P,1);S.splice(R,1);}}}if(!N){F(this,S,Q,O);}},clearSelect:function(N){var O=A(this);if(N!==true){F(this,null,O,[]);}},addSelect:function(P,N){if(P==null){return ;}if(P.constructor!=Array){P=[P];}var O=C(this,P);var R=null,Q=this.noneIdx;if(this.multiSelect&&(Q>-1&&G.indexOf(P,Q)>-1)){R=L(this,P);}if(N!==true){F(this,O,R,P);}},removeSelect:function(N){if(N==null){return ;}if(N.constructor!=Array){N=[N];}F(this,null,L(this,N),N);},_set_selectedIndices:function(P,W,N){var S=this,O=S.selectedIndices;if(S.selectedItems){S.selectedItems={};}var O=S.selectedIndices;if(O==W){return false;}if(!O){O={};S.selectedIndices=O;}if(!W){W={};}var U=S.selectedIndex,T=[],V;for(V in O){if(!W[V]){V=parseInt(V,10);delete O[V];T.push(V);if(U==V){S.selectedIndex=-1;S.selectedItem=null;}}}var Z=[],X=S.items,R=S.itemIdField,Y;for(V in W){if(!O[V]){V=parseInt(V,10);O[V]=true;Z.push(V);S.selectedIndex=V;Y=S.selectedItem=X[V];if(S.selectedItems){S.selectedItems[Y[R]]=Y;}}}if(N!==true){var Q=[];for(V in W){if(O[V]){V=parseInt(V,10);Q.push(V);}}F(S,Z,T,Q);}return(Z.length||T.length);},_set_selectedIndex:function(Q,O,N){var P={};if(O>-1){P[O]=true;}return this._set_selectedIndices("selectedIndices",P,N);},_set_selectedItem:function(Q,P,O){var N=I(this,P);if((N===-1)&&(P!=null)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(P));N=this.items.length-1;}return this._set_selectedIndex("selectedIndex",N,O);}};})();(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",H="";var N=/\+/g;for(var I=0,F=M.length;I<F;I++){var E=M[I].split("=");L=E[0];H=E[1];if(H){H=decodeURIComponent(H.replace(N," "));}var G=document.createElement("INPUT");G.type="HIDDEN";G.name=L;G.value=H;K.appendChild(G);}return false;}mstrmojo.form={createDynamicForm:function A(E){var G=document.createElement("FORM"),H=E.indexOf("?")>0;G.name="dynamic_form";G.method="POST";var F=((H)?E.substring(0,E.indexOf("?")):E);G.action=F;if(H){B(G,E);}document.body.appendChild(G);return G;},send:function D(J,K,E,M,H,F){var O=((H&&H.hWin)||window).document,L=O.createElement("form"),I=mstrApp;L.method=E||"GET";if(M){L.target=M;}L.action=K||I.name;F=(F!==undefined)?F:!(L.action&&L.action.indexOf("aspx")>0);if(I.sessionId){L.action+=";jsessionid="+I.sessionId;}if(F){L.action+=";uxts"+mstrmojo.now();}L.appendChild(C(O,"xts",mstrmojo.now()));for(var P in I.persistTaskParams){J[P]=I.persistTaskParams[P];}if(I.servletState&&I.name){J[I.name]=I.servletState;}if(J){for(var G in J){if(J[G].constructor==Array){mstrmojo.array.forEach(J[G],function(Q){L.appendChild(C(O,G,Q));});}else{L.appendChild(C(O,G,J[G]));}}}O.body.appendChild(L);try{L.submit();}catch(N){if(M&&N.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}O.body.removeChild(L);}};})();(function(){mstrmojo.requiresCls("mstrmojo.array");mstrmojo._HasBuilder={postBuildRendering:function B(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function C(){return this.model.getChildren(this.node,false);},buildChildren:function A(E){if(!this.builder||!this.model){return false;}if(this.children&&this.children.length){this.set("children",[]);}var D=this.model,F=this.builder.build(this.getChildren(),D,this.buildConfig);if(!E){this.addChildren(F);}this.builtChildren=true;return(E)?F:true;}};})();(function(){var N=115,L=30,C=10,A=5,D=500,J=300,G={NORMAL_STATE:0,SINGLE_SELECT_STATE:1,RECTANGLE_SELECT_STATE:2,ZOOM_STATE:3,AFFINITY_STATE:4,FREE_SELECT_STATE:5,CIRCLE_SELECT:6,CLEAR_ALL_STATE:7,GRIDS_SELECT_STATE:8},V={MARKER:"1",BUBBLE:"2",POLYGON:"3",DENSITY:"4"},Q=mstrmojo.dom,U=mstrmojo.css,E;mstrmojo.gmaps._CanShowMapToolbar={_mixinName:"mstrmojo.gmaps._CanShowMapToolbar",callback:null,mixinParentMapObj:null,EnumToolbarButtonType:{DRILL:1,SINGLE_SELECT:2,RECTANGLE_SELECT:4,EDIT_INFO_WINDOW:8,CLEAR_ALL:16,AFFINITY:32,FREE_SELECT:64,CIRCLE_SELECT:128,ZOOM:256,GRIDS_SELECT:512},TOOLBAR_BUTTON_COUNT:10,layerChosen:[],formatPopupRef:null,googlemap:null,toolBarActive:false,layersRendered:0,timer:null,clearAllPopup:null,singleSelectPopup:null,metricSelectBox:null,buttonsBox:null,toolbar:null,$MSM:null,metricsString:"",metricData:[],createMessagePopup:function I(c,X,g,f,Y,Z){var b=this;var a=mstrmojo.insert({alias:"messagePopup",scriptClass:"mstrmojo.Popup",cssClass:"messagePopupWindow",placeholder:X,children:[{alias:"popupLabel",scriptClass:"mstrmojo.Label",cssClass:"messageLabel",text:g},{alias:"popupVBox",scriptClass:"mstrmojo.HBox",children:[{alias:"okButton",scriptClass:"mstrmojo.Button",cssClass:"messageBoxOkButton",text:f,onclick:function d(){Y.call(this);}},{alias:"cancelButton",scriptClass:"mstrmojo.Button",cssClass:"messageBoxCancelButton",text:mstrmojo.desc(221,"Cancel"),onclick:function d(){if(Z!=undefined){Z.call(this);}else{b.buttonsBox.set("state",G.NORMAL_STATE);}}}]},{alias:"confirmationWindowTriangle",scriptClass:"mstrmojo.Label",cssClass:"confirmationWindowTriangle "+c}]});return a;},initMapToolbar:function B(Y,c,Z,X,d,f,b){this.googlemap=Y;this.metricData=c;E=Z;this.placeholder=X;this.merticSelectPlaceholder=d;this.clearAllPopupPlaceholder=f;this.singleSelectPopupPlaceholder=b;this.metricsString=mstrmojo.desc(1158,"Metrics");this.layerChosen=[];for(var a=0;a<this.metricData.length;a++){this.layerChosen.push(a);}},positionLayout:function(){var a=this.toolbar,k=this.metricSelectBox,l=this.clearAllPopup,X=this.singleSelectPopup,f=this.height;var c=U.getComputedStyle(a.movableBox.domNode),j=Math.abs(this.getPropertyValue(c,"right")),h=a.barLength;if(a.buttonCount!=a.defaultButtonCount){h=h-(h-j)/a.defaultButtonCount*(a.defaultButtonCount-a.buttonCount);}var Z=this.getPropertyValue(U.getComputedStyle(k.domNode),"width");var g=U.getComputedStyle(a.domNode);var d=this.getPropertyValue(g,"right");k.domNode.style.right=d+h-Z-24+"px";var Y=this.getPropertyValue(U.getComputedStyle(l.domNode),"width");var b=a.buttonCount<8?-5:0;X.domNode.style.right=parseInt(d,10)-20+j+(h-j)/a.buttonCount-38+b+"px";if((E&this.EnumToolbarButtonType.EDIT_INFO_WINDOW)!=0){b=a.buttonCount<6?-5:0;U.removeClass(l.confirmationWindowTriangle.domNode,"clearAllPopup");l.domNode.style.right=140+b+"px";}else{l.domNode.style.right=parseInt(d,10)-20+j+(h-j)/a.buttonCount*5-Y+b+"px";}},getPropertyValue:function P(Y,Z){var X;if(Y&&Z){if(!window.getComputedStyle){X=parseInt(Y[Z],10);}else{X=parseInt(Y.getPropertyValue(Z),10);}}return X;},renderMultiGridLayersBox:function F(){var Z=this;this.metricSelectBox=mstrmojo.insert({alias:"metricSelectBox",scriptClass:"mstrmojo.Box",cssClass:"metricSelectBox",visible:false,height:null,placeholder:Z.merticSelectPlaceholder,children:[{alias:"metricContentWrapper",scriptClass:"mstrmojo.Box",cssClass:"metricContentWrapper",children:[{scriptClass:"mstrmojo.Label",cssClass:"layerTitle",text:mstrmojo.desc(11142,"Layers")},{alias:"metricContentBox",scriptClass:"mstrmojo.Box",cssClass:"metricContentBox",children:[{alias:"metricSelectVBox",scriptClass:"mstrmojo.VBox",cssClass:"metricSelectVBox",cssText:"",closeMe:function X(d){var g=Q.eventTarget(self,d);var b=Q.contains(Z.metricSelList.parent.domNode,g,true,Z.metricSelList.parent.domNode);if(!b){Q.detachEvent(document,"click",Z.$MSM);var c=Z.metricSelectBox.height;var a=c,f=0;new mstrmojo.fx.AnimateProp({target:Z.metricSelectBox.domNode,props:{height:{ease:mstrmojo.ease.sin,start:a,stop:f,suffix:"px"}},duration:D}).play();Z.buttonsBox.set("state",G.NORMAL_STATE);}},postCreate:function Y(b){Z.layersRendered=Z.metricData.length;var g=[];var a=mstrmojo.insert({scriptClass:"mstrmojo.CheckBox",cssClass:"allLayer",label:mstrmojo.desc(10371,"All Layers"),alias:"allLayers",cssDisplay:"block",align:"left",postCreate:function(){this.set("checked",true);},onclick:function(j){var k;for(i=0;i<Z.metricData.length;i++){k=this.parent.children[i+1].children[0];if(this.checked!=k.checked){k.processMe(this.checked);}}}});if(Z.metricData.length>1){g.push(a);}for(i=0;i<Z.metricData.length;i++){var h=mstrmojo.insert({scriptClass:"mstrmojo.VBox",alias:"layersbox"+i,halign:"left",cssText:"margin-top:3px;margin-bottom:5px;width:100%;",children:[{scriptClass:"mstrmojo.CheckBox",cssClass:"gridLayerNames",label:Z.metricData[i].gridName,tooltip:Z.metricData[i].gridName,align:"left",cssDisplay:"block",layerIndex:i,processMe:function f(j){Z.layersRendered+=(j?1:-1);if(j){Z.layerChosen.push(this.layerIndex);Z.googlemap.addGridLayer(this.layerIndex);}else{var k=mstrmojo.array.indexOf(Z.layerChosen,this.layerIndex);if(k!=-1){Z.layerChosen.splice(k,1);}Z.googlemap.removeGridLayer(this.layerIndex);if(Z.googlemap.noMarkerSelected()){Z.googlemap.markerSelected=false;}if(Z.buttonsBox.drillButton){Z.buttonsBox.drillButton.set("enabled",Z.googlemap.isDrillable()&&Z.buttonsBox.state==G.NORMAL_STATE);}}this.set("checked",j);this.parent["metricSelector_"+this.layerIndex].set("enabled",j);},postCreate:function(){this.set("checked",true);},onclick:function(j){this.processMe(this.checked);if(this.parent.parent.allLayers){this.parent.parent.allLayers.set("checked",(Z.layersRendered==Z.metricData.length));}}},{scriptClass:"mstrmojo.RadioList",alias:"metricSelector_"+i,layerIndex:i,cssClass:"layerMetrics",itemTitleField:"n",labelCssText:"text-overflow:ellipsis;overflow:hidden;width:100px;white-space:nowrap;display:inline-block;font-size:13px",items:(function d(){if(Z.googlemap.gridDataViewer[i].wpMarkerType==V.DENSITY){return[{n:"Marker density",gIdx:-1}];}else{return Z.metricData[i].metrics;}})(),postCreate:function c(j){this.selectedIndex=0;},postselectionChange:function(j){if(this.parent.children[0].checked){var k=this.items[j.added[0]];if(k.gIdx!=-1){Z.googlemap.onselectedMetricIndexChange(k.gIdx,j.added[0],k.id);}}}}]});g.push(h);}this.set("children",g);}}]}]},{alias:"multipleGridWindowTriangle",scriptClass:"mstrmojo.Label",cssClass:"multipleGridWindowTriangle"}]});this.metricSelectBox.render();},renderSingleSelectPopup:function H(){var X=this;var Z=function(){this.parent.parent.set("visible",false);X.googlemap.handleSingleSelection(true);X.buttonsBox.set("state",G.NORMAL_STATE);X.googlemap.set("enablePopup",true);};var Y=function(){this.parent.parent.set("visible",false);X.googlemap.handleSingleSelection(false);X.buttonsBox.set("state",G.NORMAL_STATE);X.googlemap.set("enablePopup",true);};this.singleSelectPopup=this.createMessagePopup("singleSelectPopup",X.singleSelectPopupPlaceholder,mstrmojo.desc(9877,"Please click on markers you want to select."),mstrmojo.desc(8473,"Done"),Z,Y);this.singleSelectPopup.render();},renderClearAllPopup:function T(){var X=this;var Y=function(){X.googlemap.clearSelections();X.googlemap.doClearRectangle(true);X.googlemap.set("markerSelected",false);X.buttonsBox.set("state",G.NORMAL_STATE);};this.clearAllPopup=this.createMessagePopup("clearAllPopup",X.clearAllPopupPlaceholder,mstrmojo.desc(9876,"Are you sure you wish to remove all selections?"),mstrmojo.desc(1442,"OK"),Y);this.clearAllPopup.render();},renderEditInfoWindow:function S(){var Z=this.singleSelectPopup,X=this.toolbar;this.formatPopupRef={scriptClass:"mstrmojo.Editor",contentNodeCssClass:"mstrmojo-balloon",alias:"infoWindowEditor",title:mstrmojo.desc(8218,"Edit custom infoWindow"),left:"100px",top:"100px",width:"200px",locksHover:true,onOpen:function(){var d=this.opener.domNode;var a=mstrmojo.dom.position(d);var c=a.y+50;var b=parseInt(X.domNode.style.left)+100;console.log("opener's offset"+d.offsetLeft+":"+d.offsetTop);this.set("top",c+"px");this.set("left",b+"px");this.editorNode.style.width="258px";this.editorNode.style.zIndex=9999;this.gridSelectorHBox.gridSelector.previousSelection=0;},children:[{alias:"gridSelectorHBox",scriptClass:"mstrmojo.HBox",halign:"left",cssText:"margin:3px",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(10372,"Select a Grid: "),align:"left"},{alias:"gridSelector",scriptClass:"mstrmojo.SelectBox",bindings:{items:"this.parent.parent.opener.gridNamesSelectorItems"},size:1,selectedIndex:0,previousSelection:0,cssText:"white-space: nowrap; width: 200px",onchange:function Y(){if(!this.selectedItem){return ;}this.parent.parent.opener.getGridViewer(this.previousSelection).setInfoWindowHTML(this.parent.parent.desc.value);var a=parseInt(this.selectedItem.v);this.parent.parent.desc.set("value",this.parent.parent.opener.getGridViewer(a).getInfoWindowHTML());this.previousSelection=a;}}]},{scriptClass:"mstrmojo.TextArea",cssClass:"mstrmojo-SaveAsEditor-descInput",alias:"desc",bindings:{value:function(){if(!this.parent.opener){return"";}else{var a=this.parent.opener.getPrimaryGridViewer();return a.getInfoWindowHTML();}}},cols:80,rows:7},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){var a=this.parent.parent.desc.value;this.parent.parent.opener.getGridViewer(this.parent.parent.gridSelectorHBox.gridSelector.previousSelection).setInfoWindowHTML(a);this.parent.parent.opener.saveCustomInfo();}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.close();}}]},{alias:"editInfoWindowTriangle",scriptClass:"mstrmojo.Label",cssClass:"editInfoWindowTriangle"}]};},renderToolBarButtons:function W(){var b=this;this.toolbar=mstrmojo.insert({alias:"toolBarBox",scriptClass:"mstrmojo.Box",cssClass:"mstrMapToolBarBox",placeholder:b.placeholder,buttonCount:b.TOOLBAR_BUTTON_COUNT,defaultButtonCount:b.TOOLBAR_BUTTON_COUNT,barLength:440,markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout ></div>',onmouseout:function(f){var d=Q.eventTarget(self,f.e);var c=f.e.toElement||f.e.relatedTarget;if(!!c&&Q.contains(this.domNode,c,false)){return ;}if(b.buttonsBox.state==G.NORMAL_STATE&&b.toolBarActive){b.timer=window.setTimeout(function(){b.toolbar.openCloseToolbar(false);},1000);}},onmouseover:function(d){if(b.timer!==undefined){window.clearTimeout(b.timer);}var c=Q.eventTarget(self,d.e);var f=d.e.fromElement||d.e.relatedTarget;if(Q.contains(this.domNode,f,true)||b.toolBarActive){return ;}this.openCloseToolbar(true);},openCloseToolbar:function(f){var h,j,g=b.toolbar.barLength;var d=U.getComputedStyle(b.toolbar.movableBox.domNode),c=b.getPropertyValue(d,"right");if(b.toolbar.buttonCount!=b.toolbar.defaultButtonCount){g=g-(g-c)/b.toolbar.defaultButtonCount*(b.toolbar.defaultButtonCount-b.toolbar.buttonCount);}h=f?0:g;j=f?g:0;new mstrmojo.fx.AnimateProp({target:this.movableBox.domNode,props:{width:{ease:mstrmojo.ease.sin,start:h,stop:j,suffix:"px"}},duration:D}).play();b.toolBarActive=f;},children:[{alias:"mainButton",scriptClass:"mstrmojo.Button",cssClass:"mstrMapButton",iconClass:"mstrtbMapMainButton",onmousedown:function X(){this.set("selected",true);},onmouseup:function Y(){this.set("selected",false);if(b.toolBarActive){window.clearTimeout(b.timer);b.timer=b.toolbar.openCloseToolbar(false);b.buttonsBox.set("state",G.NORMAL_STATE);}}},{alias:"movableBox",scriptClass:"mstrmojo.Box",cssClass:"mstrMapToolBarMovableBox",children:[{alias:"innerBox",scriptClass:"mstrmojo.Box",cssClass:"mstrMapToolBarInnerBox",children:[{alias:"buttonsBox",scriptClass:"mstrmojo.HBox",cssClass:"mstrMapToolbar mstrMapButton",state:G.NORMAL_STATE,onstateChange:function(){this.clickSelect.set("enabled",(this.state==G.NORMAL_STATE||this.state==G.SINGLE_SELECT_STATE)&&!b.googlemap.isSelectedDensity(b.googlemap.layerChosen));this.rectangleSelect.set("enabled",this.state==G.NORMAL_STATE||this.state==G.RECTANGLE_SELECT_STATE);this.clearAll.set("enabled",(!b.googlemap.noPolygonsPresentOnMap()||b.googlemap.markerSelected)&&(this.state==G.CLEAR_ALL_STATE||this.state==G.NORMAL_STATE));this.showMetricSelectorList.set("enabled",this.state==G.NORMAL_STATE||this.state==G.GRIDS_SELECT_STATE);this.clickSelect.set("selected",this.state==G.SINGLE_SELECT_STATE);this.rectangleSelect.set("selected",this.state==G.RECTANGLE_SELECT_STATE);this.clearAll.set("selected",this.state==G.CLEAR_ALL_STATE);this.showMetricSelectorList.set("selected",this.state==G.GRIDS_SELECT_STATE);if((E&b.EnumToolbarButtonType.ZOOM)!=0){this.zoomButton.set("enabled",this.state==G.NORMAL_STATE||this.state==G.ZOOM_STATE);this.zoomButton.set("selected",this.state==G.ZOOM_STATE);b.googlemap.set("enableZoom",this.state==G.ZOOM_STATE);}if((E&b.EnumToolbarButtonType.FREE_SELECT)!=0){this.freeSelect.set("enabled",this.state==G.NORMAL_STATE||this.state==G.FREE_SELECT_STATE);this.freeSelect.set("selected",this.state==G.FREE_SELECT_STATE);b.googlemap.set("enableFreeFormSelect",this.state==G.FREE_SELECT_STATE);}if((E&b.EnumToolbarButtonType.CIRCLE_SELECT)!=0){this.circleSelect.set("enabled",this.state==G.NORMAL_STATE||this.state==G.CIRCLE_SELECT_STATE);this.circleSelect.set("selected",this.state==G.CIRCLE_SELECT_STATE);b.googlemap.set("enableCircleSelect",this.state==G.CIRCLE_SELECT_STATE);}if(b.googlemap.drillable){this.drillButton.set("enabled",b.googlemap.isDrillable()&&this.state==G.NORMAL_STATE);}if(b.googlemap.affinityEnabled){this.affinityLines.set("selected",this.state==G.AFFINITY_STATE);this.affinityLines.set("enabled",this.state==G.NORMAL_STATE||this.state==G.AFFINITY_STATE);}b.googlemap.set("enableClickSelect",this.state==G.SINGLE_SELECT_STATE);b.googlemap.set("enableRectangleSelect",this.state==G.RECTANGLE_SELECT_STATE);b.googlemap.set("enablePopup",this.state==G.NORMAL_STATE||this.state==G.ZOOM_STATE);b.metricSelectBox.set("visible",this.state==G.GRIDS_SELECT_STATE);b.clearAllPopup.set("visible",this.state==G.CLEAR_ALL_STATE);b.singleSelectPopup.set("visible",this.state==G.SINGLE_SELECT_STATE);if(this.state==G.NORMAL_STATE&&b.toolBarActive){b.timer=window.setTimeout(function(){b.toolbar.openCloseToolbar(false);},3000);}},postCreate:function a(){if((E&b.EnumToolbarButtonType.CIRCLE_SELECT)==0){this.parent.parent.parent.buttonCount--;this.children.splice(7,1);}if((E&b.EnumToolbarButtonType.FREE_SELECT)==0){this.parent.parent.parent.buttonCount--;this.children.splice(6,1);}if(!b.googlemap.isMapEnabledAffinityLine()){b.googlemap.affinityEnabled=false;this.parent.parent.parent.buttonCount--;this.children.splice(4,1);}if((E&b.EnumToolbarButtonType.ZOOM)==0){this.parent.parent.parent.buttonCount--;this.children.splice(3,1);}if((E&b.EnumToolbarButtonType.EDIT_INFO_WINDOW)==0){this.parent.parent.parent.buttonCount--;this.children.splice(2,1);}if(!b.googlemap.isMapDrillEnabled()){b.googlemap.drillable=false;this.parent.parent.parent.buttonCount--;this.children.splice(1,1);}},children:[{alias:"showMetricSelectorList",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapGridSelector",title:mstrmojo.desc(9881,"Multiple grids"),enabled:true,onclick:function Z(h){b.googlemap.hideInfoWindow();b.metricSelList=b.metricSelectBox.metricContentWrapper.metricContentBox.metricSelectVBox;this.set("selected",!this.selected);this.parent.set("state",this.selected?G.GRIDS_SELECT_STATE:G.NORMAL_STATE);b.metricSelectBox.set("visible",true);b.$MSM=b.metricSelList.closeMe;Q.stopPropogation(window,h.e);if(b.metricSelectBox.visible&&this.selected){Q.attachEvent(document,"click",b.$MSM);}else{Q.detachEvent(document,"click",b.$MSM);}var k=U.getComputedStyle(b.toolbar.domNode);var c=b.getPropertyValue(k,"bottom")+b.getPropertyValue(k,"height");b.metricSelectBox.domNode.style.maxHeight=((parseInt(b.height)-c)*0.9)+"px";var g,f,j;f=parseInt(b.metricSelectBox.metricContentWrapper.metricContentBox.domNode.offsetHeight);g=L+C+A+f;g=Math.min(g,parseInt(b.metricSelectBox.domNode.style.maxHeight));b.metricSelectBox.domNode.style.height=g+"px";j=g-C-A;b.metricSelectBox.metricContentWrapper.metricContentBox.domNode.style.maxHeight=(j-L)+"px";b.metricSelectBox.metricContentWrapper.metricContentBox.domNode.style.height=f+"px";b.metricSelectBox.metricContentWrapper.domNode.style.height=j+"px";b.metricSelectBox.multipleGridWindowTriangle.domNode.style.top=(g-14)+"px";var d=0,l=g;if(!this.selected){l=d;d=g;}new mstrmojo.fx.AnimateProp({target:b.metricSelectBox.domNode,props:{height:{ease:mstrmojo.ease.sin,start:d,stop:l,suffix:"px"}},duration:J}).play();window.clearTimeout(b.timer);}},{alias:"drillButton",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapDrill",title:mstrmojo.desc(145,"Drill"),enabled:false,onmousedown:function X(){b.googlemap.hideInfoWindow();this.set("selected",true);},onmouseup:function Y(){this.set("selected",false);b.googlemap.processDrill();}},{alias:"customInfoWindow",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapCustomizeInfoWindow",title:mstrmojo.desc(8218,"Edit custom infoWindow"),onclick:function Z(){b.googlemap.hideInfoWindow();b.openPopup("formatPopupRef");}},{alias:"zoomButton",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapZoom",title:mstrmojo.desc(11141,"Zoom"),enabled:true,onclick:function Z(){this.set("selected",!this.selected);if(this.selected){b.googlemap.set("enablePopup",false);b.googlemap.set("infoWindowVisible",false);}this.parent.set("state",this.selected?G.ZOOM_STATE:G.NORMAL_STATE);b.googlemap.hideInfoWindow();window.clearTimeout(b.timer);}},{alias:"affinityLines",scriptClass:"mstrmojo.Button",enabled:true,iconClass:"mstrtbMapAffinity",title:mstrmojo.desc(9880,"Filter affinity lines/arcs"),onclick:function Z(){b.googlemap.hideInfoWindow();this.set("selected",!this.selected);b.googlemap._affinityGlow=!b.googlemap._affinityGlow;b.googlemap.onAffinityAnimationModeChange();this.parent.set("state",this.selected?G.AFFINITY_STATE:G.NORMAL_STATE);window.clearTimeout(b.timer);}},{alias:"clearAll",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapClearAll",title:mstrmojo.desc(9879,"Remove selections"),enabled:false,onclick:function Z(){b.googlemap.hideInfoWindow();this.set("selected",!this.selected);this.parent.set("state",this.selected?G.CLEAR_ALL_STATE:G.NORMAL_STATE);b.clearAllPopup.set("visible",true);var c=N;var d=0,f=c;if(!this.selected){f=d;d=c;}new mstrmojo.fx.AnimateProp({target:b.clearAllPopup.domNode,props:{height:{ease:mstrmojo.ease.sin,start:d,stop:f,suffix:"px"}},duration:J}).play();window.clearTimeout(b.timer);}},{alias:"freeSelect",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapFreeSelectButton",title:mstrmojo.desc(10981,"Freeform selection tool"),enabled:true,onclick:function Z(){this.set("selected",!this.selected);if(this.selected){b.googlemap.set("enablePopup",false);b.googlemap.set("infoWindowVisible",false);}this.parent.set("state",this.selected?G.FREE_SELECT_STATE:G.NORMAL_STATE);b.googlemap.hideInfoWindow();window.clearTimeout(b.timer);}},{alias:"circleSelect",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapCircleSelectButton",title:mstrmojo.desc(10980,"Circular selection tool"),enabled:true,onclick:function Z(){this.set("selected",!this.selected);if(this.selected){b.googlemap.set("enablePopup",false);b.googlemap.set("infoWindowVisible",false);}this.parent.set("state",this.selected?G.CIRCLE_SELECT_STATE:G.NORMAL_STATE);b.googlemap.hideInfoWindow();window.clearTimeout(b.timer);}},{alias:"rectangleSelect",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapRectangleSearch",title:mstrmojo.desc(10979,"Rectangular selection tool"),enabled:true,onclick:function Z(){this.set("selected",!this.selected);if(this.selected){b.googlemap.set("enablePopup",false);b.googlemap.set("infoWindowVisible",false);}this.parent.set("state",this.selected?G.RECTANGLE_SELECT_STATE:G.NORMAL_STATE);b.googlemap.hideInfoWindow();window.clearTimeout(b.timer);}},{alias:"clickSelect",scriptClass:"mstrmojo.Button",iconClass:"mstrtbMapSelection",title:mstrmojo.desc(10978,"Multiple marker selection tool"),enabled:!b.googlemap.isSelectedDensity(b.googlemap.layerChosen),onclick:function Z(){b.googlemap.set("infoWindowVisible",false);this.set("selected",!this.selected);b.googlemap.set("enablePopup",false);this.parent.set("state",this.selected?G.SINGLE_SELECT_STATE:G.NORMAL_STATE);b.googlemap.hideInfoWindow();b.singleSelectPopup.set("visible",true);var d=N;var c=0,f=d;if(!this.selected){f=c;c=d;}new mstrmojo.fx.AnimateProp({target:b.singleSelectPopup.domNode,props:{height:{ease:mstrmojo.ease.sin,start:c,stop:f,suffix:"px"}},duration:J}).play();window.clearTimeout(b.timer);}}]}]}]}]});this.toolbar.render();},renderToolbar:function M(){this.renderToolBarButtons();this.renderMultiGridLayersBox();this.renderClearAllPopup();this.renderSingleSelectPopup();this.renderEditInfoWindow();this.buttonsBox=this.toolbar.movableBox.innerBox.buttonsBox;this.positionLayout();},getToolbar:function O(){return this.toolbar;},setToolbarState:function R(X){this.buttonsBox.set("state",X);},setToolbarButtonState:function K(X,Z,Y){switch(X){case this.EnumToolbarButtonType.DRILL:if(this.buttonsBox.drillButton){this.buttonsBox.drillButton.set(Z,Y);}break;case this.EnumToolbarButtonType.SINGLE_SELECT:this.buttonsBox.clickSelect.set(Z,Y);break;case this.EnumToolbarButtonType.RECTANGLE_SELECT:this.buttonsBox.rectangleSelect.set(Z,Y);break;case this.EnumToolbarButtonType.FREE_SELECT:if((E&this.EnumToolbarButtonType.FREE_SELECT)!=0){this.buttonsBox.freeSelect.set(Z,Y);}break;case this.EnumToolbarButtonType.CIRCLE_SELECT:if((E&this.EnumToolbarButtonType.CIRCLE_SELECT)!=0){this.buttonsBox.circleSelect.set(Z,Y);}break;case this.EnumToolbarButtonType.ZOOM:if((E&this.EnumToolbarButtonType.ZOOM)!=0){this.buttonsBox.zoomButton.set(Z,Y);}break;case this.EnumToolbarButtonType.EDIT_INFO_WINDOW:break;case this.EnumToolbarButtonType.CLEAR_ALL:this.buttonsBox.clearAll.set(Z,Y);break;case this.EnumToolbarButtonType.AFFINITY:if(this.buttonsBox.affinityLines){this.buttonsBox.affinityLines.set(Z,Y);}break;default:}}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var B=mstrmojo.dom;function C(H){if(B.isWK){document.onselectstart=function(I){if(!H){I.preventDefault();}return H;};}}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function F(){return this.domNode;},getMovingTarget:function G(){return this.domNode;},ondragstart:function A(K){var J=this.getMovingHandle(),H=this.getMovingTarget().style;var I=B.contains(J,K.src.node,true,document.body);if(I){C(false);J.style.cursor="move";this._leftPos=parseInt(H.left,10);this._topPos=parseInt(H.top,10);this._hWidth=J.clientWidth;this._hHeight=J.clientHeight;}return I;},ondragmove:function E(K){var J=K.tgt.pos,H=K.src.pos,I=this.getMovingTarget().style;I.left=this.left=Math.max(this._leftPos+J.x-H.x,-this._hWidth+40)+"px";I.top=this.top=Math.max(this._topPos+J.y-H.y,-this._hHeight+10)+"px";},ondragend:function D(H){C(true);this.getMovingHandle().style.cursor="default";delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var H=mstrmojo.registry,C=mstrmojo.array,K=mstrmojo.publisher;function M(O,P){if(P){P.parent=O;return H.ref(P);}return null;}function J(O,P){if(P&&P.alias!=null){O[P.alias]=P;}}function D(P,Q){var O=Q.alias;if(Q.parent===P){delete Q.parent;}if((O!=null)&&(P[O]===Q)){delete P[O];}}function E(S,P){var O=P&&P.length,R,Q;if(O){R=[];for(Q=0;Q<O;Q++){var T=M(S,P[Q]);if(!T){continue;}R.push(T);J(S,T);}}return R;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,initChildren:function I(){var O="children",P=this[O];if(!P){return ;}this[O]=null;this._set_children(O,P,true);if(this.postCreateChildren){this.postCreateChildren();}},_set_children:function A(R,P,O){var Q=this.children;if(P!==Q){if(Q){this.removeChildren(null,O);}this.addChildren(P,0,O);}return false;},destroyChildren:function N(R){var Q=this.children,O=(Q&&Q.length)||0,P;if(O){for(P=O-1;P>-1;P--){var S=Q[P];if(S&&S.destroy){S.destroy(R);if(!R){D(this,S);}}}if(!R){Q.length=0;}}},invalidateChildren:function F(){mstrmojo.array.forEach(this.children,function(O){O.invalidate();});},invalidate:function L(){this.invalidateChildren();},addChildren:function G(T,P,Q){if(!T){return T;}var S=T.constructor===Array,O=E(this,S?T:[T]);if(O&&O.length){var R=this.children||[];if(P==null){P=R.length;}this.children=C.insert(R,P,O);if(!Q&&(this.onaddChild||K.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:O,index:P});}}return S?O:(O&&O[0]);},removeChildren:function B(U,Q){var S=this.children,T=U?[U]:(this.children||[]).concat(),P=T.length,O=-1,R;if(P){for(R=P-1;R>-1;R--){D(this,T[R]);}if(U){O=C.removeItem(S,U);}else{if(S){S.length=0;O=0;}}if(!Q&&(this.onremoveChild||K.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:T,index:O});}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;if(this.preHandleEvent){this.preHandleEvent(H);}var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){if(this.postHandleEvent){this.postHandleEvent(H);}C.publish(this.id,M,H);}return H;},attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var G=mstrmojo.hash,A=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",init:function E(H){this.disposables=[];G.copy(H,this);if(this.postApplyProperties){this.postApplyProperties();}A.add(this);if(this.postCreate){this.postCreate();}},destroy:function B(H){this._super(H);F.forEach(this.disposables,function(I){if(I.destroy){I.destroy(H);}else{if(I.clear){I.clear();}}});this.disposables=[];A.remove(this);}});var C=mstrmojo.Obj;C.free=function D(H){if(H instanceof C){H.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip");var B=mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",init:function A(D){this._super(D);var E=this.parent;if(!E||E.hasInitBindings){this.initBindings();}},destroy:function C(D){if(this.hasRendered){this.unrender(D);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn});B.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};B.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};B.heightMarkupMethod=function(){this.domNode.style.height=this.height||"";};B.widthMarkupMethod=function(){this.domNode.style.width=this.width||"";};}());(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo._HasChildren");var F=mstrmojo.publisher;mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",init:function I(L){this._super(L);if(this.children){this.initChildren();}var M=this.parent;if(!M||M.hasInitBindings){this.initBindings();}},destroy:function G(L){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(L);},unrender:function J(N){var O=this.children,L=(O&&O.length)||0,M;for(M=L-1;M>-1;M--){O[M].unrender(true);}this._super(N);},postBuildRendering:function K(){var L=this._super?this._super():undefined;if(L!==false){this.renderChildren();L=true;}return L;},renderChildren:function C(){var N=this.children,L=(N&&N.length)||0,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render(null);}}},childRenderCheck:function H(M){if(M&&!M.hasRendered){var L=M.slot||this.defaultChildSlot;return !!this[L];}return false;},addChildren:function E(O,M,N){var L=this._super(O,M,N);if(L){this.childRenderOnAddCheck(L);}return L;},removeChildren:function A(S,O){var R=S?[S]:(this.children||[]),L=R.length,P;for(P=L-1;P>-1;P--){var N=R[P],M=N&&N.domNode;if(M){var Q=this[(N.slot||this.defaultChildSlot)];if(M.parentNode===Q){Q.removeChild(M);}}}return this._super(S,O);},childRenderOnAddCheck:function B(N){if(this.hasRendered&&N){var L=N.length,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render();}else{if(O&&O.hasRendered){this.onchildRenderingChange(O);}}}}},preserveChildDomOrder:true,onchildRenderingChange:function D(M){var T=M&&M.domNode;if(!T){return ;}var N=this.defaultChildSlot,W=M.slot||N,O=this[W],L=this.children;if(!O){if(T.parentNode){T.parentNode.removeChild(T);}}else{if(T.parentNode===O){return ;}if(!this.preserveChildDomOrder){O.appendChild(T);}else{var P,R;for(R=L.length-1;R>=0;R--){var U=L[R];if(U===M){break;}if(W===(U.slot||N)){var V=U.domNode;if(V&&V.parentNode===O){P=V;}}}if(P){O.insertBefore(T,P);}else{O.appendChild(T);}}}if(F.hasSubs(this.id,"childrenRendered")){var S=L.length,Q;for(Q=0;Q<S;Q++){if(!L[Q].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._ListSelections");mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}}},buildRendering:function E(){this.itemsHtml="";var F=this.items&&this.items.length;if(F){this.itemsHtml=this._buildItemsMarkup(0,F-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,_buildItemsMarkup:function(F,I,R,G,U,H){var V=[],N=0;V[N++]=R||"";var L=this.itemRenderer,Q=L&&L.render;if(Q&&typeof (Q)=="function"){var T=U||"",S=H||"",K=this.items,M=(K&&K.length)||0,O=this;for(var J=F,P=Math.min(I+1,M);J<P;J++){V[N++]=T;V[N++]=Q(K[J],J,O);V[N++]=S;}}V[N++]=G||"";return V;},onselectionChange:function A(P){if(!P){return ;}var M=this.itemRenderer;if(!M){return ;}var I=M.unselect,L=this.items||[],Q=P.removed,H,G;if(I&&Q){for(var J=0,R=Q.length;J<R;J++){H=Q[J];G=this._getItemNode(H);if(G){I(G,L[H],H,this);}}}var F=M.select,O=P.added;if(F&&O){for(var K=0,N=O.length;K<N;K++){H=O[K];G=this._getItemNode(H);if(G){F(G,L[H],H,this);}}}if(this.onchange){this.onchange();}},onselect:function B(F){if(this.makeSelection&&F.idxs&&F.idxs.length){var G=this._getItemNode(F.idxs[0]);this.makeSelection({selIdx:F.idxs[0],selItem:G});}},autoHide:false,init:function D(F){this._super(F);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},_getItemNode:function(F){var G=this.itemsContainerNode;return(G&&G.childNodes[F])||null;},_set_items:function C(I,F){if(this.autoHide){this.set("visible",!!(F&&F.length));}var H=this.items;this.items=F;if(H!=F){var G=this.hasRendered;if(G){this.unrender();}this.clearSelect();if(G){this.render();}return true;}else{return false;}return H!=F;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var D=mstrmojo.dom,E=mstrmojo.hash,B=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){B[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){B[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.textNode.innerHTML=this.text;},onwidthChange:function(){var F=this.width;if(F){this.domNode.style.width=F;}}},oniconClassChange:function C(G){if(this.hasRendered&&this.domNode){var F=G.valueWas,H=G.value;this.domNode.className=this.domNode.className.replace(F,"")+" "+H;}},onclick:mstrmojo.emptyFn,ontouchend:function A(F){this.onclick(F);}});mstrmojo.Button.newIconButton=function(H,K,I,F,J){var G={scriptClass:"mstrmojo.Button",title:H,cssClass:K,text:"",onclick:I};if(F){G.bindings=F;}E.copy(J,G);return G;};mstrmojo.Button.newInteractiveButton=function(G,H,J,I){var F={scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-InteractiveButton",text:G,glowClass:"glow"};if(H){F.onclick=H;}if(J&&(D.isFF||D.isWK)){E.copy({onmousedown:function(){B.applyShadow(this.domNode,0,0,10,J);},onmouseup:function(){B.removeShadow(this.domNode);}},F);}E.copy(I,F);return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change >{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K[I].slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var H=mstrmojo.func.composite,F=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(O){if(O){return ;}var M=this.visible,N=M?"block":"none";this.editorNode.style.display=N;if(this.modal){this.curtainNode.style.display=N;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function I(){var M;var N=this.buttons;if(N&&!this.btnHbox){for(M in N){N[M].cssClass="mstrmojo-Editor-button";}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:N},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function D(){var M=this.placeholder;if(this._super()){if(!this.parent&&!M){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function G(){var M=this.id;return function(){var N=mstrmojo.all[M];N.resizeDialog();N.positionDialog();};},postBuildRendering:function B(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var M=this._resizeHandler=this.getResizeHandler();F.attachEvent(window,"resize",M);}this.resizeDialog();this.positionDialog();this.domNode.focus();return true;},resizeDialog:function J(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function E(){var N=this,R=N.curtainNode,M=document.body,P=document.documentElement,Q=R.style,O=N.curtainPosition;Q.width=Math.max(M.clientWidth,P.scrollWidth)+"px";if(O&&O.h){Q.height=O.h+"px";}else{Q.height=Math.max(M.clientHeight,P.scrollHeight)+"px";}if(O&&O.y){Q.top=O.y+"px";}N.raiseEvent({name:"resizeCurtain"});},positionDialog:function K(){if(!this.left||!this.top){var M=this.editorNode;F.center(M);if(this.alignment==="top"){M.style.top="10px";}}},destroy:function(N){var M=this._resizeHandler;if(M){F.detachEvent(window,"resize",M);}this._super(N);}});if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.confirm=function A(P,N,O){var Q="mojoConfirmx9",M=function(){mstrmojo.all[Q].destroy();};mstrmojo.array.forEach(N,function(R){var S=R.onclick;R.onclick=S?H([M,S]):M;});mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:N,children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.alert=function C(P,M,O){var Q="mojoAlertx9";try{mstrmojo.all[Q].destroy();}catch(N){}mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),function(){mstrmojo.all.mojoAlertx9.destroy();if(M){M();}},"#666666")],children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.toast=function L(Q,O){var R="mojoToast9",P,N=O||3000;try{mstrmojo.all[R].destroy();}catch(M){}mstrmojo.insert({id:R,scriptClass:"mstrmojo.Label",cssClass:"toastCss",text:Q}).render();P=mstrmojo.all[R].domNode;document.body.appendChild(P);F.bottomCenter(P);window.setTimeout(function(){mstrmojo.all[R].destroy();},N);};mstrmojo.mask={};mstrmojo.mask.show=function(){mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});mstrmojo.mask.win.render();document.body.appendChild(mstrmojo.mask.win.domNode);};mstrmojo.mask.hide=function(){mstrmojo.mask.win.destroy();};}}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.ToolBar","mstrmojo.boxmodel","mstrmojo.array","mstrmojo.EnumRWUnitType","mstrmojo.dom","mstrmojo.css");var O=["background-color","border","border-color","border-left","border-style","border-top","border-width","filter","top","left","z-index","fx","normWidth","normHeight","normZIndex","normTop","normLeft","tbborder","lrborder","ttl"],V=["width","height"],l="p_fmts";var j="px";var g={getContentHeight:function(p,r){var q=r.ttl&&r.ttl.height;if(p&&q&&!this.floatingToolbar){return Math.max(parseInt(p,10)-parseInt(q,10),0)+j;}return"";},getPortletMinHeight:function(p){return p.ttl.height;},adjustTitleCss:function(p){return ;}};var d={getContentHeight:function(p,q){return p;},getPortletMinHeight:function(){return 0;},adjustTitleCss:function(p){p.titlebarNodeClass+=" floating";return ;}};function A(s,q){var r=this.parent,p=s+"DirtyKey";if(r[p]){r[p](q);}}function N(){var p=this.title;if(this.count){p+=" "+this.count;}this.toolbarTitleTextNode.innerHTML=p;}function f(){var q=this.parent,s=q&&q.defn;if(s&&parseInt(s.t,10)===mstrmojo.EnumRWUnitType.PANEL){var p=q.parent,r=p.defn;if(r&&r.ifp){return p;}}return null;}var P=mstrmojo.hash,G=2;mstrmojo.DocPortlet=mstrmojo.declare(mstrmojo.Container,[mstrmojo._Formattable],{scriptClass:"mstrmojo.DocPortlet",floatingTitle:false,floatingTitleHeight:30,buttonWidth:17,markupString:'<div class="mstrmojo-portlet {@borderCss}" style="{@portletNodeCssText}"><div class="mstrmojo-portlet-slot-shadow" style="{@shadowNodeCssText}"></div><div class="mstrmojo-portlet-container" style="{@portletContainerNodeCssText}"><div class="mstrmojo-portlet-titlebar {@titlebarNodeClass}" style="{@titlebarNodeCssText}"><table style="height:100%;width:100%" class="mstrmojo-portlet-titlebar-table" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-portlet-slot-toolbar-left {@leftToolbarNodeClass}" style="{@leftToolbarNodeCssText}"></td><td class="mstrmojo-portlet-title" style="{@titleNodeCssText}"><div style="overflow: hidden;">{@title} {@count}</div></td><td class="mstrmojo-portlet-slot-toolbar {@toolbarNodeClass}" style="{@rightToolbarNodeCssText}"></td></tr></table></div><div class="mstrmojo-portlet-buttonbar {@buttonbarNodeClass}" style="{@buttonbarNodeCssText}"></div><div class="mstrmojo-portlet-slot-content" style="{@contentNodeCssText}"></div></div></div>',rightToolbarNodeCssText:"",leftToolbarNodeCssText:"",titleNodeCssText:"",titlebarNodeClass:"",titlebarNodeCssText:"",contentNodeCssText:"",borderCss:"no-border",buttonbarNodeClass:"",buttonbarNodeCssText:"",markupSlots:{containerNode:function(){return this.domNode.lastChild;},portletNode:function(){return this.domNode;},portletContainerNode:function(){return this.domNode.lastChild;},dimNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.lastChild.childNodes[0];},buttonbarNode:function(){return this.domNode.lastChild.childNodes[1];},toolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[2];},toolbarTitleTextNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[1].firstChild;},leftToolbarNode:function(){return this.domNode.lastChild.firstChild.childNodes[0].rows[0].cells[0];},contentNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontitleChange:function(){N.call(this);},oncountChange:function(){N.call(this);},onfcChange:function(){if(this.fc&&this.content){this.updateContentHeight();}}},formatHandlers:{portletContainerNode:["RW","B"],shadowNode:["RW","B","fx","background-color"],titlebarNode:{src:"ttl",props:["F","B","background-color","height","fx","text-align","vertical-align"]},titleNode:{src:"ttl",props:["vertical-align","P","text-decoration"]},buttonbarNode:{src:"ttl",props:["background-color"]}},fc:false,content:null,rightToolbar:null,leftToolbar:null,floatingToolbar:false,_ts:g,getCacheKey:function F(p){return this._super(p)+"-portlet";},getFormats:function L(){var q=this.content,p=q&&q.getFormats();return p&&p[l];},updateContentHeight:function b(t){var p=this.getFormats(),q=this.content,s=q.dimNode||q.domNode,r=((p.ttl&&parseInt(p.ttl.height,10))||0);if(s){if(!t){r+=((this.fc||this.isInFilterPanel())?s.offsetHeight:(p.height?parseInt(p.height,10):0));}this.containerNode.style.height=r+j;this.shadowNode.style.height=r+j;}},init:function n(p){this._super(p);var q=this.content;if(q&&q.getFormats()&&!this.getFormats()){this._createFormats();}},preBuildRendering:function B(){var q=this._ts=(this.floatingTitle)?d:g;this._super();q.adjustTitleCss(this);var p="display:none;";if(this.isInFilterPanel()){var r=P.clone(this.formatHandlers);r.portletContainerNode=["z-index","height","B","backgroud-color"];r.shadowNode=["z-index","height","B","fx","background-color"];this.formatHandlers=r;}if(!this.leftToolbar){this.leftToolbarNodeCssText+=p;}if(!this.toolbar){this.toolbarNodeCssText+=p;}var s=mstrmojo._Formattable.getBorderWidths(this);if(s.l||s.t||s.r){this.borderCss="has-border";}},postBuildRendering:function W(){var r=mstrmojo.dom,s=mstrmojo.css,w=this.contentNode,z=this.titleNode,x=this;if(this.titleNode){if(this.floatingTitle){document.body.appendChild(this.titleNode);if(!this._onhover){this._onhovertt=function(){s.addClass(x.titleNode,["visible"]);x._onflt=true;return true;};this._onhoverofftt=function(){s.removeClass(x.titleNode,["visible"]);x._onflt=false;return true;};this._onhover=function(){var AA=x.titleNode;s.addClass(AA,["visible"]);var AB=r.position(x.contentNode,true);AA.style.top=(AB.y-AA.clientHeight+2)+j;AA.style.left=AB.x+j;return true;};this._onhoveroff=function(){s.removeClass(x.titleNode,["visible"]);return true;};}r.attachEvent(w,"mouseover",this._onhover);r.attachEvent(w,"mouseout",this._onhoveroff);r.attachEvent(z,"mouseover",this._onhovertt);r.attachEvent(z,"mouseout",this._onhoverofftt);}if(this.attachContextMenuEvent){this._oncontextmenu=function(AB,t){var AA=x.rightToolbar&&x.rightToolbar.btnMenu;if(AA){AA.cmPos=r.getMousePosition(AB,t);AA.openPopupMenu();AA.cmPos=null;r.preventDefault(t,AB);}};r.attachEvent(z,"contextmenu",this._oncontextmenu);}}if(this._super){this._super();}var u=this.getFormats();this.set("fc",u&&!u.height);if(this.isInFilterPanel()&&!this.isHorizFP()){var p=this.portletContainerNode.style,q=this.shadowNode.style,y=this.parent;p.width=q.width="99%";p.top=q.top=y.topStart+j;p.left=q.left=G+j;}else{if(this.isInFilterPanel()&&this.isHorizFP()){G=8;this.portletContainerNode.style.left=this.shadowNode.style.left=parseInt(u.left)+G*this.orgPos+j;}else{if(this.defn.ifp){this.adjustFPHeight2Fit();}}}},adjustFPHeight2Fit:function(){var r=mstrmojo.dom,p=r.position(this.titleNode),q=r.position(this.contentNode).y-p.y-p.h;this.content.domNode.style.height=parseInt(this.defn.fmts.height)-q+"px";},unrender:function E(q){if(this.floatingTitle&&this.titleNode){var s=this.domNode,p=this.titleNode,r=mstrmojo.dom;if(s&&this._onhover){r.detachEvent(s,"mouseover",this._onhover);}if(s&&this._onhoveroff){r.detachEvent(s,"mouseout",this._onhoveroff);}if(p&&this._onhovertt){r.detachEvent(p,"mouseover",this._onhovertt);}if(p&&this._onhoverofftt){r.detachEvent(p,"mouseout",this._onhoverofftt);}if(p&&this._oncontextmenu){r.detachEvent(p,"contextmenu",this._oncontextmenu);}if(p){document.body.removeChild(p);}}if(this._super){this._super(q);}},updateStyle:function(q,p){var s=this.shadowNode.style,r=this.containerNode.style;s.height=r.height=q;s.width=r.width=p;},_createFormats:function T(){var t=this.content&&this.content.getFormats(),r;r=t.p_fmts={};var q,s;for(q in O){s=O[q];if(s in t){r[s]=t[s];delete t[s];}}for(q in V){s=V[q];if(s in t){r[s]=t[s];}}t.height=this._ts.getContentHeight(t.height,r);if(mstrmojo.dom.isIE&&r.fx&&r.fx.ds&&!r["background-color"]){r["background-color"]="#ffffff";}},refresh:function o(){if(!this.hasRendered){return ;}var q=this.children,p;for(p=q.length-1;p>=0;p--){q[p].refresh();}},isInFilterPanel:function K(){return(f.call(this)!==null);},isHorizFP:function(){if(this.isInFilterPanel()){var p=this.getFilterPanel();return p&&p.defn&&p.defn.fds==2;}else{return false;}},getFilterPanel:function H(){return f.call(this);},getContainerHeight:function a(){return this.containerNode.clientHeight;},relocate:function C(q,p){if(this.isInFilterPanel()&&!this.isHorizFP()){this.portletContainerNode.style.top=this.shadowNode.style.top=q+j;}},setInfoWindowDimensions:function k(t){var q=this.domNode.style,p=this.shadowNode.style,r=this.portletContainerNode.style,s=mstrmojo._Formattable.getBorderWidths(this);t.h-=s.h;t.w-=s.w;p.height=r.height=q.height=t.h+j;p.width=r.width=q.width=t.w+j;t.h-=this.titleNode.offsetHeight;this.toolbarNode.style.display="none";},addDirtyKey:function J(p){A.call(this,"add",p);},removeDirtyKey:function I(p){A.call(this,"remove",p);},setDirtyChildren:function X(){var p=this.content;if(p&&p.setDirtyChildren){p.setDirtyChildren.apply(p,arguments);}}});var U=0,M=1,h=2;function Y(AC,AA,p,AD){var z=this.content,AB=z.k,y=mstrmojo.boxmodel.px2Inches,r=z.model.docModel||z.model,s=this.getFormats(),AE={},x=this,t=function(){var w=x.content&&x.content.defn;if(w){w.set("ds",AC);}},q={ZIndex:s["z-index"],WindowState:AC},u={};u[AB]=q;if(AA!==undefined&&p!==undefined){P.copy({OldHeight:y(r,AA),OldWidth:y(r,p),Height:y(r,parseInt(s.height,10)),Width:y(r,parseInt(s.width,10))},q);AE.success=function(w){var AF=w&&w.data;if(AF){z.model.loadPartialData(AF,AB);}t();var AG=x.parent;if("adjustSectionSize" in AG){AG.adjustSectionSize();}};r.saveRWProps(AB,u,1,this.loadDataOnResize,AE,true);}else{t();if(!(AD&&AD.all)){r.saveRWProps(AB,u,1,this.loadDataOnResize,AE,true);}}return u;}function R(){var x=this.content;if(!x){return ;}var u=function(p){mstrmojo.array.forEach(p,function(AB){if("ds" in AB){AB.set("visible",(AB.ds!==x.defn.ds));}});},y;if(this.isInFilterPanel()){var s=(parseInt(this.defn.ds,10)===U);x.set("visible",s);this.updateContentHeight(!s);y=this.leftToolbar;u(y&&y.children);var t=this.parent;if(t.refreshFP){t.refreshFP();}}else{var q=x.getFormats(),z=this.getFormats(),r=this.portletContainerNode.style,AA=this.shadowNode.style,w=this.contentNode.firstChild.style;w.height=q.height;w.width=q.width;AA.height=r.height=z.height;AA.width=r.width=z.width;AA.top=r.top=z.top;AA.left=r.left=z.left;if("z-index" in z){AA.zIndex=r.zIndex=z["z-index"];}y=this.rightToolbar;u(y&&y.children);if(x.resize){x.resize();}}}mstrmojo.DocResizablePortlet=mstrmojo.declare(mstrmojo.DocPortlet,null,{scriptClass:"mstrmojo.DocResizablePortlet",loadDataOnResize:false,_createFormats:function T(){this._super();var q=this.getFormats();var p=parseInt(this.defn.ds,10);if(p===U){q.normHeight=q.height;q.normWidth=q.width;if(q["z-index"]!==null&&q["z-index"]!==undefined){q.normZIndex=q["z-index"];}}if(p!==h){q.normTop=q.top;q.normLeft=q.left;}},onmaximize:function c(){var t=this.parent,x=this.content,w=x&&x.getFormats(),s=this.getFormats(),r=s.height,q=s.width,u=mstrmojo._Formattable.getBorderWidths(this);this.clearCache();x.clearCache();s.height=(parseInt(t.height(),10)-u.h)+j;w.height=this._ts.getContentHeight(s.height,s);s.width=w.width=(t.width()-u.w)+j;s.top=s.left=0;s["z-index"]=t.getMaxZIndex()+1;Y.call(this,h,r,q);},onminimize:function Z(){var u=this.content,q=u.dimNode||u.domNode,t=u&&u.getFormats(),s=this.getFormats(),r=s.height||q.offsetHeight,p=s.width;this.clearCache();u.clearCache();s.width=t.width=s.normWidth;s.top=s.normTop;s.left=s.normLeft;if(s.normZIndex!==null&&s.normZIndex!==undefined){s["z-index"]=s.normZIndex;}t.height=0;s.height=this._ts.getPortletMinHeight(s);Y.call(this,M,r,p);},onrestore:function Q(){var t=this.content,s=t&&t.getFormats(),r=this.getFormats(),q=r.height,p=r.width;this.clearCache();t.clearCache();r.height=r.normHeight;s.height=this._ts.getContentHeight(r.height,r);r.width=s.width=r.normWidth;r.top=r.normTop;r.left=r.normLeft;if(r.normZIndex!==null&&r.normZIndex!==undefined){r["z-index"]=r.normZIndex;}Y.call(this,U,q,p);},oncollapse:function S(p){return Y.call(this,M,undefined,undefined,p);},onexpand:function D(p){return Y.call(this,U,undefined,undefined,p);},postBuildRendering:function W(){if(!this._sub_dsChange){this._sub_dsChange=this.defn.attachEventListener("dsChange",this.id,R);}this._super();if(this.isInFilterPanel()){var p=(parseInt(this.defn.ds,10)===U);this.updateContentHeight(!p);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable");var D=mstrmojo.dom;mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mousedown>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div style="position:absolute;width:100%;"><table cellspacing="0" cellpadding="0" class="mstrmojo-Editor-titlebar"><tr><td class="mstrmojo-Editor-titleCell"><div class="mstrmojo-Editor-title"></div></td><td><a href="#" target="_new" class="mstrmojo-Editor-help"><img class="mstrmojo-Editor-help" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1143,"help")+'"></img></a></td><td><div class="mstrmojo-Editor-close" title="'+mstrmojo.desc(2102,"Close")+'"></div></td></tr></table></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},titlebarNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[0].firstChild:null;},helpNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[1].firstChild:null;},closeNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[2].firstChild:null;},containerNode:function(){return this.domNode.firstChild.childNodes[2];},buttonNode:function(){return this.domNode.firstChild.childNodes[3];},curtainNode:function(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var G=this.zIndex;this.editorNode.style.zIndex=G;this.curtainNode.style.zIndex=G-1;},onvisibleChange:function(J){if(J){return ;}var G=this.visible,H="closeEffect",I="none";if(G){H="openEffect";I="block";}if(this[H]){this.playEffect(H);}else{this.editorNode.style.display=I;if(this.modal){this.curtainNode.style.display=I;}}},onhelpChange:function(){if(this.showTitle){if(this.help===null){this.helpNode.style.display="none";}this.helpNode.href=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm")+"#"+(this.help||"");}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";}},preBuildRendering:function C(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function E(){return this.titlebarNode;},getMovingTarget:function F(){return this.editorNode;},onPreClose:function(){return true;},premousedown:function B(G){var H=D.eventTarget(G.hWin,G.e);if(H===this.closeNode){if(this.onPreClose()){this.close();}}},_set_visible:function A(L,I){var H=(this[L]!==I);if(H){this[L]=I;var K=this._close_handler;if(I){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var J=this;K=this._close_handler=K||function(M){var N=D.eventTarget(self,M);if(N&&N.parentNode&&!D.contains(J.editorNode,N,true,document.body)){J.close();}};D.attachEvent(document.body,"mousedown",K);}}else{var G=this._curtain_handler;if(G){D.detachEvent(window,"resize",G);}if(K){D.detachEvent(document.body,"mousedown",K);}}}return H;}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(G){G=Math.round(G);return["rgb(",G,",",G,",",G,")"].join("");}}},preStart:function(){var H=this.target,G=this.widget;G.editorNode.style.display="block";if(!G.modal){return false;}H.style.display="block";mstrmojo.css.setOpacity(H,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var G=this.widget;G.editorNode.style.display="none";return !!G.modal;}};}());(function(){var N,J;mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.DocPortlet");var Q={top:"top",left:"left","z-index":"zIndex",width:"width",height:"height"};mstrmojo.Vis=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.Vis",offsetTop:0,offsetLeft:0,isAndroid:window.navigator.userAgent.indexOf("Android")!=-1,updated:false,reRenderOnDimensionChg:true,getFormats:function(){return this.fmts;},isVis:function(){return true;},setModel:function L(V){this.set("model",V);if(V.data){this.set("model",V.data);}this.xtabModel=V;if(typeof (this.controller.getPageByTree)!="undefined"){this.controller.getPageByTree(false);}},destroy:function S(){this._super();var V=this.xtabModel;if(V&&V.destroy){V.destroy();delete this.xtabModel;}},setDimensions:function O(X,W){var V=this._super(X,W);if(V&&this.hasRendered&&this.reRenderOnDimensionChg){this.reRender();}return V;},reRender:function F(){this.unrender();this.render();},getWidth:function B(){return parseInt(this.width,10);},getHeight:function I(){return parseInt(this.height,10);},buildRendering:function H(){if(!this.updated){this.update();}if(this.parent instanceof mstrmojo.DocPortlet){delete this.left;delete this.top;this.height=this.fmts&&this.fmts.height;}this._super();},postBuildRendering:function E(){N=this.width;J=this.height;this.adjustWidgetOffsets();this._super();},adjustWidgetOffsets:function A(){var V=this.domNode,W={top:0,left:0};if(typeof (mstr)!="undefined"){W.top=mstr.utils.BoxModel.getElementSumOffsetTop(V);W.left=mstr.utils.BoxModel.getElementSumOffsetLeft(V);}else{if(typeof (mstrmojo)!="undefined"){W=mstrmojo.boxmodel.offset(V);}}this.offsetTop=W.top;this.offsetLeft=W.left;},initFromVisProps:function R(V){},update:function G(X){X=X||this.node;if(X){if(X.data){this.set("model",X.data);if(this.xtabModel&&this.xtabModel.set){this.xtabModel.set("data",X.data);}this.model=X.data;if(this.model.layoutModel){this.layoutModel=this.model.layoutModel;}if(this.model.layoutNode){this.layoutNode=this.model.layoutNode;}mstrmojo.hash.copy(X.data.extProps,this);}this.fmts=X.defn.fmts||X.defn.units[this.model.k].fmts;var V=this.fmts;if(V){for(var W in Q){v=Q[W];if(W in V){this[v]=V[W];}}}}if(this.model){this.initFromVisProps(this.model.vp);}this.updated=true;},getModel:function M(W){if(W){var V=mstrmojo.Vis.getVisGrid(this.layoutModel,this.layoutNode,W);if(V){return V.data;}else{alert(mstrmojo.desc(8427,"Incorrect visualization properties encountered.  Data may be inconsistent.  Please reset your properties."));}}else{return this.model;}},getDataParser:function K(V){return new mstrmojo.Vis.DataParser(this.getModel(V));},renderErrorMessage:function T(V){this.domNode.innerHTML='<div class="mstrmojo-message">'+V+"</div>";},getMessageID:function D(){return this.model.mid&&this.model.mid||this.xtabModel&&this.xtabModel.docModel&&this.xtabModel.docModel.mid;},hasNoninfowindowTarget:function U(Y){var g=this.xtabModel,f=(g&&g.docModel);var h=false;if(f){var d=f.defn&&f.defn.layouts,X=null;var W;if(d){for(W in d){if(d[W].loaded){X=d[W];break;}}}var Z=X&&X.units;this.selectorTargets={};if(Z&&Y.scObjList){for(var W=0;W<Y.scObjList.length;W++){var a=Y.scObjList[W];var b=a.sc.tks.split("\x1E");for(var V=0;V<b.length;V++){var c=Z[b[V]];if(c){this.selectorTargets[b[V]]=c;if(!this.isChildOfIfw(Z,c)){h=true;}}}}}}return h;},isChildOfIfw:function C(V,W){while(W){if(W.ifw){return true;}W=V[W.pnk];}return false;},performAction:function P(V){var X=this.xtabModel.getAction(V),W=X&&X.h;if(W&&this.controller[W]){this.controller[W](this,X.a);return true;}return false;}});mstrmojo.Vis.getVisGrid=function(V,d,W){var a=d;var Y=V.getChildren(d,false);for(var X=0;X<Y.length;X++){var b=Y[X];if(b.k==W){return b;}else{var Z=mstrmojo.Vis.getVisGrid(V,b,W);if(Z){d=a;return Z;}}}};mstrmojo.Vis.DataParser=function(X){var f=mstrmojo.Vis;return{getRowTitles:function(){return new f.Titles(X,true);},getColTitles:function(){return new f.Titles(X,false);},findMetricValue:function(j,o){var n=X.ghs.rhs.items;for(var k in n){var l=n[k].items;var h=true;for(var g in j){if(j[g]!=l[g].idx){h=false;break;}}if(h){return new mstrmojo.Vis.MetricValue(X.gvs.items[k].items[o]);}}},getTotalRows:function a(){return X.eg?0:X.ghs.rhs.items.length;},getTotalColHeaderRows:function Y(){return(!X.ghs.chs.items?0:X.ghs.chs.items.length);},getTotalCols:function V(){return this.getColHeaders(0).size();},getRowHeaders:function d(g){return new f.Headers(X,g,true);},getColHeaders:function c(g){return new f.Headers(X,g,false);},getMetricValue:function b(h,g){return new f.MetricValue(X,X.gvs.items[h].items[g]);},getColumnHeaderCount:function Z(){return X.gvs.items[0].items.length;},getCSSString:function W(){return X.cssString;}};};mstrmojo.Vis.Titles=function(V,a){var Z=(a)?V.gts.row:V.gts.col;return{size:function Y(){return Z.length;},getTitle:function X(b){return new mstrmojo.Vis.Title(Z[b]);},getCSS:function W(b){return V.css[Z[b].cni].n;}};};mstrmojo.Vis.Headers=function(W,X,b){var c=(b)?W.gts.row:W.gts.col;var a=(b)?W.ghs.rhs:W.ghs.chs;var Y=a.items&&a.items[X].items;return{size:function d(){return(!Y?0:Y.length);},getHeader:function V(f){return Y&&Y[f]&&new mstrmojo.Vis.Header(Y[f],b?c[f]:c[X]);},getCSS:function Z(f){return Y&&W.css[Y[f].cni].n;},getHeaderCell:function(f){return Y&&Y[f];}};};mstrmojo.Vis.Title=function(W){return{getActionType:function(){return W.at;},getDrillPath:function(){return W.dp;},getHeaderValues:function V(){return W.es;},getHeaderName:function X(Z){return W.es[Z].n;},getHeaderId:function X(Z){return W.es[Z].id;},getForms:function Y(){return W.fs;},getFormId:function(){return W.fid;},getFormType:function(){return W.ftp;},getUnitId:function(){return W.id;},getLinkMap:function(){return W.lm;},getName:function(){return W.n;},getUnitDssType:function(){return W.otp;},getSelectorControl:function(){return W.sc;}};};mstrmojo.Vis.Header=function(X,V){return{getName:function Z(){return(X.idx===-1)?"":V.es[X.idx].n;},getElementId:function c(){return(X.idx===-1)?"":V.es[X.idx].id;},getObjectId:function Y(){return(X.idx===-1)?"":V.es[X.idx].oid;},getElementIndex:function W(){return X.idx;},getActionType:function b(){return X.at;},isTotal:function a(){return X.otr===1;}};};mstrmojo.Vis.MetricValue=function(V,c){var b=c;return{getValue:function W(){return b.v;},getThresholdType:function X(){return b.ty;},getRawValue:function a(){return b.rv;},getCSS:function Y(){return V.css[b.cni].n;},getThresholdValue:function d(f){if(b.ti==undefined){return f;}return V.th[b.ti].n;},getFillColor:function Z(f){if(b.ci==undefined){return f;}return V.fc[b.ci].n;}};};})();