var isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function ControlVersion(){var A;var B;var C;try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");A=B.GetVariable("$version");}catch(C){}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");A="WIN 6,0,21,0";B.AllowScriptAccess="always";A=B.GetVariable("$version");}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A=B.GetVariable("$version");}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3");A="WIN 3,0,18,0";}catch(C){}}if(!A){try{B=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");A="WIN 2,0,0,11";}catch(C){A=-1;}}return A;}function GetSwfVer(){var G=-1;if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]){var F=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"";var A=navigator.plugins["Shockwave Flash"+F].description;var E=A.split(" ");var C=E[2].split(".");var H=C[0];var B=C[1];if(E[3]!=""){tempArrayMinor=E[3].split("r");}else{tempArrayMinor=E[4].split("r");}var D=tempArrayMinor[1]>0?tempArrayMinor[1]:0;var G=H+"."+B+"."+D;}}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.6")!=-1){G=4;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv/2.5")!=-1){G=3;}else{if(navigator.userAgent.toLowerCase().indexOf("webtv")!=-1){G=2;}else{if(isIE&&isWin&&!isOpera){G=ControlVersion();}}}}}return G;}function DetectFlashVer(F,D,C){versionStr=GetSwfVer();if(versionStr==-1){return false;}else{if(versionStr!=0){if(isIE&&isWin&&!isOpera){tempArray=versionStr.split(" ");tempString=tempArray[1];versionArray=tempString.split(",");}else{versionArray=versionStr.split(".");}var E=versionArray[0];var A=versionArray[1];var B=versionArray[2];if(E>parseFloat(F)){return true;}else{if(E==parseFloat(F)){if(A>parseFloat(D)){return true;}else{if(A==parseFloat(D)){if(B>=parseFloat(C)){return true;}}}}}return false;}}}function AC_AddExtension(B,A){if(B.indexOf("?")!=-1){return B.replace(/\?/,A+"?");}else{return B+A;}}function AC_Generateobj(F,E,A,D){var C="";if(isIE&&isWin&&!isOpera){C+="<object ";for(var B in F){C+=B+'="'+F[B]+'" ';}for(var B in E){C+='><param name="'+B+'" value="'+E[B]+'" /> ';}C+="></object>";}else{C+="<embed ";for(var B in A){C+=B+'="'+A[B]+'" ';}C+="> </embed>";}if(typeof (D)!="undefined"){var G=(typeof D=="string")?document.getElementById(D):D;G.innerHTML=C;}else{document.write(C);}}function AC_FL_RunContent(){var A=AC_GetArgs(arguments,".swf","movie","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000","application/x-shockwave-flash");AC_Generateobj(A.objAttrs,A.params,A.embedAttrs,A.parentDiv);}function AC_GetArgs(B,E,G,D,H){var A=new Object();A.embedAttrs=new Object();A.params=new Object();A.objAttrs=new Object();for(var C=0;C<B.length;C=C+2){var F=B[C].toLowerCase();switch(F){case"classid":break;case"parentdiv":A.parentDiv=B[C+1];case"pluginspage":A.embedAttrs[B[C]]=B[C+1];break;case"src":case"movie":B[C+1]=AC_AddExtension(B[C+1],E);A.embedAttrs.src=B[C+1];A.params[G]=B[C+1];break;case"onafterupdate":case"onbeforeupdate":case"onblur":case"oncellchange":case"onclick":case"ondblClick":case"ondrag":case"ondragend":case"ondragenter":case"ondragleave":case"ondragover":case"ondrop":case"onfinish":case"onfocus":case"onhelp":case"onmousedown":case"onmouseup":case"onmouseover":case"onmousemove":case"onmouseout":case"onkeypress":case"onkeydown":case"onkeyup":case"onload":case"onlosecapture":case"onpropertychange":case"onreadystatechange":case"onrowsdelete":case"onrowenter":case"onrowexit":case"onrowsinserted":case"onstart":case"onscroll":case"onbeforeeditfocus":case"onactivate":case"onbeforedeactivate":case"ondeactivate":case"type":case"codebase":case"id":A.objAttrs[B[C]]=B[C+1];break;case"width":case"height":case"align":case"vspace":case"hspace":case"class":case"title":case"accesskey":case"name":case"tabindex":A.embedAttrs[B[C]]=A.objAttrs[B[C]]=B[C+1];break;default:A.embedAttrs[B[C]]=A.params[B[C]]=B[C+1];}}A.objAttrs.classid=D;if(H){A.embedAttrs.type=H;}return A;}AC_OETagsObj.prototype=new Object();function AC_OETagsObj(){}var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},now:function now(){return new Date().getTime();},usesFrames:false};mstrmojo.gmaps={};(function(){var F=mstrmojo;F.global=(function(){var G=function(){return this;};return G.call(null);}());F.dbg=F.emptyFn;F.dbg_stack=F.emptyFn;F.dbg_xhr=F.emptyFn;F.dbg_profile=F.emptyFn;F.platform={};F.prompt={};F.settings={};F.ui={};F.ACL={};F.storage={};F.utils={};F.maps={};F.maps.androidmap={};F.maps.jsmap={};F.graph={};F.IPA={};F.ME={};F.Architect={};F.plugins={};F.gmaps={};F.DI={};F.qb={};F.WH={};F.txEditor={};F.express={ui:{}};F.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{}},selectors:{},ui:{}};F.iphone={};F.winphone={};F.mstr={};F.err=function E(I){var H=I.name+': "'+I.message+'"';if(F.debug){if(I.fileName){H+=" at\n    "+I.fileName;}if(I.hasOwnProperty("lineNumber")){H+=": "+I.lineNumber;}else{if(I.hasOwnProperty("line")&&I.sourceURL){var G=I.sourceURL.split("/");H+="("+G[G.length>1?G.length-1:0]+":"+I.line+")";}}}this.dbg(H);if(F.Dialog){F.alert(I.message,null,I.name);}else{window.alert(H);}};F.confirm=function B(G){return window.confirm(G);};F.alert=function D(G){window.alert(G);};var C=!!(/return true/.test(function(){return true;}));F.mixin=function A(K,I){if(K){I=I||{};var J=/this\.\_super/;var H=function(O,N){return function M(){var Q=this._super;this._super=N;var P=O.apply(this,arguments||[]);this._super=Q;return P;};};var G=K.__onmixin__;if(G){delete K.__onmixin__;}var L;for(L in K){if((typeof K[L]==="function")&&(!C||J.test(K[L]))){I[L]=H(K[L],I[L]);}else{I[L]=K[L];}}if(G){K.__onmixin__=G;}}return I;};}());(function(){var _xhr;var _missing={};var _G=mstrmojo.global,_app=_G.mstrApp||{},_jsRoot=_app.jsRoot||"../javascript/",_jsMojoRoot=_app.jsMojoRoot||"../javascript/mojo/js/source/",_isIE=!!document.all;function _fqcn2File(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../plugins/"+pluginName+"/javascript/"+_jsMojoRoot+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=_jsMojoRoot+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=_jsRoot+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}function _getXHR(){_xhr=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function _syncGet(file){var result=null;if(!_xhr){_getXHR();}if(_xhr){try{_xhr.open("GET",file,false);_xhr.send(null);result=_xhr.responseText||null;}catch(localerr){}if(!_isIE&&_xhr.abort){_xhr.abort();}}return result;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function _syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!_xhr){_getXHR();}if(_xhr){try{var config=mstrConfig,m=null;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(config&&config.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}_xhr.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);_xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}_xhr.send(params);result=_xhr.responseText||null;}catch(localerr){window.console.log(localerr);}}return result;}function _jsGet(file,nullCheck){var js=_syncGet(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if(_missing[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(_fqcn2File(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}_missing[fqcn]=true;return false;}};var _L=mstrmojo.loader,_LL=_L.loaded;var _reqCache={};mstrmojo.requiresCls=function reqCls(){var as=arguments,ns=[],len=as.length,i;for(i=0;i<len;i++){var n=as[i];if(!n||_LL[n]||_reqCache[n]||_missing[n]){continue;}if(!n.match(/^mstrmojo\.plugins\./)){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!_reqCache[s]){ns.push(s);_reqCache[s]=true;}}}ns.push(n);_reqCache[n]=true;}var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!_L.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}return true;};var _D=mstrmojo.descriptors,_dPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];_D[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var _reqDesc=function(prefix,ids){var as=ids,ns=[],len=as.length,i;for(i=0;i<len;i++){var k=as[i];if(k&&!(_D.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=_syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var p=prefix,args=[].slice.call(arguments);args[0]=null;_reqDesc(p,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){_reqDesc(_dPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if(_D.hasOwnProperty(_dPrefix+descID)){return _D[_dPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";_D[_dPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if(_D.hasOwnProperty(prefix+descID)){return _D[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";_D[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){_LL[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){_reqCache[fqcn]=false;_LL[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function dcl(SuperCls,mixins,config){function constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){constr.prototype=new SuperCls({dontInit:true});constr.prototype.constructor=constr;}var proto=constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){_LL[config.scriptClass]=true;}}return constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getVRN(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));if(!isSameWebApp){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>0){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};}());(function(){var R=Math;function AA(G,b){return b||(G||window).event;}var Ab=!!document.all,r=navigator.userAgent,h=!Ab&&!!r.match(/Firefox/),n=0,s=!!r.match(/Android/),AV=!!r.match(/iPad/),AP=!!document.createTouch||s,q=!!r.match(/PlayBook/),S=!!r.match(/Windows Phone/),V=Ab&&!!r.match(/MSIE 10/),Ac=!Ab&&!!r.match(/Trident.*rv/),t=Ab&&!V,g=h?"-moz-":Ab?"":"-webkit-",AG=h?"Moz":V?"":Ab?"ms":"webkit",AN=(V?"t":"T"),AJ=AG+AN+"ransition",AZ=AW(),AS=AD(),z=W(),A=Q(),o=i();function AW(){return AG+AN+"ransform";}function AD(){return AJ+"Property";}function W(){return AJ+"Duration";}function Q(){return(V||h)?"transitionend":"webkitTransitionEnd";}function i(){return AG+"BoxShadow";}function AM(){if(!n&&h){var G=r.match(/.*Firefox\/([\d|\.]*).*/);if(G){n=parseFloat(G[1],10);}}return n;}function Aa(){var Ae=0,Ai=0,Af=window,Ag=document,G=Ag.body,Ah=Ag.documentElement;if(typeof Af.pageYOffset=="number"){Ai=Af.pageYOffset;Ae=Af.pageXOffset;}else{if(G&&(G.scrollLeft||G.scrollTop)){Ai=G.scrollTop;Ae=G.scrollLeft;}else{if(Ah&&(Ah.scrollLeft||Ah.scrollTop)){Ai=Ah.scrollTop;Ae=Ah.scrollLeft;}}}return{x:Ae,y:Ai};}function AE(G){G=G||0;G=String(G);return((G.indexOf("%",0))!=-1)?G:(G+"px");}function AK(w,Ah,Ag,Af,Ae){if(!mstrmojo.dom.isWinPhone){Af=(Af||false||this.isHWAccelerated);}else{Af=false;}var b=Ae+(Af?"3d":"")+"(",G=Af?(","+Ag+")"):")";return b+w+","+Ah+G;}var L=1,AT=2,Y=3,D=4,K=5;function x(Ah,Ag,Ak){var Aj=Ah.style,b=Aj.display,Af=this.windowDim(),Ae=Aa();Aj.display="block";var Ai=Af.w-Ah.clientWidth,Al=Af.h-Ah.clientHeight,G={4:0,5:Ai,3:Ai/2},w={1:0,3:Al/2,2:Al};Aj.left=G[Ag]+Ae.x+"px";Aj.top=w[Ak]+Ae.y+"px";Aj.display=b;}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:r,isIE:Ab,isIE6:Ab&&!!r.match(/MSIE 6/),isIE7:Ab&&!!r.match(/MSIE 7/),isIE8:Ab&&!!r.match(/MSIE 8/),isIE9:Ab&&!!r.match(/MSIE 9/),isIE10:V,isIEW3C:Ac,isNSIE:Ab&&!V,isDXIE:t,isFF:h,isWK:!!r.match(/AppleWebKit/),isSafari:!!r.match(/Safari/)&&!r.match(/Chrome/),isHWAccelerated:!s,isAndroid:s,isIPad:AV,isPlayBook:q,isWinPhone:S,supportsTouches:AP,TOUCHSTART:AP?"touchstart":"mousedown",TOUCHMOVE:AP?"touchmove":"mousemove",TOUCHEND:AP?"touchend":"mouseup",TOUCHCANCEL:AP?"touchcancel":"",RESIZE:AP?"orientationchange":"resize",CSS3_PREFIX:g,CSS3_BOXSHADOW:o,CSS3_TRANSFORM:AZ,CSS3_TRANSITION:AJ,CSS3_TRANSITION_PROPERTY:AS,CSS3_TRANSITION_DURATION:z,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},supports:function B(b){var G=this.isFF&&AM();switch(b){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||G>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||G>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);}return false;},replace:function F(w,G){if(!w||!G){return ;}var b=w.parentNode;if(b){b.replaceChild(G,w);}},attachEvent:function u(w,b,Ae,G){if(w.addEventListener){return w.addEventListener(b,Ae,!!G);}else{return w.attachEvent("on"+b,Ae);}},detachEvent:function AQ(w,b,Ae,G){if(!w){return ;}if(w.removeEventListener){w.removeEventListener(b,Ae,!!G);}else{w.detachEvent("on"+b,Ae);}},attachOneTimeEvent:function Z(Ae,b,Af,G){var w=function(Ag){Af(Ag);mstrmojo.dom.detachEvent(this,b,w,G);};this.attachEvent(Ae,b,w,G);Ae=null;return w;},captureDomEvent:function AI(Ag,Ae,b,Af,w){var G=mstrmojo.all[Ag];if(G){G.captureDomEvent(Ae,b,Af,w);}},translate:function O(w,b,Ag,Af,G,Ae){G=(G&&" "+G)||"";w.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(b,Ag,Af,Ae)+G;},createTranslateString:function T(G,Ae,w,b){G=AE(G);Ae=AE(Ae);w=AE(w);return AK(G,Ae,w,b,"translate");},createScaleString:function y(G,Ae,w,b){G=G||0;Ae=Ae||0;w=w||0;return AK(G,Ae,w,b,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function E(w,G,Ae,Ag){var b=w.id+"-"+G,Af=this._bufferConnects[b];if(!Af){Af=this._bufferConnects[b]={elId:w.id,eventName:G,timer:null,bufferSize:Ag,listeners:[],callback:function(Ah){mstrmojo.dom._callback(Ah,mstrmojo.global,b);return true;}};this.attachEvent(w,G,Af.callback);}Af.listeners.push(Ae);},_callback:function N(Af,G,w){if(!Af){Af=G.event;}var Ae=this._bufferConnects[w],Ag=Ae&&Ae.timer;if(Ae&&!Ag){var b=(Ae.bufferSize===null)?this._bufferSize:Ae.bufferSize;if(Ae.bufferSize){Ae.timer=G.setTimeout(function(){mstrmojo.dom.updateBuffers(w);},b);}else{mstrmojo.dom.updateBuffers(w);}}},updateBuffers:function AU(Ae){var Af=this._bufferConnects[Ae],b=Af&&Af.listeners;for(var w=0,G=b&&b.length||0;w<G;w++){b[w]();}if(Af&&Af.timer){delete Af.timer;}},detachBufferedEvent:function a(Ag,w,Ah){if(!Ag){return ;}var Af=Ag.id+"-"+w,Ai=this._bufferConnects[Af],b=Ai&&Ai.listeners,G=(b&&b.length)||0;if(G){for(var Ae=G-1;Ae>-1;Ae--){if(b[Ae]==Ah){b.splice(Ae,1);}}if(!b.length){this.detachEvent(Ag,w,Ai.callback);delete this._bufferConnects[Af];if(Ai.timer){mstrmojo.global.clearTimeout(Ai.timer);}}}},eventTarget:function AB(G,b){b=AA(G,b);return b.target||b.srcElement;},ctrlKey:function AX(G,b){return AA(G,b).ctrlKey;},shiftKey:function AC(G,b){return AA(G,b).shiftKey;},getButton:function AO(G,b){return((AA(G,b)).button==2)?2:1;},getMousePosition:function j(Af,Ae){Ae=Ae||window;var w,Ai;if(mstrmojo.dom.isIE){Af=Af||Ae.event;var Ag=document,G=Ag.body,Ah=Ag.documentElement;w=Af.clientX+G.scrollLeft+(Ah.scrollLeft||0);Ai=Af.clientY+G.scrollTop+(Ah.scrollTop||0);}else{w=Af.pageX;Ai=Af.pageY;}return{x:w,y:Ai};},position:function(b,w){var Ag={x:0,y:0};if(b&&b.getBoundingClientRect){try{Ag=b.getBoundingClientRect();}catch(Af){Ag={left:0,top:0,right:0,bottom:0,height:0,width:0};}Ag={x:Ag.left,y:Ag.top,w:Ag.right-Ag.left,h:Ag.bottom-Ag.top};if(this.isIE6||this.isIE7){var G=b.ownerDocument;if(G){var Ai=G.documentElement,Ah=Ai.getBoundingClientRect();Ag.x-=Ah.left;Ag.y-=Ah.top;}}}if(w){var Ae=Aa();Ag.x+=Ae.x;Ag.y+=Ae.y;}return Ag;},delta:function J(w,G){G=G||document.body;var b=this.position(w),Ae=this.position(G);return{x:Math.round(b.x-Ae.x),y:Math.round(b.y-Ae.y)};},windowDim:function Ad(){var G=0,Ae=0,Af=window,Ag=document,Ah=Ag.documentElement,b=Ag.body;if(typeof (Af.innerWidth)=="number"){G=Af.innerWidth;Ae=Af.innerHeight;}else{if(Ah&&(Ah.clientWidth||Ah.clientHeight)){G=Ah.clientWidth;Ae=Ah.clientHeight;}else{if(b&&(b.clientWidth||b.clientHeight)){G=b.clientWidth;Ae=b.clientHeight;}}}return{w:G,h:Ae};},center:function AH(G){x.call(this,G,Y,Y);},bottomCenter:function H(G){x.call(this,G,Y,AT);},clearBrowserHighlights:function P(G){G=G||self;if(Ab){var Ah=G.document,Ag=Ah&&Ah.selection,Ae=Ag&&Ag.empty;if(Ae){try{Ag.empty();}catch(w){}}}else{var b=G.getSelection,Af=b&&G.getSelection();if(Af&&!Af.isCollapsed){if(Af.empty){Af.empty();}else{if(Af.removeAllRanges){Af.removeAllRanges();}}}}},findAncestorByAttr:function AL(Af,w,b,G){var Ag=b?Af:Af&&Af.parentNode;while(Ag&&(Ag!=G)){var Ae=Ag.getAttribute&&Ag.getAttribute(w);if(Ae!=null){return{node:Ag,value:Ae};}Ag=Ag.parentNode;}return null;},findAncestorByName:function AY(w,Ag,b,G){Ag=Ag&&Ag.toLowerCase();var Ae=b?w:w&&w.parentNode;while(Ae&&(Ae!=G)){var Af=Ae.nodeName;if(Af&&(Af.toLowerCase()==Ag)){return Ae;}Ae=Ae.parentNode;}return null;},contains:function M(Ae,Af,b,G){var w=Af;if(!b){w=w.parentNode;}while(w){if(w==Ae){return true;}if(w===G){break;}w=w.parentNode;}return false;},preventDefault:function AR(G,b){if(!b){b=G.event;}if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}},stopPropogation:function k(G,b){if(!b){b=G.event;}if(b.stopPropogation){b.stopPropogation();}else{b.cancelBubble=true;}},firstTouch:function C(G,b){return b&&b.touches&&b.touches.length?b.touches[0]:(b||G.event);},firstChangedTouch:function I(G,b){return b&&b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:(b||G.event);},isLandscape:function X(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function(G){while(G){var b=G.mstrmojoId;if(b!=null){return mstrmojo.all[b];}G=G.parentNode;}return null;},setCaret:function(G,w){if(G.setSelectionRange){G.focus();G.setSelectionRange(w,w);}else{if(G.createTextRange){var b=G.createTextRange();b.move("character",w);b.select();}}}});var AF=mstrmojo.dom,f=window,l=document,U=l&&l.documentElement,p=l&&l.body;if(f.innerWidth){AF.getHorizontalScroll=function(){return f.pageXOffset;};AF.getVerticalScroll=function(){return f.pageYOffset;};}else{if(U&&U.clientWidth){AF.getHorizontalScroll=function(){return U.scrollLeft;};AF.getVerticalScroll=function(){return U.scrollTop;};}else{if(p.clientWidth){AF.getHorizontalScroll=function(){return p.scrollLeft;};AF.getVerticalScroll=function(){return p.scrollTop;};}}}})();(function(){mstrmojo.boxmodel={rangeIntersect:function C(H,F,G,E){if(H<G){return G<=F;}else{if(H>G){return H<=E;}else{return true;}}},px2Inches:function A(F,E){E=parseInt(E,10);return parseFloat((E/F.zf/F.dpi).toFixed(4),10);},offset:function D(G,F){var I=G,E=0,H=0;while(G){E+=G.offsetLeft;H+=G.offsetTop;G=G.offsetParent;if(G===F){break;}}for(e=I&&I.parentNode;e&&e!=F;e=e.parentNode){if(e.scrollTop){H-=e.scrollTop;}if(e.scrollLeft){E-=e.scrollLeft;}}return{left:E,top:H};},convert2px:function B(H,F){if(!/px$/.test(F)){var E=document.createElement("img"),G;E.style.zIndex=-1;E.style.left=F;H.appendChild(E);G=E.style.pixelLeft;H.removeChild(E);return G+"px";}else{return F;}}};})();(function(){mstrmojo.FlexHelper=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.FlexHelper",getWidget:function C(D){var E=D.split("x");return mstrApp.docModel.getUnitInstance(E[0],E[1]);},getZoomFactor:function A(){return mstrApp.docModel.zf*100;}});var B=new mstrmojo.FlexHelper();window.getFlexHelper=function(){return B;};})();(function(){mstrmojo._CanRenderChildrenOnShow=mstrmojo.provide("mstrmojo._CanRenderChildrenOnShow",{_subs_renderOnShow:null,childRenderCheck:function B(D){if(this.renderMode!=="onshow"){return this._super(D);}else{if(D.visible){return this._super(D);}else{var C=this._subs_renderOnShow;if(!C){C={};this._subs_renderOnShow=C;}if(!C[D.id]){C[D.id]=D.attachEventListener("visibleChange",this.id,"_on_child_visibleChange");}return false;}}},_on_child_visibleChange:function A(C){if(this.hasRendered){var E=C&&C.src;if(E&&this.childRenderCheck(E)){var D=this._subs_renderOnShow;if(D){E.detachEventListener(D[E.id]);delete D[E.id];}E.render();}}}});})();(function(){var L=/\{\@([^\}]+)\}/gm,H=/\</gm,P=/\>/gm,D=/\S/,O=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],E=new RegExp("(\\"+O.join("|\\")+")","g"),Q={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'};var J=function(S){if(S==null){return"null";}var T=typeof (S);if(T!="object"){return T;}else{if(S.length===undefined){return"object";}else{return"array";}}};var R={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function F(T,V){if(!T){return"";}var U=[];for(var S in V){U.push(S.k||S);}return T.replace(new RegExp(U.join("|"),"g"),function(W){var X=V[W];return X.v||X;});},trim:function N(S){return(S&&S.replace)?S.replace(/^\s+/,"").replace(/\s+$/,""):S;},ellipsize:function A(U,T){var S=this.trim(U.substr(0,(T||1)-1));if(S!==U){S+="&hellip;";}return S;},isEmpty:function I(S){return(S==null)||!(D.test(S));},regEscape:function M(S){return S.replace(E,"\\$1");},encodeXMLAttribute:function(S){return mstrmojo.string.multiReplace(S,Q);},encodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,C);},decodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,K);},htmlAngles:function(S){S=String(S);if(S!=null){return S.replace(H,"&lt;").replace(P,"&gt;");}return S;},apply:function G(S,T){if(!S){return"";}return S.replace(L,function U(V,W){return(W in T&&T[W]!==null)?T[W]:"";});},json2xml:function(h,b,V){if(!(b instanceof Array)){b=[b];}var T=V&&V.isSerializable,Z=(V.convertBoolean===false)?false:true;var f=[],S=[],U,j,o;for(var Y=0,k=b.length;Y<k;Y++){var l=b[Y];for(U in l){if(T){var a=T(U,b,Y);if(a!==true){if(a===false){continue;}else{if(a.att){f.push(a.att);}if(a.child){S.push(a.child);}continue;}}}j=l[U];o=J(j);switch(o){case"array":S.push("<"+U+">");for(var W=0,X=j.length;W<X;W++){var g=V.getArrItemName(U,j,W)||W;S.push(this.json2xml(g,j[W],V));}S.push("</"+U+">");break;case"object":S.push(this.json2xml(U,j,V));break;case"string":f.push(U+'="'+mstrmojo.string.encodeXMLAttribute(j)+'"');break;case"boolean":f.push(U+'="'+((Z)?(j?"-1":"0"):j)+'"');break;case"null":if(!V.skipNull){f.push(U+'="'+V.nullValue+'"');}break;default:f.push(U+'="'+j+'"');break;}}}return"<"+h+" "+f.join(" ")+">"+S.join("")+"</"+h+">";},escape4HTMLText:function B(Z){if(!Z||!Z.replace){return Z;}var W=/\"/gm;var U="&quot;";var a=/\&/gm;var Y="&amp;";var X=/\</gm;var S="&lt;";var V=/\>/gm;var T="&gt;";return Z.replace(a,Y).replace(W,U).replace(X,S).replace(V,T);},parseUri:function(W,T){T=T||R;var S=T.parser[((T.strictMode)?"strict":"loose")].exec(W),V={},U=14;while(U--){V[T.key[U]]=S[U]||"";}V[T.q.name]={};V[T.key[12]].replace(T.q.parser,function(Y,X,Z){if(X){V[T.q.name][X]=Z;}});return V;}});})();(function(){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var D=String.fromCharCode;function A(F){F=F.replace(/\r\n/g,"\n");var E="";for(var H=0;H<F.length;H++){var G=F.charCodeAt(H);if(G<128){E+=D(G);}else{if((G>127)&&(G<2048)){E+=D((G>>6)|192);E+=D((G&63)|128);}else{E+=D((G>>12)|224);E+=D(((G>>6)&63)|128);E+=D((G&63)|128);}}}return E;}function C(E){var F="",H=0,J=0,I=0,G=0;while(H<E.length){J=E.charCodeAt(H);if(J<128){F+=D(J);H++;}else{if((J>191)&&(J<224)){I=E.charCodeAt(H+1);F+=D(((J&31)<<6)|(I&63));H+=2;}else{I=E.charCodeAt(H+1);G=E.charCodeAt(H+2);F+=D(((J&15)<<12)|((I&63)<<6)|(G&63));H+=3;}}}return F;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function(H){var F=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(H&&H.indexOf("=?UTF-8?B?")===0){var G="",E;while((E=F.exec(H))!==null){G+=mstrmojo.base64.decode(E[1]);}return G;}return H;},encode:function(G){var E="";var N,L,J,M,K,I,H;var F=0;G=A(G);while(F<G.length){N=G.charCodeAt(F++);L=G.charCodeAt(F++);J=G.charCodeAt(F++);M=N>>2;K=((N&3)<<4)|(L>>4);I=((L&15)<<2)|(J>>6);H=J&63;if(isNaN(L)){I=H=64;}else{if(isNaN(J)){H=64;}}E+=B.charAt(M)+B.charAt(K)+B.charAt(I)+B.charAt(H);}return E;},decode:function(G){var E="",F=0;var N,L,J,M,K,I,H;G=G.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(F<G.length){M=B.indexOf(G.charAt(F++));K=B.indexOf(G.charAt(F++));I=B.indexOf(G.charAt(F++));H=B.indexOf(G.charAt(F++));N=(M<<2)|(K>>4);L=((K&15)<<4)|(I>>2);J=((I&3)<<6)|H;E+=D(N);if(I!=64){E+=D(L);}if(H!=64){E+=D(J);}}E=C(E);return E;}});})();(function(){mstrmojo._IsPopup={visible:false,opener:null,onOpen:null,onClose:null,open:function B(E,D){if(this.updatePopupConfig){this.updatePopupConfig(D,E);}else{if(D){for(var C in D){this.set(C,D[C]);}}}this.set("opener",E);if(!this.hasRendered){this.render();}if(this.nudge){this.domNode.style.top="-10000px";}this.set("visible",true);if(this.nudge){this.nudge();}if(this.onOpen){this.onOpen();}},close:function A(C){if(this.onClose){this.onClose(C);}this.set("visible",false);this.set("opener",null);}};})();mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){function G(S,V,U){var W=this._layoutWidgets[V],Z=S.slot,X=W.f,Y=W.p,T=(X&&X[Z]!==undefined),R=(Y&&Y[Z]!==undefined);if(Z&&((!U&&T)||R)){return T?X[Z]:(W.x*parseInt(Y[Z],10)/100)+"px";}return S[(V==="h")?"height":"width"];}function Q(T,S,R){if(T.ignoreLayout){return ;}if(T.setDimensions){T.setDimensions(S,R);}else{if(T.set){T.set("height",S);T.set("width",R);}}}function I(U){var S=this.children,W,Y;for(W=0,Y=(S&&S.length)||0;W<Y;W++){var T=S[W],Z=T.slot;if(Z){var X=G.call(this,T,"h",U),a=G.call(this,T,"w",U);this.setSlotDimensions(Z,X,a);Q(T,X,a);var R=G.call(this,T,"h",U),V=G.call(this,T,"w",U);if(R!==X||V!==a){Q(T,R,V);}this.setSlotDimensions(Z,R,V);}}this.afterLayout();}function F(X,T,V){var W=X.slot,U=T&&T.a;if(!U||U[W]===undefined){return ;}var R=this[W]["offset"+V],S=U[W];if(R===S){return ;}T.x-=(R-S);U[W]=R;}function N(R){this.beforeLayout();var S=this._layoutWidgets,T=R.src;F.call(this,T,S.h,"Height");F.call(this,T,S.w,"Width");I.call(this,true);}function E(T,W){if(!T){return null;}var R=this.children,g=W.toLowerCase(),X=parseInt(this[g],10),a,b,V,S,Y,Z,U,h,f;for(f in T){h=T[f];if(h.match(/px$/)){X-=parseInt(h,10);a=a||{};a[f]=h;}else{if(h.match(/\%$/)){b=b||{};b[f]=h;}else{V=V||{};V[f]=h;}}}if(V&&b){for(Y=0,Z=(R&&R.length)||0;Y<Z;Y++){U=R[Y];f=U.slot;if(U.slot&&V[f]&&!U.ignoreLayout){S=S||{};if(U.hasRendered){S[f]=this[U.slot]["offset"+W];X-=S[f];}else{S[f]=0;U.attachEventListener((U instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,N);}}}}return{f:a,p:b,a:S,x:X};}mstrmojo._HasLayout={_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function O(R){this._super(R);this.layoutConfig=mstrmojo.hash.clone(this.layoutConfig);},preBuildRendering:function M(){var T=this.cssText||"";var R=this.height;if(R&&R!=="auto"){T+="height:"+this.height+";";}var S=this.width;if(S&&S!=="auto"){T+="width:"+this.width+";";}this.cssText=T;return(this._super)?this._super():true;},postBuildRendering:function B(){this.doLayout();return this._super();},doLayout:function A(){var R=this.layoutConfig;if(!R){return ;}this.beforeLayout();this._layoutWidgets={h:E.call(this,R.h,"Height"),w:E.call(this,R.w,"Width")};I.call(this,false);},browserResized:function L(R){this.setDimensions(R.h,R.w);return true;},onwidthChange:function P(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.width=this.width;this.doLayout();},onheightChange:function D(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.height=this.height;this.doLayout();},adjustParentDimensions:function C(){var S=this.parent,R=S&&S._layoutWidgets;if(R){F.call(S,this,R.h,"Height");F.call(S,this,R.w,"Width");}},setDimensions:function K(T,S){if(this.height!==T||this.width!==S){this.height=T;this.width=S;var R=this.domNode;if(R){R.style.height=T;R.style.width=S;this.doLayout();}return true;}return false;},setSlotDimensions:function H(U,T,S){var R=this[U]&&this[U].style;if(!R){return ;}if(T!==undefined&&R.height!==T){R.height=T;}if(S!==undefined&&R.width!==S){R.width=S;}}};mstrmojo._HasLayout.getSlotSize=function J(U,V){var S=U&&U.prototype.layoutConfig;if(S){var T=S.h,R=S.w;return{h:(T&&T[V])||undefined,w:(R&&R[V])||undefined};}return null;};}());(function(){mstrmojo.all={};var _A=mstrmojo.all;var _freeIdCounter=0;function _freeId(){for(;_freeIdCounter++;){if(!_A["mstr"+_freeIdCounter]){break;}}return"mstr"+_freeIdCounter;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function add(obj){if(!obj){return ;}var id=obj.id;if(id==null){id=_freeId();obj.id=id;}else{if(_A[id]){throw new Error("Tried to register 2 objects with same id: "+id);}}_A[id]=obj;},remove:function rmv(obj){if(obj&&obj.id!=null){delete _A[obj.id];}},dumpAll:function(){for(var o in _A){if(_A[o].id!=null){mstrmojo.dbg(_A[o].id+"("+(_A[o].scriptClass||"[unknown class]")+")");}}},ref:function ref(config,flags){if(!config){return null;}if(!flags){flags={};}var C=config;while(C){switch(typeof (C)){case"string":if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(config);}C=eval(C);break;case"function":return(flags.dontInst!==true)?new C():C;case"object":if(C.constructor===Object){var sc=C.scriptClass;if(sc){if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(sc);}var cls=eval(sc);if(cls){return new cls((flags.clone===true)?mstrmojo.hash.clone(C):C);}return null;}else{return C;}}else{return C;}break;default:return null;}}}});mstrmojo.insert=mstrmojo.registry.ref;})();(function(){mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function K(R,T){var S=0,Q=(R&&R.length)||0;for(;S<Q;S++){if(R[S]==T){return S;}}return -1;},indexOfMulti:function N(U,X){if(!X){return{indices:null,map:{},count:0};}var V=X.length,W=new Array(V),Q={},Y=0;for(var T=0,S=(U&&U.length)||0;T<S;T++){var Z=U[T];for(var R=0;R<V;R++){if(X[R]===Z){W[R]=T;Q[R]=T;Y++;break;}}}return{indices:W,map:Q,count:Y};},forEach:function G(R,U,T){for(var S=0,Q=(R&&R.length)||0;S<Q;S++){if(T){if(U.call(T,R[S],S,R)===false){break;}}else{if(U(R[S],S,R)===false){break;}}}},filter:function B(S,V,T){var R=[],W=0;for(var U=0,Q=S&&S.length||0;U<Q;U++){if(V(S[U])){R[W]=S[U];W++;if(T&&T.max&&(W>=T.max)){break;}}}return R;},find:function H(R,V,S){for(var T=0,Q=R&&R.length||0;T<Q;T++){var U=R[T];if(U&&U[V]==S){return T;}}return -1;},findBin:function E(S,W,X,R){var V=R?R:S.length,T=-1,Q,U=W[X];while(V-T>1){if(S[Q=V+T>>1][X]<U){T=Q;}else{V=Q;}}return S[V][X]===U?V:-1;},search:function P(X,T,V){var U=X.length,S=-1,R,W=T.toUpperCase(),Q=T.length;while(U-S>1){if(X[R=U+S>>1][V].substr(0,Q).toUpperCase()<W){S=R;}else{U=R;}}return U;},findMulti:function N(V,R,Y){if(!Y){return{indices:null,map:{},count:0};}var W=Y.length,X=[],Q={},Z=0;for(var U=0,T=(V&&V.length)||0;U<T;U++){var b=V[U][R];for(var S=0;S<W;S++){if(Y[S][R]===b){X[S]=U;Q[S]=U;Z++;break;}}}return{indices:X,map:Q,count:Z};},removeItem:function I(Q,S){var R=this.indexOf(Q,S);if(R>-1){this.removeIndices(Q,R,1);}return R;},removeItems:function C(Q,V,R){var T=this.findMulti(Q,V,R);if(T.count){var S=T.indices.concat().sort(this.numSorter).slice(0,T.count);for(var U=S.length-1;U>-1;U--){Q.splice(S[U],1);}}},numSorter:function J(R,Q){return Number(R)-Number(Q);},stringSorter:function O(S,R){var Q=S.toLowerCase();var T=R.toLowerCase();if(Q<T){return -1;}else{if(Q>T){return 1;}else{return 0;}}},removeIndices:function M(Q,S,R){Q.splice(S,R);},insert:function F(R,Q,S){if(!R){R=[];}if(Q==null){Q=R.length;}Array.prototype.splice.apply(R,[Q,0].concat(S));return R;},hash:function L(R){var T={};for(var S=0,Q=(R&&R.length)||0;S<Q;S++){T[R[S]]=true;}return T;},get:function A(R,T){if(!T){return null;}var S=[];for(var U=0,Q=T.length;U<Q;U++){S[U]=R[T[U]];}return S;},deepSortArr:function D(R,T,Q,S){return R.sort(function(V,U){return(!S?(V[Q][T]<=U[Q][T]):(V[Q][T]>U[Q][T]))?-1:1;});}});})();(function(){mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,tooltipNode:null,postBuildRendering:function(){var B;if(this._super){B=this._super();}if(this.useRichTooltip){var D=this.tooltipNode||this.domNode,C=mstrmojo.dom,A=D&&D.getAttribute("title");if(A){D.setAttribute("title","");}if(!this._ontooltipover){var E=this.id;this._ontooltipover=function(G){var F=mstrmojo.all[E];F.showTooltip(G,self);};this._ontooltipout=function(G){var F=mstrmojo.all[E];F.hideTooltip(G,self);};}C.attachEvent(D,"mouseover",this._ontooltipover);C.attachEvent(D,"mouseout",this._ontooltipout);}return B;},showTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.open(this,B,A);},hideTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.close();},unrender:function(A){var C=this.tooltipNode||this.domNode,B=mstrmojo.dom;if(C&&this._ontooltipover){B.detachEvent(C,"mouseover",this._ontooltipover);}if(C&&this._ontooltipout){B.detachEvent(C,"mouseout",this._ontooltipout);}if(this._super){this._super(A);}}});})();mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function rqMth(B){if(!B){return ;}if(typeof (this[B])==="function"){return true;}else{var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof (A)==="string"){this.requiresCls(A);return typeof (this[B])==="function";}return false;}},requiresCls:function req(mixins,callback){if(mixins){if(typeof (mixins)=="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin;for(var i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof (A)=="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresES(E,F,B){if(E&&E instanceof Array){if(E.length==0){F&&F.call(B);return ;}if(E[0].forceReload&&E[0].forceReload==false&&mstrmojo.LoadedExternalJSURLs[E[0].url]){E.splice(0,1);return this.requiresExternalScripts(E,F,B);}var A=document.createElement("script"),C=!!document.all;A.type="text/javascript";A.src=E[0].url;if(!E[0].callbackParamName){if(C){A.onreadystatechange=function(){if(A.readyState=="loaded"||A.readyState=="complete"){A.onreadystatechange=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}}};}else{A.onload=function(){A.onload=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}};}}else{if(E[0].callbackParamName.length!=0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy==true){var D=this;window.setTimeout(function(){D.requiresExternalScripts(E,F,B);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+E[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=E;mstrmojo._LoadsScript.callback=F;mstrmojo._LoadsScript.esScritsContext=B;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function A(N,M){if(N){M=M||{};for(var O in N){M[O]=N[O];}}return M;},copyProps:function C(P,Q,N){N=N||{};if(Q){for(var O=0,M=(P&&P.length)||0;O<M;O++){var R=P[O];if(R in Q){N[R]=Q[R];}}}return N;},forEach:function F(P,O,N){if(P){for(var M in P){if(N){if(O.call(N,P[M],M,P)===false){break;}}else{if(O(P[M],M,P)===false){break;}}}}},walk:function J(Q,O){if(!O){O=mstrmojo.global;}var P=Q.split(".");if(P.length==1){return O[Q];}for(var N=0,M=P&&P.length||0;N<M;N++){O=O[P[N]];if(!O){break;}}return O;},isEmpty:function(N){if(!N){return true;}for(var M in N){if(N[M]!=null){return false;}}return true;},clear:function L(N){if(N){for(var M in N){delete N[M];}}return N;},any:function(N,O){if(N){for(var M in N){return O?M:N[M];}}return undefined;},clone:function B(Q){if(!Q){return null;}var S;if(Q.constructor===Array){S=Q.concat();var R=S[0];if(R&&typeof (R)==="object"){for(var P=0,M=S.length;P<M;P++){S[P]=this.clone(Q[P]);}}}else{S={};for(var O in Q){var N=Q[O];if(N&&typeof (N)=="object"){S[O]=this.clone(N);}else{S[O]=N;}}}return S;},cloneArray:function I(N){var O=[];for(var P=0,M=(N&&N.length)||0;P<M;P++){O[P]=this.clone(N[P]);}return O;},keyarray:function G(O,P){var M=[];if(O){for(var N in O){M.push(P?Number(N):N);}}return M;},valarray:function H(O){var M=[];if(O){for(var N in O){M.push(O[N]);}}return M;},equals:function K(S,R){var T=mstrmojo.hash,N=S&&R||(!S&&!R&&(S===R));if(N&&S){N=(S.constructor===R.constructor);if(N){if(S.constructor===Array){var Q=S.length;N=(Q===R.length);if(N&&Q){for(var O=0;O<Q;O++){N=N&&T.equals(S[O],R[O]);}}}else{if(typeof (S)==="object"){var U=T.keyarray(S),P=T.keyarray(R);N=U.length===P.length;if(N){for(var M in S){N=N&&(T.equals(S[M],R[M]));}}}else{N=(S===R);}}}}return N;},obj2array:function(Q){for(var R in Q){var P=Q[R];if(P&&typeof (P)=="object"){Q[R]=this.obj2array(P);}}if("isArray" in Q&&(Q.isArray===true)){var O=[];for(var N=0,M=Q.length;N<M;N++){O.push(Q[N]);}return O;}else{return Q;}},min:function D(P,Q,R){var M;if(P){for(var O in P){var N=Q?P[O]:O;if(R){N=Number(N);}if((M==null)||(N<M)){M=N;}}}return M;},make:function E(N,O,M){if(!N||!O){return null;}if(N.attachEventListener){return N;}if(O.makeObservable){N=O.makeObservable(N,M)||N;}else{this.copy(O.prototype,N);if(N.init){N=N.init(M)||N;}}return N;}});})();(function(){var A={};mstrmojo.NumberFormat={getInstance:function B(F,G){var E=F+"--"+G;if(E in A){return A[E];}var C={parse:function(H){},format:function(H){}};if(F==="."&&G===","){C.parse=function(H){if(!H){return NaN;}var I=H.replace(/,/g,"");return Number(I);};C.format=function(H){return Number(H).toString();};}else{var D=new RegExp("\\"+G,"g");C.parse=function(I){if(!I){return NaN;}var H=I.replace(D,"").replace(F,".");return Number(H);};C.format=function(I){var H=Number(I).toString();return H.replace(".",F);};}A[E]=C;return C;}};})();(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function C(D){if(!D||!D.length){return function(){};}return function(){for(var F=0,E=D.length;F<E;F++){D[F].apply(this,arguments);}};},wrapMethods:function B(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){D[G]=(G in D&&typeof (F)=="function")?mstrmojo.func.composite([F,D[G]]):F;});return D;},addMethods:function A(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){if(!(G in D)&&typeof (F)=="function"){D[G]=F;}});return D;}});})();(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1;var url=[];if(params){for(var p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp;m=null;if(typeof (microstrategy)!="undefined"&&microstrategy){m=microstrategy;}if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();baseUrl=baseUrl||mstrConfig.taskURL;}if(params&&!params.sessionState&&app&&app.sessionState){params.sessionState=app.sessionState;}var ptp=app.persistTaskParams||m&&m.persistParams;if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){params=null;}else{params=encodeParams(params);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}xhr.send(params);if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var i=0,cnt=methods.length;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var _rtn=null;try{_rtn=eval("("+rt+")");}catch(ex){_rtn=rt&&mstrmojo.string.trim(rt);}return _rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&("upload" in xhr)&&("onprogress" in xhr.upload));}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status==0){}else{var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp();}else{var _orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(_orig.apply?_orig.apply(xhr,[name]):_orig(name));};if(typeof callback.failure=="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);}finally{if(typeof callback.complete==="function"){callback.complete();}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestInProgress:false,retryDelay:1,lookup:null,cancel:function(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestInProgress--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestInProgress&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestInProgress){this.cancel();}this.requestInProgress++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:function(ths){return function(){ths.advanceQueue.call(ths);};}(this),success:function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this)});xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}sendXhr.call(this,xhr,method,baseUrl,params);}}}},advanceQueue:function advanceQueue(){this.requestInProgress--;if(this.queue.length===0){return ;}var req=this.queue.shift();this.request(req.method,req.baseUrl,req.callback,req.params,true);},_searchForCacheRequest:function _searchForCacheRequest(params){for(var i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i]["params"])){return this.lookup[i];}}return null;}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){mstrApp.onSessionExpired();}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);script.src=appendUrlParams("GET",url,params);setTimeout(function(){window[jsonp]&&window[jsonp]();},this.timeToWait);}};})();(function(){mstrmojo.requiresCls("mstrmojo.func");mstrmojo.ACL.UserDataService=mstrmojo.provide("mstrmojo.ACL.UserDataService",{topgroups:null,userCandidates:null,getMembers:function(G,E){var F={taskId:"getUserEntityInfo",blockBegin:G.blockBegin,blockCount:G.blockCount,userEntityID:G.data.did,userEntityName:G.data.n||"",incremental:true,outputElements:G.outputElements||3,sessionState:mstrApp.sessionState};mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);},getTopLevelGroups:function D(G,F){var E=this;if(this.topgroups){F.success({items:this.topgroups});return ;}else{F.success=mstrmojo.func.composite([F.success,function(H){E.topgroups=H.items;}]);}this.getUsers({topGroupsOnly:true},F);},searchUserCandidates:function C(F,I,G,E){var H={blockBegin:1,blockCount:G,searchPattern:F,nameWildcards:I?1:2};this.getUsers(H,E);},getUserCandidates:function B(H,G){if(this.userCandidates){G.success(this.userCandidates);return ;}else{var E=G.success,F=this;G.success=function(J){F.userCandidates={items:J.items,isComplete:(J.bc==-1||(J.bb+J.bc>J.sz))};E(F.userCandidates);};}var I={blockBegin:1,blockCount:H,nameWildcards:1};this.getUsers(I,G);},getUsers:function A(G,E){var F={taskId:"getUserServices",sessionState:mstrApp.sessionState};mstrmojo.hash.copy(G,F);mstrmojo.xhr.request("POST",mstrConfig.taskURL,E,F);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var R=mstrmojo.dom,P=mstrmojo.hash;var M=100;var E=R.supportsTouches?0.5:1;var F=1;var Q=100;var N={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var K=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[R.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[R.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[R.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[R.CSS3_TRANSITION]=this.decelerating?(R.CSS3_PREFIX+"transform 0.2s linear"):"";}},P.copy(N));var G=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},P.copy(N));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function L(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=P.copy(R.isSafari?K:G,P.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}R.attachEvent(U,R.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){R.detachEvent(T,R.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function I(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}R.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=R.getMousePosition(R.firstTouch(T,V),T);this.dragging=false;R.attachEvent(window,R.TOUCHMOVE,this._tmCallback);R.attachEvent(window,R.TOUCHEND,this._teCallback);},touchesMoved:function D(b,g){var Z=R.getMousePosition(R.firstTouch(b,g),b);R.preventDefault(b,g);if(!this.dragging){var T=5,j=Math.abs;if((this.scrollsHoriz&&j(Z.x-this.pos.x)>T)||(this.scrollsVert&&j(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},h={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=h;this.maxPos={x:Math.max(h.x-Y.x,0),y:Math.max(h.y-Y.y,0)};this.showScroll();}}if(this.dragging){R.stopPropogation(b,g);var f=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(f.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(f.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),i=this.lastDragTime;this.nextLastDragTime=i;this.lastDragTime=U;if((U-i)>Q){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function H(T,U){R.preventDefault(T,U);R.detachEvent(window,R.TOUCHMOVE,this._tmCallback);R.detachEvent(window,R.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;R.stopPropogation(T,U);if((new Date())-this.lastDragTime<=Q){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=R.getMousePosition(R.firstChangedTouch(Y,Z),Y),f=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-f.x,y:W.y-f.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),g=T?(new Date())-T:0,V={x:g?Number(b.x*M*E/g).toFixed(2):0,y:g?Number(b.y*M*E/g).toFixed(2):0};var a=this,U=function(h){return(a.scrollsHoriz&&Math.abs(h.x)>=F)||(a.scrollsVert&&Math.abs(h.y)>=F);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,M);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=(b)?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=(b)?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function J(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function O(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,h,V,X){var W=b,Z;while(Z=W.match(h)){var f=Z[0],a=f.length,g=true;f=f.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===f){g=false;break;}else{if(f.indexOf(Y)===0){delete U[Y];}}}if(g){U[f]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var g=S.evt2idx,k=S.idx2evt,Z=S.parts;var h=(U>=0)?U:0,b=this.id,W=mstrmojo.all,f=(U>0)?W[k[h-1].context][Z[h-1]]:(S.host?W[S.host]:this.parent),T=Z[h];var V=mstrmojo.array;while(f&&T){if(f.attachEventListener){var j=f[T+"_bindEvents"]||(T+"Change");if(typeof (j)=="string"){j=[j];}var Y=[];for(var a=0,X=j.length;a<X;a++){Y[a]=f.attachEventListener(j[a],b,"_callback");}for(var a=0;a<j.length;a++){g[f.id+"_"+j[a]]=h;}k[h]={context:f.id,evts:j,subs:Y};}f=f[T];T=S.parts[++h];}},_detachChain:function G(S,T){var U=mstrmojo.all,n=S.idx2evt,g=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=n.length;if(Y<b){for(;Y<b;Y++){var Z=n[Y];if(!Z){break;}var W=Z.context,f=U[W],l=Z.evts;if(f&&f.detachEventListener){var o=Z.subs;for(var k=0,V=o.length;k<V;k++){f.detachEventListener(o[k]);}}n[Y]=null;for(var X=0,h=l.length;X<h;X++){delete g[W+"_"+l[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,9379,9380,9381,9382,9383,9384,9385,6078,7899,7900,7901,6079,6081,6080,6082,7902,7902,6076,6077,7903);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(B){var A=this;if(this.isLoaded){B();}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(C){mstrmojo.hash.copy(mstrmojo.hash.obj2array(C),A);B();if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(C){alert(C.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"getLocaleInfo"});}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Include"},{did:"2",n:"Exclude"}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"NOT"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"All selections"},{did:"20",n:"Any selection"}],ExprType:[{did:"2",n:"Qualify"},{did:"5",n:"Select"}],DimtyLevels:[{did:"1",n:"Default"},{did:"2",n:"Metric"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,76",n:"Contains",t:1},{did:"1,79",n:"Does not contain",t:1},{did:"1,77",n:"Begins with",t:1},{did:"1,80",n:"Does not begin with",t:1},{did:"1,78",n:"Ends with",t:1},{did:"1,81",n:"Does not end with",t:1},{did:"1,18",n:"Like",t:1},{did:"1,43",n:"Not Like",t:1},{did:"1,54",n:"Is Null",t:1},{did:"1,55",n:"Is Not Null",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1}],Metric:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,54",n:"Is Null",t:1},{did:"1,55",n:"Is Not Null",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1},{did:"2,1",n:"Highest",t:2},{did:"2,2",n:"Lowest",t:2},{did:"3,1",n:"Highest%",t:3},{did:"3,2",n:"Lowest%",t:3}],MDXAttribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1}],MDXMetric:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1}],SAPAttribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1}],Element:[{did:"1,22",n:"In List",t:1},{did:"1,57",n:"Not In List",t:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var B=false,D="mstrmojo.Binding",A="bindings",C=mstrmojo.registry;function E(K){for(var L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function F(K,M){if(!B){mstrmojo.requiresCls(D);B=true;}for(var N in K){var J=K[N];if(J==null){continue;}var L=typeof (J);if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=C.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function G(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[A]);if(K){delete this[A];this._set_bindings(A,K,true);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children;if(M){for(var L=0,J=M.length;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function I(){var J=this.bindings;if(J){E(J);delete this.bindings;}},_set_bindings:function H(L,J){var K=this[A];if(J!==K){if(K){E(K);}this[A]=J;if(J){F(J,this);}return true;}return false;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo._HasPopup={openPopup:function B(G,D){var C=!!G&&(typeof (G)==="string")&&!G.match(/\./)&&!!this[G],I=mstrmojo.registry.ref(C?this[G]:G,true);if(I&&I.open){if(C){this[G]=I;}this.disposables.push(I);var F=I.slot&&this[I.slot];if(F){if(I.parent!==this){if(this.addChildren){this.addChildren(I);}else{var H=false,E=I.domNode||I.placeholder;if(E&&typeof (E)==="string"){E=document.getElementById(E);}if(!E){H=true;E=document.createElement("span");I.placeholder=E;}if(H||(E.parentNode!==F)){F.appendChild(E);}}}}I.open(this,D);this._lastOpened=I;}},closePopup:function A(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}};})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,L=mstrmojo.hash;function F(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(C.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function B(R){var Q=[],S=R.selectedIndices;for(var P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function N(V,U){var S=[],Q=V.selectedIndices,X=C.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return B(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}for(var R=0,T=U.length;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex==W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V;for(var Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U==V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function H(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function O(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=B(this),S=F(this,[P]);if(Q!==true){H(this,S,R);}}},toggleSelect:function J(P,Q){var S,R;if(this.selectedIndices[P]){R=N(this,[P]);}else{S=F(this,[P]);}if(Q!==true){H(this,S,R);}},rangeSelect:function G(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=B(this);if(P!==true){H(this,null,Q);}},select:function E(R,P){var Q=A(this,C.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){H(this,Q.add,Q.rmv);}},addSelect:function M(R,P){if(R==null){return ;}if(R.constructor!==Array){R=[R];}var Q=F(this,R);if(P!==true){H(this,Q,null);}return Q;},removeSelect:function K(R,P){if(R==null){return ;}if(R.constructor!=Array){R=[R];}var Q=N(this,R);if(P!==true){H(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){H(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof (T)=="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=C.find(U,V,T[V]);}else{if(T!=null){Q=C.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function D(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!=null){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return L.keyarray(this.selectedIndices,true).sort(C.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return C.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,f){if(!Q||!Q.length){return ;}var S=this.items||[],u=this.itemIdField!=null?C.findMulti(S,this.itemIdField,Q):C.indexOfMulti(S,Q),V=Q.length,T=V-u.count,s=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(s&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],h=u.map;if(T&&s){var r=0;for(var g=0;g<V;g++){if(h[g]==null){R.push(Q[g]);U.push(b+r++);}}this.add(R,b);}var W=[];for(var o in h){var q=h[o];if(q>=b){q+=X;}W.push(q);}var t=W.concat(U),Y=this.addSelect(t,!f);if(!f){var Z=C.hash(Y),l=this.selectedIndices,a=[];for(var p in l){if(!Z[p]){a.push(parseInt(p,10));}}var P=this.removeSelect(a,true);H(this,Y,P);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array");function C(G,H,E){var F=G.createElement("input");F.name=H;F.type="hidden";F.value=E;return F;}function B(K,J){J=J.substring(J.indexOf("?")+1,J.length);var M=J.split("&"),L="",H="";var N=/\+/g;for(var I=0,F=M.length;I<F;I++){var E=M[I].split("=");L=E[0];H=E[1];if(H){H=decodeURIComponent(H.replace(N," "));}var G=document.createElement("INPUT");G.type="HIDDEN";G.name=L;G.value=H;K.appendChild(G);}return false;}mstrmojo.form={createDynamicForm:function A(E){var G=document.createElement("FORM"),H=E.indexOf("?")>0;G.name="dynamic_form";G.method="POST";var F=((H)?E.substring(0,E.indexOf("?")):E);G.action=F;if(H){B(G,E);}document.body.appendChild(G);return G;},send:function D(J,K,E,M,H,F){var O=((H&&H.hWin)||window).document,L=O.createElement("form"),I=mstrApp;L.method=E||"GET";if(M){L.target=M;}L.action=K||I.name;F=(F!==undefined)?F:!(L.action&&L.action.indexOf("aspx")>0);if(I.sessionId){L.action+=";jsessionid="+I.sessionId;}if(F){L.action+=";uxts"+mstrmojo.now();}L.appendChild(C(O,"xts",mstrmojo.now()));for(var P in I.persistTaskParams){J[P]=I.persistTaskParams[P];}if(I.servletState&&I.name){J[I.name]=I.servletState;}if(J){for(var G in J){if(J[G].constructor==Array){mstrmojo.array.forEach(J[G],function(Q){L.appendChild(C(O,G,Q));});}else{L.appendChild(C(O,G,J[G]));}}}O.body.appendChild(L);try{L.submit();}catch(N){if(M&&N.result===2147500037&&!window.open("","","width=1,height=1,left=0,top=0,scrollbars=no")){mstrmojo.alert("*This action requires popups to be allowed in the browser.*");}else{mstrmojo.err("Form submission failed for an unknown reason.");}}O.body.removeChild(L);}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var F=mstrmojo.dom,L=mstrmojo.string;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:F.isNSIE?"block":"table",DISPLAY_CELL:F.isNSIE?"block":"table-cell",MINHEIGHT:F.isIE6?"height":"minHeight",addClass:function H(V,U){if(!V){return ;}if(U.constructor!==Array){U=[U];}var R=V.className||"",X=" "+R+" ",S=false;for(var T=0,Q=U.length;T<Q;T++){var W=U[T];if(!X.match(new RegExp("\\s"+W+"\\s"))){R+=" "+W;S=true;}}if(S){V.className=L.trim(R);}},removeClass:function M(U,T){if(!U){return ;}if(T.constructor!==Array){T=[T];}var R=" "+(U.className||"")+" ";for(var S=0,Q=T.length;S<Q;S++){R=R.replace(new RegExp("\\s"+T[S]+"\\s","g")," ");}U.className=L.trim(R);},addWidgetCssClass:function G(T,R){var Q=T.cssClass,S=(Q&&Q.split(" "))||[];if(R.constructor!==Array){R=[R];}T.cssClass=S.concat(R).join(" ");},toggleClass:function N(S,R,Q){if(Q){this.addClass(S,R);}else{this.removeClass(S,R);}},applyShadow:function D(U,V,T,S,Q){var R=U.style;if(F.isDXIE){R.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+V+"px, OffY="+T+"px, Color='"+Q+"')";}else{if(F.isFF||F.isWK||F.isIE10){R[F.CSS3_BOXSHADOW]=V+"px "+T+"px "+S+"px "+Q;}}},removeShadow:function O(R){var Q=R.style;if(F.isDXIE){}else{if(F.isFF||F.isWK||F.isIE10){Q[F.CSS3_BOXSHADOW]="";}}},setOpacity:function A(R,T){if(F.isDXIE&&!F.isIE9){var U=R.currentStyle.filter;var Q=null;if(U.length>0){Q=R.filters["DXImageTransform.Microsoft.Alpha"];}if(Q){Q.opacity=T;Q.enabled=(T!=100);}else{if(T<100){var S="progid:DXImageTransform.Microsoft.Alpha(Opacity="+T+")";R.style.filter=(U?U:"")+" "+S;}}}else{R.style.opacity=T/100-(F.isIE9?0.00001:0);}},buildGradient:function C(R,T,Q){if(F.supports(F.cssFeatures.GRADIENTS)){var S={};if(F.isDXIE){S.n="filter";S.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+R+",StartColorStr='"+T+"',EndColorStr='"+Q+"')";}else{if(F.isFF){S.n="background-image";S.v="-moz-linear-gradient("+((R===0)?"top":"left")+","+T+","+Q+")";}else{if(F.isWK){S.n="background";S.v="-webkit-gradient(linear,"+((R===0)?"left top, left bottom":"left top, right top")+",from("+T+"),to("+Q+"))";}else{if(F.isIE10||F.isIEW3C){S.n="background";S.v="linear-gradient("+((R===0)?"to bottom":"to right")+","+T+","+Q+")";}}}}return S;}return null;},buildRoundCorners:function K(V,U){if(F.supports(F.cssFeatures.ROUND_CORNERS)){var R=V+"px";var X=R+((U)?" "+R+" 0 0":"")+";";if(F.isFF){return"-moz-border-radius:"+X;}else{if(F.isWinPhone||F.isIE10){return"border-radius:"+X;}else{if(F.isWK){if(!U){return"-webkit-border-radius:"+R+";";}else{var W=["left","right"],T=[],Q=-1;for(var S=0;S<2;S++){T[++Q]="-webkit-border-top-"+W[S]+"-radius:"+R;T[++Q]="-webkit-border-bottom-"+W[S]+"-radius:0";}return T.join(";");}}}}}return"";},getBorderWidthsOrPaddings:function E(R,U){var V={t:0,r:0,b:0,l:0,h:0,w:0};if(!R){return V;}var S=R.split(" "),Q=S.length;for(var T=0;T<Q;T++){S[T]=Math.round(U*parseFloat(S[T],10)/72);}if(Q<4){if(Q===1){S[1]=S[2]=S[3]=S[0];}else{S[3]=S[1];if(Q===2){S[2]=S[0];}}}V.t=S[0];V.r=S[1];V.b=S[2];V.l=S[3];V.h=V.t+V.b;V.w=V.l+V.r;return V;},getBorderWidths:function I(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},getPaddings:function J(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},parkAfterFade:function P(Q){var R=Q.target.style;if(R.opacity==0){R.left="-10000px";window.setTimeout(function(){R.opacity=0.99;},0);return true;}return false;},getStyleValue:function B(Q,S){if(Q.currentStyle){S=S=="float"?"styleFloat":S;value=Q.currentStyle[S];}else{if(document.defaultView&&document.defaultView.getComputedStyle){S=S=="float"?"cssFloat":S;var R=document.defaultView.getComputedStyle(Q,null);value=R?R[S]:null;}}return value;},getComputedStyle:function(Q,S){var R=(window.getComputedStyle)?function(T,U){return window.getComputedStyle(T,U||null);}:function(T){return T.currentStyle||{};};mstrmojo.css.getComputedStyle=R;return R(Q,S);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array");mstrmojo._HasBuilder={postBuildRendering:function B(){if(!this.builtChildren){this.buildChildren();}return this._super();},getChildren:function C(){return this.model.getChildren(this.node,false);},buildChildren:function A(E){if(!this.builder||!this.model){return false;}if(this.children&&this.children.length){this.set("children",[]);}var D=this.model,F=this.builder.build(this.getChildren(),D,this.buildConfig);if(!E){this.addChildren(F);}this.builtChildren=true;return(E)?F:true;}};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var G=mstrmojo.array,D=mstrmojo.hash;function C(X,V){if(!V){return ;}var Y=[],O=X.selectedIndices,N=X.allIdx,T=X.noneIdx,P=X.parent&&X.parent.include;if(X.multiSelect&&(T>-1)&&(G.indexOf(V,T)>-1)){return Y;}var R,S,W=X.items,U=X.itemIdField,Q=X.selectedItems,a;if(X.multiSelect&&(N>-1)&&(G.indexOf(V,X.allIdx)>-1)){for(R=0,S=W.length;R<S;R++){if(!O[R]){Y.push(R);O[R]=true;X.selectedIndex=R;X.selectedItem=W[R];}}}else{for(R=0,S=V.length;R<S;R++){var Z=V[R];if(!O[Z]){O[Z]=true;Y.push(Z);X.selectedIndex=Z;a=X.selectedItem=W[Z];if(Q){Q[a[U]]=a;}}}}return Y;}function A(P){var O=[],Q=P.selectedIndices,R=P.selectedItems;for(var N in Q){delete Q[N];O.push(parseInt(N,10));}P.selectedIndex=-1;P.selectedItem=null;if(R){P.selectedItems={};}return O;}function L(W,V){if(!V){return ;}var S=[],O=W.selectedIndices,Y=G.indexOf,N=W.allIdx,T=W.noneIdx,U=W.itemIdField,P=W.selectedItems;if(W.multiSelect&&(((N>-1)&&(Y(V,N)>-1))||((T>-1)&&(Y(V,T)>-1)))){return A(W);}if(V.length>0&&O[N]){if(Y(V,N)<0){V.push(N);}}for(var Q=0,R=V.length;Q<R;Q++){var X=V[Q];if(O[X]){delete O[X];S.push(X);if(P){delete P[W.items[X][U]];}if(W.selectedIndex==X){W.selectedIndex=-1;W.selectedItem=null;}}}return S;}function F(Q,P,R,N){if(Q.raiseEvent){Q.raiseEvent({name:"select",idxs:N||[]});if((P&&P.length)||(R&&R.length)){try{Q.raiseEvent({name:"selectionChange",added:P,removed:R});}catch(O){L(Q,P);C(Q,R);throw O;}}}}function I(P,O){if(O==null){return -1;}var N=typeof (O)=="object",Q=P.itemIdField;if(N&&Q!=null){return G.find(P.items,Q,O[Q]);}else{return G.indexOf(P.items,O);}}mstrmojo._ListSelections={multiSelect:false,allIdx:-1,items:null,selectedIndices:null,selectedIndex:-1,selectedIndices_bindEvents:"selectionChange",selectedIndex_bindEvents:"selectionChange",selectedItem:null,selectedItem_bindEvts:"selectionChange",allowUnlistedValues:true,selectedItems:null,supportsIncFetch:false,init:function(N){this._super(N);if(this.supportsIncFetch&&this.itemIdField){this.selectedItems={};}if(!this.items){this.items=[];}if(!this.selectedIndices){this.selectedIndices={};if(this.selectedIndex>-1){this._set_selectedIndex("selectedIndex",this.selectedIndex,true);}else{if(this.selectedItem){this._set_selectedItem("selectedItem",this.selectedItem,true);}}}},addItems:function M(W){if(!W){return ;}if(W.constructor!=Array){W=[W];}var U=this.items,N=this.items.length,Q=this.selectedItems,S=[],P;U=this.items=U.concat(W);P=U.length;if(Q){var O=this.selectedIndices,T=this.itemIdField,R,V;for(R=N;R<U.length;R++){V=U[R];if(Q[V[T]]){S.push(R);}}}if(S&&S.length){C(this,S);}if(P>N){this.itemsContainerNode.innerHTML+=this._buildItemsMarkup(N,P-1).join("");}},addSelectedItems:function H(N){this.selectItems(N,false);},setSelectedItems:function K(N){this.selectItems(N,true);},selectItems:function J(W,Y){if(!W){return ;}if(W.constructor!=Array){W=[W];}var U=this;if(Y&&U.selectedItems){U.selectedItems={};}var P=U.selectedItems,T=U.itemIdField,X,V,Q,N=[],S=U.items.length,R=[],O=U.allowUnlistedValues;for(Q=0;Q<W.length;Q++){X=W[Q];V=I(this,X);if(V===-1){if(P===null){if(O){N.push(v);V=S++;}}else{P[X[T]]=X;}}if(V!==-1){R.push(V);}}if(N.length>0){U.addItems(N);}if(R.length>0){if(Y){U.select(R);}else{U.addSelect(R);}}},unselectItems:function J(O){if(!O){return ;}if(O.constructor!=Array){O=[O];}var S=this,U=S.selectedItems,P=[],T=S.itemIdField,R,N,Q;if(U===null){return ;}for(Q=0;Q<O.length;Q++){R=O[Q];if(U){delete U[R[T]];}N=I(this,R);if(N!==-1){P.push(N);}}if(P.length>0){S.removeSelect(P);}},getSelectedItems:function B(){if(this.selectedItems!=null){return D.valarray(this.selectedItems);}else{return G.get(this.items,D.keyarray(this.selectedIndices,true));}},singleSelect:function(N,O){if(N!==-1){this.select([N],O);}},singleSelectByField:function E(O,P,N){this.singleSelect(G.find(this.items,P,O),N);},toggleSelect:function(N){var P,O;if(this.selectedIndices[N]){O=L(this,[N]);}else{P=C(this,[N]);}F(this,P,O,[N]);},rangeSelect:function(N){},select:function(O,N){if(O==null){return ;}if(O.constructor!=Array){O=[O];}var Q=A(this),S=C(this,O),P=Q.length-1;if(this.selectionPolicy!=="reselect"){for(;P>=0;P--){var R=G.indexOf(S,Q[P]);if(R>-1){Q.splice(P,1);S.splice(R,1);}}}if(!N){F(this,S,Q,O);}},clearSelect:function(N){var O=A(this);if(N!==true){F(this,null,O,[]);}},addSelect:function(P,N){if(P==null){return ;}if(P.constructor!=Array){P=[P];}var O=C(this,P);var R=null,Q=this.noneIdx;if(this.multiSelect&&(Q>-1&&G.indexOf(P,Q)>-1)){R=L(this,P);}if(N!==true){F(this,O,R,P);}},removeSelect:function(N){if(N==null){return ;}if(N.constructor!=Array){N=[N];}F(this,null,L(this,N),N);},_set_selectedIndices:function(P,W,N){var S=this,O=S.selectedIndices;if(S.selectedItems){S.selectedItems={};}var O=S.selectedIndices;if(O==W){return false;}if(!O){O={};S.selectedIndices=O;}if(!W){W={};}var U=S.selectedIndex,T=[],V;for(V in O){if(!W[V]){V=parseInt(V,10);delete O[V];T.push(V);if(U==V){S.selectedIndex=-1;S.selectedItem=null;}}}var Z=[],X=S.items,R=S.itemIdField,Y;for(V in W){if(!O[V]){V=parseInt(V,10);O[V]=true;Z.push(V);S.selectedIndex=V;Y=S.selectedItem=X[V];if(S.selectedItems){S.selectedItems[Y[R]]=Y;}}}if(N!==true){var Q=[];for(V in W){if(O[V]){V=parseInt(V,10);Q.push(V);}}F(S,Z,T,Q);}return(Z.length||T.length);},_set_selectedIndex:function(Q,O,N){var P={};if(O>-1){P[O]=true;}return this._set_selectedIndices("selectedIndices",P,N);},_set_selectedItem:function(Q,P,O){var N=I(this,P);if((N===-1)&&(P!=null)&&this.allowUnlistedValues&&this.items){this.set("items",this.items.concat(P));N=this.items.length-1;}return this._set_selectedIndex("selectedIndex",N,O);}};})();(function(){mstrmojo.requiresCls("mstrmojo.array");var B=mstrmojo.array;function A(C){if(C.parent){if(C.parent.shouldEllipsizeChildren===undefined){mstrmojo.mixin(mstrmojo._HasEllipsis,C.parent);}C.parent.set("shouldEllipsizeChildren",true);}}mstrmojo._HasEllipsis=mstrmojo.provide("mstrmojo._HasEllipsis",{shouldEllipsize:false,shouldEllipsizeChildren:false,doEllipsize:function(){if(this.shouldEllipsizeChildren){B.forEach(this.children,function(D,C){if(D.shouldEllipsize){D.doEllipsize();}});}},onshouldEllipsizeChange:function(){if(this.shouldEllipsize){A(this);mstrmojo.mixin({onvisibleChange:function(){if(this._super){this._super();}if(this.visible&&this.hasRendered&&this.shouldEllipsize){this.doEllipsize();}}},this.markupMethods);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom");var M=mstrmojo.string,T=mstrmojo.dom;var N=mstrmojo.useFrames?null:document.createElement("span");var B=/\mstrAttach\:([\w\,]+)/g;var R;function O(X){if(R===undefined){R=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return X.replace(B,function W(f,h){var Z=h.split(","),a=[],Y=Z.length,b;for(b=0;b<Y;b++){var g=Z[b];if(g){if(R){if(g.indexOf("mouse")>-1){continue;}else{if(g==="click"){g="touchend";}}}a.push("on"+g+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+g+"', self, event)\"");}}return a.join(" ");});}var P="preBuildRendering",D="buildRendering",A="postBuildRendering";function E(Y){var X=Y.markupString;if(X.match(/mstrAttach:/)){X=O(X);if(Y.markupString===Y.constructor.prototype.markupString){Y.constructor.prototype.markupString=X;}}var W=M.apply(X,Y);if(W){if(mstrmojo.useFrames){var Z=(Y.domNode&&Y.domNode.ownerDocument)||self.document;if(!N||N.ownerDocument!==Z){N=Z.createElement("span");}}N.innerHTML=W;var a=N.firstChild;a.mstrmojoId=Y.id;return a;}return null;}function J(Y){var X=Y.markupSlots,W,Z;if(X){W={};for(Z in X){W[Z]=X[Z].apply(Y,[]);}}return W;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function G(){if((this[P]&&this[P]()===false)||(this[D]()===false)||(this[A]&&this[A]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var W="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,W)){this.raiseEvent({name:W});}return true;},buildDom:function S(){return E(this);},preBuildRendering:mstrmojo.emptyFn,buildRendering:function C(){var W=this.domNode,X=this.buildDom();this.domNode=X;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(J(this));this.paint();if(X){var a=W;if(!a){a=this.placeholder;if(a){if(typeof a==="string"){a=document.getElementById(a);}delete this.placeholder;}}if(a){T.replace(a,X);}}var Y="onchildRenderingChange",Z=this.parent;if(Z&&Z[Y]){Z[Y](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function Q(Y){if(this.hasRendered){if(!Y){try{var W=this.domNode;if(W.parentNode){W.parentNode.removeChild(W);}if(mstrmojo.dom.isIE&&W.outerHTML!=="undefined"){W.outerHTML="";}}catch(X){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function V(){var X=this.markupMethods;if(!X){return ;}var a=this,b=function(i){var g=X[i];if(g){try{g.apply(a,[true]);}catch(h){throw new Error(["Error in markup method.","Widget id: "+a.id,"Method name: "+i,"Err: "+h.message].join("\n\n"));}}};var Z=X.sequence,W,Y,f;if(Z){W=Z.length||0;for(Y=0;Y<W;Y++){b(Z[Y]);}}else{for(f in X){b(f);}}},refresh:function F(W){if(this.hasRendered){var X=this.domNode;this.unrender(true);this.placeholder=X;if(W){W();}this.render();}},set:function L(Z,W){this._super(Z,W);if(this.domNode){var X=this.markupMethods,Y=X&&X["on"+Z+"Change"];if(Y){Y.apply(this);}}return this;},slotNames:null,addSlots:function I(X){var W=this.slotNames,Y;if(!W){W={};this.slotNames=W;}for(Y in X){this[Y]=X[Y];W[Y]=true;}},removeSlots:function K(W){if(W){var X=this.slotNames,Y;for(Y in W){delete this[Y];if(X){delete X[Y];}}}},captureDomEvent:function H(Y,W,Z,X){if(this.enabled!==false){this.raiseEvent({name:Y,hWin:W,e:Z||W.event,config:X});}},playEffect:function U(X){var W=this[X];if(W&&W.constructor===Object){W=mstrmojo.insert(mstrmojo.hash.clone(W));W.widget=this;this[X]=W;}if(W){W.play();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var I=mstrmojo.dom;var L="mousedown";function P(S){var R=S[S.hotSlot||"domNode"];if(R){if(!S._closeCallback){var U=S.id,T=function(V){return function(X){var W=mstrmojo.all[U];if(W&&!W.ignoreHover){W["auto"+V](X,self);}};};S._uncloseCallback=T("Unclose");S._closeCallback=T("Close");}I.attachEvent(R,"mouseover",S._uncloseCallback);I.attachEvent(R,"mouseout",S._closeCallback);}}function C(S){if(S._closeCallback){var R=S[S.hotSlot||"domNode"];if(R){I.detachEvent(R,"mouseover",S._uncloseCallback);I.detachEvent(R,"mouseout",S._closeCallback);}}}function N(T,S){var R=T;while(R){if(R.open||R.openPopup){if(R.set){R.set("ignoreHover",S);}else{R.ignoreHover=S;}}R=R.opener||R.parent;}}function A(){var R=this._lockHoverCallback;if(R){I.detachEvent(document.body,L,R,true);delete this._lockHoverCallback;}}mstrmojo._CanAutoClose={autoCloses:false,autoCloseDelay:100,locksHover:false,hotSlot:null,closeOnClick:false,curtainNode:null,postBuildRendering:function B(){this._super();if(this.autoCloses){P(this);}this.oncloseOnClickChange();},onautoClosesChange:function D(){var R=(this.autoCloses)?P:C;R(this);},oncloseOnClickChange:function O(){if(!this.curtainNode){return ;}var T=this,S="click",R=(mstrApp&&mstrApp.isTouchApp&&mstrApp.isTouchApp());if(R){S="touchstart";}I.attachEvent(T.curtainNode,S,function(){T.close();if(R){mstrmojo.touchManager.notify([]);}});},autoUnclose:function H(){var R=this._autoCloseTimer;if(R){self.clearTimeout(R);delete this._autoCloseTimer;}},autoClose:function F(){if(this.ignoreHover){return ;}if(this._autoCloseTimer){self.clearTimeout(this._autoCloseTimer);}if(this.opener){if(this.autoCloseDelay){var R=this.opener.id;this._autoCloseTimer=self.setTimeout(function(){mstrmojo.all[R].closePopup();},this.autoCloseDelay);}else{this.opener.closePopup();}}},destroy:function M(R){A.call(this);this._super(R);},lockHover:function K(){N(this,true);if(!this._lockHoverCallback){var S=this.id,R=this._lockHoverCallback=function(T){mstrmojo.all[S]._unlockHoverCheck(T,self);};if((I.isIE7||I.isIE8)&&window.event&&(window.event.type==L)&&this.opener){this.opener._ignoreMousedown=true;}I.attachEvent(document.body,L,R,true);}},unlockHover:function E(){N(this,false);A.call(this);},_unlockHoverCheck:function J(T,R){var S=this.opener;if(S&&S._ignoreMousedown){delete S._ignoreMousedown;return ;}if(!I.contains(this.domNode,I.eventTarget(R,T),true,document.body)){this.close();}},open:function G(S,R){if(this.autoCloses){this.autoUnclose();}this._super(S,R);if(this.locksHover){this.lockHover();}},close:function Q(R){if(this.locksHover){this.unlockHover();}this._super(R);}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var C=mstrmojo.dom,E=false;mstrmojo._FillsBrowser=mstrmojo.provide("mstrmojo._FillsBrowser",{_mixinName:"mstrmojo._FillsBrowser",getBrowserDimensions:function(){var F=C.windowDim(),J=(C.isFF||C.isWK)?0:2;var G=F.w,I=F.h;if(E){var H=I;I=G;G=H;}return{w:Math.max(G,0)+"px",h:Math.max(I-J,0)+"px"};},simulateOrientationChange:function A(){E=!E;this.monitorWindow();},preBuildRendering:function B(){var G=true;if(this._super){G=this._super();}var H=this.getBrowserDimensions();if(!("browserResized" in this)||this.browserResized(H)!==true){this.height=H.h;this.width=H.w;}if(!this._listenerProc){window._monitor=this;var I=this.id,F=this._listenerProc=function(K){var J=K||window.event;mstrmojo.all[I].monitorWindow(J);};C.attachEvent(window,"resize",F);}return G;},destroy:function D(F){if(this._listenerProc){C.detachEvent(window,"resize",this._listenerProc);}this._super(F);},monitorWindow:function(F){var H=F.currentTarget,I=this.getBrowserDimensions(),G={w:(H?H.innerWidth+"px":I.w),h:(H?H.innerHeight+"px":I.h)};if(G.h===this.height&&G.w===this.width){return ;}if(!("browserResized" in this)||this.browserResized(G)!==true){if(G.h!==this.height){this.set("height",G.h);}if(G.w!==this.width){this.set("width",G.w);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");function G(J){return(J&&J.id);}mstrmojo._HasScrollbox={_mixinName:"mstrmojo._HasScrollbox",scrollListeners:null,scrollListenerCount:0,connectScrollbox:function E(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(!L){L={};this.scrollListeners=L;}if(!L[J]){L[J]=K;this.scrollListenerCount++;if(this.scrollListenerCount==1){this._attachScrollDom();}}},disconnectScrollbox:function D(K){if(!G(K)){return ;}var L=this.scrollListeners,J=K.id;if(L!=null&&J in L){delete this.scrollListeners[J];this.scrollListenerCount--;if(!this.scrollListenerCount){this._detachScrollDom();}}},notifyScrollListeners:function C(K){var N=K||this.getScrollPos(),M=N.y,L=N.x;this.scrollboxTop=M;this.scrollboxLeft=L;this.scrollboxRight=L+this.scrollboxWidth;this.scrollboxBottom=M+this.scrollboxHeight;var J=this.scrollListeners;for(var O in J){J[O].onscroll(this);}},getScrollPos:function H(){var J=this.scrollboxNode;return{x:J.scrollLeft,y:J.scrollTop};},scrollTo:function F(K){var J=this.scrollboxNode;if(J&&K){J.scrollLeft=K.x;J.scrollTop=K.y;}},scrollInterval:50,_attachScrollDom:function A(){var M=this.scrollboxNode;if(M){var L=this.usesTouches;if(!L){if(!this.scrollCallback){var K=this.id;this.scrollCallback=function(){mstrmojo.all[K].notifyScrollListeners();};}mstrmojo.dom.attachBufferedEvent(M,"scroll",this.scrollCallback,this.scrollInterval);}if(this.scrollboxTop===null){this.scrollboxTop=(L)?0:M.scrollTop;}if(this.scrollboxLeft===null){this.scrollboxLeft=(L)?0:M.scrollLeft;}var J=function(P){var O=P.toLowerCase();var N=M.style[O];return(!isNaN(N)&&N.charAt(N.length-1)!=="%")?parseInt(N,10):M["client"+P];};if(this.scrollboxHeight===null){this.scrollboxHeight=J("Height");}if(this.scrollboxWidth===null){this.scrollboxWidth=J("Width");}this.scrollboxBottom=this.scrollboxTop+this.scrollboxHeight;this.scrollboxRight=this.scrollboxLeft+this.scrollboxWidth;this._attachedScrollbox=M;}},_detachScrollDom:function I(){var J=this._attachedScrollbox;if(J&&this.scrollCallback){mstrmojo.dom.detachBufferedEvent(J,"scroll",this.scrollCallback,this.scrollInterval);}delete this._attachedScrollbox;},scrollboxTop:null,scrollboxLeft:null,scrollboxHeight:null,scrollboxBottom:null,buildRendering:function B(){this._detachScrollDom();this._super();if(this.scrollListenerCount){this._attachScrollDom();}}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof (W)=="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget.apply(this,[]);}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children;for(var Y=0,W=(X&&X.length)||0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);for(var X=0,W=(Y&&Y.length)||0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props;for(var Z in Y){var X=Y[Z],W=X.ease;if(typeof (W)=="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props;for(var a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}else{return parseInt(W*Y,10)/W;}}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}else{if(X===0){return W;}else{return W+Z*I(X,Y);}}},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}else{return W+Z*Math.sin((Math.PI/2)*X/Y);}},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}else{return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}else{if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}else{if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}else{return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;}}}},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}else{return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}}};})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var T=mstrmojo.dom,S,G=mstrmojo.global.document;function P(V){S.startDragCheck(self,V);}var A,O,J="mstrmojo-dnd-avatar",I;function K(X,V,W){if(W!=null){O.innerHTML=W;}I.left=X.x+"px";I.top=X.y+"px";}function H(V,W){if(!A){A=G.createElement("div");I=A.style;A.className=J;A.innerHTML='<div class="'+J+'-inner"></div>';O=A.firstChild;G.body.appendChild(A);}K(W,true,V);I.display="block";}function D(){if(A){I.display="none";}}function B(V){var W=++S.ctxt.moveCount;if(W>=S.minMoves){S.stopDragCheck(self,V);S.startDrag(self,V);}}function E(V){S.stopDragCheck(self,V);}function M(V){S.onDragMove(self,V);}function Q(V){S.stopDrag(self,V);}function N(V){if(!V){return ;}if(!V.hWin){V.hWin=window;}if(!V.e){V.e=V.hWin.event;}V.node=T.eventTarget(V.hWin,V.e);V.pos=T.getMousePosition(V.e,V.hWin);return V;}function F(W){var V=T.findWidget(W);while(V){if(V.draggable){return V;}V=V.parent;}return null;}function U(W,X){var V=T.findWidget(W);while(V){if(V.dropZone){if(V.allowDrop&&V.allowDrop(X)){return V;}}V=V.parent;}return null;}function L(V){if(this.set){this.set("allowingDrop",true);}}function C(V){if(this.set){this.set("allowingDrop",false);}}var R=C;mstrmojo.dnd=mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){T.attachEvent(G,"mousedown",P);mstrmojo.dndEnabled=true;}},disable:function(){T.detachEvent(G,"mousedown",P);},startDragCheck:function(V,W){delete this.ctxt;var X=N({hWin:V,e:W});this.ctxt={src:X,moveCount:0};if(this.minMoves){T.attachEvent(G,"mousemove",B);T.attachEvent(G,"mouseup",E);}else{this.startDrag(V,W);}},stopDragCheck:function(V,W){T.detachEvent(G,"mousemove",B);T.detachEvent(G,"mouseup",E);},startDrag:function(V,X){var Z=this.ctxt;Z.id=new Date();var Y=Z.src,W=F(Y.node);if(!W){return ;}Y.widget=W;Y.data=W.getDragData&&W.getDragData(Z);if(W.ondragstart){if(W.ondragstart(Z)===false){return ;}}T.clearBrowserHighlights();T.preventDefault(self,X);T.attachEvent(G,"mousemove",M);T.attachEvent(G,"mouseup",Q);if(W&&!W.ownAvatar){H(Y.data&&Y.data.html,Y.pos);}},stopDrag:function(V,Z){T.detachEvent(G,"mousemove",M);T.detachEvent(G,"mouseup",Q);var a=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,a);X.widget=W;a.tgt=X;if(W){if(W.ondrop){W.ondrop(a);}else{R.apply(W,[a]);}}var Y=a.src.widget;if(Y&&Y.ondragend){Y.ondragend(a);}if(Y&&!Y.ownAvatar){D();}},onDragMove:function(V,Z){if(T.isSafari){T.clearBrowserHighlights();}var b=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,b);X.widget=W;var a=b&&b.tgt&&b.tgt.widget;b.tgt=X;if(a!==W){if(a){if(a.ondragleave){a.ondragleave(b);}else{C.apply(a,[b]);}}if(W){if(W.ondragenter){W.ondragenter(b);}else{L.apply(W,[b]);}}}else{if(W){if(W.ondragover){W.ondragover(b);}}}var Y=b.src.widget;if(Y&&Y.ondragmove){Y.ondragmove(b);}if(Y&&!Y.ownAvatar){K(X.pos,!!W);}}});S=mstrmojo.dnd;S.enable();})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var A=mstrmojo.dom;function E(J,I){var G=[];if(J){for(var F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function D(L,F,N){var I=N.hWin,J=N.e,G=A.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=A.ctrlKey(I,J),O=A.shiftKey(I,J);if(K||O){A.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}},premouseup:function C(H,K,G){var F=G.hWin,J=G.e,L=A.ctrlKey(F,J),I=A.shiftKey(F,J);if(L||I){A.clearBrowserHighlights(F);}},onadd:function B(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=E(K,G);for(var J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function B(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){for(var H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);for(var J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.ListSelector");var A=mstrmojo.dom,B=A.isIE;mstrmojo.TreeNodeSelector=mstrmojo.provide("mstrmojo.TreeNodeSelector",mstrmojo.mixin({premousedown:function C(E,I,D){var G=E&&E.tree||E,H=D&&D.e;if(!H){return false;}var F=G.lastMouseDown;if(F){if((F.e===H)||(B&&((new Date())-F.dt<50))){return false;}}this._super(E,I,D);if(G){if(G.onnodemousedown){G.onnodemousedown(D);}G.lastMouseDown={e:H,dt:new Date()};}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ListSelector");mstrmojo.TreeBrowserSelector=mstrmojo.provide("mstrmojo.TreeBrowserSelector",mstrmojo.hash.copy({premousedown:function A(E,H,D){var C=D.hWin,G=D.e,F=mstrmojo.dom.eventTarget(C,G),B=E.listMapper.findIndex(E,H,F);if(B>-1){E.toggleSelect(B);}}},mstrmojo.hash.copy(mstrmojo.ListSelector)));})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var B=mstrmojo.dom;function C(H){if(B.isWK){document.onselectstart=function(I){if(!H){I.preventDefault();}return H;};}}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function F(){return this.domNode;},getMovingTarget:function G(){return this.domNode;},ondragstart:function A(K){var J=this.getMovingHandle(),H=this.getMovingTarget().style;var I=B.contains(J,K.src.node,true,document.body);if(I){C(false);J.style.cursor="move";this._leftPos=parseInt(H.left,10);this._topPos=parseInt(H.top,10);this._hWidth=J.clientWidth;this._hHeight=J.clientHeight;}return I;},ondragmove:function E(K){var J=K.tgt.pos,H=K.src.pos,I=this.getMovingTarget().style;I.left=this.left=Math.max(this._leftPos+J.x-H.x,-this._hWidth+40)+"px";I.top=this.top=Math.max(this._topPos+J.y-H.y,-this._hHeight+10)+"px";},ondragend:function D(H){C(true);this.getMovingHandle().style.cursor="default";delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}});}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var E=mstrmojo.hash,H=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=E.clone(I);O.data=M;O.parent=N;return H.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length);for(var N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L;for(var O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}for(var M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},mstrmojo.hash.copy(mstrmojo.ListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,J="mstrmojo-itemwrap",I="&nbsp;",S=mstrmojo.array;function F(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}else{if(X===V){break;}}Y=X;X=Y.parentNode;}}return null;}function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=S.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;}function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function L(o,Z,n,s,W,f,t,r){if(!Z){return{start:0,end:0};}var j=this.wrapperNodes(o),l=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,k=n+s,g=j[0].offsetTop,b;for(var q=1;q<=Y;q++){b=j[l].offsetTop-g+r;if(b<n){X=l;}else{if(b>k){V=l;}}var a=Math.round(Z/Math.pow(2,q+1));l+=(b>n)?-a:a;l=Math.min(Math.max(0,l),Z-1);}return{start:X,end:V};},findWrapper:function K(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function E(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function R(f,V,X,b,W){var Y=this._nd2iw(f,V,X),g,a,i;if(Y){a=this._iw2idx(f,V,Y);g=a;i=this.itemOffsetTop(f,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+i+Z/2){g++;i+=Z;}}else{return f.dropCuePos;}return{left:0,top:i,idx:g,idxActual:a};},getWrapperCss:function(V){return J;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function O(h,b,n,g,a,o){var p=this.itemWrapperPrefix(n),l=this.itemWrapperSuffix,Z=p+this.itemWrapperPrefill+l,Y=[this.markupPrefix],W=1,V=n.selectedIndices||{},r=function q(k,j){for(var t=k;t<j;t++){Y[W++]=p;var u=b.build(n,g,h[t],t);if(V[t]){u=u.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=u;Y[W++]=l;}};var f=(h&&h.length)||0;a=a&&b?Math.min(a,f):0;if(a){r(0,a);}o=o&&b?Math.min(o,f-a):0;var i=f-o;for(var X=a;X<i;X++){Y[W++]=Z;}if(o){r(i,f);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,l,g,r,j,W,b,q){var h=(l&&l.length)||0,o=this.wrapperNodes(X),s=j.itemStatus,V=mstrmojo.css,Z=r.selectedIndices||{};for(var f=W,n=Math.min(b+1,h),a=0;f<n;f++){if(s[f]!==A){o[f].innerHTML=g.build(r,j,l[f],f);if(Z[f]){var Y=o[f].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===q){break;}}}return a;},onadd:function N(g,V,Z,h){if(V&&h){var a=h.value.length,b=this.wrapperNodes(V),f=b[h.index],Y=this.getWrapperCss(g);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=I;if(f){this.wrapperParentNode(V).insertBefore(W,f);}else{this.wrapperParentNode(V).appendChild(W);}}T(g,this);}},onremove:function P(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var f=X.value.length;for(var Z=X.index+f-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function Q(l,X,f,o){if(X&&o){var g=this.wrapperNodes(X);if(g){var W=mstrmojo.css,q=f.itemStatus,n;for(var b=0,V=o.removed,k=V&&V.length;b<k;b++){n=V[b];if(q[n]){W.removeClass(g[n].firstChild,["selected"]);}}for(var Z=0,h=o.added,Y=h&&h.length;Z<Y;Z++){n=h[Z];if(q[n]){W.addClass(g[n].firstChild,["selected"]);}}}}},_nd2iw:F,_iw2idx:M,toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,g=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=g.clientHeight,f=g.scrollTop,Y=f;if(V<f){Y=V;}else{if(f+W-b<V){Y=Math.min(V,V-W+b);}}g.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css");var F=mstrmojo.dom,B=mstrmojo.css,D="selected";function G(I,J,K,H,M){var L=M.listHooks[I];if(L&&L.call(M,J,K,H)){return ;}B[((I==="select")?"add":"remove")+"Class"](J,D);}function E(K,J,I){var L=this[K],H=(L)?L.split(J):[];H=H.concat(I.split(J));this[K]=H.join(J);return H.length-1;}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},getItemMarkup:function(I,H){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}">{@n}</{@tag}>';},getItemProps:function C(J,H){var I=!!this.selectedIndices[H];return{tag:"div",sel:I,cls:(I)?D:"",n:J.n||"",style:"",idx:H,addCls:function(K){E.call(this,"cls"," ",K);},addStyle:function(K){E.call(this,"style",";",K);}};},itemRenderer:{render:function(I,H,J){I._renderIdx=H;return mstrmojo.string.apply(J.getItemMarkup(I,H),J.getItemProps(I,H));},select:function(I,J,H,K){G("select",I,J,H,K);},unselect:function(I,J,H,K){G("unselect",I,J,H,K);}},onclick:function A(J){try{var M=J.target||F.eventTarget(J.hWin,J.e),L=F.findAncestorByAttr(M,"idx",true,this.domNode),I=L&&parseInt(L.value,10);if(I!==null&&!isNaN(I)){if(!this.multiSelect){this.singleSelect(I);}else{var H=(this.selectedIndices[I])?"remove":"add";this[H+"Select"](I);}}}catch(K){mstrApp.onerror(K);}}});mstrmojo._IsList.SELECTED_CLS=D;}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var H=mstrmojo.registry,C=mstrmojo.array,K=mstrmojo.publisher;function M(O,P){if(P){P.parent=O;return H.ref(P);}return null;}function J(O,P){if(P&&P.alias!=null){O[P.alias]=P;}}function D(P,Q){var O=Q.alias;if(Q.parent===P){delete Q.parent;}if((O!=null)&&(P[O]===Q)){delete P[O];}}function E(S,P){var O=P&&P.length,R,Q;if(O){R=[];for(Q=0;Q<O;Q++){var T=M(S,P[Q]);if(!T){continue;}R.push(T);J(S,T);}}return R;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,initChildren:function I(){var O="children",P=this[O];if(!P){return ;}this[O]=null;this._set_children(O,P,true);if(this.postCreateChildren){this.postCreateChildren();}},_set_children:function A(R,P,O){var Q=this.children;if(P!==Q){if(Q){this.removeChildren(null,O);}this.addChildren(P,0,O);}return false;},destroyChildren:function N(R){var Q=this.children,O=(Q&&Q.length)||0,P;if(O){for(P=O-1;P>-1;P--){var S=Q[P];if(S&&S.destroy){S.destroy(R);if(!R){D(this,S);}}}if(!R){Q.length=0;}}},invalidateChildren:function F(){mstrmojo.array.forEach(this.children,function(O){O.invalidate();});},invalidate:function L(){this.invalidateChildren();},addChildren:function G(T,P,Q){if(!T){return T;}var S=T.constructor===Array,O=E(this,S?T:[T]);if(O&&O.length){var R=this.children||[];if(P==null){P=R.length;}this.children=C.insert(R,P,O);if(!Q&&(this.onaddChild||K.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:O,index:P});}}return S?O:(O&&O[0]);},removeChildren:function B(U,Q){var S=this.children,T=U?[U]:(this.children||[]).concat(),P=T.length,O=-1,R;if(P){for(R=P-1;R>-1;R--){D(this,T[R]);}if(U){O=C.removeItem(S,U);}else{if(S){S.length=0;O=0;}}if(!Q&&(this.onremoveChild||K.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:T,index:O});}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;if(this.preHandleEvent){this.preHandleEvent(H);}var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){if(this.postHandleEvent){this.postHandleEvent(H);}C.publish(this.id,M,H);}return H;},attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales");var V=function(){return mstrmojo.locales.datetime;},J=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},isDate:function W(Z,g,Y){var b=this.parseDate(Z,Y);var f=!!(b&&this.doesDateExist(b.month,b.day,b.year));if(g){if(f){var a=this.formatDateInfo(b,V().DATEOUTPUTFORMAT);if(Y){return{match:b.match,formatted:a};}else{return a;}}else{return null;}}else{return !!f;}},formatDateInfo:function P(b,g){if(!g){return"";}var Y=b.day,f=b.month,a=b.year;var Z=g.replace(/dd/g,this.formatInteger(Y,2)).replace(/d/g,Number(Y)).replace(/yyyy/g,Number(a)).replace(/yy/g,this.formatInteger(Number(a)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,V().MONTHNAME_FULL[Number(f)-1]).replace(/\~\~\~\~/g,V().MONTHNAME_SHORT[Number(f)-1]).replace(/\@\@/g,this.formatInteger(f,2)).replace(/\^/g,Number(b.month));return Z;},parseDate:function X(n,g,k){if(n==null){return false;}if(typeof (n)!="string"){n=String(n);}n=J.trim(n);var Y=this.CACHE.PARSEDATE[g?"CONTAINS":"EQUALS"],a=Y[n];if(a||(a===null)){return a;}var Z=null;var j;if(k){j=[k];}else{j=[].concat(V().DATEINPUTFORMATS);j.unshift(V().DATEOUTPUTFORMAT);}for(var b=0,f=j.length;b<f;b++){var h=this._buildRegExp4DateFormat(j[b]),l=h&&n.match(g?h.reContains:h.reEquals);if(l){Z={match:l[0],year:h.yearIndex&&this.fourDigitYear(l[h.yearIndex]),day:h.dayIndex&&parseInt(Number(l[h.dayIndex])),month:h.monthIndex&&this.numericMonth(l[h.monthIndex])};break;}}Y[n]=Z;return Z;},isTime:function H(Z,f,Y){var g=this.parseTime(Z,Y);var b=!!(g&&this.doesTimeExist(g.hour,g.min,g.sec));if(f){if(b){var a=this.formatTimeInfo(g,V().TIMEOUTPUTFORMAT);if(Y){return{match:g.match,formatted:a};}else{return a;}}else{return null;}}else{return !!b;}},parseTime:function I(o,g,l){if(o==null){return false;}if(typeof (o)!="string"){o=String(o);}o=J.trim(o);var Y=this.CACHE.PARSETIME[g?"CONTAINS":"EQUALS"],a=Y[o];if(a||(a===null)){return a;}var Z=null;var k;if(l){k=[l];}else{k=[].concat(V().TIMEINPUTFORMATS);k.unshift(V().TIMEOUTPUTFORMAT);}for(var b=0,f=k.length;b<f;b++){var j=this._buildRegExp4TimeFormat(k[b]),n=j&&o.match(g?j.reContains:j.reEquals);if(n){var h=j.ampmIndex&&n[j.ampmIndex];Z={match:n[0],hour:j.hourIndex&&this.capitalHour(n[j.hourIndex],h),min:j.minIndex&&parseInt(Number(n[j.minIndex])),sec:j.secIndex&&parseInt(Number(n[j.secIndex]))};break;}}Y[o]=Z;return Z;},formatTimeInfo:function Q(b,Z){if(!Z){return"";}var a=!(Number(b.hour)%12)?12:(Number(b.hour)%12),Y=Z.replace(/HH/g,this.formatInteger(b.hour,2)).replace(/H/g,Number(b.hour)).replace(/hh/g,this.formatInteger(a,2)).replace(/h/g,a).replace(/mm/g,this.formatInteger(Number(b.min)||0,2)).replace(/m/g,Number(b.min)||0).replace(/ss/g,this.formatInteger(Number(b.sec)||0,2)).replace(/s/g,Number(b.sec)||0).replace(/a/g,(Number(b.hour)<12)?V().AM_NAME:V().PM_NAME);return Y;},doesTimeExist:function F(g,Z,f){var b=parseInt(g);if(b>=0&&b<=23){var Y=parseInt(Z);if(Y>=0&&Y<=59){if(!f){return true;}var a=parseInt(f);if(a>=0&&a<=59){return true;}}}return false;},capitalHour:function C(Y,Z){Y=parseInt(Number(Y));if(Z&&(Z.match(V().AM_NAME)||Z.match(/AM/i))){return Y%12;}else{if(Z&&(Z.match(V().PM_NAME)||Z.match(/PM/i))){return 12+(Y%12);}else{return Y;}}},isDateAndOrTime:function T(Y,Z){return this.isDateTime(Y,Z)||this.isDate(Y,Z)||this.isTime(Y,Z);},isDateTime:function B(k,Y){var f=this.parseDateAndOrTime(k),i=f&&f.date,b=f&&f.time,h=!!i&&!!b&&this.doesDateExist(i.month,i.day,i.year)&&this.doesTimeExist(b.hour,b.min,b.sec);if(Y){if(h){var Z=this.formatDateInfo(i,V().DATEOUTPUTFORMAT),a=this.formatTimeInfo(b,V().TIMEOUTPUTFORMAT),j=k.indexOf(i.match),g=k.indexOf(b.match);return(g<j)?a+" "+Z:Z+" "+a;}else{return null;}}else{return !!h;}},parseDateAndOrTime:function O(Z,Y,g){var a=this.parseDate(Z,true,Y);var b=J.trim((a&&a.match)?Z.replace(a.match,""):Z),f=this.parseTime(b,false,g);if(!a&&!f){return null;}else{return{date:a,time:f};}},inDateTimeRange:function N(a,f,i){var Z=this.parseDateAndOrTime(a),g=Z&&Z.date,j=Z&&Z.time;if(!g&&!j){return 0;}if(f!=null){var b=this.parseDateAndOrTime(f);if(g&&b&&b.date){var k=this.compareDate(g,b.date);if(k<0){return -1;}else{if(k==0){if(j&&b.time&&(this.compareTime(j,b.time)<0)){return -1;}}}}}if(i!=null){var Y=this.parseDateAndOrTime(i);if(g&&Y&&Y.date){var h=this.compareDate(g,Y.date);if(h>0){return 1;}else{if(h==0){if(j&&Y.time&&(this.compareTime(j,Y.time)>0)){return 1;}}}}}return 0;},compareDate:function A(a,Y){if(a==Y){return 0;}var b=typeof (a)=="string"?this.parseDate(a):a,Z=typeof (Y)=="string"?this.parseDate(Y):Y;if(!b){return -1;}if(!Z){return 1;}return(b.year-Z.year)||(b.month-Z.month)||(b.day-Z.day)||0;},compareTime:function K(Z,Y){if(Z==Y){return 0;}var b=typeof (Z)=="string"?this.parseTime(Z):Z,a=typeof (Y)=="string"?this.parseTime(Y):Y;if(!b){return -1;}if(!a){return 1;}return(b.hour-a.hour)||(b.min-a.min)||(b.sec-a.sec)||0;},compareDateTime:function S(Z,Y){return this.compareDate(Z,Y)||this.compareTime(Z,Y);},compareDateAndOrTime:function D(i,g){if(i==g){return 0;}var Z=typeof (i)=="string"?this.parseDateAndOrTime(i):i,Y=typeof (g)=="string"?this.parseDateAndOrTime(g):g;if(!Z){return -1;}if(!Y){return 1;}var h=Z.date,f=Y.date,b=Z.time,a=Y.time;return this.compareDate(h,f)||this.compareTime(b,a);},_buildRegExp4DateFormat:function M(a){if(!a){return null;}var f=this.REGEXPS.DATES[a];if(!f){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=V().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=V().MONTHNAME_SHORT.join("|");}f=this.REGEXPS.DATES[a]={};f.formatStr=a;var Z=f.reStr=a.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");f.reEquals=new RegExp("^"+Z+"$");f.reContains=new RegExp("^"+Z+"\\b");var g=[{key:"monthIndex",index:a.indexOf("M")},{key:"dayIndex",index:a.indexOf("d")},{key:"yearIndex",index:a.indexOf("y")}];g.sort(function(i,h){return i.index-h.index;});var Y=1;for(var b=0;b<3;b++){f[g[b].key]=g[b].index>-1?Y++:null;}}return f;},_buildRegExp4TimeFormat:function E(b){if(!b){return null;}var g=this.REGEXPS.TIMES[b];if(!g){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[V().AM_NAME,V().PM_NAME,String(V().AM_NAME).toLowerCase(),String(V().PM_NAME).toLowerCase()].join("|");}g=this.REGEXPS.TIMES[b]={};g.formatStr=b;var a=b.replace(/\'\'/g,'"');var h=a.match(/\'(.+?)\'/g);a.replace(/\'(.+?)\'/g,"*");a=a.replace(/([^H|h|m|s|z|Z|a|\s])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/gi,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");for(var f=1,Y=h&&h.length||0;f<Y;f++){a=a.replace(/\*/,h[f]);}a=a.replace(/\"/g,"'");g.reEquals=new RegExp("^"+a+"$");g.reContains=new RegExp(a);var j=[{key:"hourIndex",index:b.search(/h|H/)},{key:"minIndex",index:b.indexOf("m")},{key:"secIndex",index:b.indexOf("s")},{key:"ampmIndex",index:b.indexOf("a")},{key:"zoneIndex",index:b.search(/z|Z/)}];j.sort(function(k,i){return k.index-i.index;});var Z=1;for(var f=0;f<5;f++){g[j[f].key]=j[f].index>-1?Z++:null;}}return g;},doesDateExist:function L(b,Y,Z){var a=new Date(Z,b-1,Y);return Z==a.getFullYear()&&b==a.getMonth()+1&&Y==a.getDate();},fourDigitYear:function R(Z){Z=parseInt(Number(Z));if(!isNaN(Z)){var Y=(V().TWODIGITYEARSTART%100)||0;if(Z>=0&&Z<=Y){Z=2000+Z;}else{if(Z>Y&&Z<100){Z=1900+Z;}}}return Z;},numericMonth:function U(f){var b=parseInt(Number(f)),a=mstrmojo.array;if(!isNaN(b)){return b;}var Y=f&&f.length||0,Z=-1;if(Y){if(Y<=3){Z=a.indexOf(V().MONTHNAME_SHORT,f);}if(Z==-1){Z=a.indexOf(V().MONTHNAME_FULL,f);}}return Z+1;},formatInteger:function G(a,Z){var g=String(a),f=Math.max(Z-g.length,0);if(f>0){var Y=[g];for(var b=1;b<=f;b++){Y.push("0");}g=Y.reverse().join("");}return g;},getFirstDateOfMonth:function(Z,Y){return new Date(Z,Y-1,1);},getDateObject:function(g,Y,f,a,b,Z){g=g||0;Y=Y||1;f=f||1;a=a||0;b=b||0;Z=Z||0;return new Date(g,Y-1,f,a,b,Z);},getDateFromDateInfo:function(Y){return this.getDateObject(Y.date&&Y.date.year,Y.date&&Y.date.month,Y.date&&Y.date.day,Y.time&&Y.time.hour,Y.time&&Y.time.min,Y.time&&Y.time.sec);},getDateJson:function(Y){return{year:Y.getFullYear(),month:Y.getMonth()+1,day:Y.getDate(),hour:Y.getHours(),min:Y.getMinutes(),sec:Y.getSeconds()};},isLeapYear:function(Y){return !(Y%400)||(!(Y%4)&&!!(Y%100));},getDaysOfMonth:function(a,Y){var Z=[31,28,31,30,31,30,31,31,30,31,30,31];if(Y==2&&this.isLeapYear(a)){return 29;}return Z[Y-1];},getPreMonth:function(Z,Y){if(Y===1){return{y:Z-1,m:12};}return{y:Z,m:Y-1};},getNextMonth:function(Z,Y){if(Y===12){return{y:Z+1,m:1};}return{y:Z,m:Y+1};}});})();(function(){var D={};var B="XHRServerTransport";mstrmojo.XHRServerTransport={serverRequest:function A(I,G,F){var E=mstrmojo.all[I],H=D[G]=new mstrmojo.SimpleXHR();$MAPF(true,B,"transportRequest");H.request(F.config.method||"POST",F.taskURL||mstrConfig.taskURL,{success:function(J){E.response(G,true,J);},failure:function(J){E.response(G,false,{code:J.getResponseHeader("X-MSTR-TaskErrorCode"),message:J.getResponseHeader("X-MSTR-TaskFailureMsg")});},complete:function(){delete D[G];}},F.params);},cancelRequest:function C(F){var G=D[F],E=false;if(G){E=G.cancel();delete D[F];}$MAPF(false,B,"transportRequest");return E;}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var G=mstrmojo.hash,A=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",init:function E(H){this.disposables=[];G.copy(H,this);if(this.postApplyProperties){this.postApplyProperties();}A.add(this);if(this.postCreate){this.postCreate();}},destroy:function B(H){this._super(H);F.forEach(this.disposables,function(I){if(I.destroy){I.destroy(H);}else{if(I.clear){I.clear();}}});this.disposables=[];A.remove(this);}});var C=mstrmojo.Obj;C.free=function D(H){if(H instanceof C){H.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.WidgetListBuilder");mstrmojo.WidgetTreeBuilder=mstrmojo.provide("mstrmojo.WidgetTreeBuilder",mstrmojo.mixin({newContext:function A(B){var D=this._super(B);if(!B.itemFunction&&D.itemFunc){var C=D.itemFunc;D.itemFunc=function(G,F,H){var E=C(G,F,H);if(E){E.tree=H.tree||H;}return E;};}return D;}},mstrmojo.hash.copy(mstrmojo.WidgetListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip");var B=mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",init:function A(D){this._super(D);var E=this.parent;if(!E||E.hasInitBindings){this.initBindings();}},destroy:function C(D){if(this.hasRendered){this.unrender(D);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn});B.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};B.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};B.heightMarkupMethod=function(){this.domNode.style.height=this.height||"";};B.widthMarkupMethod=function(){this.domNode.style.width=this.width||"";};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.func","mstrmojo.Obj");var D=mstrmojo.hash;var E=0;var M=[];var P={};var B=false;function H(R){var S=R.callback;if(S.submission){S.submission(this.userInteractionRequired(R));}this.submitRequest(R);}function K(){if(M.length&&!B){H.call(this,M.shift());}}mstrmojo.ServerProxy=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.ServerProxy",transport:null,cnt:0,request:function I(b,Y,S,T){if(S){this.cancelRequests();}var V=this.id,W=this.transport,R=mstrmojo.now()+Y.taskId+E++,U=b.canceled||mstrmojo.emptyFn;b.canceled=function(f){U();b.complete(true);return W.cancelRequest(f);};b=mstrmojo.func.wrapMethods(b,{complete:function(f){mstrmojo.all[V].deleteRequest(f);}});var X=!D.isEmpty(this._requests),Z=this.createRequest(R,b,Y,T),a=(B||X)&&!T.doNotHold;if(a){M.push(Z);}else{H.call(this,Z);}},createRequest:function C(U,W,V,R){var S=this._requests;if(!S){S=this._requests={};}var T=S[U]={id:U,callback:W,params:V,config:R};return T;},submitRequest:function F(R){this.transport.serverRequest(this.id,R.id,R);},cancelRequests:function O(){var R=false;D.forEach(this._requests,function(S){if(typeof S.gotResponse==="undefined"){R|=S.callback.canceled(S.id);}});this._requests={};M=[];return R;},response:function G(V,R,T){$MAPF(false,"AndroidServerTransport","transportRequest");var U=this.getRequest(V);if(U){U.gotResponse=true;var W=U.callback,S=(R&&!T.mstrerr)?"success":"failure";try{if(W[S]){W[S](T,U);}}finally{W.complete(V);}}K.call(this);},deleteRequest:function Q(S){var R=this._requests;delete R[S];},getRequest:function A(S){var R=this._requests;return R&&R[S];},userInteractionRequired:function L(R){return false;},addLoadingGraph:function J(R){P[R]=true;B=true;},removeLoadingGraph:function N(R){delete P[R];if(D.isEmpty(P)){B=false;K.call(this);}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.ToolBarModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.ToolBarModel",getChildren:function A(C,B){return(C||this.n||this).items;}});})();(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var Z=mstrmojo.hash,h=mstrmojo.array,g=mstrmojo.boxmodel,b=mstrmojo.dom;function A(k,n,j){var l=k.listSelector;if(l){l[n](k,k.itemsContainerNode,j);}}function K(k,j){var l=k.lastPagePos;if(!l||l.dragId!==j){l=g.offset(k.itemsContainerNode);l.dragId=j;k.lastPagePos=l;var n=k.scrollboxNode;k.lastScrollPos={left:n.scrollLeft,top:n.scrollTop,width:n.clientWidth,height:n.clientHeight};}}function N(n,q,k){var l=q&&q.node;if(l===n.dropCueNode||l===n.dropCueNode.firstChild){return n.dropCuePos;}var o=n.listMapper;var j=o&&o.whereDrop(n,n.itemsContainerNode,l,q.pos,{left:n.lastPagePos.left-n.lastScrollPos.left,top:n.lastPagePos.top-n.lastScrollPos.top,width:n.lastScrollPos.width,height:n.lastScrollPos.height});var p=n.dropCuePos;return((k!==false)&&p&&j&&(p.idx===j.idx)&&(p.left===j.left)&&(p.top===j.top))?p:j;}var i="attachEventListener";function C(k,j){if(k.makeObservable){j=j||[];if(!j[i]){mstrmojo.hash.make(j,k.itemsScriptClass||mstrmojo.Arr);}}return j;}function G(k,j){if(j&&j[i]){k._sub_its=j;k._sub_add=j[i]("add",k.id,"preadd");k._sub_rmv=j[i]("remove",k.id,"preremove");}}function F(j){if(j._sub_its){var k=mstrmojo.publisher;k.unsubscribe(j._sub_add);k.unsubscribe(j._sub_rmv);delete j._sub_add;delete j._sub_rmv;delete j._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var k=this.dropCueNode,j=k&&k.style;if(!j){return ;}var n=this.dropCuePos,l=!!n;if(l){j.left=n.left+"px";j.top=n.top+"px";}j.display=l?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Y(n){this._super(n);this.items=this.initItems(this.items);var l=this.selectedIndices,j=this.selectedIndicesList,k=this.selectedIndex,p=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(l||j||(k>-1)||p){this.initSelections(l,j,k,p);}if(this.postInitItems){this.postInitItems();}},initItems:function H(j){return C(this,j);},preBuildRendering:function V(){var o=this.listBuilder,r=o.newContext(this);this.ctxtBuilder=r;var k=this.markupSlots,n=!!(this.renderOnScroll&&this.renderBlockSize&&k&&k.scrollboxNode),l=this.items,j=(l&&l.length)||0,p=n?this.firstRenderBlockSize:j,q=n?this.firstRenderBlockSize:0;this._eros=n;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(l,o,this,r,p,q).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function D(){delete this.itemsHtml;var p=this.listMapper;if(p&&p.postBuildRendering){p.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}G(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var r=this.id;this._cb_scroll=function(){var n=mstrmojo.all[r];n.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var l=0,k=["itemsEffect","scrollEffect"],j=k.length;l<j;l++){var q=k[l],o=this[q];if(o&&o.constructor===Object){o=mstrmojo.insert(mstrmojo.hash.clone(o));o.widget=this;this[q]=o;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function W(n){F(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var k=0,l=["itemsEffect","scrollEffect"],j=l.length;k<j;k++){var o=this[l[k]];if(o&&o.isPlaying){o.cancel();}}this._super(n);},pauseScrollRendering:function O(l,j,k){if(l!==false){l=true;}if(this.paused===!!l){return ;}this.paused=!!l;if(l){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(j,k);}},onscroll:function J(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var j=this;this._fillTmr=self.setTimeout(function(){j.fill();j=null;},50);}}if(this._super){this._super();}},fill:function a(j,o){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var p=(this.items&&this.items.length)||0;if(!p){if(o){o();}}else{var l=this.scrollboxNode,q=this.itemsContainerNode,n=mstrmojo.boxmodel.offset(q,l),s=this.listMapper,r=s.findScrollRange(q,p,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||l.scrollTop,l.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||l.scrollLeft,l.clientWidth,n.left,n.top);if(this.fillAt(r.start,r.end)){if(j){j();}var k=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[k].fill(j,o);},100);}else{if(o){o();}}}},fillAt:function L(l,k){var j=this.listMapper;if(j){return j.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,l,k,this.renderBlockSize);}else{return false;}},add:function Q(k,j){if(!k||!k.length){return -1;}var l=this.items;if(j==null){j=Z.min(this.selectedIndices,false,true);if(j!==null&&j!==undefined){j++;}}if(j==null||j===-1){j=(l&&l.length)||0;}if(l&&l.add){l.add(k,j);}else{this.set("items",l?h.insert(l.concat(),j,k):k);}return j;},preadd:function B(l){if(this.hasRendered){var p=this.listMapper;if(p){p.onadd(this,this.itemsContainerNode,this.ctxtBuilder,l);}var o=this.listBuilder;if(o){o.onadd(this,this.ctxtBuilder,l);}var k=this.listSelector;if(k){k.onadd(this,l);}if(this._eros){this.onscroll();}else{var n=l.index,j=l.value.length;this.fillAt(n,n+j-1);}}if(this.onadd){this.onadd(l);}if(this._super){this._super(l);}},remove:function T(j){if(j==null){return -1;}if(j.constructor!==Array){return this._remove(j);}var l=this.items;if(l){var k;if(l.remove){for(k=j.length-1;k>-1;k--){l.remove(j[k],1);}}else{l=l.concat();for(k=j.length-1;k>-1;k--){l.splice(j[k],1);}this.set("items",l);}return j[0];}return -1;},_remove:function T(l){var k=this.items;if(!k||(l==null)){return -1;}var j;if(!isNaN(l)){j=l;}else{j=this.itemIndex(l);}if(j>-1){if(k.remove){k.remove(j,1);}else{k=k.concat();k.splice(j,1);this.set("items",k);}}return j;},duplicate:function X(p,k,l){var n=this.items,j=-1;if(!n||(p==null)){return -1;}if(!isNaN(p)){if(k===null||k===undefined){k=p+1;}p=n[p];}else{if(k===null||k===undefined){k=this.itemIndex(p)+1;}}if(p){var o;o=Z.copy(l,Z.clone(p));j=this.add([o],k);}return j;},preremove:function M(k){if(this.hasRendered){var n=this.listMapper;if(n){n.onremove(this,this.itemsContainerNode,this.ctxtBuilder,k);}var l=this.listBuilder;if(l){l.onremove(this,this.ctxtBuilder,k);}var j=this.listSelector;if(j){j.onremove(this,k);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(k);}if(this._super){this._super(k);}},move:function R(n,s){function q(u,t){return(s>=u)&&(s<=u+t);}var r=(this.items&&this.items.length)||0;if(s===-1||s==null||isNaN(s)){s=r;}else{s=Math.min(s,r);}var l,j,p,o;if(n.constructor===Array){j=n;p=n;o=(j&&j.length)||0;if(q(n[0],n.length)){return false;}l=h.get(this.items,n);}else{if(typeof (n)==="object"){l=[n];o=1;j=this.itemIndex(l[0]);p=[j];if(q(j,1)){return false;}}else{j=n;p=[n];o=1;if(q(j,1)){return false;}l=[this.items[j]];}}for(var k=0;k<o;k++){if(p[k]<=s){s--;}}if(l[0]!=null){this.remove(j);this.add(l,s);}return true;},itemIndex:function E(j){if(j==null){return -1;}var k=this.itemIdField;return k?h.find(this.items,k,j[k]):h.indexOf(this.items,j);},prechange:function S(l){if(this.hasRendered){var k=[this.listBuilder,this.listMapper];for(var n=0,j=k.length;n<j;n++){var p=k[n];if(p&&p.onchange){p.onchange(this,this.itemsContainerNode,this.ctxtBuilder,l);}}}},makeObservable:false,_set_items:function I(q,j){var p=this.items;j=this.initItems(j);this.items=j;if(p!==j){var o=this,l=function(){if(o.autoHide){o.set("visible",!!(j&&j.length));}o=null;},k=this.hasRendered;if(k){this.refresh(l);}else{l();}}return p!==j;},premousedown:function f(j){A(this,"premousedown",j);},premouseup:function P(j){A(this,"premouseup",j);},scrollTo:function U(k){var j,l=this.listMapper;if(l&&l.toItem){if(!isNaN(k)){j=k;}else{j=this.itemIndex(k);}if(j>=0){l.toItem(this,j);}}},draggable:false,getDragData:function(o){K(this,o.id);var l=N(this,o.src),k=l&&l.idxActual;if((k>-1)&&this.selectedIndices[k]){var n=this.sortSelectedIndices(),j=h.get(this.items,n)||[];switch(j.length){case 1:return Z.copy(j[0],{html:j[0][this.itemDisplayField],index:n[0]});case 0:return null;default:return Z.copy({html:j.length+" selections",indices:n},j);}}},dropZone:false,ondragenter:function(j){K(this,j.id);this.set("dropCuePos",N(this,j.tgt));},ondragover:function(j){this.set("dropCuePos",N(this,j.tgt));},ondragleave:function(j){this.set("dropCuePos",null);},ondragstart:function(j){if(!(j&&j.src&&j.src.data)){return false;}},allowCopy:false,ondragend:function(n){var k=n&&n.tgt,j=k&&k.widget;if(j===this){}else{if(this.tree&&j&&j.tree===this.tree){if(!this.allowCopy||!b.ctrlKey(k.hWin,k.e)){var l=n.src&&n.src.data;if(l&&(l.indices||(l.index!==null))){this.remove(l.indices||l.index);}}}}},ondrop:function(r){var w=r&&r.src,q=w&&w.data;if(q){var k=N(this,r.tgt,false),t=k&&k.idx,l=(q&&q.constructor===Array);var o=this.items;t=Math.min(t,(o&&o.length)||0);var u=true;if(w.widget===this){u=this.move(this.sortSelectedIndices(),t);}else{this.add(l?q:[q],t);}if(u){var p=l?q.length:1,j={};for(var n=0;n<p;n++){j[t+n]=true;}this.set("selectedIndices",j);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var D=mstrmojo.dom,E=mstrmojo.hash,B=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){B[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){B[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.textNode.innerHTML=this.text;},onwidthChange:function(){var F=this.width;if(F){this.domNode.style.width=F;}}},oniconClassChange:function C(G){if(this.hasRendered&&this.domNode){var F=G.valueWas,H=G.value;this.domNode.className=this.domNode.className.replace(F,"")+" "+H;}},onclick:mstrmojo.emptyFn,ontouchend:function A(F){this.onclick(F);}});mstrmojo.Button.newIconButton=function(H,K,I,F,J){var G={scriptClass:"mstrmojo.Button",title:H,cssClass:K,text:"",onclick:I};if(F){G.bindings=F;}E.copy(J,G);return G;};mstrmojo.Button.newInteractiveButton=function(G,H,J,I){var F={scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-InteractiveButton",text:G,glowClass:"glow"};if(H){F.onclick=H;}if(J&&(D.isFF||D.isWK)){E.copy({onmousedown:function(){B.applyShadow(this.domNode,0,0,10,J);},onmouseup:function(){B.removeShadow(this.domNode);}},F);}E.copy(I,F);return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",text:null,markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" mstrAttach:click></div>',cssDisplay:"block",markupMethods:{ontextChange:function(){this.domNode.innerHTML=(this.text!=null)?this.text:"";},oncssTextChange:function(){this.domNode.style.cssText=(this.cssText!=null)?this.cssText:"";},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},autoHide:false,_set_text:function A(D,B){if(this.autoHide){this.set("visible",(B!=null)&&(B!==""));}var C=this.text;this.text=B;return C!=B;}});})();(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo._HasChildren");var F=mstrmojo.publisher;mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",init:function I(L){this._super(L);if(this.children){this.initChildren();}var M=this.parent;if(!M||M.hasInitBindings){this.initBindings();}},destroy:function G(L){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(L);},unrender:function J(N){var O=this.children,L=(O&&O.length)||0,M;for(M=L-1;M>-1;M--){O[M].unrender(true);}this._super(N);},postBuildRendering:function K(){var L=this._super?this._super():undefined;if(L!==false){this.renderChildren();L=true;}return L;},renderChildren:function C(){var N=this.children,L=(N&&N.length)||0,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render(null);}}},childRenderCheck:function H(M){if(M&&!M.hasRendered){var L=M.slot||this.defaultChildSlot;return !!this[L];}return false;},addChildren:function E(O,M,N){var L=this._super(O,M,N);if(L){this.childRenderOnAddCheck(L);}return L;},removeChildren:function A(S,O){var R=S?[S]:(this.children||[]),L=R.length,P;for(P=L-1;P>-1;P--){var N=R[P],M=N&&N.domNode;if(M){var Q=this[(N.slot||this.defaultChildSlot)];if(M.parentNode===Q){Q.removeChild(M);}}}return this._super(S,O);},childRenderOnAddCheck:function B(N){if(this.hasRendered&&N){var L=N.length,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render();}else{if(O&&O.hasRendered){this.onchildRenderingChange(O);}}}}},preserveChildDomOrder:true,onchildRenderingChange:function D(M){var T=M&&M.domNode;if(!T){return ;}var N=this.defaultChildSlot,W=M.slot||N,O=this[W],L=this.children;if(!O){if(T.parentNode){T.parentNode.removeChild(T);}}else{if(T.parentNode===O){return ;}if(!this.preserveChildDomOrder){O.appendChild(T);}else{var P,R;for(R=L.length-1;R>=0;R--){var U=L[R];if(U===M){break;}if(W===(U.slot||N)){var V=U.domNode;if(V&&V.parentNode===O){P=V;}}}if(P){O.insertBefore(T,P);}else{O.appendChild(T);}}}if(F.hasSubs(this.id,"childrenRendered")){var S=L.length,Q;for(Q=0;Q<S;Q++){if(!L[Q].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._ListSelections");mstrmojo.ListBase=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBase",selectionPolicy:null,itemRenderer:null,icnCssText:"",icnCss:"",markupString:'<div id="{@id}" class="mstrmojo-ListBase {@cssClass}" style="{@cssText}" mstrAttach:click,mouseover><div class="{@icnCss}" style="{@icnCssText}">{@itemsHtml}</div></div>',markupSlots:{itemsContainerNode:function(){return this.domNode.firstChild;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}}},buildRendering:function E(){this.itemsHtml="";var F=this.items&&this.items.length;if(F){this.itemsHtml=this._buildItemsMarkup(0,F-1,this._markupPrefix&&this._markupPrefix(),this._markupSuffix&&this._markupSuffix(),this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join("");}this._super();delete this.itemsHtml;this.addSlots({itemsNode:this.itemsContainerNode.firstChild});},_markupPrefix:null,_markupSuffix:null,_itemPrefix:null,_itemSuffix:null,_buildItemsMarkup:function(F,I,R,G,U,H){var V=[],N=0;V[N++]=R||"";var L=this.itemRenderer,Q=L&&L.render;if(Q&&typeof (Q)=="function"){var T=U||"",S=H||"",K=this.items,M=(K&&K.length)||0,O=this;for(var J=F,P=Math.min(I+1,M);J<P;J++){V[N++]=T;V[N++]=Q(K[J],J,O);V[N++]=S;}}V[N++]=G||"";return V;},onselectionChange:function A(P){if(!P){return ;}var M=this.itemRenderer;if(!M){return ;}var I=M.unselect,L=this.items||[],Q=P.removed,H,G;if(I&&Q){for(var J=0,R=Q.length;J<R;J++){H=Q[J];G=this._getItemNode(H);if(G){I(G,L[H],H,this);}}}var F=M.select,O=P.added;if(F&&O){for(var K=0,N=O.length;K<N;K++){H=O[K];G=this._getItemNode(H);if(G){F(G,L[H],H,this);}}}if(this.onchange){this.onchange();}},onselect:function B(F){if(this.makeSelection&&F.idxs&&F.idxs.length){var G=this._getItemNode(F.idxs[0]);this.makeSelection({selIdx:F.idxs[0],selItem:G});}},autoHide:false,init:function D(F){this._super(F);if(this.autoHide){this.visible=!!(this.items&&this.items.length);}},_getItemNode:function(F){var G=this.itemsContainerNode;return(G&&G.childNodes[F])||null;},_set_items:function C(I,F){if(this.autoHide){this.set("visible",!!(F&&F.length));}var H=this.items;this.items=F;if(H!=F){var G=this.hasRendered;if(G){this.unrender();}this.clearSelect();if(G){this.render();}return true;}else{return false;}return H!=F;}});})();mstrmojo.ToolSeparator=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.ToolSeparator",markupString:'<div class="mstrmojo-ToolSeparator {@cssClass}" style="{@cssText}"></div>',markupSlots:{},markupMethods:{}});(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase");mstrmojo.SelectBox=mstrmojo.declare(mstrmojo.ListBase,null,{scriptClass:"mstrmojo.SelectBox",size:10,cssDisplay:"inline",markupString:'<select id="{@id}" class="mstrmojo-SelectBox {@cssClass}" style="{@cssText}" size="{@size}" {@multipleHtml} mstrAttach:keyup,change >{@itemsHtml}</select>',markupSlots:{itemsContainerNode:function(){return this.domNode;},scrollboxNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){this.domNode.disabled=!this.enabled;}},itemCssClass:"mstrmojo-selectbox-item",itemDisplayField:"n",itemIdField:"v",showItemTooltip:false,itemRenderer:{render:function(E,D,F){var G=mstrmojo.string.htmlAngles((F.getItemName)?F.getItemName(E,D):(F.itemDisplayField&&E[F.itemDisplayField]));return'<option class="'+F.itemCssClass+'" value="'+((F.getItemValue)?F.getItemValue(E,D):(F.itemIdField&&E[F.itemIdField]))+'" '+((F.selectedIndices[D])?'selected="true" ':"")+((F.showItemTooltip)?'title="'+mstrmojo.string.encodeXMLAttribute(G)+'"':"")+">"+G+"</option>";},select:function(E,F,D,G){E.selected=true;},unselect:function(E,F,D,G){E.selected=false;}},buildRendering:function C(){this.multipleHtml=this.multiSelect?' multiple="true" ':"";this._super();delete this.multipleHtml;},_getItemNode:function(D){var E=this.scrollboxNode;return E&&E.options[D];},prechange:function A(E){if(this._syncDom){return ;}this._syncDom=true;var H=this.scrollboxNode;if(this.multiSelect){var I=H.options,F=[];for(var G=0,D=I.length;G<D;G++){if(I[G].selected){F.push(G);}}this.select(F);}else{this.singleSelect(H.selectedIndex);}delete this._syncDom;},prekeyup:function(E){var H=this.scrollboxNode,F=false;if(this.multiSelect){var I=H.options;for(var G=0,D=I.length;G<D;G++){if(I[G].selected!==!!this.selectedIndices[G]){F=true;break;}}}else{if(H.selectedIndex!==this.selectedIndex){F=true;}}if(F){var J=E;J.name="change";this.raiseEvent(E);}},onselectionChange:function B(D){if(!this._syncDom){this._super(D);}}});})();(function(){mstrmojo.DivItemRenderer={render:function(D,B,E){var C=(E.getItemName?E.getItemName(D,B):(E.itemDisplayField&&D[E.itemDisplayField]));return'<div mstridx="'+B+'" class="'+E.itemCssClass+(E.selectedIndices[B]?" "+E.itemSelectedCssClass:"")+" lb"+C+'" style="'+E.itemCssText+'">'+C+"</div>";},select:function(C,D,B,E){C.className+=" selected";},unselect:function(C,D,B,E){C.className=C.className.replace(/selected/g,"");},rowHeight:21};mstrmojo._RendersItemDivs={tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"mstrmojo-ListBox-cell",cellCssText:"",itemCssClass:"mstrmojo-ListBox-item",itemSelectedCssClass:"selected",itemDisplayField:"n",itemRenderer:mstrmojo.DivItemRenderer,_findMatch:function(B,C){return mstrmojo.dom.findAncestorByAttr(mstrmojo.dom.eventTarget(B,C),"mstridx",true,this.itemsNode);},preclick:function A(J){var F=J.hWin,G=J.e,E=this._findMatch(F,G);if(E){var D=E.node,I=parseInt(E.value),H=mstrmojo.dom,B=H.ctrlKey(F,G),C=H.shiftKey(F,G);if(B||C){H.clearBrowserHighlights(F);}if(this.multiSelect&&(this.selectionPolicy=="toggle"||B)){this.toggleSelect(I);}else{if(this.multiSelect&&C){this.singleSelect(I);}else{this.singleSelect(I);}}}}};mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._RendersItemDivs");mstrmojo.ListBoxBase=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._RendersItemDivs],{scriptClass:"mstrmojo.ListBoxBase",cssClass:"mstrmojo-ListBox",itemCssClass:"mstrmojo-ListBox-item",_markupPrefix:function(){var B=this.itemRenderer;return(B&&B.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="0" cellpadding="0"><tbody>');},_markupSuffix:function(){var B=this.itemRenderer;return(B&&B.markupSuffix)||"</tbody></table>";},_itemPrefix:function(){var B=this.itemRenderer;return(B&&B.itemPrefix)||('<tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'"><td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var B=this.itemRenderer;return(B&&B.itemSuffix)||"</td></tr>";},_getItemNode:function(B){var D=this.itemsNode,C=D&&D.rows,E=C&&C[B];return E&&E.cells[0].firstChild;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._IsList");var A;mstrmojo.SuggestionList=mstrmojo.declare(mstrmojo.ListBase,[mstrmojo._IsList],{scriptClass:"mstrmojo.SuggestionList",itemField:"n",getItemMarkup:function(E,D){if(!A){var F=this.itemField;A=this._super(E).replace(">{@n}<",' title="{@'+F+'}">{@'+F+"}<");}return A;},getItemProps:function C(F,D){var E=this._super(F,D),G=this.itemField;E[G]=F[G];return E;},onclick:function B(D){this._super(D);var E=this.parent,G=E.opener;G.suggestionShown=false;var F=this.selectedItem;if(F){G.handleSuggestionItemSelect(F);}E.close();},bindings:{itemField:"this.parent.opener.itemField",items:"this.parent.opener.suggestionItems"}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.Container","mstrmojo._HasPopup");var D=function(){var F=this.opener;if(F.direction.toLowerCase()==="up"){this.domNode.style.top=-F.domNode.offsetHeight+"px";}};mstrmojo.DropDownButton=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasPopup],{scriptClass:"mstrmojo.DropDownButton",height:"19px",text:"",direction:"down",enabled:true,title:"",markupString:'<div id="{@id}" class="mstrmojo-DropDownButton {@cssClass} {@direction}" style="{@cssText}"><div class="mstrmojo-DropDownButton-boxNode {@cssClass}-boxNode" title="{@title}" mstrAttach:mousedown><div class="mstrmojo-DropDownButton-iconNode {@cssClass}-iconNode">{@text}</div></div><div class="mstrmojo-DropDownButton-popupNode {@cssClass}-popupNode"></div></div>',markupSlots:{boxNode:function(){return this.domNode.firstChild;},iconNode:function(){return this.domNode.firstChild.firstChild;},popupNode:function(){return this.domNode.lastChild;}},markupMethods:{onheightChange:function(){this.boxNode.style.height=this.height||"";},ontextChange:function(){this.iconNode.innerHTML=this.text;},ontitleChange:function(){this.boxNode.title=this.title;},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},preBuildRendering:function B(){if(this._super){this._super();}var F=this.popupRef;if(F){if(F.nudge){F.nudge=mstrmojo.func.composite([F.nudge,D]);}else{if(this.direction.toLowerCase()!=="down"){F.nudge=D;}}}},popupRef:null,popupOpenConfig:null,destroy:function C(F){var G=this.popupRef;if(G&&G.hasRendered){G.destroy(false);}if(this._super){this._super(F);}},togglePopup:function E(){var F=this._lastOpened;if(F&&F.visible){this.closePopup();}else{this.openPopup("popupRef",this.popupOpenConfig);}},premousedown:function A(F){this.togglePopup();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._FillsBrowser","mstrmojo._HasLayout");mstrmojo.OIVMPage=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout],{scriptClass:"mstrmojo.OIVMPage",markupString:'<div id="{@id}" class="mstrmojo-OIVMPage {@cssClass}" style="{@cssText}"><div class="mstrmojo-OIVMPage-toolbar"></div><div class="mstrmojo-OIVMPage-layout"></div></div>',markupSlots:{toolbar:function(){return this.domNode.firstChild;},layout:function(){return this.domNode.lastChild;}},onError:function(B){d=B.detail,app=mstrApp,btnHalo="#666",c=B.code;if(c){var A=mstrmojo.Button.newInteractiveButton;switch(c){case -2147468986:case -2147467618:B.btns=[A(mstrmojo.desc(3758,"Re-run Document"),function(){mstrmojo.form.send({evt:2048001,src:app.name+"."+app.pageName+".2048001",documentID:d.dssid,currentViewMedia:1});},btnHalo),A(mstrmojo.desc(221,"Cancel"),function(){mstrmojo.form.send({evt:3010,src:mstrApp.name});},btnHalo)];break;default:B.btns=[A(mstrmojo.desc(212,"Continue"),function(){mstrmojo.form.send({evt:3026,src:app.name+"."+app.pageName+".3026"});},btnHalo)];}}},renderPageLoadError:function(){var A=this.error;this.onError(A);if(!A.btns||!A.btns.length){mstrmojo.alert(A.message,null,A.title);}else{mstrmojo.confirm(A.message,A.btns,A.title);}},render:function(){if(this.error){this.renderPageLoadError();}else{this._super();}},layoutConfig:{h:{toolbar:"30px",layout:"100%"},w:{layout:"100%"}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K[I].slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.Container","mstrmojo._CanRenderChildrenOnShow");var A=mstrmojo.array;mstrmojo.StackContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._CanRenderChildrenOnShow],{scriptClass:"mstrmojo.StackContainer",isStack:true,markupString:'<div id="{@id}" class="mstrmojo-StackContainer {@cssClass}" style="{@cssText}"></div>',markupMethods:{onwidthChange:function(){if(!isNaN(parseInt(this.width))){this.domNode.style.width=this.width;}},onheightChange:function(){if(!isNaN(parseInt(this.height))){this.domNode.style.height=this.height;}},onborderChange:function(){this.domNode.style.border=this.border||"";},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{containerNode:function(){return this.domNode;}},_set_selected:function D(H,F){var G=this.selected;if(G===F){return false;}if(G){G.set("visible",false);}this.selected=F;if(F){F.set("visible",true);}return true;},addChildren:function B(J,G,H){var K=this.selected,L;for(var I=0,F=(J&&J.length)||0;I<F;I++){L=J[I];if(L&&L.set){L.set("visible",L===K);}}return this._super(J,G,H);},removeChildren:function C(H,F){var G=this._super(H,F);if(!H||(H===this.selected)){this.set("selected",null);}return G;},destroy:function E(F){this._super(F);this.selected=null;},renderMode:"onshow"});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._IsPopup","mstrmojo._CanAutoClose");mstrmojo.Popup=mstrmojo.declare(mstrmojo.Container,[mstrmojo._IsPopup,mstrmojo._CanAutoClose],{scriptClass:"mstrmojo.Popup",shadowNodeCssClass:"mstrmojo-popup-shadow",contentNodeCssClass:"mstrmojo-popup-content",cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Popup {@cssClass}" style="{@cssText}" ><div class="mstrmojo-Popup-shadow {@shadowNodeCssClass}"></div><div class="mstrmojo-Popup-content {@contentNodeCssClass}"></div>',markupSlots:{containerNode:function(){return this.domNode.lastChild;},shadowNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";},onleftChange:function(){this.domNode.style.left=(this.left!=null)?this.left:"";},ontopChange:function(){this.domNode.style.top=(this.top!=null)?this.top:"";}},buildRendering:function A(){var C=this.placeholder;if(this._super()){if(!this.parent&&!C){var B=this.placeNode||document.body;B.appendChild(this.domNode);}return true;}return false;}});}());(function(){mstrmojo.requiresCls("mstrmojo.Label","mstrmojo.css","mstrmojo.hash");mstrmojo.TristateCheckBox=mstrmojo.declare(mstrmojo.Label,null,{scriptClass:"mstrmojo.TristateCheckBox",grayed:true,checked:true,cssClass:"tristate",onclick:function(){if(this.grayed){this.set("grayed",!this.grayed);}else{this.set("checked",!this.checked);}},markupMethods:mstrmojo.hash.copy({oncheckedChange:function(){mstrmojo.css.toggleClass(this.domNode,"checked",this.checked);},ongrayedChange:function(){mstrmojo.css.toggleClass(this.domNode,"grayed",this.grayed);},onenabledChange:function(){mstrmojo.css.toggleClass(this.domNode,"disabled",!this.enabled);}},mstrmojo.hash.copy(mstrmojo.Label.prototype.markupMethods))});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.css","mstrmojo.Popup","mstrmojo.List","mstrmojo.DropDownButton");mstrmojo.Pulldown=mstrmojo.declare(mstrmojo.DropDownButton,null,{scriptClass:"mstrmojo.Pulldown",cssClass:"mstrmojo-Pulldown",items:null,itemIdField:"dssid",itemField:"n",itemCSS:"css",defaultSelection:0,defaultText:null,title:"",value:null,popupToBody:false,popupCssClass:"",popupZIndex:null,fixWidth:false,fixHeight:false,_set_items:function(F,D){var E=this.items;this.items=D||[];return E!==this.items;},markupMethods:mstrmojo.hash.copy({onvalueChange:function(){var E=this.value,D=this.selectedIndex,G=this.items||[],H,F;if(D===undefined||(E!==null&&(D===-1||(D!==-1&&G[D]&&G[D][this.itemIdField]!==E)))){D=mstrmojo.array.find(G,this.itemIdField,E);D=(D>-1)?D:this.defaultSelection;this.selectedIndex=D;}else{if(E===null){this.selectedIndex=this.defaultSelection;}}this.selectedItem=H=G[this.selectedIndex];if(H){F=H[this.itemField];}else{F=this.defaultText||"";}this.set("text",F);}},mstrmojo.hash.copy(mstrmojo.DropDownButton.prototype.markupMethods)),prevalueChange:function(E){var F=this.value,D=-1;if(F!==null){D=mstrmojo.array.find(this.items,this.itemIdField,F);}if(D>-1){this.selectedItem=this.items[D];this.selectedIndex=D;}},togglePopup:function C(){if(this.popupToBody){var G=mstrmojo.dom.position(this.popupNode,true),F=this.popupRef,D={left:Math.round(G.x)+"px",top:Math.round(G.y)+"px"};if(!F.hasRendered){delete F.slot;D.placeholder=document.body.appendChild(document.createElement("div"));}this.popupOpenConfig=this.popupOpenConfig||{};mstrmojo.hash.copy(D,this.popupOpenConfig);}else{this.popupRef.slot="popupNode";}if(this._super){this._super();}var E=this.popupRef.domNode;if(E){if(this.fixWidth){E.style.width=(this.domNode.offsetWidth-2)+"px";}else{E.style.minWidth=(this.domNode.offsetWidth-2)+"px";}}},premousedown:function A(D){this.togglePopup();},unrender:function B(D){var E=this.popupRef;if(this.popupToBody&&E.hasRendered){E.unrender(false);}if(this._super){this._super(D);}},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Pulldown-Popup",autoCloses:false,modal:false,autoClose:true,locksHover:true,onOpen:function(){var F=this.opener,E=F&&F.popupZIndex,G=F&&F.popupCssClass||"",D=this.domNode;if(E){D.style.zIndex=E;}if(G){mstrmojo.css.addClass(D,[G]);}if(F&&F.fixWidth){mstrmojo.css.addClass(D,["fix-width"]);}if(F&&F.fixHeight){mstrmojo.css.addClass(D,["fix-height"]);}},children:[{scriptClass:"mstrmojo.List",alias:"list",itemMarkupFunction:function(F,D,E){return'<div class="mstrmojo-Pulldown-listItem"><div class="mstrmojo-text '+(F[E.itemCSS]||"")+'" title="'+F[E.itemField]+'">'+(F[E.itemField]||"&nbsp;")+"</div></div>";},renderOnScroll:false,bindings:{itemIdField:"this.parent.opener.itemIdField",itemField:"this.parent.opener.itemField",itemCSS:"this.parent.opener.itemCSS",items:"this.parent.opener.items",selectionPolicy:"this.parent.opener.selectionPolicy",selectedIndex:"this.parent.opener.selectedIndex"},onmousedown:function(){this.parent.close();},onchange:function(){var F=this.parent,G=F.visible,D=F.opener,E=this.selectedItem;if(!D||!E||!G){return ;}D.set("value",E[this.itemIdField]);}}]}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo.StackContainer");mstrmojo.TabContainer=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout],{scriptClass:"mstrmojo.TabContainer",markupString:'<div id="{@id}" class="mstrmojo-tabcontainer {@cssClass}"><div class="mstrmojo-tabcontainer-tabs"></div><div class="mstrmojo-tabcontainer-stack"></div><div></div></div>',markupMethods:{onborderChange:function(){if(this.border){this.domNode.style.border=this.border;}},onbackgroundChange:function(){this.domNode.style.background=this.background||"";}},markupSlots:{top:function(){return this.domNode.childNodes[0];},stack:function(){return this.domNode.childNodes[1];},containerNode:function(){return this.domNode.childNodes[1];},bottom:function(){return this.domNode.childNodes[2];}},addChildren:function A(D,K,H){var G=this._super(D,K,H);var B=this.children,F=B.length;if(F>=2){var L,I,E;for(E=0;E<F;E++){var C=B[E],J=C&&C.slot;if(!L&&C.isStrip){L=C;}else{if(!I&&(!J||J==="stack")){I=C;}}if(L&&I){L.set("target",I);break;}}}return G;}});}());(function(){mstrmojo.requiresCls("mstrmojo.css");mstrmojo.PickerButton=mstrmojo.declare(mstrmojo.HBox,null,{scriptClass:"mstrmojo.PickerButton",cssClass:"mstrmojo-PickerButton",cellCssClass:"mstrmojo-PickerButton-cell",enabled:true,postCreate:function(){var A=function(B){mstrmojo.css.removeClass(B.domNode,B.selectedItemCssClass);mstrmojo.css.addClass(B.domNode,B.selectedItemCssClass=((B.parent.items&&B.parent.items[B.parent.selectedIndex])?"tb"+B.parent.items[B.parent.selectedIndex][B.parent.itemDisplayField]:""));};this.children=[{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-InteractiveButton",selectedItemCssClass:"",bindings:{title:"this.parent.title",iconClass:"this.parent.iconClass",selectedIndex:"this.parent.selectedIndex",enabled:"this.parent.enabled"},onclick:function(){this.parent.onchange();},onselectedIndexChange:function(){A(this);},onRender:function(){A(this);}},{scriptClass:"mstrmojo.DropDownButton",cssClass:"mstrmojo-PickerButton-DropDownButton",bindings:{enabled:"this.parent.enabled"},popupRef:{scriptClass:"mstrmojo.Popup",slot:"popupNode",cssClass:"mstrmojo-Menu",shadowNodeCssClass:"mstrmojo-Menu-shadow",contentNodeCssClass:"mstrmojo-Menu-content",autoCloses:false,locksHover:true,children:[{scriptClass:"mstrmojo.ListBox",itemCssClass:"mstrmojo-ListBox-item mstrmojo-InteractiveText",bindings:{itemDisplayField:"this.parent.opener.parent.itemDisplayField",itemIdField:"this.parent.opener.parent.itemIdField",items:"this.parent.opener.parent.items"},onchange:function(){if(this._closing){return ;}var C=this.selectedIndex,B=this.parent.opener;if((C>-1)&&B){this._closing=true;B.closePopup();B.parent.selectedItem=this.selectedItem;B.parent.set("selectedIndex",C);B.parent.onchange();this._closing=false;}}}]}}];}});})();(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo._HasBuilder");mstrmojo.ToolBar=mstrmojo.declare(mstrmojo.HBox,[mstrmojo._HasBuilder],{scriptClass:"mstrmojo.ToolBar",cellCssClass:"mstrmojo-ToolBar-cell",markupString:'<table id="{@id}" class="mstrmojo-ToolBar {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td class="mstrmojo-ToolBar-outercell"><table class="mstrmojo-ToolBar-innertable" cellspacing="0" cellpadding="0"><tr>{@tableHtml}</tr></table></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0].firstChild.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildChildren:function A(){var B=this.buildConfig;if(!B){this.buildConfig={};B=this.buildConfig;}B.target=this.target;return this._super();}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var H=mstrmojo.func.composite,F=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(O){if(O){return ;}var M=this.visible,N=M?"block":"none";this.editorNode.style.display=N;if(this.modal){this.curtainNode.style.display=N;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function I(){var M;var N=this.buttons;if(N&&!this.btnHbox){for(M in N){N[M].cssClass="mstrmojo-Editor-button";}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:N},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function D(){var M=this.placeholder;if(this._super()){if(!this.parent&&!M){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function G(){var M=this.id;return function(){var N=mstrmojo.all[M];N.resizeDialog();N.positionDialog();};},postBuildRendering:function B(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var M=this._resizeHandler=this.getResizeHandler();F.attachEvent(window,"resize",M);}this.resizeDialog();this.positionDialog();this.domNode.focus();return true;},resizeDialog:function J(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function E(){var N=this,R=N.curtainNode,M=document.body,P=document.documentElement,Q=R.style,O=N.curtainPosition;Q.width=Math.max(M.clientWidth,P.scrollWidth)+"px";if(O&&O.h){Q.height=O.h+"px";}else{Q.height=Math.max(M.clientHeight,P.scrollHeight)+"px";}if(O&&O.y){Q.top=O.y+"px";}N.raiseEvent({name:"resizeCurtain"});},positionDialog:function K(){if(!this.left||!this.top){var M=this.editorNode;F.center(M);if(this.alignment==="top"){M.style.top="10px";}}},destroy:function(N){var M=this._resizeHandler;if(M){F.detachEvent(window,"resize",M);}this._super(N);}});if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.confirm=function A(P,N,O){var Q="mojoConfirmx9",M=function(){mstrmojo.all[Q].destroy();};mstrmojo.array.forEach(N,function(R){var S=R.onclick;R.onclick=S?H([M,S]):M;});mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:N,children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.alert=function C(P,M,O){var Q="mojoAlertx9";try{mstrmojo.all[Q].destroy();}catch(N){}mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),function(){mstrmojo.all.mojoAlertx9.destroy();if(M){M();}},"#666666")],children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.toast=function L(Q,O){var R="mojoToast9",P,N=O||3000;try{mstrmojo.all[R].destroy();}catch(M){}mstrmojo.insert({id:R,scriptClass:"mstrmojo.Label",cssClass:"toastCss",text:Q}).render();P=mstrmojo.all[R].domNode;document.body.appendChild(P);F.bottomCenter(P);window.setTimeout(function(){mstrmojo.all[R].destroy();},N);};mstrmojo.mask={};mstrmojo.mask.show=function(){mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});mstrmojo.mask.win.render();document.body.appendChild(mstrmojo.mask.win.domNode);};mstrmojo.mask.hide=function(){mstrmojo.mask.win.destroy();};}}());(function(){mstrmojo.requiresCls("mstrmojo.SuggestionList");var A=function(O,P){var N=O.parent.opener,F=N&&N.showDesc,M=N&&N.showPath,E=P[O.itemField];var L=mstrmojo.string.escape4HTMLText,Q="";if(M){var I=P.anc&&P.anc.items,K=I&&I.length;if(K>0){for(var H=0;H<K-1;H++){Q+=I[H].n+" > ";}Q+=L(I[K-1].n);}else{if(P.path){Q+=P.path;}}}Q+=(Q.length==0?"":" > ")+L(E);if(F){var J=P[O.itemDescField],G=120;if(J){Q+="\r\n\r\n"+L(J.substring(0,G)+(J.length>G?"...":""));}}return Q;};var C=function(E,F,G){if(!F||!G){return ;}window.clearTimeout(this.pathTmr);this.pathTmr=window.setTimeout(function(){var H=F.path||F.getAttribute("path");if(H){return ;}mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(I){var J=D(I.toString())||"";G.path=J;F.path=1;F.title=A(E,G);}},{taskId:"getObjectDetails",objectID:G.did,objectType:G.t,sessionState:mstrApp.sessionState},undefined);},200);};var D=function(G){if(window.DOMParser){parser=new DOMParser();xmlDoc=parser.parseFromString(G,"text/xml");}else{xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async="false";xmlDoc.loadXML(G);}var K=xmlDoc.getElementsByTagName("path")[0],H=K.childNodes,J="";if(H){for(var F=0,E=H.length;F<E;F++){var I=H[F].childNodes&&H[F].childNodes[0];if(I){J+=mstrmojo.string.escape4HTMLText(I.nodeValue)+(F<E-2?"> ":"");}}}return J;};mstrmojo.LegacySuggestionList=mstrmojo.declare(mstrmojo.SuggestionList,null,{scriptClass:"mstrmojo.LegacySuggestionList",itemDescField:"desc",getItemMarkup:function(G,E){var F=this.parent.opener,H=A(this,G);return'<div class="mstrmojo-suggest-text '+((F&&F.item2textCss(G))||"")+'" idx="'+E+'" title="'+H+'">'+F.getHighlightedText(F.getSearchPattern(),mstrmojo.string.escape4HTMLText(G[this.itemField]))+"</div>";},getItemProps:function B(F,E){return{};},onmouseover:function(F){var I=this.parent.opener;if(I&&I.showPath){var G=mstrmojo.dom.eventTarget(F.hWin,F.e),E=G.getAttribute("idx"),H=E!=null?this.items[E]:null;if(H&&H.t>-1){C(this,G,H);}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBoxBase","mstrmojo._HasScrollbox");mstrmojo.ListBox=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._HasScrollbox],{scriptClass:"mstrmojo.ListBox",renderAllItems:false,renderPause:10,numPagesRendered:0,pageStatus:null,_rc:null,_totalPages:null,_rh:null,_rhMin:8,_rowsPerPage:null,_defaultRowsPerPage:100,_minRowsPerPage:100,_pageHeight:null,buildRendering:function K(){if(this.renderAllItems===true){this._super();return true;}this._initPageSettings();var L=this.items;this.items=this._rc?this.items.slice(0,Math.min(this._rowsPerPage,this._rc)):[];this._super();this.items=L;this.postRenderPage(0,true);if(this._rc>this._rowsPerPage){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]=(this._rh*this._rc)+"px";if(!this.connectedScrollbox){this.connectScrollbox(this);this.connectedScrollbox=true;}}else{this.postRenderingCleanup();}},_initPageSettings:function E(){var L=this.items;this._rc=(L&&L.length)||0;var N=this.itemRenderer;this._rh=(N&&N.rowHeight)||this._rhMin||3;var M=this._defaultRowsPerPage;if(!isNaN(this.scrollboxHeight)){M=Math.ceil(this.scrollboxHeight/this._rh);M=Math.max(M,this._minRowsPerPage);}this._rowsPerPage=M;this._totalPages=Math.ceil(this._rc/this._rowsPerPage);this._pageHeight=this._rh*this._rowsPerPage;this._pageStatus=new Array(this._totalPages);this._numPagesRendered=0;},onscroll:function J(){if(!this._renderingRows){this._startPageRenderThread();}},_startPageRenderThread:function F(){this.renderingRows=true;var L=this;this._renderTimer=self.setInterval(function(){var M=L.getPagesToRender();if(M.length>0){L.renderPages(M);}else{L.renderingRows=false;self.clearInterval(L._renderTimer);delete L._renderTimer;if(L.isRenderingComplete()){L.postRenderingCleanup();}L=null;}},this.renderPause);},getPagesToRender:function I(){var P=[],Z=this._pageHeight,b=null,W=this._pageStatus,Y=this;function R(f){var g=W[f];if(g&&g.filled){if(!g.height){if(!b){b=Y.itemsNode.tBodies;}g.height=b[f].offsetHeight;}return g.height;}else{return Z;}}var a=0,S=null,O=null,M=this.scrollboxTop;for(var V=0,X=this._totalPages;V<X;V++){a+=R(V);if(a>=M){S=V;break;}}if(S==null){S=O=X-1;}else{var L=this.scrollboxBottom;for(var T=S+1;T<X;T++){if(a>=L){O=T-1;break;}a+=R(T);}}if(O==null){O=X-1;}for(var N=this._numPagesRendered;N<S;++N){P.push({idx:N,fill:false});}for(var Q=S;Q<=O;++Q){var U=W[Q];if(!U||!U.filled){P.push({idx:Q,fill:true});}}return P;},renderPages:function D(M){for(var N=0,L=M.length;N<L;++N){this.renderPage(M[N].idx,M[N].fill);}},renderPage:function B(R,M){var V=this._pageStatus,P=(this._numPagesRendered>=R+1);if(P){if(!M||(V[R]&&V[R].filled)){return ;}}var U=this._rowsPerPage,L=R*U,N=Math.min(L+U,this._rc)-1;var T=this.tempTableCont;if(!T){T=this.tempTableCont=this.domNode.ownerDocument.createElement("div");}var Q=M?this._buildItemsMarkup(L,N,'<table><tbody idx="'+R+'">',"</tbody></table>",this._itemPrefix&&this._itemPrefix(),this._itemSuffix&&this._itemSuffix()).join(""):'<table><tbody idx="'+R+'"><tr><td style="height:'+this._pageHeight+'px">&nbsp;</td></tr></tbody></table>';T.innerHTML=Q;var O=T.firstChild.tBodies[0],S=this.itemsNode;if(!P){S.appendChild(O);}else{S.replaceChild(O,S.tBodies[R]);}this.postRenderPage(R,M);},postRenderPage:function G(M,O){if(M+1>this._numPagesRendered){this._numPagesRendered=M+1;}var L=this._pageStatus,N=L[M];if(!N){N=L[M]={};}if(O){N.filled=true;}if(M>0&&M==this._totalPages-1){this.itemsContainerNode.style[mstrmojo.css.MINHEIGHT]="";}},isRenderingComplete:function C(){if(this._numPagesRendered==this._totalPages){for(var L=this._pageStatus,M=this._totalPages-1;M>-1;M--){if(!L[M]||!L[M].filled){return false;}}return true;}return false;},postRenderingCleanup:function A(){if(this.connectedScrollbox){this.disconnectScrollbox(this);this.connectedScrollbox=false;}},unrender:function(L){this.postRenderingCleanup();this._super(L);},refresh:function H(){if(!this.hasRendered){return ;}var N=this.domNode,L=N&&N.parentNode;if(!this.parent&&L){var M=N.ownerDocument.createElement("span");L.insertBefore(M,N);}this.unrender();if(!this.parent&&L){this.domNode=M;}this.render();if(this.defn&&this.defn.set){this.defn.set("readyState",mstrmojo.EnumReadystate.IDLE);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase","mstrmojo._ListSelections");mstrmojo.ListBoxHoriz=mstrmojo.declare(mstrmojo.ListBoxBase,[mstrmojo._ListSelections],{scriptClass:"mstrmojo.ListBoxHoriz",cssClass:"mstrmojo-ListBoxHoriz",tableCssClass:"mstrmojo-ListBox-table",tableCssText:"",rowCssClass:"",rowCssText:"",cellCssClass:"",cellCssText:"",cellSpacing:0,cellPadding:0,_markupPrefix:function(){var A=this.itemRenderer;return(A&&A.markupPrefix)||('<table class="'+this.tableCssClass+'" style="'+this.tableCssText+'" cellspacing="'+this.cellSpacing+'" cellpadding="'+this.cellPadding+'"><tbody><tr class="'+this.rowCssClass+'" style="'+this.rowCssText+'">');},_markupSuffix:function(){var A=this.itemRenderer;return(A&&A.markupSuffix)||"</tr></tbody></table>";},_itemPrefix:function(){var A=this.itemRenderer;return(A&&A.itemPrefix)||('<td class="'+this.cellCssClass+'" style="'+this.cellCssText+'">');},_itemSuffix:function(){var A=this.itemRenderer;return(A&&A.itemSuffix)||"</td>";},_getItemNode:function(A){if(A<0){return null;}var B=this.itemsNode,C=B&&B.rows[0];return C&&C.cells[A].firstChild;}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBox","mstrmojo.ListBoxHoriz");var A={render:function(F,B,G){var H=(G.htmlName+B),D=G.selectedIndices[B]?"checked ":"",E=D?" selected":"",C=F.v!="u;"?" nAll":"";return'<div class="'+G.itemCssClass+E+C+'"><input type="'+G.inputType+'" name="'+G.htmlName+'" id="'+H+'" value="'+B+'" '+D+'/><label for="'+H+'" title="'+(F[G.itemTitleField]||"")+'" style="'+G.labelCssText+'">'+F[G.itemDisplayField||"n"]+"</label></div>";},select:function(D,E,B,F){var C=D&&D.firstChild;if(C&&!C.checked){C.checked=true;}mstrmojo.css.toggleClass(D,"selected",C.checked);},unselect:function(D,E,B,F){var C=D&&D.firstChild;if(C&&C.checked){C.checked=false;}mstrmojo.css.toggleClass(D,"selected",C.checked);},rowHeight:23};mstrmojo._RendersInputItems={inputType:null,htmlName:null,itemRenderer:A,init:function(B){this._super(B);if(!this.htmlName){this.htmlName=this.id;}},preclick:function(E){var D=E.hWin,G=E.e,F=mstrmojo.dom.eventTarget(D,G);if(F&&F.nodeName.match(/input/i)){var C=parseInt(F.value,10);if(this.inputType&&this.inputType.match(/radio/i)){this.singleSelect(C);}else{var B=(F.checked)?"add":"remove";this[B+"Select"](C);}}}};mstrmojo._InputList=mstrmojo.declare(mstrmojo.ListBox,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputList"});mstrmojo._InputListHoriz=mstrmojo.declare(mstrmojo.ListBoxHoriz,[mstrmojo._RendersInputItems],{scriptClass:"mstrmojo._InputListHoriz"});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable");var D=mstrmojo.dom;mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mousedown>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div style="position:absolute;width:100%;"><table cellspacing="0" cellpadding="0" class="mstrmojo-Editor-titlebar"><tr><td class="mstrmojo-Editor-titleCell"><div class="mstrmojo-Editor-title"></div></td><td><a href="#" target="_new" class="mstrmojo-Editor-help"><img class="mstrmojo-Editor-help" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1143,"help")+'"></img></a></td><td><div class="mstrmojo-Editor-close" title="'+mstrmojo.desc(2102,"Close")+'"></div></td></tr></table></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},titlebarNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[0].firstChild:null;},helpNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[1].firstChild:null;},closeNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[2].firstChild:null;},containerNode:function(){return this.domNode.firstChild.childNodes[2];},buttonNode:function(){return this.domNode.firstChild.childNodes[3];},curtainNode:function(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var G=this.zIndex;this.editorNode.style.zIndex=G;this.curtainNode.style.zIndex=G-1;},onvisibleChange:function(J){if(J){return ;}var G=this.visible,H="closeEffect",I="none";if(G){H="openEffect";I="block";}if(this[H]){this.playEffect(H);}else{this.editorNode.style.display=I;if(this.modal){this.curtainNode.style.display=I;}}},onhelpChange:function(){if(this.showTitle){if(this.help===null){this.helpNode.style.display="none";}this.helpNode.href=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm")+"#"+(this.help||"");}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";}},preBuildRendering:function C(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function E(){return this.titlebarNode;},getMovingTarget:function F(){return this.editorNode;},onPreClose:function(){return true;},premousedown:function B(G){var H=D.eventTarget(G.hWin,G.e);if(H===this.closeNode){if(this.onPreClose()){this.close();}}},_set_visible:function A(L,I){var H=(this[L]!==I);if(H){this[L]=I;var K=this._close_handler;if(I){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var J=this;K=this._close_handler=K||function(M){var N=D.eventTarget(self,M);if(N&&N.parentNode&&!D.contains(J.editorNode,N,true,document.body)){J.close();}};D.attachEvent(document.body,"mousedown",K);}}else{var G=this._curtain_handler;if(G){D.detachEvent(window,"resize",G);}if(K){D.detachEvent(document.body,"mousedown",K);}}}return H;}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(G){G=Math.round(G);return["rgb(",G,",",G,",",G,")"].join("");}}},preStart:function(){var H=this.target,G=this.widget;G.editorNode.style.display="block";if(!G.modal){return false;}H.style.display="block";mstrmojo.css.setOpacity(H,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var G=this.widget;G.editorNode.style.display="none";return !!G.modal;}};}());(function(){var BUILDER_METHOD={BUTTON:"newButton",PICKERBUTTON:"newPickerButton",LIST:"newList",SEPARATOR:"newSeparator",TEXT:"newCustom"};function cmdMethodName(cmdid){return(cmdid==="export")?cmdid+"Cmd":cmdid;}function bindEnabled(enabledFeatures){var arr=enabledFeatures.split(","),txt=[],i,len;for(i=0,len=arr.length;i<len;i++){var s=arr[i],neg=s.match(/^\!/);if(neg){s=s.replace("!","");}txt.push((neg?"!":"")+"this.target.model.features['"+s+"']");}return txt.join(" && ");}function bindItems(cmdid){return"var t = this.target, c = this.cmdid; if (t && c) {if (t.requiresMethod) t.requiresMethod(c); return this.target."+cmdid+"Options;}";}function bindSelectedItem(cmdid){return"var x = this.items; var t = this.target, c = this.cmdid; if (t && c){ if (t.requiresMethod) t.requiresMethod(c); return this.target."+cmdid+"Value;}";}function openLink(json){var link=json.link,h=link&&link.href,t=link&&link.target,xtraUrl=json["extra-url"];if(!link||!h){return ;}if(xtraUrl){h+="&"+xtraUrl;}if(link["use-window-open"]){t="_blank";}window.open(h,t?t:"_self");}mstrmojo.ToolBarBuilder={scriptClass:"mstrmojo.ToolBarBuilder",build:function build(nodes,model,config){var arr=[],i,len;for(i=0,len=(nodes&&nodes.length)||0;i<len;i++){var json=nodes[i],n=BUILDER_METHOD[(json&&json.type)||"SEPARATOR"],w=this[n]&&this[n](json,config);if(w){arr.push(w);}}return arr;},newButton:function nwBtn(json,config){if(json["on-click"]||json.link){return this.newCustom(json,config);}var c=cmdMethodName(json.cmdid);return new mstrmojo.Button({title:json.tooltip,iconClass:json.id,cssClass:"mstrmojo-InteractiveButton",target:config&&config.target,cmdid:c,onclick:function(e){var t=this.target,ci=this.cmdid;t.requiresMethod(ci);t[ci](e);},bindings:json.enabledFeatures?{enabled:bindEnabled(json.enabledFeatures)}:null});},newPickerButton:function nwPkrBtn(json,config){var c=cmdMethodName(json.cmdid);var bs;if(!json.items){bs={};bs.items=bindItems(c);}if(json.enabledFeatures){bs=bs||{};bs.enabled=bindEnabled(json.enabledFeatures);}function oc(){var t=this.target,ci=this.cmdid,its=this.items,idx=this.selectedIndex;t.requiresMethod(ci);t[ci](its[idx].dssid);}return new mstrmojo.PickerButton({title:json.title||"",iconClass:json.id,items:json.items,itemDisplayField:"n",itemIdField:"dssid",autoHide:true,size:1,selectedIndex:parseInt(json.selectedIndicesList,10)||0,target:config&&config.target,cmdid:c,onchange:oc,bindings:bs});},newList:function nwLst(json,config){var c=cmdMethodName(json.cmdid),bs={selectedItem:bindSelectedItem(c)};if(!json.items){bs.items=bindItems(c);}if(json.enabledFeatures){bs.enabledFeatures=bindEnabled(json.enabledFeatures);}return new mstrmojo.SelectBox({size:1,tooltip:json.title||"",iconClass:json.id,cmdid:c,target:config&&config.target,itemDisplayField:"n",itemIdField:"dssid",autoHide:true,onchange:function(){var t=this.target,ci=this.cmdid,itm=this.selectedItem;t.requiresMethod(ci);t[ci](itm&&itm.dssid);},items:json.items,bindings:bs});},newSeparator:function nwSep(json,config){return new mstrmojo.ToolSeparator(json);},newCustom:function newCstm(json,config){var b=new mstrmojo.Button({markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass}" title="{@title}" style="{@cssText}" mstrAttach:click,mousedown,mouseup><div id="{@iconClass}" class="mstrmojo-Button-text"></div></div>',title:json.tooltip,cssClass:"mstrmojo-InteractiveButton",onclick:function(){if(json.link){openLink(json);}if(json["on-click"]){eval(json["on-click"]);}},bindings:json.enabledFeatures?{enabled:bindEnabled(json.enabledFeatures)}:null}),v=json.value;b.text=v||"";b.cssText=v?"width:auto;margin-top:4px;":"";b.title=json.tooltip||"";b.iconClass=json.id||"";return b;}};}());(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.dom","mstrmojo.TreeNodeSelector");var A=mstrmojo.dom,B={0:"closed",1:"opened",2:"leaf"};mstrmojo.TreeNode=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.TreeNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:{stateNode:function(){return this.domNode.firstChild.firstChild;},textNode:function(){return this.domNode.firstChild.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);},onstateChange:function(){this.stateNode.className="mstrmojo-TreeNode-state "+(B[this.state]||"closed");this.itemsContainerNode.style.display=(this.state===1)?"block":"none";},onselectedChange:function(){var D=this.selected?"addClass":"removeClass";mstrmojo.css[D](this.domNode.firstChild,["selected"]);},ondropCuePosChange:mstrmojo.WidgetList.prototype.markupMethods.ondropCuePosChange},renderOnScroll:false,listSelector:mstrmojo.TreeNodeSelector,premousedown:function C(D){var E=this._super(D),F=A.eventTarget(D.hWin,D.e);if(F==this.stateNode){if(this.state!==2){this.set("state",this.state===1?0:1);}}return E;},preclick:function(D){mstrmojo.dom.stopPropogation(D.hWin,D.e);},prechange:function(D){var E=this._super(D);if(E!==false){var F=this.tree;if(F&&F.onnodechange){F.onnodechange(D);}}return E;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dnd");function W(a){var f=document.createElement("div"),b=f.style,Z=a.domNode;f.className="mstrmojo-DataGrid-avatar";b.height=Z.clientHeight+"px";Z.appendChild(f);a.avatar=f;return f;}function N(Z){var a=mstrmojo.dom.position(Z.domNode,true);return a.x;}function L(Z){return'<div class="mstrmojo-DataGrid-resizeHandle" unselectable="on" onselectstart="return false" rh="'+Z+'"></div>';}function X(b){var a=b.getAttribute("rh"),Z=a&&parseInt(a,10);return Z;}function U(a,g,Z){var f=Z.src,h=f&&f.data,b=h&&h.resizingIdx;if(!(b&&b>0)){return g&&g.apply(a,[Z]);}}mstrmojo.RESIZE_NEXT_COLUMN_MODE={getRange:function E(f,b){var Z=f.colSizeArray;var a=[-Z[b-1]+f.minColWidth,(b==Z.length-1)?Z[b]-f.resizeHandleWidth-f.minColWidth:Z[b]-f.minColWidth];return a;},updateSize:function D(f,b,a){var Z=f.colSizeArray;Z[b-1]=Z[b-1]+a;Z[b]=Z[b]-a;},updateColumnWidth:function Q(f,a,g,b){var Z=f.colSizeArray;a[b-1].style.width=Z[b-1]+"px";g[b-1].style.width=Z[b-1]+"px";a[b].style.width=Z[b]+"px";g[b].style.width=Z[b]+"px";}};mstrmojo.RESIZE_ALL_COLUMN_MODE={getRange:function E(h,g){var j=h.minColWidth+h.resizeHandleWidth,Z=h.colSizeArray,b=0;for(var f=g;f<Z.length;++f){b+=Z[f]-j;}var a=[-Z[g-1]+j,b];return a;},updateSize:function D(f,k,a){var j=f.minColWidth+f.resizeHandleWidth,g=f.colSizeArray;g[k-1]=g[k-1]+a;var Z=[];for(var b=0;b<g.length-k;++b){Z[b]=k+b;}Z.sort(function(i,n){return g[i]-g[n];});for(var b=0;b<Z.length;++b){var l=a/(Z.length-b);var h=g[Z[b]];a-=(h>=l+j)?l:h-j;g[Z[b]]=(h>=l+j)?h-l:j;}},updateColumnWidth:function Q(g,a,h,f){var Z=g.colSizeArray;for(var b=f-1;b<Z.length;++b){a[b].style.width=Z[b]+"px";h[b].style.width=Z[b]+"px";}}};mstrmojo._CanResizeColumn=mstrmojo.provide("mstrmojo._CanResizeColumn",{draggable:true,dropZone:false,avatar:null,colSizeArray:null,resizableColumns:true,resizeHandleWidth:10,minColWidth:5,resizeColumnBehavior:mstrmojo.RESIZE_NEXT_COLUMN_MODE,postBuildRendering:function S(){if(this._super){this._super();}if(this.avatar){this.domNode.appendChild(this.avatar);}this.colSizeArray=null;},getDragData:function C(Z){var b=Z.src,f=b.node,a=X(f);if(a&&a>0){return{resizingIdx:a,startingX:b.pos.x,baseX:N(this)};}else{if(this._super){return this.dropZone&&this._super(Z);}}return null;},allowDrop:function I(Z){var b=Z.src,f=b&&b.data,a=f&&f.resizingIdx;if(a&&a>0){return true;}else{return this.dropZone;}},ondragenter:function O(Z){U(this,this._super,Z);},ondragover:function P(Z){U(this,this._super,Z);},ondragleave:function A(Z){U(this,this._super,Z);},ondrop:function T(Z){U(this,this._super,Z);},ondragstart:function V(g){var p=g.src,h=p&&p.data,o=h&&h.resizingIdx;if(o&&o>0){var k=this.avatar||W(this);this.ownAvatar=true;k.style.left=(h.startingX-h.baseX)+"px";k.style.display="block";document.body.style.cursor="col-resize";var l=this.colSizeArray;if(!l){var b=this.headerContainerNode,j=b&&b.getElementsByTagName("table")[0],n=j.rows[0].cells;l=[];for(var Z=0,f=n.length;Z<f;Z++){l.push(n[Z].offsetWidth);}this.colSizeArray=l;this._firstTimeResize=true;}h.resizingRange=this.resizeColumnBehavior.getRange(this,o);return true;}else{if(this._super){return this._super(g);}}},ondragmove:function M(b){var l=b.src,f=l&&l.data,j=f&&f.resizingIdx;if(j&&j>0){var k=b.tgt,g=this.avatar,i=f.resizingRange,h=k.pos.x-f.startingX,Z=Math.min(i[1],Math.max(h,i[0]));f.deltaX=Z;if(g){g.style.left=(f.startingX-f.baseX+Z)+"px";}}else{if(this._super){this._super(b);}}},ondragend:function J(g){var p=g.src,h=p&&p.data,n=h&&h.resizingIdx;if(n&&n>0){var Z=this.titleColGroup,o=Z&&Z.childNodes,k=this.dataColGroup,l=k&&k.childNodes,f=o.length,j=this.colSizeArray,a=h.deltaX;this.resizeColumnBehavior.updateSize(this,n,a);if(this._firstTimeResize){for(var b=0;b<f;b++){o[b].style.width=j[b]+"px";l[b].style.width=j[b]+"px";}this._firstTimeResize=false;}else{this.resizeColumnBehavior.updateColumnWidth(this,o,l,n);}this.avatar.style.display="none";document.body.style.cursor="";this.ownAvatar=false;}else{if(this._super){this._super(g);}}}});mstrmojo.requiresCls("mstrmojo._CanResizeColumn","mstrmojo.ListMapperTable","mstrmojo.WidgetList");function H(b){var h=document.createElement("colgroup"),Z=b.length,a;for(var g=0;g<Z;g++){var f=document.createElement("col");a=b[g];if(a.colWidth){f.style.width=a.colWidth+"px";}f.className=a.colCss||("col"+g);h.appendChild(f);}return h;}function G(a){var b=a._headerWidgets_,Z=b&&b.length;if(Z>0){for(var f=0;f<Z;f++){b[f].destroy(true);}}}mstrmojo.DataGrid=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._CanResizeColumn],{scriptClass:"mstrmojo.DataGrid",banding:true,resizableColumns:true,columns:null,items:null,listMapper:mstrmojo.WidgetListMapperTable,markupString:'<div id="{@id}" class="mstrmojo-DataGrid {@cssClass}" style="{@cssText}" mstrAttach:mousedown,mouseup><div class="mstrmojo-DataGrid-headerContainer">{@headerHtml}</div><div class="mstrmojo-DataGrid-itemsScrollBox" style="position:relative;"><div class="mstrmojo-DataGrid-itemsContainer" style="{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode.lastChild;},itemsContainerNode:function(){return this.domNode.lastChild.firstChild;},dropCueNode:function(){return this.domNode.lastChild.lastChild;},headerContainerNode:function(){return this.domNode.firstChild;}},itemFunction:function(b,Z,a){var f=new mstrmojo.DataRow({columns:a.columns,data:b,idx:Z,dataGrid:a});return f;},preBuildRendering:function B(){var f=this.columns,Z=f.length,g=['<table class="mstrmojo-DataGrid-headerTable" cellspacing="0" cellpadding="0"><tr>'],b,a;this._headerWidgets=[];for(var h=0;h<Z;h++){b=f[h];a=b.headerWidget;g.push("<td>");if(h>0&&this.resizableColumns){g.push(L(h));}g.push('<div class="mstrmojo-DataGrid-headerText');g.push(b.headerCss?" "+b.headerCss:"");if(a){this._headerWidgets.push(mstrmojo.hash.copy(a));g.push('" w="1">');}else{g.push('">');}g.push(b.headerText?b.headerText:"&nbsp");g.push("</div>");g.push("</td>");}g.push("</tr></table>");this.headerHtml=g.join("");if(this._super){this._super();}},postBuildRendering:function S(){if(this._super){this._super();}var f=this._headerWidgets,j=f.length;if(j>0){this._headerWidgets_=[];var k=this.headerContainerNode.getElementsByTagName("div"),b=mstrmojo.array.filter(k,function(i){return i.getAttribute("w")=="1";}),o;for(var g=0;g<j;g++){f[g].placeholder=b[g].firstChild;f[g].dataGrid=this;o=mstrmojo.registry.ref(f[g]);o.render();this._headerWidgets_.push(o);}}var Z=H(this.columns),n=Z.cloneNode(true),h=this.headerContainerNode,l=h&&h.getElementsByTagName("table")[0],p=this.itemsContainerNode,a=p&&p.getElementsByTagName("table")[0];this.titleColGroup=Z;this.dataColGroup=n;if(l&&a){l.insertBefore(Z,l.firstChild);a.insertBefore(n,a.firstChild);}},refresh:function F(Z){G(this);if(this._super){this._super(Z);}},destroy:function Y(Z){G(this);this._super();},unrender:function R(g){var b=this._headerWidgets_,a=b&&b.length,Z;if(a>0){for(var f=0;f<a;f++){Z=b[f];if(Z&&Z.hasRendered){Z.unrender(true);}}}this._super(g);}});mstrmojo.requiresCls("mstrmojo.css","mstrmojo.hash","mstrmojo.Container");mstrmojo.DataRow=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DataRow",cssClass:"mstrmojo-DataRow",columns:null,markupMethods:{onselectedChange:function(){mstrmojo.css.toggleClass(this.domNode,"selected",this.selected);}},buildDom:function(){this.children=[];var h=document.createElement("tr"),n=this.data,q=this.idx,a=this.dataGrid,j=this.cssClass,s=this.columns,Z=this.children,b,o=-1,r,p;h.setAttribute("id",this.id);if(a.banding){j+=(q%2==1)?" odd":" even";}h.className=j+(mstrmojo.string.isEmpty(n[a.itemDisplayField||"n"])?" empty-row":"");for(var g=0,l=s.length;g<l;g++){r=s[g];p=(r.dataWidgetBuilder&&r.dataWidgetBuilder(n))||r.dataWidget;b=document.createElement("td");h.appendChild(b);if(p){b.setAttribute("w","1");o++;Z.push(mstrmojo.hash.copy(p,{slot:"slot"+o,data:n,idx:q,dataGrid:a}));}else{if(r.dataFunction){b.innerHTML=r.dataFunction(n,q,a);}else{var f=mstrmojo.string.htmlAngles(n[r.dataField||"n"])||"&nbsp",k=r.tooltip?' title="'+f+'"':"";b.innerHTML='<div class="mstrmojo-DataRow-text" '+k+">"+f+"</div>";}}}this.initChildren();return h;},buildRendering:function K(){this._super();var g=this.domNode.childNodes,Z=g.length,f={},b=0,h;for(var a=0;a<Z;a++){h=g[a];if(h.getAttribute("w")=="1"){f["slot"+b]=h;b++;}}this.addSlots(f);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.hash","mstrmojo.TreeNode");var I=mstrmojo.dom;mstrmojo.TreeBrowserNode=mstrmojo.declare(mstrmojo.TreeNode,null,{scriptClass:"mstrmojo.TreeBrowserNode",markupString:'<li id="{@id}" class="mstrmojo-TreeNode {@cssClass}" style="{@cssText}" mstrAttach:mousedown,click,dblclick><div class="mstrmojo-TreeNode-div"><img class="mstrmojo-TreeNode-state" src="../images/1ptrans.gif" /><img class="mstrmojo-TreeNode-checkBox" src="../images/1ptrans.gif" /><span class="mstrmojo-TreeNode-text {@textCssClass}"></span></div><ul class="mstrmojo-TreeNode-itemsContainer">{@itemsHtml}</ul></li>',markupSlots:mstrmojo.hash.copy({checkBoxNode:function(){return this.domNode.firstChild.childNodes[1];}},mstrmojo.TreeNode.prototype.markupSlots),blockBegin:1,allowUnlistedValues:false,contentRetrieved:false,onstateChange:function H(){if(!this.contentRetrieved&&(this.state==1)){this.set("items",[this.tree.loadingItemCreaterFunc()]);this.tree.getContent(this,this.blockBegin);}},toggleState:function F(){if(this.state!==2){this.set("state",this.state===1?0:1);}},preclick:function G(J){I.clearBrowserHighlights(J.hWin);return false;},predblclick:function D(J){I.clearBrowserHighlights(J.hWin);return false;},premousedown:function B(K){var P=mstrmojo.dom,M=mstrmojo.dom.eventTarget(K.hWin,K.e),J=this.tree,L=(this.state==2),O=P.contains(this.itemsContainerNode,P.eventTarget(K.hWin,K.e),true,this.domNode),N=(J.branchClickPolicy==mstrmojo.TreeBrowserEnum.BRANCH_POLICY_TOGGLE);if(this.isSpecialNode()||!(M==this.checkBoxNode||(M==this.textNode&&(L||!N)))){P.stopPropogation(K.hWin,K.e);}if((M==this.stateNode)||(M==this.textNode&&!L&&N)){if(!L){this.toggleState();}}else{if(M==this.checkBoxNode||O){if(this._super){this._super(K);}}else{this.handleNodeClicked();}}},isSpecialNode:function C(){var J=this.data&&this.data.st;return(J<0);},handleNodeClicked:function E(){var J=this.tree,K=this.parent,L=this.data;switch(L&&L.st){case"-4":mstrmojo.css.addClass(this.textNode,["loading"]);J.getContent(K,K.blockBegin-J.blockCount);break;case"-3":mstrmojo.css.addClass(this.textNode,["loading"]);J.getContent(K,K.blockBegin+J.blockCount);break;case"-1":case"-2":break;default:if(J.handleNodeClicked){J.handleNodeClicked(L);}}},init:function(J){this._super(J);this.set("state",this.tree.isBranch(this.data)?0:2);},postBuildRendering:function A(){if(this._super){this._super();}var J=function(K){I.preventDefault(window,K||window.event);return false;};I.attachEvent(this.domNode,"mousedown",J);if(this.isSpecialNode()||this.tree.noCheckBox){this.checkBoxNode.style.display="none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetList","mstrmojo.WidgetTreeBuilder","mstrmojo.TreeNodeSelector");var E=false;mstrmojo.WidgetTree=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetTree",listBuilder:mstrmojo.WidgetTreeBuilder,listSelector:mstrmojo.TreeNodeSelector,renderOnScroll:true,itemIdField:"dssid",itemDisplayField:"n",itemIconField:"tp",itemChildrenField:"items",itemFunction:function D(L,I,J){if(!E){mstrmojo.requiresCls("mstrmojo.TreeNode");E=true;}var H=J.tree||J,K=new mstrmojo.TreeNode({data:L,state:0,parent:J,tree:H,multiSelect:J.multiSelect,text:L[J.itemDisplayField],textCssClass:H.item2textCss(L),items:L[J.itemChildrenField],itemIdField:J.itemIdField,itemDisplayField:J.itemDisplayField,itemIconField:J.itemIconField,itemChildrenField:J.itemChildrenField,itemFunction:J.itemFunction,listSelector:J.listSelector});return K;},item2textCss:function B(H){return H[this.itemIconField];},selectionParentNode:null,init:function F(H){this._super(H);this.selectionParentNode=this;this.tree=this;},clearTreeSelect:function A(){(this.selectionParentNode||this).clearSelect();},prechange:function G(H){var I=this._super(H);this.onnodechange(H);return I;},onnodechange:function C(I){if(!I){return ;}var J=mstrmojo.hash,M=this.selectionParentNode,L=I.src;if(L===M){if(J.isEmpty(L.selectedIndices)){L=this;this.selectionParentNode=this;}this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:I.removed});}else{if(I.added&&I.added.length){var K=[];if(!J.isEmpty(M.selectedIndices)){K=mstrmojo.hash.keyarray(M.selectedIndices,true);M.clearSelect();}this.selectionParentNode=L;this.raiseEvent({name:"selectionChange",parentNode:L,parentNodeWas:M,added:I.added,removed:K});}else{}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.string","mstrmojo._HasPopup","mstrmojo.ListBase","mstrmojo.Editor","mstrmojo.SuggestionList");function D(Y){var X=this.list,V=X.selectedIndex,U=X.items.length,W=(Y)?U-1:0;if(V===W){X.clearSelect();return ;}if(V===null||V<0){V=(Y)?0:U-1;}else{V+=(Y)?1:-1;}X.singleSelect(V);}mstrmojo._HasSuggestion=mstrmojo.provide("mstrmojo._HasSuggestion",mstrmojo.hash.copy(mstrmojo._HasPopup,{blockBegin:1,blockCount:-1,suggestCount:15,autoSelect:true,itemField:"n",candidates:null,suggestionShown:false,suggestionItems:null,_last_hit:null,_request_pattern:null,browseItemVisible:false,folderLinksContextId:25,browsableTypes:"1,8",REQUEST_THRESHOLD:20,noCache:false,getCandidatesThroughTaskCall:mstrmojo.emptyFn,onSuggestionItemSelect:function J(U){this.hideSuggestion();},getSearchPattern:function T(){return"";},getSuggestionPos:function N(){return{left:"100px",top:"100px"};},getSuggestionTarget:function G(){return this;},showSuggestion:function B(V){var U=this.getSuggestion(V);if(!this.noCache&&U!==-1){this.updateSuggestion(U);}},hideSuggestion:function C(){this.suggestionShown=false;if(this.suggestionPopup.visible){this.suggestionPopup.close();}},getSelected:function M(){return(this.suggestionShown)?this._lastOpened.getSelected():null;},nextHighlight:function E(){if(this.suggestionShown){this._lastOpened.nextHighlight();}},preHighlight:function H(){if(this.suggestionShown){this._lastOpened.preHighlight();}},getSuggestion:function S(k){var f=this.candidates,a=f&&f.items,X=f&&f.isComplete,j=this._last_hit;if(!this.noCache&&(f||j)){var h=this.filterCandidates(a,k,this.REQUEST_THRESHOLD),b=h.length,g=this.suggestCount,U=false;if(!X&&b<g){var V=j&&j.pattern;if(j&&V&&(k.indexOf(V)>-1)){U=true;var n=this.filterCandidates(j.items,k,this.REQUEST_THRESHOLD),Y=n&&n.length,W=mstrmojo.array,l=this.itemField,Z;for(Z=0;Z<Y;Z++){if(W.find(h,l,n[Z][l])===-1){h.push(n[Z]);}}b=h.length;}}if(!X&&((k.length>2&&b<this.REQUEST_THRESHOLD)||(b<g))){this.requestCandidates(k);return -1;}return(b<g)?h:h.slice(0,g);}this.requestCandidates(k);return -1;},requestCandidates:function A(U){this._request_pattern=U;var X=this,V=this.getSuggestionTarget(),W={success:function(g){if(!g){return ;}var f=X.getSuggestionTarget();if(!f||(V!==f)){return ;}var l=f.getSearchPattern(),a=g.items;X._last_hit={items:a,pattern:U};X.sz=g.sz;if(!X.noCache&&a){var h=X.candidates&&X.candidates.items||[],j=[].concat(a);for(var Z=0,b=a.length;Z<b;Z++){var Y=j[Z];if(mstrmojo.array.indexOf(h,Y)>-1){mstrmojo.array.removeItem(a,Y);}}if(X.candidates){X.candidates.items=h.concat(a);}}if(l&&l.indexOf(U)>-1){var k=X.filterCandidates(a,l);X.updateSuggestion(k);}},failure:function(Y){mstrmojo.alert(Y.getResponseHeader("X-MSTR-TaskFailureMsg"));}};this.getCandidatesThroughTaskCall({pattern:U,blockBegin:this.blockBegin,blockCount:this.blockCount,isSuggest:true},W);},filterCandidates:function Q(X,W,U){U=U||this.suggestCount;W=mstrmojo.string.regEscape(W);var Y=this.itemField,V=mstrmojo.array.filter(X,function(Z){return(new RegExp("\\s"+W+"|^"+W,"i")).test(Z[Y]);},{max:U});return V;},getHighlightedText:function P(W,Z){if(!this.highlightPattern||mstrmojo.string.isEmpty(W)){return Z;}try{if(!this.nameWildcards||mstr.$A.find([2,32],parseInt(this.nameWildcards,10))>-1){Z=Z.replace(new RegExp("(^|\\s)("+W+")","gi"),"$1<b>$2</b>");}else{var Y=W.split(" "),V,U;for(V=0,U=Y.length;V<U;V++){if(Y[V]!==""){Z=Z.replace(new RegExp("("+Y[V]+")","gi"),"<b>$1</b>");}}}}catch(X){}return Z;},updateSuggestion:function O(X){var V=X&&X.length,U=this.browseItemVisible;if(V||U){if(U){X=X||[];X.push({n:"Browse...",t:-99,cssClass:((V)?"br":"bro")});}this.set("suggestionItems",X);if(this.suggestionShown){var W=this._lastOpened;if(W&&W.nudge){W.nudge();}}else{this.openPopup("suggestionPopup",this.getSuggestionPos());this.suggestionShown=true;}}else{this.hideSuggestion();}},ob:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(5298,"Select an Object"),help:"Select_Objects_dialog_box_.htm",onClose:function(){var U=this.opener;if(U&&U.onBrowserClose){U.onBrowserClose();}},onOpen:function(){var U=this.opener;if(U&&U.onBrowserOpen){U.onBrowserOpen();}},children:[{scriptClass:"mstrmojo.ObjectBrowser",alias:"browser",cssText:"width:200px;",fishEyeVisible:false,closeable:false,closeOnSelect:false}]},onBrowserClose:function L(){this.browserShown=false;},handleSuggestionItemSelect:function K(U){if(this.browseItemVisible&&U.t===-99){this.hideSuggestion();mstrmojo.requiresCls("mstrmojo.ObjectBrowser");var V=this.zIndex;this.openPopup("ob",{zIndex:(V&&(V+10))||110});this.ob.browser.browse({folderLinksContextId:this.folderLinksContextId,onSelectCB:[this,"onSuggestionItemSelect"],browsableTypes:this.browsableTypes});this.browserShown=true;}else{this.onSuggestionItemSelect(U);}},highlightPattern:true,suggestionPopup:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-ObjectInputBox-suggest",showTitle:false,modal:false,autoClose:true,nextHighlight:function(){D.call(this,true);},preHighlight:function(){D.call(this,false);},getSelected:function M(){var U=this.list;return U.items[U.selectedIndex];},onOpen:function I(){var U=this.opener;if(U&&U.autoSelect){this.list.singleSelect(0);}},onClose:function F(){this.list.clearSelect();if(this.opener){this.opener.suggestionShown=false;}}},suggestionListClass:"mstrmojo.SuggestionList",postApplyProperties:function R(){this.suggestionPopup.children=[{scriptClass:this.suggestionListClass,alias:"list",cssClass:"mstrmojo-suggest-list"}];}}));}());(function(){mstrmojo.requiresCls("mstrmojo._InputList","mstrmojo._InputListHoriz","mstrmojo.hash");mstrmojo.CheckList=mstrmojo.declare(mstrmojo._InputList,null,{scriptClass:"mstrmojo.CheckList",inputType:"checkbox",cssClass:"mstrmojo-CheckList",itemCssClass:"mstrmojo-CheckList-item"});mstrmojo.requiresCls("mstrmojo._InputListHoriz");mstrmojo.CheckListHoriz=mstrmojo.declare(mstrmojo._InputListHoriz,null,{scriptClass:"mstrmojo.CheckListHoriz",inputType:"checkbox",cssClass:"mstrmojo-CheckListHoriz",itemCssClass:"mstrmojo-CheckListHoriz-item"});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo._HasSuggestion");var F=-1,E=0,D=1;mstrmojo._ValidateSuggestions=mstrmojo.provide("mstrmojo._ValidateSuggestions",mstrmojo.hash.copy(mstrmojo._HasSuggestion,{_mixinName:"mstrmojo._ValidateSuggestions",itemValidationField:"did",verifyObject:function C(J,H){var M=this.candidates,L;if(M){var I=M.items,G=mstrmojo.array.find(I,this.itemValidationField,H.data[this.itemValidationField]);G=G>-1?G:mstrmojo.array.find(I,this.itemField,J);if(G>-1){H.updateData(I[G]);L=E;}else{if(M.isComplete){L=D;}}}if(L!==undefined){return L;}var K=this._vqueue=this._vqueue||[];K.push({pattern:J,id:H.data[this.itemIdField]});if(!this._vInProgress){this.verifyNextCandidate();}return F;},verifyNextCandidate:function B(){var G=this._vqueue;if(!G||G.length===0){this._vInProgress=false;return ;}this.verifyCandidate(G.shift());},verifyCandidate:function A(H){var G=this;this._vInProgress=true;this.getCandidatesThroughTaskCall({pattern:H.pattern,blockBegin:1,blockCount:this.suggestCount,isVerify:true},{success:function(N){var K=G.ctxtBuilder.itemWidgets,J=K&&K.length,O,M;for(M=0;M<J;M++){if(K[M].data[G.itemIdField]===H.id){O=K[M];break;}}if(!O){return ;}var L=N.items;if(L&&L.length===1){O.updateData(L[0]);}else{if(L&&L.length>1){var I=mstrmojo.array.find(L,"did",O.data.did);if(I>-1){O.updateData(L[I]);}else{O.set("state",D);}}else{O.set("state",D);}}},failure:function(I){mstrmojo.alert(I.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){G.verifyNextCandidate();}});},ENUM_STATES:{UNDETERMINED:F,VALID:E,INVALID:D}}));}());(function(){mstrmojo.requiresCls("mstrmojo.css","mstrmojo.array","mstrmojo.WidgetTree","mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowserSelector");mstrmojo.TreeBrowserEnum={};var I=mstrmojo.TreeBrowserEnum;I.BRANCH_POLICY_TOGGLE="toggle";I.BRANCH_POLICY_SELECT="select";mstrmojo.TreeBrowser=mstrmojo.declare(mstrmojo.WidgetTree,null,{scriptClass:"mstrmojo.TreeBrowser",cssClass:"mstrmojo-TreeBrowser",blockCount:30,noCheckBox:false,selectionAcrossBranch:true,branchClickPolicy:I.BRANCH_POLICY_TOGGLE,contentRetrieved:false,listSelector:mstrmojo.TreeBrowserSelector,handleNodeClicked:function(J){},getContentThroughTaskCall:function H(K,J){},isBranch:function F(J){},item2textCss:function C(J){return{"-1":"failed","-2":"loading","-3":"next","-4":"prev"}[J.st];},failItemCreaterFunc:function(){return{n:"Loading Failed!",did:"-1",tp:"-1",st:"-1"};},loadingItemCreaterFunc:function(){return{n:mstrmojo.desc(5674,"Loading..."),did:"-2",tp:"-2",st:"-2"};},nextItemCreaterFunc:function(){return{n:mstrmojo.desc(4507,"Next ##  item(s)...").replace("##",this.blockCount),did:"-3",tp:"-3",st:"-3"};},prevItemCreaterFunc:function(){return{n:mstrmojo.desc(4508,"Previous ##  item(s)...").replace("##",this.blockCount),did:"-4",tp:"-4",st:"-4"};},updateTreeContent:function(K,M){K.contentRetrieved=true;var L=M[K.itemChildrenField],J=K.tree||K,O=M.bc,N=M.sz,P=M.bb;if(O!==-1){if(P+O<N){L.push(J.nextItemCreaterFunc());}if((P-O)>-1){L.unshift(J.prevItemCreaterFunc());}}K.blockBegin=P;J.initializing=true;K.clearSelect(false);K.set("items",L);K.setSelectedItems(J.getTotalSelections(),true);J.initializing=false;},getContent:function(K,O){var L=(K===this),J=this,P=function(Q){if(L){mstrmojo.css.removeClass(J.domNode,["loading"]);}J.updateTreeContent(K,Q);},M=function(Q){K.set("items",[J.failItemCreaterFunc()]);},N={success:P,failure:M};if(L){mstrmojo.css.addClass(J.domNode,["loading"]);}this.getContentThroughTaskCall({isRoot:L,data:K.data,blockBegin:L?0:(O||K.blockBegin),blockCount:J.blockCount},N);},postBuildRendering:function A(){this._super();if(!this.contentRetrieved){this.getContent(this);}},itemFunction:function G(N,K,L){var J=L.tree||L,M=new mstrmojo.TreeBrowserNode({data:N,state:0,parent:L,tree:J,multiSelect:L.multiSelect,text:N[L.itemDisplayField],textCssClass:J.item2textCss(N),items:N[L.itemChildrenField],itemIdField:L.itemIdField,itemDisplayField:L.itemDisplayField,itemIconField:L.itemIconField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction,listSelector:L.listSelector});return M;},clearTreeSelect:function E(){if(!this.selectionAcrossBranch){this._super();}else{var L=this._selectionParentNode,J=L&&L.length,K;for(K=0;K<J;K++){L[K].clearSelect();}this._selectionParentNode=null;this._totalSelections=null;}},onnodechange:function D(T){if(this.initializing){return ;}if(!this.selectionAcrossBranch){this._super(T);}else{this._totalSelections=this._totalSelections||[];this._selectionParentNode=this._selectionParentNode||[];var R=this._totalSelections,J=this._selectionParentNode,S=T.added,P=T.removed,Q=[],L=[],K=T.src,N,M,O,U;J.push(K);for(N=0,O=P&&P.length;N<O;N++){L.push(K.items[P[N]]);}mstrmojo.array.removeItems(R,"did",L);for(M=0,U=S&&S.length;M<U;M++){Q.push(K.items[S[M]]);}this._totalSelections=R.concat(Q);}},getTotalSelections:function B(){if(this.selectionAcrossBranch){return this._totalSelections||[];}else{var J=this.selectionParentNode;return J&&J.getSelectedItems();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.TreeBrowserNode","mstrmojo.TreeBrowser","mstrmojo.ACL.UserDataService");mstrmojo.ACL.UserTreeBrowser=mstrmojo.declare(mstrmojo.TreeBrowser,null,{scriptClass:"mstrmojo.ACL.UserTreeBrowser",itemIdField:"did",branchClickPolicy:mstrmojo.TreeBrowserEnum.BRANCH_POLICY_SELECT,getContentThroughTaskCall:function C(F,D){var E=mstrmojo.ACL.UserDataService;if(F.isRoot){E.getTopLevelGroups(F,D);}else{E.getMembers(F,D);}},isBranch:function B(D){return D.isGroup;},item2textCss:function A(D){return(this._super&&this._super(D))||{8704:"u",8705:"ug"}[D.st];}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash","mstrmojo._ValidateSuggestions","mstrmojo.WidgetList","mstrmojo.Editor","mstrmojo.LegacySuggestionList");mstrmojo.Enum_OIB_States=mstrmojo.hash.copy(mstrmojo._ValidateSuggestions.ENUM_STATES,{EDITING:2,ADDING:3,EMPTY:4});mstrmojo.Enum_OIB_States_CSS=(function(){var AB=mstrmojo.Enum_OIB_States,AA={},AC;for(AC in AB){if(AB.hasOwnProperty(AC)){AA[String(AB[AC])]=AC;}}return AA;}());var P=mstrmojo.dom,R=mstrmojo.hash,X=mstrmojo.Enum_OIB_States,I=0,Z="_did_",x=mstrmojo.Enum_Keys,z=80,T=200;function O(){return I++;}function h(AA){return(AA&&AA.state===X.ADDING);}function p(AA){var AB={n:AA||"",state:X.EMPTY};AB[Z]=-2;return AB;}function N(AA){return(AA&&AA.state===X.EMPTY);}function t(AB){var AC=AB.items,AA=AC&&AC.length;if(!AA){return true;}return(AA===1&&h(AC[0]))||(AA===2&&N(AC[0])&&h(AC[1]));}function k(){var AB=this.ctxtBuilder.itemWidgets,AA=AB[AB.length-1];if(AA&&AA.isAdding){return AA;}return null;}function K(){var AA=this.editingIdx;if(AA!==null){return this.ctxtBuilder.itemWidgets[AA];}return k.call(this);}function D(){this.isActive=false;var AB=this.emptyText||"",AC=this.items;if(t(this)&&!N(AC[0])&&(AB.length>0)){this.add([p(AB)],0);var AD=this.ctxtBuilder.itemWidgets[0];AD.set("shouldEllipsize",true);AD.doEllipsize();}var AA=K.call(this);if(AA){if(h(AA)){AA.domNode.style.display="none";}this.scrollTo(this.items[0]);AA.blur();}P.detachEvent(document.body,"mousedown",this._mousedownHandler);}function M(){this.isActive=true;if(N(this.items[0])){this.remove(0);}var AA=K.call(this);if(AA){if(h(AA)&&!this.isFull){AA.domNode.style.display="block";}this.scrollTo(AA.data);AA.focus();}P.attachEvent(document.body,"mousedown",this._mousedownHandler);}mstrmojo.ObjectInputBox=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo._ValidateSuggestions],{scriptClass:"mstrmojo.ObjectInputBox",cssClass:"mstrmojo-ObjectInputBox",emptyText:"",items:null,itemField:"n",dynamicVerify:true,suggestCount:10,candidates:null,makeObservable:true,renderOnScroll:false,editingIdx:null,isActive:false,maxObjectCount:null,isFull:false,suggestionListClass:"mstrmojo.LegacySuggestionList",acptSugItemOnly:false,useKeyDelay:false,getSearchPattern:function(){var AA=K.call(this);if(AA){return AA.getSearchPattern();}return"";},getSuggestionTarget:function l(){return this.suggestTarget;},onsuggestTargetChanged:function o(AA){this._request_pattern=null;},getSuggestionPos:function a(){return this._pop_cfg;},onSuggestionItemSelect:function u(AA){this.suggestTarget.setItem(AA[this.itemField],AA,false);this.hideSuggestion();},hideEditButton:function(AA){return !!this.noEditButton;},_set_items:function j(AF,AC){AC=AC||[];var AE=this.maxObjectCount;this.set("isFull",(AE&&AC.length>=AE));if(AC.length===0){var AB=this.emptyText||"";if(AB.length>0){AC.push(p(AB));}}var AD={n:"",state:X.ADDING};AD[Z]=-1;AC.push(AD);var AA=AC[AC.length-1];if(AA&&h(AA)&&this.maxObjectCount&&(this.getSelectedObjects().length>=this.maxObjectCount)){this.set("isFull",true);}this.itemIdField=Z;return this._super(AF,AC);},add:function E(AB,AA){var AC=k.call(this);if(!this.maxObjectCount||this.getSelectedObjects().length<this.maxObjectCount){this._super(AB,AA);}if(!t(this)&&N(this.items[0])){this.remove(0);}if(AC){AC.adjustInputWidth();if(this.maxObjectCount&&(this.getSelectedObjects().length===this.maxObjectCount)){this.set("isFull",true);}}AC.domNode.style.display="none";},remove:function Y(AA){this._super(AA);var AB=k.call(this);if(AB){if(this.maxObjectCount&&(this.getSelectedObjects().length<this.maxObjectCount)){this.set("isFull",false);}AB.adjustInputWidth();}},preBuildRendering:function(){if(this.items==null||this.items.length==0){this.set("items",[]);}if(this._super){this._super();}},postBuildRendering:function W(){this._super();var AB=this,AA=k.call(AB);if(AA){AA.domNode.style.display="none";}this._clickHandler=function(){M.call(AB);};this._mousedownHandler=function(AC){if(!AB.isActive||AB.browserShown){return ;}var AD=P.eventTarget(self,AC);if(AD&&AD.parentNode&&!P.contains(AB.domNode,AD,false,document.body)&&!P.contains(AB.suggestionPopup.domNode,AD,false,document.body)){D.call(AB);}};P.attachEvent(this.domNode,"click",this._clickHandler);},nextId:O,item2textCss:function L(AA){return AA.cssClass||"";},itemFunction:function G(AF,AB,AD){AF[AD.itemIdField]=O();var AG=new mstrmojo.ObjectItem({parent:AD,itemField:AD.itemField,cssClass:AD.item2textCss(AF),data:AF});var AC=["ItemEditBegin","ItemEditEnd","ItemDeletePrev","ItemDelete","ItemAdd","SuggestionOn","SuggestionOff","ItemEditing"],AA=AC.length,AE;for(AE=0;AE<AA;AE++){AG.attachEventListener(AC[AE],AD.id,"_itemChangeHandler");}return AG;},getSelectedObjects:function i(){if(t(this)){return[];}var AA=this.items,AB=AA.length-1;if((AB>-1)&&h(AA[AB])){return AA.slice(0,AB);}return AA.concat();},isValid:function C(){var AB=this.ctxtBuilder.itemWidgets,AA=AB&&AB.length,AC;for(AC=0;AC<AA;AC++){if(!AB[AC].isValid()){return false;}}return true;},_itemChangeHandler:function(AD){var AF=AD.name,AG=AD.d,AB,AA=this.items.length,AC;switch(AF){case"ItemEditBegin":if(this.editingIdx!==null){AC=K.call(this);if(AC){AC.blur();}}AB=this.itemIndex(AG);this.editingIdx=AB;M.call(this);break;case"ItemEditEnd":this.editingIdx=null;if(AD.deactivate){D.call(this);}else{M.call(this);}AC=k.call(this);if(AC){AC.adjustInputWidth();}break;case"ItemDelete":if(this.editingIdx!==null){AC=K.call(this);if(AC){AC.blur();}this.editingIdx=null;}AB=this.itemIndex(AG);this.remove(AB);if(!AD.deactivate){this.editingIdx=null;M.call(this);}else{if(!this.isActive){D.call(this);}else{M.call(this);}}break;case"ItemDeletePrev":if(AA>1){this.remove(AA-2);}break;case"ItemAdd":var AE=R.copy(AD.d);this.add([AE],AA-1);if(AD.deactivate){D.call(this);}else{M.call(this);}break;case"SuggestionOn":this.set("suggestTarget",AD.target);this._pop_cfg={target:AD.target,left:AD.l,top:AD.t,zIndex:this.zIndex?this.zIndex:100};this.showSuggestion(AD.pattern);break;case"SuggestionOff":this.set("suggestTarget",null);this.hideSuggestion();break;}if(this.onitemchange&&(AF==="ItemEditEnd"||AF==="ItemAdd"||AF==="ItemDelete"||AF==="ItemDeletePrev"||AF==="ItemEditing")){this.onitemchange();}},unrender:function B(AB){var AA=this.suggestionPopup;if(AA.hasRendered){AA.unrender(false);}if(this._super){this._super(AB);}},destroy:function s(AB){var AA=this.suggestionPopup;if(AA&&AA.hasRendered){AA.destroy(false);}if(this._super){this._super(AB);}}});mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._HasEllipsis");var q="mstrmojo-ObjectItem-text";mstrmojo.ObjectItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasEllipsis],{scriptClass:"mstrmojo.ObjectItem",markupString:'<div id={@id} class="mstrmojo-ObjectItem" style="{@cssText}"><div class="mstrmojo-ObjectItem-displayNode"><span class="'+q+' {@cssClass}"></span><img class="mstrmojo-ObjectItem-edit" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1088,"Edit")+'" onclick="mstrmojo.all[\'{@id}\'].edit()"/><img class="mstrmojo-ObjectItem-del" src="../images/1ptrans.gif" title="'+mstrmojo.desc(629,"Delete")+'" onclick="mstrmojo.all[\'{@id}\'].del(arguments[0])"/></div><div class="mstrmojo-ObjectItem-editNode"><input type="text" class="mstrmojo-ObjectItem-input" mstrAttach:keyup,keydown/></div></div>',markupSlots:{displayNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.childNodes[1];},textNode:function(){return this.domNode.firstChild.firstChild;},editButtonNode:function(){return this.domNode.firstChild.childNodes[1];},delButonNode:function(){return this.domNode.firstChild.lastChild;},inputNode:function(){return this.domNode.childNodes[1].firstChild;}},markupMethods:{oncssClassChange:function(){this.textNode.className=q+" "+this.cssClass;},onstateChange:function(){var AD=this.state,AC=mstrmojo.Enum_OIB_States_CSS[AD],AB=this.domNode;if(AD===X.EMPTY){AB.innerHTML='<div class="mstrmojo-ObjectItem-emptyText">'+this.text+"</div>";}else{if(AD===X.EDITING){var AA=Math.round(this.displayNode.clientWidth);this.editNode.style.width=AA-4+"px";this.inputNode.style.width=AA-9+"px";}}AB.className="mstrmojo-ObjectItem "+AC;if(this.parent.hideEditButton(this.data)){this.editButtonNode.style.display="none";}},ontextChange:function(){this.inputNode.value=this.text;this.textNode.innerHTML=mstrmojo.string.encodeHtmlString(this.text);}},state:X.VALID,onstateChange:function f(AA){this.data.state=this.state;},ontextChange:function H(AA){this.data[this.itemField]=this.text;},updateData:function F(AA){R.copy(AA,this.data);this.set("state",X.VALID);this.set("text",this.data[this.itemField]);this.set("cssClass",this.parent.item2textCss(this.data));},init:function w(AB){this._super(AB);var AD=this.data,AA=AD.state,AC=this.parent;if(typeof AA==="undefined"){AA=AC.dynamicVerify?AC.verifyObject(AD[this.itemField],this):X.UNDETERMINED;AD.state=AA;}this.cssClass=AC.item2textCss(AD);this.text=AD[this.itemField];this.state=AA;this.isAdding=h(AD);this.useRichTooltip=true;},isValid:function C(){var AA=parseInt(this.state,10);return(AA!==X.INVALID&&AA!==X.UNDETERMINED);},adjustInputWidth:function A(){if(this.isAdding){var AD=this.inputNode.style;AD.width=z+"px";var AC=this.domNode.parentNode,AA=AC.parentNode.offsetWidth,AB=Math.max(AA-AC.offsetLeft-20,z);if(!isNaN(AB)){AD.width=AB+"px";}}},blur:function S(){this.hideSuggestion();if(!this.isActive){return ;}this.isActive=false;var AC=this.inputNode,AA=AC.value,AB=this.parent;window.setTimeout(function(){try{AC.blur();}catch(AD){}},0);if(!AA){return ;}if(AB.acptSugItemOnly){this.set("text",AA);this.set("text","");this._tWas_=null;return ;}this.setItem(AA,null,true);},focus:function r(){var AB=this.inputNode,AA=this.isActive;window.setTimeout(function(){try{AB.focus();if(AB.createTextRange&&!AA){var AD=AB.createTextRange(),AC=AB.value.length;AD.move("character",AC);AD.select();}}catch(AE){}},0);this.isActive=true;},prekeydown:function J(AA){var AC=this.inputNode.value,AB=parseInt(AA.e.keyCode||AA.e.charCode,10),AE=this.parent;if(!AC){return ;}if(AB===x.TAB||AB===x.ENTER){P.preventDefault(AA.hWin,AA.e);var AD=AE.getSelected();if(AD){AE.handleSuggestionItemSelect(AD);}else{this.hideSuggestion();if(!AE.acptSugItemOnly){this.setItem(AC,null,false);}else{this.set("text",AC);this.set("text","");}}}else{if(AB===x.DOWN_ARROW){if(!AE.noCache){this.showSuggestion(AC);}AE.nextHighlight();}else{if(AB===x.UP_ARROW){AE.preHighlight();}}}},prekeyup:function y(AA){var AC=this.inputNode.value,AB=parseInt(AA.e.keyCode||AA.e.charCode,10),AF=this.isAdding,AE=this.parent;if(!AC){if(AF){if(AB===x.BACKSPACE&&!this._tWas_){this.raiseEvent({name:"ItemDeletePrev"});P.preventDefault(AA.hWin,AA.e);}this._tWas_=null;}else{this.raiseEvent({name:"ItemDelete",d:this.data});}this.hideSuggestion();return ;}if(AB===x.ESCAPE){this.hideSuggestion();if(AE.acptSugItemOnly){this.set("text",AC);this.set("text","");this._tWas_=null;return ;}}else{if(this._tWas_!==AC){this.raiseEvent({name:"ItemEditing",d:this.data});if(AE.useKeyDelay){if(!this._timerID){var AD=this;this._timerID=window.setTimeout(function(){var AG=AD.inputNode.value;if(AG){AD.showSuggestion(AG);}AD._timerID=null;},T);}}else{this.showSuggestion(AC);}}}this._tWas_=AC;},setItem:function(AA,AC,AB){var AE=this.isAdding,AD=this.parent;AB=AB||false;this.set("text",AA);this._tWas_=null;if(AE){this.set("text","");if(!AC){AC={};AC[this.itemField]=AA;}else{AC.state=X.VALID;}this.raiseEvent({name:"ItemAdd",d:AC,deactivate:AB});}else{this.set("text",AA);if(AC){this.updateData(AC);}else{this.set("state",AD.verifyObject(AA,this));this.set("cssClass",AD.item2textCss(this.data));}this.isActive=false;this.raiseEvent({name:"ItemEditEnd",d:AC,deactivate:AB});}},getSearchPattern:function U(){return this.inputNode.value;},showSuggestion:function n(AA){var AB=mstrmojo.dom.position(this.domNode,true);this.raiseEvent({name:"SuggestionOn",l:Math.round(AB.x)+"px",t:Math.round(AB.y+AB.h)+"px",pattern:AA,target:this});},hideSuggestion:function g(){this.raiseEvent({name:"SuggestionOff"});},del:function Q(AA){AA=AA||self.event;P.stopPropogation(self,AA);this.raiseEvent({name:"ItemDelete",d:this.data,deactivate:true});if(this.useRichTooltip&&this.hideTooltip){this.hideTooltip();}},edit:function V(){this.showSuggestion(this.text);this.set("state",X.EDITING);this.raiseEvent({name:"ItemEditBegin",d:this.data});},doEllipsize:function b(){if(!this.shouldEllipsize){return ;}var AB=this.maxItemWidth,AA;if(AB){this.domNode.style.maxWidth=AB;switch(parseInt(this.state,10)){case X.VALID:case X.UNDETERMINED:case X.INVALID:AA=this.textNode;break;case X.EMPTY:AA=this.domNode.firstChild;break;}if(AA){this.set("richTooltip",{content:this.text,contentNodeCssClass:"sp-tooltip",posType:mstrmojo.tooltip.POS_TOPLEFT,left:0,top:30,refNode:this.domNode});mstrmojo.css.addClass(AA,"truncated");}}}});}());(function(){mstrmojo.requiresCls("mstrmojo.ObjectInputBox");mstrmojo.ACL.UserInputBox=mstrmojo.declare(mstrmojo.ObjectInputBox,null,{item2textCss:function A(C){return(this._super&&this._super(C))||{8704:"u",8705:"ug"}[C.st]||"";},getCandidatesThroughTaskCall:function B(D,C){mstrmojo.ACL.UserDataService.searchUserCandidates(D.pattern,!D.isVerify,D.blockCount,C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash","mstrmojo.HTMLButton","mstrmojo.HBox","mstrmojo.List","mstrmojo.Label","mstrmojo.ListMapperHoriz","mstrmojo.WidgetList","mstrmojo.WidgetListMapper","mstrmojo.TristateCheckBox","mstrmojo.Pulldown","mstrmojo.ACL.UserTreeBrowser","mstrmojo.DataGrid","mstrmojo.DropDownButton","mstrmojo.ListBox","mstrmojo.DivItemRenderer","mstrmojo.VBox","mstrmojo.Box","mstrmojo.ACL.UserInputBox","mstrmojo.Editor","mstrmojo.ACL.UserDataService","mstrmojo.StackContainer","mstrmojo.CheckList");var Y=mstrmojo.css,K=mstrmojo.array,L=[],H="sharingEditor",A=199,C="294DEDC011D2F1D56000D98E67019608",j="C82C6B1011D2894CC0009D9F29718E4F",E=[1,4,8,16,32,64,128],b=[mstrmojo.desc(1825,"Browse"),mstrmojo.desc(8078,"Read"),mstrmojo.desc(8079,"Write"),mstrmojo.desc(629,"Delete"),mstrmojo.desc(8080,"Control"),mstrmojo.desc(8081,"Use"),mstrmojo.desc(8082,"Execute")],h=["B","R","W","D","C","U","E"],T=false,O=true,M=257,i=1024,S=772,P=776,B=777;function f(k){return(k&&k.t===8);}function Z(k){return k&&k.st!=M&&k.st!=i&&k.st!=S&&k.st!=P&&k.st!=B;}function R(k){return{"253000":255000,"253":255,"221":223,"197":199,"69":71}[k]||k;}function J(k){return{"253000":255000,"253":255,"32221":223,"56197":199}[k]||k;}function W(r){var q=r.acls,k=r.inhs,p=[],t,n,s,l,o;if(f(r)){q=q.concat(mstrmojo.hash.valarray(k));}for(l=0,o=q.length;l<o;l++){t=q[l];s=t.rgt;if(s>1000){n=mstrmojo.hash.copy(t);n.den=true;n.rgt=Math.floor(s/1000);p.push(n);}if((s%1000)>0){n=mstrmojo.hash.copy(t);n.den=false;n.rgt=s%1000;p.push(n);}}r.acls=p;return r;}function Q(l){var k={isSerializable:function(p,o,n){switch(p){case"did":case"rgt":case"n":case"acls":case"t":case"st":case"inh":case"den":return true;}return false;},getArrItemName:function(q,o,p){if(q==="acls"){return"acl";}},convertBoolean:true};return mstrmojo.string.json2xml("oi",l,k);}function F(o,n){var l=o&&o.oi,k;if(l){l=W(l);k=Q(l);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(p){if(n){o.close();}},failure:function(p){mstrmojo.alert(p.getResponseHeader("X-MSTR-TaskFailureMsg"));if(n){o.close();}}},{taskId:"saveObjectACL",objectXML:k,sessionState:mstrApp.sessionState,objectType:l.t,objectID:l.did,propagateToChildren:o.childrenAccessPulldown.value});}}function a(t){var z=t.aclList,AA=t.objectInputer,u=t.rightPulldown,o=AA.getSelectedObjects(),q=o.length,w=[],n,y=u.value,l,x,k;if(!AA.isValid()){mstrmojo.alert(mstrmojo.desc(9048,"Some users/groups do not exist. Please remove them in order to proceed."),null,t.alertTitle);return false;}for(l=0;l<q;l++){n=o[l];if(n.did===C||n.did===j){var p=mstrmojo.all[H];if(y===p.currentPublicRight){if(O){Y.removeClass(p.userMessage.domNode,"hideMsg");}}}x=K.find(z.items,"did",n.did);if(x!==-1){k=z.items[x];if(t.uneditableRights[k.rgt]){continue;}}w.push(new mstrmojo.Obj({n:n.n,did:n.did,st:n.st,rgt:y,newItem:true}));}if(w.length>0){var s=K.findMulti(z.items,"did",w);if(s.count){var r=s.indices.concat().sort(K.numSorter).slice(0,s.count);for(l=r.length-1;l>-1;l--){z.remove(r[l]);}}z.add(w);t.set("hasChanged",true);}AA.set("items",[]);return true;}function g(k){var n=[],q=Math.floor(k/1000),o=k%1000,t=E,u=b,p=t.length,w,l;for(l=0;l<p;l++){n.push(u[l]);n.push(" ");if((o&t[l])>0){n.push(mstrmojo.desc(8083,"Granted"));}else{if((q&t[l])>0){n.push(mstrmojo.desc(8084,"Denied"));}else{n.push(mstrmojo.desc(959,"Default"));}}n.push(",");}w=n.join("");return w.substring(w,w.length-1);}function D(u){var p=[],t=u%1000,n=E,q=h,k=n.length,o,l;for(l=0;l<k;l++){if((t&n[l])>0){p.push(q[l]);p.push(",");}}o=p.join("");return o.substring(o,o.length-1);}function X(n,o){var p=n.items,l=K.find(p,n.itemIdField,o),r=n.customItem,k=p.length-2;if(l===-1){var q={n:D(o),rgt:o};if(r){p.splice(k,1);}k=p.length-1;p.splice(k,0,q);n.customItem=q;}else{if(r&&l!==k){p.splice(k,1);n.customItem=null;}}n.set("title",g(o));n.value=o;}function I(k){return{"776":[{n:mstrmojo.desc(8085,"Consume"),rgt:71},{n:mstrmojo.desc(531,"Add"),rgt:199},{n:mstrmojo.desc(8086,"Collaborate"),rgt:223},{n:mstrmojo.desc(8087,"Full Control"),rgt:255},{n:mstrmojo.desc(8088,"Denied All"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}]}[k]||[{n:mstrmojo.desc(8090,"View"),rgt:199},{n:mstrmojo.desc(767,"Modify"),rgt:223},{n:mstrmojo.desc(8087,"Full Control"),rgt:255},{n:mstrmojo.desc(8088,"Denied All"),rgt:255000},{n:mstrmojo.desc(8089,"Custom ..."),rgt:-1}];}function V(r,q){var p="";if(q){var l=this.widthInput.value,s=this.heightInput.value,k=' src="'+r,t="",n=this.checkBoxList.items,o;for(o=0;o<n.length;o++){if(!this.checkBoxList.selectedIndices.hasOwnProperty(o)){if(t==""){t="&hiddensections="+n[o].alias;}else{t+=","+n[o].alias;}}}p='<iframe width="'+l+'" ';p+='height="'+s+'" ';p+=k;p+=t;p+='"></iframe>';}else{p='<iframe width="640" height="480" src="';p+=r;p+='&hiddensections=header,path,dockTop,dockLeft,footer"></iframe>';}return p;}function G(l){var o=mstrmojo.string.parseUri(l).queryKey,p=l.indexOf("?"),k=p>0?l.substring(0,p):l;if(o.hasOwnProperty("iframe")){delete o.iframe;}if(o.hasOwnProperty("validateRandNum")){delete o.validateRandNum;}if(!o.hasOwnProperty("server")){o.server=encodeURIComponent(mstrApp.serverName);}if(!o.hasOwnProperty("Project")){o.Project=encodeURIComponent(mstrmojo.string.decodeHtmlString(mstrApp.projectName));}if(!o.hasOwnProperty("port")){o.port=mstrApp.serverPort;}if(T){o.connmode=8;o.ru=1;}o.share=1;k+="?";for(var n in o){k+=n+"="+o[n]+"&";}k=k.substring(0,k.length-1);return k;}function U(o){var k=new Date(),n=this.objectName+" "+k.toLocaleDateString()+" "+k.toLocaleTimeString(),l=this,p={success:function(s){var r=G(s.url);l.linkBox.set("value",r);l.url=r;l.htmlPanel.htmlBox.set("value",V(r));var q=l.tabDock.emailLink;q.set("url",window.escape(r));q.set("name",l.objectName);},failure:function(q){mstrmojo.alert(q.getResponseHeader("X-MSTR-TaskFailureMsg"));},complete:function(){l.hideWait();if(o){window.open("mailto:?body="+window.escape(l.url)+"&subject="+l.objectName,"mailtoIframe");}}};this.showWait();mstrmojo.xhr.request("POST",mstrConfig.taskURL,p,{taskId:"savePersonalView",messageID:this.mid,objectType:this.oi.t,subName:n,objectSubType:0,viewMode:this.viewMode||0,isPVPublic:true});}function N(o){var l=I(this.oi.st),k=l.length,n;for(n=0;n<k;n++){if(l[n].rgt===o){return l[n].n;}}return mstrmojo.desc(2056,"Custom");}mstrmojo.SharingEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.SharingEditor",cssClass:"mstrmojo-SharingEditor",hasChanged:false,help:"sharing_dialog_box.htm",zIndex:1000,defaultRight:223,showButtonText:true,uneditableRights:{},currentPublicRight:199,userSelectorTitle:mstrmojo.desc(8091,"User/User Group Browser"),onShowLink:function(l){var k={htmlCode:"showLink",showLink:"htmlCode"};this.tabDock[k[l]].set("selected",false);},showWait:mstrmojo.emptyFn,hideWait:mstrmojo.emptyFn,checkPublicAccess:function(){var s=this.oi.acls,n,w=K.find(s,"did",j),q=this.aclList.itemsContainerNode,r=this.publicAccessSection.publicLabel,p,u=false,k=K.find(s,"did",C),t;if(w!==-1&&T&&k!==-1){var l=s[w].rgt,o=s[k].rgt;if(l===o){u=true;t=o;}}if(w!==-1&&!T){u=true;t=s[w].rgt;}p=q.children[0].tBodies;if(T&&p[k]){Y.toggleClass(p[k].rows[0],"hide",u);}if(p[w]){Y.toggleClass(p[w].rows[0],"hide",u);}r.set("checked",u);if(t){this.set("currentPublicRight",t);}},oncurrentPublicRightChange:function(){var k=this.publicAccessSection.publicMouseOver;k.publicRight.set("value",this.currentPublicRight);k.publicRightLabel.set("text",N.call(this,this.currentPublicRight));},onOpen:function(){var l=this.oi.n,s=this.oi.acls;this.objectName=l;this.set("showACL",!!s);T=this.guestModeEnabled;if(this.href&&!this.isLinkDirty){var n=G(this.href),q=this.tabDock.emailLink;this.url=n;q.set("url",window.escape(n));q.set("name",l);this.htmlPanel.htmlBox.set("value",V(n));this.linkBox.set("value",n);}this.set("title",mstrmojo.desc(8093,"share").replace("##",mstrmojo.string.encodeHtmlString(l)));var p=this.tabDock;p.showLink.set("selected",false);p.htmlCode.set("selected",false);if(s){this.checkPublicAccess();var r=this.rightPulldown;r.set("items",this.getAvailableRightsForSelection());r.set("value",A);var t=this.objectInputer,o=this.userSelector,k=o&&o.userBrowser;t.zIndex=this.zIndex;if(k&&k.hasRendered){k.set("items",[]);k.getContent(k);}this.set("hasChanged",false);}},_set_hasChanged:function(o,k){var l=(k!==this.hasChanged);this.hasChanged=k;if(k===true){this.checkPublicAccess();}return l;},_set_oi:function(l,k){this.oi=this.preProcessACLs(k);return true;},postCreate:function(){this.oi=this.preProcessACLs(this.oi);},getAvailableRightsForSelection:function(){return I(this.oi.st);},preProcessACLs:function(t){if(t&&t.acls){var q=t.acls,p=q&&q.length,s=f(t),l={},u,k,n,o;if(s){n={};t.inhs=n;}for(o=0;o<p;o++){u=new mstrmojo.Obj(q[o]);if(s&&u.inh){n[u.n]=mstrmojo.hash.copy(u);continue;}k=l[u.n];if(!k){k=mstrmojo.hash.copy(u);k.rgt=0;delete k.den;l[u.n]=k;}k.rgt+=u.den?u.rgt*1000:u.rgt;}q=mstrmojo.hash.valarray(l);t.acls=q;}return t;},onClose:function(){var k=this.objectInputer;k.set("items",[]);this.aclList.clearSelect();},userSelector:{scriptClass:"mstrmojo.Editor",cssClass:"mstrmojo-UserEditor",help:"user_group_browser.htm",onClose:function(){this.userBrowser.clearTreeSelect();},children:[{scriptClass:"mstrmojo.ACL.UserTreeBrowser",alias:"userBrowser",updateTreeContent:function(l,o){l.contentRetrieved=true;var n=o[l.itemChildrenField],k=l.tree||l,q=o.bc,p=o.sz,r=o.bb;if(q!==-1){if(r+q<=p){n.push(k.nextItemCreaterFunc());}if((r-q)>-1){n.unshift(k.prevItemCreaterFunc());}}l.blockBegin=r;k.initializing=true;l.clearSelect(false);l.set("items",n);l.setSelectedItems(k.getTotalSelections(),true);k.initializing=false;},selectionAcrossBranch:true,multiSelect:true},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(l){var k=this.parent.parent,q=k.opener,p=q.objectInputer,o=k.userBrowser,n=o.getTotalSelections();if(n&&n.length>0){p.add(n,p.items.length-1);}k.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(k){this.parent.parent.close();},preBuildRendering:function(){if(!this.parent.parent.opener.showButtonText){this.set("text","");}}}]}],onOpen:function(){this.set("title",this.opener.userSelectorTitle);}},customACL:{scriptClass:"mstrmojo.Editor",title:mstrmojo.desc(8092,"Custom Permission Level"),cssClass:"mstrmojo-CustomACLEditor",help:"Custom_Permission_Level_dialog_box.htm",onOpen:function(){var s=this.rgt,t=Math.floor(s/1000),q=s%1000,n=this.children,o,p,l,k;for(l=0,k=n.length;l<k;l++){o=n[l];p=o.right;if(this.twoStates){o.set("grayed",false);o.set("checked",false);}else{o.set("grayed",true);o.set("checked",true);}if((t&p)>0){o.set("checked",false);o.set("grayed",false);}if((q&p)>0){o.set("checked",true);o.set("grayed",false);}}},getACLValue:function(){var p=0,q=0,n=this.children,o,l,k;for(l=0,k=n.length;l<k;l++){o=n[l];if(o.grayed||!o.right){continue;}if(o.checked){p+=o.right;}else{q+=o.right;}}return q*1000+p;},children:[{scriptClass:"mstrmojo.TristateCheckBox",alias:"browse",right:1,text:mstrmojo.desc(1825,"Browse")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"read",right:4,text:mstrmojo.desc(8078,"Read")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"write",right:8,text:mstrmojo.desc(8079,"Write")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"delete",right:16,text:mstrmojo.desc(629,"Delete")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"control",right:32,text:mstrmojo.desc(8080,"Control")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"use",right:64,text:mstrmojo.desc(8081,"Use")},{scriptClass:"mstrmojo.TristateCheckBox",alias:"execute",right:128,text:mstrmojo.desc(8082,"Execute")},{scriptClass:"mstrmojo.HBox",cssClass:"mstrmojo-Editor-buttonBox",slot:"buttonNode",children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),onclick:function(k){var l=this.parent.parent;if(l.onOK){l.onOK();}l.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Cancel",text:mstrmojo.desc(221,"Cancel"),onclick:function(k){var l=this.parent.parent;if(l.onCancel){l.onCancel();}l.close();}}]}]},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9811,"Sharing Options"),bindings:{visible:function(){return Z(this.parent.oi);}},cssClass:"SharingEditor-title"},{scriptClass:"mstrmojo.HBox",alias:"tabDock",cssClass:"sharingEditor-tabDock",bindings:{visible:function(){return Z(this.parent.oi);}},children:[{scriptClass:"mstrmojo.Widget",markupString:'<div id = "{@id}" class ="sharingEditor-emailLink style="{@cssText} mstrAttach:click>'+mstrmojo.desc(9772,"Email Link")+' <iframe name="mailtoIframe" style="display:none"></iframe> </div>',alias:"emailLink",onclick:function(){var k=this.parent.parent;if(!this.url||k.isLinkDirty){U.call(k,true);k.set("isLinkDirty",false);}else{window.open("mailto:?body="+window.escape(k.url)+"&subject="+k.objectName,"mailtoIframe");}}},{scriptClass:"mstrmojo.Label",alias:"showLink",text:mstrmojo.desc(9773,"Show Link"),cssClass:"SharingEditor-ShowLink",selected:false,onclick:function(k){var l=this.parent.parent;if(this.selected){this.set("selected",false);}else{if(!l.url||l.isLinkDirty){U.call(l);l.set("isLinkDirty",false);}l.onShowLink(this.alias);this.set("selected",true);}}},{scriptClass:"mstrmojo.Label",cssClass:"SharingEditor-ShowHtml",alias:"htmlCode",text:mstrmojo.desc(9774,"Show HTML"),selected:false,onclick:function(k){var l=this.parent.parent;if(this.selected){this.set("selected",false);}else{if(!l.url||l.isLinkDirty){U.call(l);l.set("isLinkDirty",false);}l.onShowLink(this.alias);this.set("selected",true);}}}]},{scriptClass:"mstrmojo.Box",alias:"htmlPanel",cssClass:"mstrmojo-SharingEditor-html-panel",children:[{scriptClass:"mstrmojo.TextBox",alias:"htmlBox",cssClass:"SharingEditor-Html"},{scriptClass:"mstrmojo.TextBoxWithLabel",alias:"widthInput",label:mstrmojo.desc(2985,"Width"),value:640,onvalueChange:function(k){var l=this.parent,n=mstrmojo.all[H];l.htmlBox.set("value",V.call(l,n.url,true));}},{scriptClass:"mstrmojo.TextBoxWithLabel",label:mstrmojo.desc(2983,"Height"),alias:"heightInput",value:480,onvalueChange:function(){var k=this.parent,l=mstrmojo.all[H];k.htmlBox.set("value",V.call(k,l.url,true));}},{scriptClass:"mstrmojo.CheckListHoriz",alias:"checkBoxList",items:[{n:mstrmojo.desc(8145,"Navigation Bar"),alias:"path"},{n:mstrmojo.desc(2509,"Toolbar"),alias:"dockTop"},{n:mstrmojo.desc(8146,"Tools Panel"),alias:"dockLeft"},{n:mstrmojo.desc(8147,"Footer"),alias:"footer"}],multiSelect:true,onselectionChange:function(k){var l=this.parent,n=mstrmojo.all[H];l.htmlBox.set("value",V.call(l,n.url,true));}}],bindings:{visible:"this.parent.tabDock.htmlCode.selected"}},{scriptClass:"mstrmojo.TextBox",alias:"linkBox",cssClass:"SharingEditor-Link",bindings:{visible:"this.parent.tabDock.showLink.selected"}},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9775,"[Who has access]"),cssClass:"SharingEditor-title",bindings:{visible:"this.parent.showACL"}},{scriptClass:"mstrmojo.HBox",alias:"publicAccessSection",cssClass:"sharingEditor-publicAccessSection",bindings:{visible:"this.parent.showACL"},children:[{scriptClass:"mstrmojo.CheckBox",alias:"publicLabel",cssClass:"SharingEditor-Public",bindings:{label:function(){if(this.parent.parent.guestModeEnabled){return mstrmojo.desc(9776,"Public (Login not required)");}return mstrmojo.desc(9777,"Everyone (Login not required)");}},oncheckedChange:function(){Y.toggleClass(this.domNode.children[1],"label-disabled",!this.checked);},getUserGroupsInfo:function(){if(T){this.getUserGroupFromTaskCall(C);}this.getUserGroupFromTaskCall(j);},getUserGroupFromTaskCall:function(r){var n=mstrmojo.all[H],o=n.aclList,p=mstrmojo.ACL.UserDataService,q=function(t){var s=new mstrmojo.Obj({n:t.n,did:t.did,st:t.st,rgt:A,newItem:true});L.push(s);},l=function(s){},k=function(){if(!T||(T&&L.length==2)){o.add(L);n.set("hasChanged",true);}};p.getMembers({blockBegin:0,blockCount:1,outputElements:1,data:{did:r}},{success:q,failure:l,complete:k});},onclick:function(){var l=mstrmojo.all[H];var n=l.aclList.items;var o=K.find(n,"did",j);if(o!==-1){n.remove(o);}var k=K.find(n,"did",C);if(T&&k!==-1){n.remove(k);}if(this.checked===true){if(L.length<1){this.getUserGroupsInfo();}else{mstrmojo.array.forEach(L,function(p){p.rgt=A;});n.add(L);l.set("hasChanged",true);}}else{l.set("currentPublicRight",A);l.set("hasChanged",true);}}},{scriptClass:"mstrmojo.MouseOverContainer",alias:"publicMouseOver",bindings:{visible:"this.parent.publicLabel.checked"},children:[{scriptClass:"mstrmojo.Label",alias:"publicRightLabel",cssClass:"sharingEditor-rightLabel",bindings:{text:function(){var k=this.parent.parent.parent;return N.call(k,k.currentPublicRight);}}},{scriptClass:"mstrmojo.Pulldown",cssClass:"sharingEditor-pulldown",itemIdField:"rgt",alias:"publicRight",visible:false,postCreate:function(){this.items=this.parent.parent.parent.getAvailableRightsForSelection();},bindings:{value:"this.parent.parent.parent.currentPublicRight"},selectionPolicy:"reselect",onvalueChange:function(){var k=this.parent;var l=k.parent.parent;k.publicRightLabel.set("text",N.call(l,this.value));},_set_value:function(r,l){var o=this.value,k=(o!==l);if(k){if(l===-1){var q=this.parent.parent.parent,p=this;q.openPopup("customACL",{zIndex:q.zIndex+10,rgt:o,twoStates:true,onOK:function(){p.set("value",this.getACLValue());},onCancel:function(){p.set("value",o);}});return false;}l=J(l);X(this,l);this.updatePublicRight(l);return true;}return true;},updatePublicRight:function(l){var n=this.parent.parent.parent;if(n.aclList){var o=n.aclList.items;var k=K.find(o,"did",C);var p=K.find(o,"did",j);if(T&&k!==-1){o[k].rgt=l;}if(p!==-1){o[p].rgt=l;}n.set("hasChanged",true);n.set("currentPublicRight",l);}}}]}]},{scriptClass:"mstrmojo.Label",alias:"userMessage",text:mstrmojo.desc(9771,"The permission you added is already granted"),cssClass:"sharingEditorUserMessage hideMsg",bindings:{visible:"this.parent.showACL"},onclick:function(){Y.addClass(this.domNode,"hideMsg");O=false;}},{scriptClass:"mstrmojo.DataGrid",alias:"aclList",renderOnScroll:false,makeObservable:true,itemDisplayField:"n",dropZone:true,bindings:{items:function(){return this.parent.oi.acls||[];},visible:"this.parent.showACL"},onremove:function(l){var q=this.parent.oi;if(!f(q)){return ;}var r=q.inhs,p=l.value,k=p&&p.length,s,o;for(o=0;o<k;o++){s=p[o].n;delete r[s];}},onadd:function(l){var q=this.parent.oi;if(!f(q)){return ;}var r=q.inhs,p=l.value,k=p&&p.length,s,o;for(o=0;o<k;o++){s=p[o].n;r[s]=mstrmojo.hash.copy(p[o]);r[s].inh=true;}},onACLChanged:function(l){var k=this.parent.oi;this.parent.set("hasChanged",true);if(!f(k)){return ;}k.inhs[l.n]=mstrmojo.hash.copy(l);k.inhs[l.n].inh=true;},columns:[{dataFunction:function(n,k,l){return'<div class="mstrmojo-ACLEditor-user '+(n.st===8705?"ug":"u")+'">'+mstrmojo.string.encodeHtmlString(n.n)+"</div>";}},{dataWidget:{scriptClass:"mstrmojo.MouseOverContainer",alias:"mouseOverContainer",children:[{scriptClass:"mstrmojo.Label",cssClass:"sharingEditor-rightLabel",bindings:{text:function(){return N.call(mstrmojo.all[H],this.parent.parent.data.rgt);}}},{scriptClass:"mstrmojo.HBox",cssClass:"sharingEditor-datagridContainer",visible:false,children:[{scriptClass:"mstrmojo.Pulldown",cssClass:"sharingEditor-datagridPulldown",itemIdField:"rgt",popupToBody:true,selectionPolicy:"reselect",popupZIndex:1001,postCreate:function(){this.markupMethods=mstrmojo.hash.copy({ondataChange:function(){var k=this.parent.parent.data;this.set("value",k[this.itemIdField]);},onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";if(!this.visible&&this.popupRef){this.popupRef.set("visible",false);}}},mstrmojo.hash.copy(this.markupMethods));this.items=this.parent.parent.dataGrid.parent.getAvailableRightsForSelection();},_set_value:function(r,l){var o=this.value,k=(o!==l);if(k){if(l===-1){var q=this.parent.parent.dataGrid.parent,p=this;q.openPopup("customACL",{zIndex:q.zIndex+10,rgt:o,twoStates:!!this.parent.parent.data.newItem,onOK:function(){p.set("value",this.getACLValue());},onCancel:function(){p.set("value",o);}});return false;}l=R(l);X(this,l);this.parent.parent.data.set(this.itemIdField,l);if(o!==null){this.parent.parent.dataGrid.onACLChanged(this.parent.parent.data);}return true;}return true;}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-ACLEditor-delete",text:"&nbsp",title:mstrmojo.desc(629,"Delete"),onclick:function(k){var l=this.parent.parent.dataGrid;l.remove(this.parent.parent.data);l.parent.set("hasChanged",true);}}]}]}}]},{scriptClass:"mstrmojo.Box",cssClass:"sharingEditor-ACLUserPanel",bindings:{visible:"this.parent.showACL"},children:[{scriptClass:"mstrmojo.HBox",cssClass:"sharingEditor-CPSection",children:[{scriptClass:"mstrmojo.ACL.UserInputBox",emptyText:mstrmojo.desc(9151,"Type users or groups here."),noCache:true,onRender:function(){var k=this.parent.parent.parent;if(k){k.objectInputer=this;}}},{scriptClass:"mstrmojo.Pulldown",itemIdField:"rgt",value:199,defaultSelection:0,selectionPolicy:"reselect",onRender:function(){var k=this.parent.parent.parent;if(k){k.rightPulldown=this;}},postCreate:function(){this.items=this.parent.parent.parent.getAvailableRightsForSelection();},_set_value:function(r,l){var o=this.value,k=(o!==l);if(k){if(l===-1){var q=this.parent.parent.parent,p=this;q.openPopup("customACL",{zIndex:q.zIndex+10,rgt:o,twoStates:true,onOK:function(){p.set("value",this.getACLValue());},onCancel:function(){p.set("value",o);}});return false;}l=J(l);X(this,l);return true;}return true;}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",onclick:function(k){var l=this.parent.parent.parent;a(l);},text:mstrmojo.desc(2156,"Add")},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-ACLEditor-chooseLabel",onclick:function(k){var l=this.parent.parent.parent;l.openPopup("userSelector",{zIndex:l.zIndex+10});},text:mstrmojo.desc(1825,"Browse")}]}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9892,"Children Access"),cssClass:"SharingEditor-title",bindings:{visible:function(){return this.parent.showACL&&f(this.parent.oi);}}},{scriptClass:"mstrmojo.Pulldown",alias:"childrenAccessPulldown",value:0,items:[{n:mstrmojo.desc(9890,"Preserve children's access control lists"),idx:0},{n:mstrmojo.desc(9891,"Overwrite children's access control lists"),idx:1}],itemIdField:"idx",bindings:{visible:function(){return this.parent.showACL&&f(this.parent.oi);}}},{scriptClass:"mstrmojo.HBox",cssClass:"Editor-buttonBox",slot:"buttonNode",bindings:{visible:"this.parent.showACL"},children:[{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-OK",text:mstrmojo.desc(1442,"OK"),bindings:{enabled:function(){var k=this.parent.parent.oi;return(k.acg&32)>0&&this.parent.parent.hasChanged;}},onclick:function(k){var l=this.parent.parent;if(a(l)){F(l,true);}},preBuildRendering:function(){if(!this.parent.parent.showButtonText){this.set("text","");}}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button",iconClass:"mstrmojo-Editor-button-Close",onclick:function(k){var l=this.parent.parent;l.close();l.set("hasChanged",false);},bindings:{iconClass:function(){var k=this.parent.parent;if(k.hasChanged){return"mstrmojo-Editor-button-Cancel";}return"mstrmojo-Editor-button-Close";},text:function(){var k=this.parent.parent;if(!k.showButtonText){return"";}if(k.hasChanged){return mstrmojo.desc(2140,"Cancel");}return mstrmojo.desc(2102,"Close");}}}]}]});mstrmojo.MouseOverContainer=mstrmojo.declare(mstrmojo.StackContainer,null,{scriptClass:"mstrmojo.MouseOverContainer",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}" mstrAttach:mouseover,mouseout></div>',doSwitch:true,markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},onmouseover:function(){if(this.doSwitch){this.set("selected",this.children[1]);}},onmouseout:function(){if(this.doSwitch){this.set("selected",this.children[0]);}},preBuildRendering:function(){this.set("selected",this.children[0]);}});}());(function(){mstrmojo.requiresCls("mstrmojo.form","mstrmojo.hash","mstrmojo.date","mstrmojo.dom","mstrmojo.NumberFormat","mstrmojo.Button");var O=mstrmojo.desc,K=mstrmojo.Button.newInteractiveButton,b=mstrmojo.date,z=function(){return mstrmojo.locales.datetime;};function W(AB,AC){mstrmojo.form.send(AC,null,"post");}function y(AD,AC){var AB=AD.model;W(AD,{evt:3124,src:mstrApp.name+"."+mstrApp.pageName+".3124",relativePageNumber:AC,messageID:AB.mid,rwb:AB.bs});}function g(AD,AE){var AB=AD.model;var AC={evt:2048001,messageID:AB.mid,rwb:AB.bs};if(AE<50||AE===2048){AC.visMode=0;AC.currentViewMedia=AE;}else{AC.visMode=AE;AC.currentViewMedia=1;}W(AD,AC);}function J(AC){var AB=mstrApp.prevViewMedia;if((!AB&&AB!==0)||AB===-1){y(AC,-1);}else{if(AB===0){AC.designViewMode();}else{g(AC,AB);}}}function AA(AF,AC,AE,AD){var AB=AF.model;W(AF,{evt:2048030,src:AB.bp+".2048030",rePrompt:AC,fresh:AE,regenerate:AD,rwb:AB.bs});}function Q(AJ,AC){var AF=AJ.model,AG=(AF&&AF.ztp)||0,AD=(AF&&AF.zf)||1,AB=AG+":"+AD,AE=AJ.zoomOptions,AH;if(AE){var AI=mstrmojo.array.find(AE,"dssid",AB);if(AI>-1){AH=AE[AI];}}if(!AH){AH={n:parseInt(AD*100,10)+"%",dssid:AB,f:AD,tp:AG};}if(AC===true){AJ.zoomValue=AH;}else{AJ.set("zoomValue",AH);}}function M(AH,AJ,AD,AI,AF,AG){var AE=AH.model,AB=AE&&AE.dty;if(!AB){AI(AH,AF);return ;}var AC="#666";mstrmojo.confirm(AD,[K(O(1442),function(){mstrmojo.requiresCls("mstrmojo.Serializer");AH.save(AG);},AC),K(O(2140),null,AC)],AJ);}function q(AC){var AB=AC.model;AB.showDialogBeforeSave=false;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){},failure:function(AD){mstrmojo.alert(AD.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"setPreference",prefs:"askBeforeSaveChanges\u001E2"});}var u=-1,Z=3,n=4,G=7;mstrmojo._DocOIVMMethods={staticViewMode:function B(){g(this,1);},interactiveViewMode:function H(){g(this,2);},editableMode:function l(){g(this,4);},flashViewMode:function f(){g(this,8);},IVEMode:function N(){g(this,2048);},IVEHelp:function N(){var AB=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/MicroStrategy_Web_Help.htm#";window.open(AB+"about_interactive_visual_data_exploration.htm","_blank");return true;},remainExpressViewMode:function L(){},designViewMode:function r(){W(this,{evt:3104,rwDesignMode:1,messageID:this.model.mid,rwb:this.model.bs});},convertToDoc:function k(){var AB=this;mstrmojo.confirm(O(8127),[K(O(1442),function(){AB.designViewMode();},null),K(O(2140),null,null)]);},saveAs:function(AB){this.save();},save:function U(AC){var AB=this.model;W(this,mstrmojo.hash.copy(AC,{evt:3102,applyChanges:false,executionMode:2,parentFolderID:AB.sfid||AB.pfid,saveFromDesignMode:false,rwb:AB.bs}));},dSave:function x(){var AH=this,AD=AH.model,AF=AD&&AD.isnew,AC=AD&&AD.isRWReadonly;maxLen=60;truncateName=AD.n;if(truncateName.length>maxLen){truncateName=truncateName.substr(0,maxLen-1)+"...";}if(AF||AC){this.save();}else{var AE=mstrApp.features["ask-before-save-changes"],AG="#666";if(AE){var AI="dialogBeforeSave",AB=function(){mstrmojo.all.dialogBeforeSave.destroy();};mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:AI,title:O(5728),cssText:"min-width:475px;max-width:600px;",btnAlignment:"right",buttons:[K(O(1442),function(){var AJ=mstrmojo.all[AI];if(AJ.t.ctrlChk.checked){AH.setDontAskAgain();mstrApp.features["ask-before-save-changes"]=false;}AH.directSave();AB();},AG),K(O(218),function(){var AJ=mstrmojo.all[AI];if(AJ.t.ctrlChk.checked){q(AH);}AH.save();AB();},AG),K(O(2140),AB,AG)],children:[{scriptClass:"mstrmojo.Table",alias:"t",rows:2,cols:1,children:[{scriptClass:"mstrmojo.Label",text:O(11165).replace(/##/,"<b>"+truncateName+"</b>"),visible:true,cssText:"height:60px;",slot:"0,0"},{scriptClass:"mstrmojo.CheckBox",label:O(211),alias:"ctrlChk",visible:true,checked:false,slot:"1,0"}]}]}).render();}else{AH.directSave();}}},setDontAskAgain:function F(){var AC=this,AB=AC.model;AB.showDialogBeforeSave=false;mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){},failure:function(AD){mstrmojo.alert(AD.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"setPreference",prefs:"askBeforeSaveChanges\u001E0"});},directSave:function P(){var AD=this,AB=AD.model;var AC=mstrmojo.string.decodeHtmlString(AB.n);mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(){mstrmojo.alert(O(3336).replace("##",AB.n));},failure:function(){mstrmojo.alert(O(4107));}},{taskId:"saveRW",msgID:AB.mid,folderID:AB.sfid||AB.pfid,objName:AC,objDesc:AB.desc,saveAsFlags:1,taskEnv:"xhr",taskContentType:"json"});},browseParent:function p(){var AB=this.model,AC={evt:3010};if(!AB.pfh){AC.evt=2001;AC.folderID=AB.pfid;if(AB.sysFolder){AC.systemFolder=AB.sysFolder;}}W(this,AC);},close:function h(){J(this);},openPage:function V(AB){y(this,AB);},saveToInbox:function i(){var AB=this;mstrApp.serverRequest({taskId:"addDocToHistoryList",rwb:AB.model.bs},{success:function(){var AC=AB.model.features;if(AC){if(AC.set){AC.set("enable-add-history-list",false);}else{AC["enable-add-history-list"]=false;}}mstrmojo.alert(O(8047));}});},ShowSharingEditor:function T(){var AF="sharingEditor",AG=mstrmojo.all[AF],AH=this,AD=AH.model,AJ=11,AI=AD.isBlankDocument,AB=function(AK){if(AG){AG.set("oi",AK);AG.objectName=AD.n;AG.href=null;AG.mid=AD.n;}else{AG=new mstrmojo.SharingEditor({guestModeEnabled:mstrApp.guestModeEnabled,mid:AD.mid,id:AF,oi:AK,href:null,isLinkDirty:true,viewMode:1,lastState:0});}AG.open();},AE={success:function(AK){AB(AK.objects[0]);},failure:function(AK){mstrmojo.alert(AK.getResponseHeader("X-MSTR-TaskFailureMsg"));}};if(AI){var AC="#666";mstrmojo.confirm(mstrmojo.desc(9932),[K(O(1442),function(){AH.save({saveAsOrigin:AJ});},AC),K(O(2140),null,AC)],mstrmojo.desc(8101));}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,AE,{taskId:"getObjectInfo",objectIDs:AD.oid,objectTypes:55,includeACL:!!mstrApp.features["web-use-sharing-editor"],sessionState:mstrApp.sessionState});}},createPersonalView:function I(){var AJ=this,AD=AJ.model,AG=AD&&AD.isnew;if(AG){var AC="#666";mstrmojo.confirm(mstrmojo.desc(2510),[K(O(1442),function(){mstrmojo.requiresCls("mstrmojo.Serializer");AJ.save({saveAsOrigin:10});},AC),K(O(2140),null,AC)],mstrmojo.desc(9173));}else{var AB=AD.n,AF="mstrPVD",AE={scriptClass:"mstrmojo.PersonalViewSaveAs",id:AF,objectType:55,objectSubType:14081},AI=mstrmojo.all[AF]||mstrmojo.insert(AE);if(AB){var AH=b.getDateJson(new Date());AB+=" "+b.formatDateInfo(AH,z().DATEOUTPUTFORMAT)+" "+b.formatTimeInfo(AH,z().TIMEOUTPUTFORMAT);AI.set("name",AB);}AI.msgID=this.model.mid;AI.open();}},reprompt:function S(){AA(this,true,false,false);},refresh:function R(){AA(this,false,false,false);},rerun:function o(){AA(this,false,true,false);},toggleAutoRefresh:function(AE){var AD=AE.src,AB=this.model.controller,AC=AB.isAutoRefreshEnabled();AB[(AC?"stop":"start")+"AutoRefresh"]();AD.set("iconClass",(AC?"tbStart":"tbStop")+"AutoRefresh");AD.domNode.setAttribute("title",AC?"*Resume Auto Refresh*":"*Pause Auto Refresh*");},docVisualizationModeAJAX:function j(){g(this,51);},docVisualizationModeFlash:function s(){g(this,50);},sendNow:function t(){M(this,mstrmojo.desc(2331,"Send Now"),mstrmojo.desc(2513,"You must save the report/document before you can send it."),W,{evt:3037,objectType:55,objectSubType:14081,messageID:this.model.mid},{saveAsOrigin:2});},scheduleHL:function Y(){M(this,O(5017,"Subscribe to History List"),O(2510,"You must save the report/document before you can subscribe to it."),W,{evt:3128,objectType:55,objectSubType:14081,messageID:this.model.mid},{saveAsOrigin:3});},zoomValue:null,zoom:function w(AL){var AH=mstrmojo.NumberFormat.getInstance(mstrConfig.decimalSep,mstrConfig.thousandsSep);var AK=(AL!==null)?String(AL).split(":"):[],AI=parseInt(AK[0],10),AN=AK[1],AD=AH.parse(AN);if(isNaN(AI)||(!AI&&isNaN(AD))){return ;}var AM=this.model;if(AI===1||AI===2){var AG=this.selected,AF=(AG&&AG.docLayout)||null,AO=AF&&(AF.containerNode||AF.domNode),AE=AO&&AO.ownerDocument.documentElement,AJ=(AM&&AM.zf)||1;var AB=function(AS){var AQ=AO&&AO["offset"+AS];if(!AQ){return 1;}var AR=Math.max(1,AE["client"+AS]);return Math.min(4,Math.max(0.1,Number(AJ*AR/AQ).toFixed(2)));};AD=AB("Width");if(AI===2){AD=Math.min(AD,AB("Height"));}AN=AH.format(AD);}var AC=AI+":"+AN;if(AC!==(this.zoomValue&&this.zoomValue.dssid)){var AP=this;AM.getDataService().setDocZoom({zoomType:AI,zoomFactor:AN},{success:function(AQ){AM.zf=AQ.zf;AM.ztp=AQ.ztp;AM.replaceLayout(AQ.currlaykey,AQ);AM.raiseEvent({name:"rebuildLayout"});Q(AP,false);AP=null;},failureName:"zoom.set"});}},exportCmd:function C(AI,AK){var AE=this.model,AO=(parseInt(AI,10)===u)?3130:3132,AM=AE.exopt,AN=AE.huc&&AI===G,AJ=AM.s&&(AI===n||AI===Z)&&!AK,AD=false,AH=false;if(AJ){if(!!(AE.defn&&AE.defn.layouts&&AE.defn.layouts.length>1)){AH=true;}else{var AG=this.selected,AP=AG&&AG.gb&&AG.children[1];AD=(!AP||AP.areUnitsSetToAll());if(AD){AJ=false;}}}var AF=function(){var AT={evt:AO,src:mstrApp.name+"."+AO};if(AO===3132){AT.executionMode=AI;if(AK!=null){AT.gridKey=AK;}}if(!AJ){AT.rwb=AE.bs;}else{var AS=mstrmojo.Serializer;var AQ=[[2048062,AE.bp+".2048062","mode",AM.m,"range",AM.r],[]];mstrmojo.hash.forEach(AT,function(AV,AU){if(AU==="executionMode"){AQ[1]=AQ[1].concat([AU,AV]);}else{AQ[1].push(AV);}});AT.evt=1024001;AT.src=AE.bp+".1024001";AT.events=AS.serializeValueGroup(AQ);AT["1024001"]=1;AT.messageId=AE.mid;}AT.name=Date.parse(new Date());var AR=function(){mstrmojo.form.send(AT,null,null,(AM.n)?"_blank":"mstrExportWindow");};if(!mstrmojo.dom.isIE||AI!==G){AR();}else{mstrmojo.alert(AM.ds[5873],AR);}};var AC=AM.ds,AB="#666",AL;if(AJ||AN){AL=function(){var AR="mojoExOpx9",AQ=function(){mstrmojo.all.mojoExOpx9.destroy();};mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:AR,title:AC[971],cssText:"min-width:225px;max-width:325px;",btnAlignment:"right",buttons:[K(AC[1442],function(){mstrmojo.requiresCls("mstrmojo.Serializer");var AS=mstrmojo.all[AR];if(AH){AM.r=AS.ctrlLyt.selected;}if(!AD){AM.m=(AS.ctrlChk.checked)?0:1;}AQ();AF();},AB),K(AC[2140],AQ,AB)],children:[{scriptClass:"mstrmojo.Label",text:AC[7482],visible:AN},{scriptClass:"mstrmojo.DropDownList",title:AC[246],cssClass:"field",cssDisplay:"block",alias:"ctrlLyt",visible:!!AH,idx:AM.r,options:[{n:AC[5137],v:0},{n:AC[5138],v:1}]},{scriptClass:"mstrmojo.CheckBox",label:AC[5165],cssClass:"field",cssDisplay:"block",alias:"ctrlChk",visible:!!!AD&&AJ,checked:(AM.m===0)}]}).render();};}if(AI===n&&AC["3809"]!==undefined&&!AK){mstrmojo.confirm(AC["3809"],[K(AC[1442],AL||AF,AB),K(AC[2140],null,AB)]);}else{if(AL){AL();}else{AF();}}},printPDF:function X(){this.exportCmd(Z);},openHome:function D(AB){W(AB,{evt:3010,src:mstrApp.name});},updateZoom:function A(){Q(this,false);},__onmixin__:function E(){Q(this,true);},resetSelections:function a(){var AC=this,AB=AC.model;AB.getDataService().resetSelections(null,false,{success:function(AG){if(AG.disablePU){AB.loadLayout(AG);return ;}if(AG.pukeys){var AI=AB.partialUpdate(AG.data,AB.getUnitDefinitions(AG.pukeys)),AE=AB.getLayoutDataCache(AB.getCurrentLayoutKey());mstrmojo.hash.forEach(AI.upd,function(AN,AP){var AM=mstrmojo.all[AP];if(AM&&AM.defn&&AM.defn.t==mstrmojo.EnumRWUnitType.PANELSTACK){var AL=AE&&AE[AP]&&AE[AP].data,AO=AL&&AL.selKey;if(AO&&AM.selectedKey!=AO){AM.defn.set("selKey",AO);}AM.setDirtyChildren();}});}var AJ=AC.getLayouts(),AD=(AJ&&AJ.length)||0,AK=AB.getCurrentLayoutKey();for(var AF=0;AF<AD;AF++){var AH=AJ[AF];if(AH.defn&&AH.defn.loaded&&AK!=AH.k){AH.defn.loaded=false;}}}});}};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo._DocOIVMMethods");var regExH=/"height", "[0-9.]+"/g,regExW=/"width", "[0-9.]+"/g;mstrmojo.OVIShell=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.OVIShell",markupString:'<div id={@id} class="mstrmojo-VIShell" title="{@tooltip}" style="height:100%;{@domNodeCssText}">{@htmlText}</div>',methods:{"*":"mstrmojo._DocOIVMMethods"},preBuildRendering:function(){if(this._super){this._super();}if(this.jsText){this.jsText=this.jsText.replace(regExH,'"height", "100%"').replace(regExW,'"width", "100%');}},postBuildRendering:function pstBldRnd(){if(this._super){this._super();}eval(this.jsText);}});}());(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.ToolBar","mstrmojo.OIVMPage","mstrmojo.ToolBarBuilder","mstrmojo.TabContainer","mstrmojo.ToolBarModel","mstrmojo.OVIShell");mstrmojo.OVIApp=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.OVIApp",serverProxy:null,init:function B(D){this._super(D);if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}},start:function C(){var F=new mstrmojo.ToolBar({slot:"toolbar",cssClass:"mstrmojo-oivmSprite grouped",builder:mstrmojo.ToolBarBuilder});var H=new mstrmojo.OVIShell(mstrmojo.hash.copy(mstrApp.docModelData.vi,{slot:"stack"}));var E=new mstrmojo.OIVMPage({placeholder:this.placeholder,error:this.error,children:[F,new mstrmojo.TabContainer({slot:"layout",layoutConfig:{h:{top:"auto",stack:"100%"},w:{top:"100%",stack:"100%"}},children:[H]})]});if(this.hasHiddenSections){E.layoutConfig.h.toolbar="0px";}E.render();var G=this.docModelData;if(G&&G.mstrerr){mstrmojo.err(G);}else{if(!this.error){F.model=new mstrmojo.ToolBarModel(this.tbModelData);F.target=H;var D=H.model=new mstrmojo.Model(G);mstrApp.docModel=D;mstrApp.onSessionExpired=function(){var J=mstrApp,I=J.docModel;mstrmojo.requiresCls("mstrmojo.form");mstrmojo.form.send({evt:5005,src:J.name+"."+J.pageName+".5005",rwb:I.bs});};mstrmojo.hash.copy(F.model.features,F.target.model.features);mstrmojo.locales.load(function(){F.buildChildren();});}}},serverRequest:function A(I,K,D){try{K=K||{};D=D||{};var G=D.src||(arguments.calle&&arguments.calle.caller.name),F=!D.silent&&D.fnWait,J=!D.silent&&D.fnHideWait,H=this;K=mstrmojo.func.wrapMethods(K,{submission:function(){if(F){F();}},failure:function(L){if(!D.silent){L.method=G;mstrmojo.err(L);}},complete:function(){if(J){J();}}});window.setTimeout(function(){H.serverProxy.request(K,I,!!D.override,D);},0);}catch(E){mstrmojo.err(E);}}});window.$MAPF=function(){return false;};}());