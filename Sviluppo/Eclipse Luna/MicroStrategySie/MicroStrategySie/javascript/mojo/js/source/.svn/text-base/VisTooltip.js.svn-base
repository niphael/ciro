(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Widget");var $CSS=mstrmojo.css;mstrmojo.VisTooltip=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.VisTooltip",cssClass:"vis-tooltip",markupString:'<div class="{@cssClass}"><div class="vis-tooltip-container"><table class="vis-tooltip-table"></table></div></div>',markupSlots:{domContainer:function(){return this.domNode.firstChild;},domTable:function(){return this.domNode.firstChild.firstChild;}},toggle:function toggle(show){if(show){this.domNode.style.display="block";}else{this.domNode.style.display="none";}},displayInfo:function displayInfo(infoArr,pos){var i,n,item,tbody,tr,td0,td1,td2,doc=document,table=this.domTable;table.innerHTML="";n=infoArr.length;for(i=0;i<n;i++){item=infoArr[i];tbody=doc.createElement("tbody");tr=doc.createElement("tr");td0=doc.createElement("td");td1=doc.createElement("td");td2=doc.createElement("td");td0.setAttribute("class","vis-tooltip-name");td1.setAttribute("class","vis-tooltip-space");td2.setAttribute("class","vis-tooltip-value");if(item===null){tr.setAttribute("class","vis-tooltip-tr separator");}else{tr.setAttribute("class","vis-tooltip-tr");td0.innerHTML=item.n+":";td2.innerHTML=item.v;}tr.appendChild(td0);tr.appendChild(td1);tr.appendChild(td2);tbody.appendChild(tr);this.domTable.appendChild(tbody);}if(pos){var loc=mstrmojo.dom.position(doc.body),w=this.domNode.offsetWidth,h=this.domNode.offsetHeight,dx=pos.x+w-loc.x-loc.w,dy=pos.y+h-loc.y-loc.h;if(dx>0){pos.x-=dx;}if(dy>0){pos.y-=dy;}this.domNode.style.left=pos.x+"px";this.domNode.style.top=pos.y+"px";}},doLayout:function doLayout(tableMaxWidth){var table=this.domTable,ttpStyle=$CSS.getComputedStyle(this.domNode),tds=table.firstChild.firstChild.childNodes,valueTDs=table.getElementsByClassName("vis-tooltip-value"),i;var maxWidthForValue=tableMaxWidth-parseInt(ttpStyle.paddingLeft)-parseInt(ttpStyle.paddingRight);maxWidthForValue-=tds[0].offsetWidth;maxWidthForValue-=10;for(i=0;i<valueTDs.length;i++){valueTDs[i].style.maxWidth=maxWidthForValue+"px";}},posTo:function posTo(pos){this.domNode.style.left=pos.x+"px";this.domNode.style.top=pos.y+"px";}});}());