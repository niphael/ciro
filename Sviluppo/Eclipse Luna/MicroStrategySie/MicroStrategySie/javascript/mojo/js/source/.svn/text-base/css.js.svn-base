(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var $D=mstrmojo.dom,$S=mstrmojo.string;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:$D.isNSIE?"block":"table",DISPLAY_CELL:$D.isNSIE?"block":"table-cell",MINHEIGHT:$D.isIE6?"height":"minHeight",addClass:function addClass(el,s){if(!el){return ;}if(s.constructor!==Array){s=[s];}var cls=el.className||"",start=" "+cls+" ",bAdded=false;for(var i=0,len=s.length;i<len;i++){var c=s[i];if(!start.match(new RegExp("\\s"+c+"\\s"))){cls+=" "+c;bAdded=true;}}if(bAdded){el.className=$S.trim(cls);}},removeClass:function removeClass(el,s){if(!el){return ;}if(s.constructor!==Array){s=[s];}var cls=" "+(el.className||"")+" ";for(var i=0,len=s.length;i<len;i++){cls=cls.replace(new RegExp("\\s"+s[i]+"\\s","g")," ");}el.className=$S.trim(cls);},addWidgetCssClass:function addWidgetCssClass(widget,classes){var origClasses=widget.cssClass,existing=(origClasses&&origClasses.split(" "))||[];if(classes.constructor!==Array){classes=[classes];}widget.cssClass=existing.concat(classes).join(" ");},toggleClass:function toggleClass(el,s,b){if(b){this.addClass(el,s);}else{this.removeClass(el,s);}},applyShadow:function applyShadow(el,xOff,yOff,spread,color){var s=el.style;if($D.isDXIE){s.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+xOff+"px, OffY="+yOff+"px, Color='"+color+"')";}else{if($D.isFF||$D.isWK||$D.isIE10){s[$D.CSS3_BOXSHADOW]=xOff+"px "+yOff+"px "+spread+"px "+color;}}},removeShadow:function removeShadow(el){var s=el.style;if($D.isDXIE){}else{if($D.isFF||$D.isWK||$D.isIE10){s[$D.CSS3_BOXSHADOW]="";}}},setOpacity:function setOpacity(el,val){if($D.isDXIE&&!$D.isIE9){var filterText=el.currentStyle.filter;var filter=null;if(filterText.length>0){filter=el.filters["DXImageTransform.Microsoft.Alpha"];}if(filter){filter.opacity=val;filter.enabled=(val!=100);}else{if(val<100){var filterDefinition="progid:DXImageTransform.Microsoft.Alpha(Opacity="+val+")";el.style.filter=(filterText?filterText:"")+" "+filterDefinition;}}}else{el.style.opacity=val/100-($D.isIE9?0.00001:0);}},buildGradient:function buildGradient(t,sc,ec){if($D.supports($D.cssFeatures.GRADIENTS)){var rtn={};if($D.isDXIE){rtn.n="filter";rtn.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+t+",StartColorStr='"+sc+"',EndColorStr='"+ec+"')";}else{if($D.isFF){rtn.n="background-image";rtn.v="-moz-linear-gradient("+((t===0)?"top":"left")+","+sc+","+ec+")";}else{if($D.isWK){rtn.n="background";rtn.v="-webkit-gradient(linear,"+((t===0)?"left top, left bottom":"left top, right top")+",from("+sc+"),to("+ec+"))";}else{if($D.isIE10||$D.isIEW3C){rtn.n="background";rtn.v="linear-gradient("+((t===0)?"to bottom":"to right")+","+sc+","+ec+")";}}}}return rtn;}return null;},buildRoundCorners:function buildRoundCorners(r,t){if($D.supports($D.cssFeatures.ROUND_CORNERS)){var v=r+"px";var radiusValue=v+((t)?" "+v+" 0 0":"")+";";if($D.isFF){return"-moz-border-radius:"+radiusValue;}else{if($D.isWinPhone||$D.isIE10){return"border-radius:"+radiusValue;}else{if($D.isWK){if(!t){return"-webkit-border-radius:"+v+";";}else{var ds=["left","right"],css=[],x=-1;for(var i=0;i<2;i++){css[++x]="-webkit-border-top-"+ds[i]+"-radius:"+v;css[++x]="-webkit-border-bottom-"+ds[i]+"-radius:0";}return css.join(";");}}}}}return"";},getBorderWidthsOrPaddings:function getBorderWidthsOrPaddings(b,dpi){var o={t:0,r:0,b:0,l:0,h:0,w:0};if(!b){return o;}var a=b.split(" "),len=a.length;for(var i=0;i<len;i++){a[i]=Math.round(dpi*parseFloat(a[i],10)/72);}if(len<4){if(len===1){a[1]=a[2]=a[3]=a[0];}else{a[3]=a[1];if(len===2){a[2]=a[0];}}}o.t=a[0];o.r=a[1];o.b=a[2];o.l=a[3];o.h=o.t+o.b;o.w=o.l+o.r;return o;},getBorderWidths:function getBorderWidths(p,dpi){return this.getBorderWidthsOrPaddings(p,dpi);},getPaddings:function getPaddings(p,dpi){return this.getBorderWidthsOrPaddings(p,dpi);},parkAfterFade:function parkAfterFade(evt){var elStyle=evt.target.style;if(elStyle.opacity==0){elStyle.left="-10000px";window.setTimeout(function(){elStyle.opacity=0.99;},0);return true;}return false;},getStyleValue:function getStyleValue(el,prop){if(el.currentStyle){prop=prop=="float"?"styleFloat":prop;value=el.currentStyle[prop];}else{if(document.defaultView&&document.defaultView.getComputedStyle){prop=prop=="float"?"cssFloat":prop;var styles=document.defaultView.getComputedStyle(el,null);value=styles?styles[prop]:null;}}return value;},getComputedStyle:function(element,pseudoElement){var fn=(window.getComputedStyle)?function(element,pseudoElement){return window.getComputedStyle(element,pseudoElement||null);}:function(element){return element.currentStyle||{};};mstrmojo.css.getComputedStyle=fn;return fn(element,pseudoElement);}});})();