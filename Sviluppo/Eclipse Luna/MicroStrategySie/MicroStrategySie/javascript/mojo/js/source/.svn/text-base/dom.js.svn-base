(function(){var $MATH=Math;function _evt(hWin,e){return e||(hWin||window).event;}var isIE=!!document.all,ua=navigator.userAgent,isFF=!isIE&&!!ua.match(/Firefox/),bv=0,isAndroid=!!ua.match(/Android/),isIPad=!!ua.match(/iPad/),tch=!!document.createTouch||isAndroid,isPlayBook=!!ua.match(/PlayBook/),isWinPhone=!!ua.match(/Windows Phone/),isIE10=isIE&&!!ua.match(/MSIE 10/),isIEW3C=!isIE&&!!ua.match(/Trident.*rv/),isDXIE=isIE&&!isIE10,CSS3_PREFIX=isFF?"-moz-":isIE?"":"-webkit-",CSS3_TRANSFORM_PREFIX=isFF?"Moz":isIE10?"":isIE?"ms":"webkit",CSS3_T_INITIAL=(isIE10?"t":"T"),CSS3_TRANSITION=CSS3_TRANSFORM_PREFIX+CSS3_T_INITIAL+"ransition",CSS3_TRANSFORM=buildCSS3Transform(),CSS3_TRANSITION_PROPERTY=buildCSS3TransitionProperty(),CSS3_TRANSITION_DURATION=buildCSS3TransitionDuration(),CSS3_TRANSITION_END=buildCSS3TransitionEnd(),CSS3_BOXSHADOW=buildCSS3BoxShadow();function buildCSS3Transform(){return CSS3_TRANSFORM_PREFIX+CSS3_T_INITIAL+"ransform";}function buildCSS3TransitionProperty(){return CSS3_TRANSITION+"Property";}function buildCSS3TransitionDuration(){return CSS3_TRANSITION+"Duration";}function buildCSS3TransitionEnd(){return(isIE10||isFF)?"transitionend":"webkitTransitionEnd";}function buildCSS3BoxShadow(){return CSS3_TRANSFORM_PREFIX+"BoxShadow";}function getBrowserVersion(){if(!bv&&isFF){var nav=ua.match(/.*Firefox\/([\d|\.]*).*/);if(nav){bv=parseFloat(nav[1],10);}}return bv;}function _docScroll(){var x=0,y=0,w=window,d=document,b=d.body,de=d.documentElement;if(typeof w.pageYOffset=="number"){y=w.pageYOffset;x=w.pageXOffset;}else{if(b&&(b.scrollLeft||b.scrollTop)){y=b.scrollTop;x=b.scrollLeft;}else{if(de&&(de.scrollLeft||de.scrollTop)){y=de.scrollTop;x=de.scrollLeft;}}}return{x:x,y:y};}function setTranslateValue(num){num=num||0;num=String(num);return((num.indexOf("%",0))!=-1)?num:(num+"px");}function createTransformationString(x,y,z,use3d,translateString){if(!mstrmojo.dom.isWinPhone){use3d=(use3d||false||this.isHWAccelerated);}else{use3d=false;}var translateOpen=translateString+(use3d?"3d":"")+"(",translateClose=use3d?(","+z+")"):")";return translateOpen+x+","+y+translateClose;}var TOP=1,BOTTOM=2,CENTER=3,LEFT=4,RIGHT=5;function alignDOM(e,h,v){var es=e.style,eds=es.display,wdim=this.windowDim(),ds=_docScroll();es.display="block";var hpos=wdim.w-e.clientWidth,vpos=wdim.h-e.clientHeight,hm={4:0,5:hpos,3:hpos/2},vm={1:0,3:vpos/2,2:vpos};es.left=hm[h]+ds.x+"px";es.top=vm[v]+ds.y+"px";es.display=eds;}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:ua,isIE:isIE,isIE6:isIE&&!!ua.match(/MSIE 6/),isIE7:isIE&&!!ua.match(/MSIE 7/),isIE8:isIE&&!!ua.match(/MSIE 8/),isIE9:isIE&&!!ua.match(/MSIE 9/),isIE10:isIE10,isIEW3C:isIEW3C,isNSIE:isIE&&!isIE10,isDXIE:isDXIE,isFF:isFF,isWK:!!ua.match(/AppleWebKit/),isSafari:!!ua.match(/Safari/)&&!ua.match(/Chrome/),isHWAccelerated:!isAndroid,isAndroid:isAndroid,isIPad:isIPad,isPlayBook:isPlayBook,isWinPhone:isWinPhone,supportsTouches:tch,TOUCHSTART:tch?"touchstart":"mousedown",TOUCHMOVE:tch?"touchmove":"mousemove",TOUCHEND:tch?"touchend":"mouseup",TOUCHCANCEL:tch?"touchcancel":"",RESIZE:tch?"orientationchange":"resize",CSS3_PREFIX:CSS3_PREFIX,CSS3_BOXSHADOW:CSS3_BOXSHADOW,CSS3_TRANSFORM:CSS3_TRANSFORM,CSS3_TRANSITION:CSS3_TRANSITION,CSS3_TRANSITION_PROPERTY:CSS3_TRANSITION_PROPERTY,CSS3_TRANSITION_DURATION:CSS3_TRANSITION_DURATION,CSS3_TRANSITION_END:CSS3_TRANSITION_END,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},supports:function supports(f){var ffVer=this.isFF&&getBrowserVersion();switch(f){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||ffVer>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||ffVer>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);}return false;},replace:function dom_repl(target,replacement){if(!target||!replacement){return ;}var p=target.parentNode;if(p){p.replaceChild(replacement,target);}},attachEvent:function dom_attch(el,eventName,f,phase){if(el.addEventListener){return el.addEventListener(eventName,f,!!phase);}else{return el.attachEvent("on"+eventName,f);}},detachEvent:function dom_detach(el,eventName,f,phase){if(!el){return ;}if(el.removeEventListener){el.removeEventListener(eventName,f,!!phase);}else{el.detachEvent("on"+eventName,f);}},attachOneTimeEvent:function attachOneTimeEvent(el,eventName,f,phase){var fn=function(evt){f(evt);mstrmojo.dom.detachEvent(this,eventName,fn,phase);};this.attachEvent(el,eventName,fn,phase);el=null;return fn;},captureDomEvent:function captureDomEvent(id,type,hWin,e,config){var x=mstrmojo.all[id];if(x){x.captureDomEvent(type,hWin,e,config);}},translate:function translate(el,x,y,z,extra,useTranslate3d){extra=(extra&&" "+extra)||"";el.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(x,y,z,useTranslate3d)+extra;},createTranslateString:function createTranslateString(x,y,z,useTranslate3d){x=setTranslateValue(x);y=setTranslateValue(y);z=setTranslateValue(z);return createTransformationString(x,y,z,useTranslate3d,"translate");},createScaleString:function createScaleString(x,y,z,useScale3d){x=x||0;y=y||0;z=z||0;return createTransformationString(x,y,z,useScale3d,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function dom_attchbuf(el,eventName,f,bufferSize){var key=el.id+"-"+eventName,info=this._bufferConnects[key];if(!info){info=this._bufferConnects[key]={elId:el.id,eventName:eventName,timer:null,bufferSize:bufferSize,listeners:[],callback:function(e){mstrmojo.dom._callback(e,mstrmojo.global,key);return true;}};this.attachEvent(el,eventName,info.callback);}info.listeners.push(f);},_callback:function dom_callback(e,hWin,key){if(!e){e=hWin.event;}var info=this._bufferConnects[key],timer=info&&info.timer;if(info&&!timer){var ms=(info.bufferSize===null)?this._bufferSize:info.bufferSize;if(info.bufferSize){info.timer=hWin.setTimeout(function(){mstrmojo.dom.updateBuffers(key);},ms);}else{mstrmojo.dom.updateBuffers(key);}}},updateBuffers:function dom_updateBuffers(key){var info=this._bufferConnects[key],ls=info&&info.listeners;for(var i=0,len=ls&&ls.length||0;i<len;i++){ls[i]();}if(info&&info.timer){delete info.timer;}},detachBufferedEvent:function dom_dtchbuf(el,eventName,f){if(!el){return ;}var key=el.id+"-"+eventName,info=this._bufferConnects[key],ls=info&&info.listeners,len=(ls&&ls.length)||0;if(len){for(var i=len-1;i>-1;i--){if(ls[i]==f){ls.splice(i,1);}}if(!ls.length){this.detachEvent(el,eventName,info.callback);delete this._bufferConnects[key];if(info.timer){mstrmojo.global.clearTimeout(info.timer);}}}},eventTarget:function evtTgt(hWin,e){e=_evt(hWin,e);return e.target||e.srcElement;},ctrlKey:function ctrl(hWin,e){return _evt(hWin,e).ctrlKey;},shiftKey:function shift(hWin,e){return _evt(hWin,e).shiftKey;},getButton:function getButton(hWin,e){return((_evt(hWin,e)).button==2)?2:1;},getMousePosition:function getMousePosition(e,hWin){hWin=hWin||window;var x,y;if(mstrmojo.dom.isIE){e=e||hWin.event;var d=document,b=d.body,de=d.documentElement;x=e.clientX+b.scrollLeft+(de.scrollLeft||0);y=e.clientY+b.scrollTop+(de.scrollTop||0);}else{x=e.pageX;y=e.pageY;}return{x:x,y:y};},position:function(el,includeScroll){var p={x:0,y:0};if(el&&el.getBoundingClientRect){try{p=el.getBoundingClientRect();}catch(e){p={left:0,top:0,right:0,bottom:0,height:0,width:0};}p={x:p.left,y:p.top,w:p.right-p.left,h:p.bottom-p.top};if(this.isIE6||this.isIE7){var ownerDocument=el.ownerDocument;if(ownerDocument){var de=ownerDocument.documentElement,deo=de.getBoundingClientRect();p.x-=deo.left;p.y-=deo.top;}}}if(includeScroll){var ds=_docScroll();p.x+=ds.x;p.y+=ds.y;}return p;},delta:function delta(el,elLimit){elLimit=elLimit||document.body;var pe=this.position(el),pr=this.position(elLimit);return{x:Math.round(pe.x-pr.x),y:Math.round(pe.y-pr.y)};},windowDim:function _winDim(){var w=0,h=0,win=window,d=document,de=d.documentElement,db=d.body;if(typeof (win.innerWidth)=="number"){w=win.innerWidth;h=win.innerHeight;}else{if(de&&(de.clientWidth||de.clientHeight)){w=de.clientWidth;h=de.clientHeight;}else{if(db&&(db.clientWidth||db.clientHeight)){w=db.clientWidth;h=db.clientHeight;}}}return{w:w,h:h};},center:function center(e){alignDOM.call(this,e,CENTER,CENTER);},bottomCenter:function bottomCenter(e){alignDOM.call(this,e,CENTER,BOTTOM);},clearBrowserHighlights:function clrHiLits(hWin){hWin=hWin||self;if(isIE){var doc=hWin.document,sel=doc&&doc.selection,em=sel&&sel.empty;if(em){try{sel.empty();}catch(ex){}}}else{var gs=hWin.getSelection,s=gs&&hWin.getSelection();if(s&&!s.isCollapsed){if(s.empty){s.empty();}else{if(s.removeAllRanges){s.removeAllRanges();}}}}},findAncestorByAttr:function fndAncAttr(el,attr,inclusive,elLimit){var node=inclusive?el:el&&el.parentNode;while(node&&(node!=elLimit)){var v=node.getAttribute&&node.getAttribute(attr);if(v!=null){return{node:node,value:v};}node=node.parentNode;}return null;},findAncestorByName:function fndAncNm(el,nodeName,inclusive,elLimit){nodeName=nodeName&&nodeName.toLowerCase();var node=inclusive?el:el&&el.parentNode;while(node&&(node!=elLimit)){var n=node.nodeName;if(n&&(n.toLowerCase()==nodeName)){return node;}node=node.parentNode;}return null;},contains:function cntns(elP,elC,inclusive,elLimit){var node=elC;if(!inclusive){node=node.parentNode;}while(node){if(node==elP){return true;}if(node===elLimit){break;}node=node.parentNode;}return false;},preventDefault:function prvDft(hWin,e){if(!e){e=hWin.event;}if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropogation:function stpPrg(hWin,e){if(!e){e=hWin.event;}if(e.stopPropogation){e.stopPropogation();}else{e.cancelBubble=true;}},firstTouch:function fstTch(hWin,e){return e&&e.touches&&e.touches.length?e.touches[0]:(e||hWin.event);},firstChangedTouch:function fstChTch(hWin,e){return e&&e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:(e||hWin.event);},isLandscape:function isLandscape(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function(el){while(el){var id=el.mstrmojoId;if(id!=null){return mstrmojo.all[id];}el=el.parentNode;}return null;},setCaret:function(el,pos){if(el.setSelectionRange){el.focus();el.setSelectionRange(pos,pos);}else{if(el.createTextRange){var tr=el.createTextRange();tr.move("character",pos);tr.select();}}}});var G=mstrmojo.dom,w=window,d=document,de=d&&d.documentElement,b=d&&d.body;if(w.innerWidth){G.getHorizontalScroll=function(){return w.pageXOffset;};G.getVerticalScroll=function(){return w.pageYOffset;};}else{if(de&&de.clientWidth){G.getHorizontalScroll=function(){return de.scrollLeft;};G.getVerticalScroll=function(){return de.scrollTop;};}else{if(b.clientWidth){G.getHorizontalScroll=function(){return b.scrollLeft;};G.getVerticalScroll=function(){return b.scrollTop;};}}}})();