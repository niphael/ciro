(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.Button","mstrmojo.MenuButton","mstrmojo.Label","mstrmojo.form","mstrmojo.DI.DISharedViewer","mstrmojo.DI.DIConstants");mstrmojo.requiresDescs(2140,373,172,1059,8132,3345,1279,9115);var constants=mstrmojo.DI.DIConstants;mstrmojo.DI.DIFooter=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.DI.DIFooter",cssClass:"mstrmojo-di-footer",markupString:'<div id="{@id}" class="mstrmojo-di-footer {@cssClass}" ><div class="footer-buttons"></div><div class="footer-buttons"></div><div class="footer-buttons"></div><div class="footer-cancel-button"></div><div class="footer-preview-info"></div></div>',markupSlots:{containerNode:function(){return this.domNode;},navigateNode:function(){return this.domNode.children[0];},nextNode:function(){return this.domNode.children[1];},backNode:function(){return this.domNode.children[2];},cancelNode:function(){return this.domNode.children[3];},infoNode:function(){return this.domNode.children[4];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},model:null,currentPage:function(){switch(this.model.curPg){case constants.pageType.file:return this.parent.children.fileUpload;case constants.pageType.preview:return this.parent.children.preview;}},children:[{scriptClass:"mstrmojo.Label",slot:"infoNode",text:"Preview shows only first 50 rows of data",cssClass:"mstrmojo-di-previewinfo",bindings:{visible:function(){return(this.parent.model.curPg==constants.pageType.preview);}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button",text:mstrmojo.desc(2177,"Close"),slot:"cancelNode",onclick:function(){mstrmojo.form.send({evt:"3124",src:microstrategy.servletName+".import.3124",relativePageNumber:"-1"},mstrApp.name,"POST",null,null,false);}},{slot:"backNode",scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button",text:mstrmojo.desc(373,"Back"),onclick:function(){var model=this.parent.model;model.set("curPg",model.curPg-1);},bindings:{visible:function(){return(this.parent.model.curPg==constants.pageType.preview);}}},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-button publish",alias:"next",slot:"nextNode",bindings:{visible:function(){return(this.parent.model.curPg!==constants.pageType.intro);},text:function(){var shared=mstrmojo.DI.DISharedViewer;if(this.parent.model.curPg==constants.pageType.preview){return mstrmojo.desc(172,"Publish");}else{if(mstrmojo.DI.DISharedViewer.showPreview){return mstrmojo.desc(1059,"Next");}else{return mstrmojo.desc(172,"Publish");}}},enable:function(){if(this.parent.model.curPg==constants.pageType.file){if(mstrmojo.DI.DISharedViewer.sourceSelected){return true;}else{return false;}}}},onclick:function(){this.parent.parent.currentPage.onNextButtonClick();},postBuildRendering:function(){mstrmojo.DI.DISharedViewer.attachEventListener("showPreviewChange",this.id,function(){if(mstrmojo.DI.DISharedViewer.showPreview){this.text=mstrmojo.desc(1059,"Next");}else{this.text=mstrmojo.desc(172,"Publish");}});}},{scriptClass:"mstrmojo.MenuButton",slot:"navigateNode",iconClass:"mstrmojo-ArchitectListIconBlock redirect",postCreate:function(){this.cm=[{did:3,n:mstrmojo.desc(8132,"Analysis")},{did:2,n:mstrmojo.desc(3345,"Document")},{did:1,n:mstrmojo.desc(1279,"Report")},{did:0,n:mstrmojo.desc(9115,"Exit")}];},dynamicUpdate:true,queryChecked:function(item){return(item.did==this.parent.model.redirect);},executeCommand:function(item){this.parent.model.redirect=item.did;},bindings:{visible:function(){return(this.parent.model.curPg==constants.pageType.preview);}}}]});})();