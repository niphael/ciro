(function(){mstrmojo.requiresCls("mstrmojo.Dialog","mstrmojo.dnd");var $D=mstrmojo.dom;mstrmojo.DraggableDialog=mstrmojo.declare(mstrmojo.Dialog,null,{scriptClass:"mstrmojo.DraggableDialog",draggable:true,ownAvatar:true,draggableNodeName:"titleNode",markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"  mstrAttach:mousedown><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',premousedown:function premousedown(evt){var e=evt.e,t=$D.eventTarget(evt.hWin,e);if(t==this.closeNode){this.close();}},ondragstart:function(c){var n=c.src.node,tn=this[this.draggableNodeName],st=this.editorNode.style;if($D.contains(tn,n,true,this.domNode)){tn.style.cursor="move";this.leftPos=parseInt(st.left,10);this.topPos=parseInt(st.top,10);return true;}else{return false;}},ondragmove:function(c){var e=c.tgt.pos,s=c.src.pos,dx=e.x-s.x,dy=e.y-s.y,st=this.editorNode.style,vl=this.leftPos+dx+"px",vt=this.topPos+dy+"px";st.left=vl;this.left=vl;st.top=vt;this.top=vt;},ondragend:function(c){this[this.draggableNodeName].style.cursor="default";}});}());