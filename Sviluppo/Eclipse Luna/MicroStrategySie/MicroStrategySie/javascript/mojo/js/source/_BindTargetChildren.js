(function(){mstrmojo.requiresCls("mstrmojo.array");var _A=mstrmojo.array;mstrmojo._BindTargetChildren={target:null,targetProps:null,addTabButtons:null,removeTabButtons:null,clearButtons:null,ontargetChange:function ontargetChg(evt){var tWas=evt&&evt.valueWas;if(tWas){var ts=this._targetSubs;if(ts){tWas.detachEventListener(ts.add);tWas.detachEventListener(ts.rem);tWas.detachEventListener(ts.sel);}this.clearButtons();}var t=this.target;if(t){var tps=this.targetProps,p=tps&&tps.children||"children",ch=t[p];this.addTabButtons(ch,0);this._onTargetSelChg();if(t.attachEventListener){var id=this.id,fn="attachEventListener";this._targetSubs={add:t[fn]("addChild",id,"_onTargetAddChild"),rem:t[fn]("removeChild",id,"_onTargetRemoveChild"),sel:t[fn]("selectedChange",id,"_onTargetSelChg")};}}if(this._ontargetChange){this._ontargetChange();}},_onTargetAddChild:function otac(evt){var btns=evt&&evt.value;if(btns&&btns.length){this.addTabButtons(btns,evt.index);}if(this._postTargetAddChild){this._postTargetAddChild();}},_onTargetRemoveChild:function otrc(evt){var arr=evt&&evt.value;for(var i=((arr&&arr.length)||0)-1;i>-1;i--){this.removeTabButton(arr[i]);}if(this._postTargetRemoveChild){this._postTargetRemoveChild();}},_onTargetSelChg:function otsc(evt){var tps=this.targetProps||{},ch=this[tps.names||"children"],setSelected=function(w,v){if(w.set){w.set("selected",v);}else{w.selected=v;}};if(evt){var sOld=evt.valueWas,w=sOld?_A.find(ch,"target",sOld):-1;if(w>-1){setSelected(ch[w],false);}}var t=this.target,s=t&&t.selected,w2=s?_A.find(ch,"target",s):-1;if(w2>-1){setSelected(ch[w2],true);}if(this._postTargetSelChg){this._postTargetSelChg();}}};})();