CircleMarkerScript=true;(function(){mstrmojo.requiresCls("mstrmojo.dom");var _H=mstrmojo.hash,_D=mstrmojo.dom;mstrmojo.gmaps.CircleMarker=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.gmaps.CircleMarker",position:new google.maps.LatLng(0,0),radius:20,fillColor:"#FF0000",fillOpacity:0.75,strokeColor:"#FFFFFF",strokeOpacity:1,strokeWeight:1,highlightColor:"#0000FF",selectedColor:"#0000FF",circle:null,outer1:null,outer2:null,originalzIndex:1,isSelected:false,highlight:false,mouseX:0,mouseY:0,init:function init(props){_H.copy(props,this);var circleOptions=this.getCircleOptions();this.circle=new google.maps.Marker();this.circle.setOptions(circleOptions);var that=this;google.maps.event.addDomListener(this.circle,"mouseover",function(event){if(_D.isIE9||_D.isIE10||_D.isIEW3C){var rawMouseEvent=that.getMouseEventFromGoogleEvent(event);if(!!rawMouseEvent){that.mouseX=rawMouseEvent.clientX;that.mouseY=rawMouseEvent.clientY;}}that.set("highlight",true);});google.maps.event.addDomListener(this.circle,"mouseout",function(event){if(_D.isIE9||_D.isIE10||_D.isIEW3C){var rawMouseEvent=that.getMouseEventFromGoogleEvent(event);if(!!rawMouseEvent){if(rawMouseEvent.clientX==-1&&rawMouseEvent.clientY==-1||rawMouseEvent.clientX==that.mouseX&&rawMouseEvent.clientY==that.mouseY){return ;}}}that.set("highlight",false);});},onfillColorChange:function onfillColorChange(){var circleIcon=this.getCircleIcon();this.circle.setIcon(circleIcon);},onfillOpacityChange:function onfillOpacityChange(){var circleIcon=this.getCircleIcon();this.circle.setIcon(circleIcon);},onstrokeColorChange:function onstrokeColorChange(){var circleIcon=this.getCircleIcon();this.circle.setIcon(circleIcon);},onradiusChange:function onradiusChange(){var circleIcon=this.circle.getIcon();circleIcon.scale=this.radius;this.circle.setIcon(circleIcon);if(this.outer1){var outer1Icon=this.outer1.getIcon();outer1Icon.scale=this.radius+2;this.outer1.setIcon(outer1Icon);}if(this.outer2){var outer2Icon=this.outer2.getIcon();outer2Icon.scale=this.radius+1;this.outer2.setIcon(outer2Icon);}},onhighlightChange:function onhighlightChange(){var circleIcon=this.getCircleIcon();if(this.highlight){circleIcon.strokeColor=this.highlightColor;}else{if(this.isSelected){circleIcon.strokeColor=this.selectedColor;}else{circleIcon.strokeColor=this.strokeColor;}}this.circle.setIcon(circleIcon);},onisSelectedChange:function onisSelectedChange(){if(this.isSelected){this.outer1=new google.maps.Marker();this.outer1.setOptions(this.getOuter1Options());this.outer2=new google.maps.Marker();this.outer2.setOptions(this.getOuter2Options());this.outer1.setMap(this.map);this.outer2.setMap(this.map);}else{this.outer1.setMap(null);this.outer2.setMap(null);this.outer1=null;this.outer2=null;var circleIcon=this.getCircleIcon();if(this.highlight){circleIcon.strokeColor=this.highlightColor;}else{circleIcon.strokeColor=this.strokeColor;}this.circle.setIcon(circleIcon);}},setBubbleZIndex:function setBubbleZIndex(val){this.circle.setZIndex(val);if(this.outer1){this.outer1.setZIndex(val-1);}if(this.outer2){this.outer2.setZIndex(val-1);}},getOriginalBubbleZIndex:function getOriginalBubbleZIndex(){return this.originalzIndex;},getCenter:function getCenter(){return{x:(this.radius+this.strokeWeight+4),y:(this.radius+this.strokeWeight+4)};},getRadius:function getRadius(){return this.radius;},getCircleIcon:function getCircleIcon(){return{path:google.maps.SymbolPath.CIRCLE,fillOpacity:this.fillOpacity,fillColor:this.fillColor,strokeOpacity:this.strokeOpacity,strokeColor:this.strokeColor,strokeWeight:this.strokeWeight,scale:this.radius};},getCircleOptions:function getCircleOptions(){var circleIcon=this.getCircleIcon();return{position:this.position,map:this.map,icon:circleIcon,zIndex:this.originalzIndex,anchorPoint:{x:0,y:0}};},getOuter1Options:function getCircleOptions(){return{position:this.position,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeOpacity:this.strokeOpacity,strokeColor:"#FFFFFF",strokeWeight:1,scale:this.radius+2},zIndex:this.originalzIndex-1};},getOuter2Options:function getCircleOptions(){return{position:this.position,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:0,strokeOpacity:this.strokeOpacity,strokeColor:"#F0F0F0",strokeWeight:1,scale:this.radius+1},zIndex:this.originalzIndex-1};},setMap:function setMap(map){this.circle.setMap(map);if(!map){if(this.outer1){this.outer1.setMap(null);}if(this.outer2){this.outer2.setMap(null);}}},getPosition:function getPosition(){return this.position;},getMouseEventFromGoogleEvent:function getMouseEventFromGoogleEvent(event){var propName,prop;if((event.clientX!==undefined)&&(event.clientY!==undefined)){return event;}for(propName in event){prop=event[propName];if(!!prop&&(prop.clientX!==undefined)&&(prop.clientY!==undefined)){return prop;}}}});})();