(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.hash","mstrmojo.css","mstrmojo.Button");var $CSS=mstrmojo.css,CSS_CLASS_TBICON="mstrmojo-qb-toolbarIcon",CSS_CLASS_ON="on",CSS_CLASS_DBVIEW="connectionview",CSS_CLASS_DATAPREVIEW="viewtable",CSS_CLASS_CONDITION="conditionview",CSS_CLASS_REFRESHOPT="refreshOption",CSS_CLASS_HELP="help",CSS_SEP=" ";function createToolbarButton(params){return mstrmojo.hash.copy(params,{scriptClass:"mstrmojo.Button",onactiveChange:function onactiveChange(){$CSS.toggleClass(this.domNode,CSS_CLASS_ON,this.active);},onclick:function onclick(){this.set("active",!this.active);if(this.cmd){mstrApp.getRootController()[this.cmd](this.active);}if(!this.persistSelection){var $this=this;window.setTimeout(function(){$this.set("active",false);},100);}}});}mstrmojo.qb.Toolbar=mstrmojo.declare(mstrmojo.Box,null,{children:[createToolbarButton({cmd:"toggleDatabaseView",active:true,iconClass:[CSS_CLASS_TBICON,CSS_CLASS_DBVIEW,CSS_CLASS_ON].join(CSS_SEP),title:mstrmojo.desc(9111,"Database View"),persistSelection:true}),createToolbarButton({cmd:"toggleDataPreview",active:false,iconClass:[CSS_CLASS_TBICON,CSS_CLASS_DATAPREVIEW].join(CSS_SEP),title:mstrmojo.desc(9113,"Data Preview"),persistSelection:true,postBuildRendering:function postBuildRendering(){var controller=mstrApp.getRootController(),wid=this.id;controller.attachEventListener("dataPreview",wid,function(){this.set("active",true);});controller.attachEventListener("reportModeChange",wid,function(evt){this.set("active",evt.showPreview);});}}),createToolbarButton({cmd:"openConditionDialog",iconClass:[CSS_CLASS_TBICON,CSS_CLASS_CONDITION].join(CSS_SEP),title:mstrmojo.desc(6189,"Filter"),postBuildRendering:function postBuildRendering(){mstrApp.getRootController().attachEventListener("reportModeChange",this.id,function(evt){this.set("visible",evt.mode!==2);});}}),createToolbarButton({cmd:"openRefreshOptionDialog",iconClass:[CSS_CLASS_TBICON,CSS_CLASS_REFRESHOPT].join(CSS_SEP),title:mstrmojo.desc(9136,"Data Refresh Options")}),createToolbarButton({cmd:"openHelp",iconClass:[CSS_CLASS_TBICON,CSS_CLASS_HELP].join(CSS_SEP),title:mstrmojo.desc(1143,"help")})]});}());