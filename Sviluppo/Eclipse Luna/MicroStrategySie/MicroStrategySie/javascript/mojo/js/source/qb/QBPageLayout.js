(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.qb.SplitPanel","mstrmojo.qb.VSplitPanel","mstrmojo.WH.WHPanel","mstrmojo.qb.QBPanel","mstrmojo.qb.QBMappings","mstrmojo.qb.MissingColumnWarning");var LEFT_ITEM_SLOT="leftItem",RIGHT_ITEM_SLOT="rightItem",TOP_ITEM_SLOT="topItem",BOTTOM_ITEM_SLOT="bottomItem";mstrmojo.qb.QBPageLayout=mstrmojo.declare(mstrmojo.qb.SplitPanel,null,{children:[{scriptClass:"mstrmojo.WH.WHPanel",alias:"WHTableTree",slot:LEFT_ITEM_SLOT,onDBRoleSelection:function onDBRoleSelection(evt){mstrApp.getRootController().setDBRole(evt.value);},allowdragstart:function allowdragstart(ctxt){var data=ctxt.src.data;return mstrApp.isFFSQLMode||!data||!data.cln;},onDBTablesChange:function onDBTablesChange(evt){mstrApp.getRootController().addSQLCandidateTables(evt.value);},onColumndblclick:function onColumndblclick(evt){if(mstrApp.isFFSQLMode){var column=evt.src,table=column.parent.data.tag;mstrApp.getRootController().addSQLFromColumn(mstrmojo.hash.copy(column.data,{tbn:table.tbn,ns:table.ns}));}},onTabledblclick:function onTabledblclick(evt){var controller=mstrApp.getRootController(),data=evt.src.data.tag;if(mstrApp.isFFSQLMode){if(mstrApp.isCloud){return ;}controller.addSQLFromTable(data.ns,data.tbn,evt.items);}else{controller.addTable(data,evt.items);}}},{scriptClass:"mstrmojo.qb.VSplitPanel",cssClass:"mstrmojo-qb-main-panel",alias:"workPanel",slot:RIGHT_ITEM_SLOT,topP:70,borderoffset:10,bottomItemVisible:false,children:[{scriptClass:"mstrmojo.qb.QBPanel",slot:TOP_ITEM_SLOT},{scriptClass:"mstrmojo.qb.QBMappings",alias:"mappingPanel",slot:BOTTOM_ITEM_SLOT}],layoutConfig:{w:{topItem:"100%",bottomItem:"100%"},h:{topItem:"100%",bottomItem:"0%"}}}]});}());