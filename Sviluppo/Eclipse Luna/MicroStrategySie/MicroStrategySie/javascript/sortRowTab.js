mstrSortRowTabImplScript=true;mstrSortRowTabImpl.prototype=new mstrTabImpl();mstrSortRowTabImpl.prototype.initializing=false;mstrSortRowTabImpl.prototype.needUpdate=false;mstrSortRowTabImpl.prototype.onload=function(){try{this.initializing=true;this.initEditor();this.needUpdate=false;initSortTabSettings(this);this.initializing=false;}catch(err){microstrategy.errors.log(err);return false;}};mstrSortRowTabImpl.prototype.getSortChanges=function(actionCollection){try{if(this.needUpdate){getSortEvents(this.elem,actionCollection,this.viewBeanPath,microstrategy.GRIDCELL_AXIS_ROWS);}}catch(err){microstrategy.errors.log(err);return false;}};function initSortTabSettings(sortTab){try{var allDropdowns=sortTab.elem.getElementsByTagName("select");for(var i=0;i<allDropdowns.length;i++){allDropdowns[i].onchange=function(){sortTab.needUpdate=true;};}var allRadioButtons=sortTab.elem.getElementsByTagName("input");for(var j=0;j<allRadioButtons.length;j++){if(allRadioButtons[j].type&&allRadioButtons[j].type.toLowerCase()=="radio"){allRadioButtons[j].onchange=function(){sortTab.needUpdate=true;};}}}catch(err){microstrategy.errors.log(err);return false;}}function getSortEvents(sortTab,actionCollection,evtBeanPath,axis){try{var updateManager=microstrategy.updateManager;var allDropdowns=sortTab.getElementsByTagName("select");var subtotalPos=(microstrategy.findChildWithAtt(sortTab,"input","id","sortSubtotalPostion")).value;var clearAll=true;var sortClear="1";var size=(allDropdowns)?allDropdowns.length:0;for(var i=0;i<size;i++){var sortDropdown=microstrategy.findChildWithAtt(sortTab,"select","id","sortKey_"+i);if(sortDropdown!=null){var sortSelectedOption=sortDropdown.options[sortDropdown.selectedIndex];if(sortSelectedOption!=null&&sortDropdown.selectedIndex>0){var sortOrders=microstrategy.findChildrenWithAtt(sortTab,"input","name","sortOrder_"+i);var sortOrderValue="1";for(var j=0;j<sortOrders.length;j++){if(sortOrders[j].checked){sortOrderValue=sortOrders[j].value;}}var sortKey=sortSelectedOption.value;clearAll=false;var action=updateManager.createActionObject(sortTab,mstrUpdateManager.VIEW_EVENT_SORT,evtBeanPath,["4011","4012","4013","4138"],[sortKey,sortOrderValue,sortClear,subtotalPos]);actionCollection.push(action);sortClear="0";}}}if(clearAll){var action=updateManager.createActionObject(sortTab,mstrUpdateManager.CLEAR_SORT,evtBeanPath,["4006"],[axis]);actionCollection.push(action);}}catch(err){microstrategy.errors.log(err);return false;}}function mstrSortRowTabImpl(id){this.inherits=mstrTabImpl;this.inherits(id);this.inherits=null;return this;}