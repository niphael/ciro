(function(){mstrmojo.requiresCls("mstrmap.ESRIMap");mstrmap.ESRIMapOIVM=mstrmojo.declare(mstrmap.ESRIMap,null,{scriptClass:"mstrmap.ESRIMapOIVM",_w:null,_key:null,model:null,getWidget:function(gridParams){if(!this._w&&gridParams){for(var i in mstrmojo.all){if(mstrmojo.all[i].k==gridParams.key){this._w=mstrmojo.all[i];break;}}}return this._w;},getModel:function getDocModel(){if(!this.model){var w=this.getWidget();if(w){this.model=w.model;}}return this.model.docModel;},getVisProps:function(gridParams){_key=gridParams.key;return this.getWidget(gridParams).vp;},isAsp:function isAsp(){return false;},trimString:function trimString(s){return mstrmojo.string.trim(s);},persistWidgetProps:function persistWidgetProps(){var key=this._w.k;var widgetPropsXml=this.createWidgetPropsXML();var props={};props[key]={FormattingWidget:"WidgetProps\u001F"+widgetPropsXml};this.getModel().saveRWProps(key,props,1,false,{success:function(){}});}});mstrmap.ESRIMapOIVM.newMapViewer=function newMapViewer(encodedUrl,placeholder,gridParams){mstrmap.ESRIMap.newMapViewer(encodedUrl,placeholder,gridParams,"mstrmap.ESRIMapOIVM");};}());