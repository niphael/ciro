var xmjd=mstrmojo&&mstrmojo.descriptors;var mstrmojo={descriptors:xmjd||{},meta:{TP:"t",STP:"st"},emptyFn:function(){},now:function now(){return new Date().getTime();},usesFrames:false};mstrmojo.gmaps={};(function(){var F=mstrmojo;F.global=(function(){var G=function(){return this;};return G.call(null);}());F.dbg=F.emptyFn;F.dbg_stack=F.emptyFn;F.dbg_xhr=F.emptyFn;F.dbg_profile=F.emptyFn;F.platform={};F.prompt={};F.settings={};F.ui={};F.ACL={};F.storage={};F.utils={};F.maps={};F.maps.androidmap={};F.maps.jsmap={};F.graph={};F.IPA={};F.ME={};F.Architect={};F.plugins={};F.gmaps={};F.DI={};F.qb={};F.WH={};F.txEditor={};F.express={ui:{}};F.android={controllers:{},factories:{},inputControls:{},large:{controllers:{},factories:{},ui:{}},medium:{controllers:{},factories:{},ui:{}},selectors:{},ui:{}};F.iphone={};F.winphone={};F.mstr={};F.err=function E(I){var H=I.name+': "'+I.message+'"';if(F.debug){if(I.fileName){H+=" at\n    "+I.fileName;}if(I.hasOwnProperty("lineNumber")){H+=": "+I.lineNumber;}else{if(I.hasOwnProperty("line")&&I.sourceURL){var G=I.sourceURL.split("/");H+="("+G[G.length>1?G.length-1:0]+":"+I.line+")";}}}this.dbg(H);if(F.Dialog){F.alert(I.message,null,I.name);}else{window.alert(H);}};F.confirm=function B(G){return window.confirm(G);};F.alert=function D(G){window.alert(G);};var C=!!(/return true/.test(function(){return true;}));F.mixin=function A(K,I){if(K){I=I||{};var J=/this\.\_super/;var H=function(O,N){return function M(){var Q=this._super;this._super=N;var P=O.apply(this,arguments||[]);this._super=Q;return P;};};var G=K.__onmixin__;if(G){delete K.__onmixin__;}var L;for(L in K){if((typeof K[L]==="function")&&(!C||J.test(K[L]))){I[L]=H(K[L],I[L]);}else{I[L]=K[L];}}if(G){K.__onmixin__=G;}}return I;};}());(function(){var _xhr;var _missing={};var _G=mstrmojo.global,_app=_G.mstrApp||{},_jsRoot=_app.jsRoot||"../javascript/",_jsMojoRoot=_app.jsMojoRoot||"../javascript/mojo/js/source/",_isIE=!!document.all;function _fqcn2File(fqcn){if(fqcn.match(/^mstrmojo\.plugins\./)){var pluginName=fqcn.substring(17,fqcn.indexOf(".",17));fqcn="../plugins/"+pluginName+"/javascript/"+_jsMojoRoot+fqcn.replace("mstrmojo.plugins."+pluginName+".","").replace(/\./gm,"/");}else{if(fqcn.match(/^mstrmojo\./)){fqcn=_jsMojoRoot+fqcn.replace("mstrmojo.","").replace(/\./gm,"/");}else{fqcn=_jsRoot+fqcn.replace(/\./gm,"/");}}return fqcn+".js";}function _getXHR(){_xhr=self.XMLHttpRequest?new XMLHttpRequest():(self.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null);}function _syncGet(file){var result=null;if(!_xhr){_getXHR();}if(_xhr){try{_xhr.open("GET",file,false);_xhr.send(null);result=_xhr.responseText||null;}catch(localerr){}if(!_isIE&&_xhr.abort){_xhr.abort();}}return result;}function encodeParams(params){var x=-1,url=[],p;if(params){for(p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function _syncXHR(method,baseUrl,params){var result=null;method=method.toUpperCase();if(!_xhr){_getXHR();}if(_xhr){try{var config=mstrConfig,m=null;if(window.microstrategy!==undefined&&microstrategy){m=microstrategy;}params.taskContentType=params.taskContentType||"json";params.taskEnv="xhr";params.xts=mstrmojo.now();params=mstrmojo.addCSRFTokenToTaskParams(params);var ptp=(config&&config.persistTaskParams)||(m&&m.persistParams);if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}_xhr.open(method,appendUrlParams(method,baseUrl,params),false);if(method!=="POST"){params=null;}else{params=encodeParams(params);_xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}_xhr.send(params);result=_xhr.responseText||null;}catch(localerr){window.console.log(localerr);}}return result;}function _jsGet(file,nullCheck){var js=_syncGet(file);if(js){try{eval(js);return nullCheck?!!eval(nullCheck):true;}catch(localerr){window.alert("JavaScript compile error:\n\nFile: "+file+"\n\nError: "+localerr.message);}}return false;}mstrmojo.loader={loaded:{mstrmojo:true,"mstrmojo.loader":true},isLoaded:function isLd(fqcn){var o;try{o=eval(fqcn);}catch(localerr){}if(o){this.loaded[fqcn]=true;}return !!o;},load:function ld(fqcn){if(_missing[fqcn]){return false;}if(this.loaded[fqcn]||this.isLoaded(fqcn)){return true;}if(_jsGet(_fqcn2File(fqcn),fqcn)){this.loaded[fqcn]=true;return true;}_missing[fqcn]=true;return false;}};var _L=mstrmojo.loader,_LL=_L.loaded;var _reqCache={};mstrmojo.requiresCls=function reqCls(){var as=arguments,ns=[],len=as.length,i;for(i=0;i<len;i++){var n=as[i];if(!n||_LL[n]||_reqCache[n]||_missing[n]){continue;}if(!n.match(/^mstrmojo\.plugins\./)){var ps=n.split("."),klen=ps.length,k;for(k=1;k<klen;k++){var s=ps.slice(0,k).join(".");if(!_reqCache[s]){ns.push(s);_reqCache[s]=true;}}}ns.push(n);_reqCache[n]=true;}var jlen=ns.length,j;for(j=0;j<jlen;j++){if(!_L.load(ns[j])){window.alert("Warning: Javascript class not found:\n"+ns[j]);break;}}return true;};var _D=mstrmojo.descriptors,_dPrefix="mstrWeb.";function populateDescriptors(ds){if(ds){var dlen=ds.length,di;for(di=0;di<dlen;di++){var d=ds[di];_D[d.key]=d.v;}}}mstrmojo.populateDescriptors=populateDescriptors;if(window.mstrConfig!==undefined){populateDescriptors(mstrConfig.mstrDescs&&mstrConfig.mstrDescs.descriptors);mstrConfig.mstrDescs=null;}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}if(typeof mstrApp!="undefined"){populateDescriptors(mstrApp.mstrDescs&&mstrApp.mstrDescs.descriptors);}var _reqDesc=function(prefix,ids){var as=ids,ns=[],len=as.length,i;for(i=0;i<len;i++){var k=as[i];if(k&&!(_D.hasOwnProperty(prefix+k))){ns.push(k);}}if(ns.length>0){var response=_syncXHR("POST",(window.mstrConfig&&mstrConfig.taskURL)||"taskProc",{taskId:"getDescriptors",keys:ns.join(","),prefix:prefix});if(response){var r=eval("("+response+")");populateDescriptors(r&&r.descriptors);}}};mstrmojo.requiresDescsWPrefix=function reqDescP(prefix){var p=prefix,args=[].slice.call(arguments);args[0]=null;_reqDesc(p,args);};mstrmojo.requiresDescs=function reqDesc(){if(window.mstrConfig!==undefined&&!mstrConfig.onMobileDevice){_reqDesc(_dPrefix,arguments);}};mstrmojo.desc=function desc(descID,defText){if(descID!==null&&descID!==undefined){mstrmojo.requiresDescs(descID);if(_D.hasOwnProperty(_dPrefix+descID)){return _D[_dPrefix+descID];}defText=defText||"No string descriptor found for descID="+descID;}var decDefText="["+defText+"]";_D[_dPrefix+descID]=decDefText;return decDefText;};mstrmojo.descP=function descP(prefix,descID,defText){mstrmojo.requiresDescsWPrefix(prefix,descID);if(_D.hasOwnProperty(prefix+descID)){return _D[prefix+descID];}defText=defText||"No string descriptor found for descID="+descID;var decDefText="*"+defText+"*";_D[prefix+descID]=decDefText;return decDefText;};mstrmojo.provide=function prv(fqcn,cls){_LL[fqcn]=!!cls;return cls;};mstrmojo.invalidateCls=function rel(fqcn){_reqCache[fqcn]=false;_LL[fqcn]=false;eval(fqcn+" = null");};var mx=mstrmojo.mixin;mstrmojo.declare=function dcl(SuperCls,mixins,config){function constr(props){if((!props||!props.dontInit)&&this.init){this.init(props);}}if(SuperCls){constr.prototype=new SuperCls({dontInit:true});constr.prototype.constructor=constr;}var proto=constr.prototype;var cnt=(mixins&&mixins.length)||0,i;for(i=0;i<cnt;i++){mx(mixins[i],proto);}if(config){mx(config,proto);if(config.scriptClass){_LL[config.scriptClass]=true;}}return constr;};mstrmojo.findAncestor=function findAncestor(src,property,value,limitClass){var ancestor=src&&src.parent;while(ancestor&&(!limitClass||!(ancestor instanceof limitClass))){var targetProperty=ancestor[property];if(targetProperty!==undefined){if(value!==undefined&&value!==null){if(targetProperty===value){return ancestor;}}else{return ancestor;}}ancestor=ancestor.parent;}return null;};mstrmojo.isDescendant=function isDescendant(parent,child){var ancestor;if(!child||!parent){return false;}ancestor=child.parent;while(ancestor){if(ancestor===parent){return true;}ancestor=ancestor.parent;}return false;};mstrmojo.getCSRFToken=function getVRN(url){var tkn=null;try{if(url){if(url.indexOf("validateRandNum=")>=0){return tkn;}var curURL=window.location.href;var servletName=window.mstrApp&&mstrApp.name,taskProcName=window.mstrConfig.taskURL&&mstrConfig.taskURL,isSameWebApp=(url.indexOf(servletName)===0||url.indexOf("./"+servletName)===0||url.indexOf(taskProcName)===0||url.indexOf("./"+taskProcName)===0||url.indexOf(curURL)===0||((curURL.indexOf("?")>0)&&(url.indexOf(curURL.substring(0,curURL.indexOf("?")))===0)));if(!isSameWebApp){return tkn;}}if(window.mstrApp&&mstrApp.validateRandNum){tkn=mstrApp.validateRandNum;}else{if(window.mstrConfig&&mstrConfig.validateRandNum){tkn=mstrConfig.validateRandNum;}else{if(window.microstrategy!==undefined&&microstrategy&&microstrategy.validateRandNum){tkn=microstrategy.validateRandNum;}}}}catch(err){}return tkn;};mstrmojo.addCSRFTokenToURL=function addCSRFTknToURL(url){if(!url){return"";}var tkn=mstrmojo.getCSRFToken(url);if(tkn&&tkn.length>0){if(url.indexOf("?")>0){url+="&";}else{url+="?";}url+="validateRandNum="+tkn;}return url;};mstrmojo.addCSRFTokenToTaskParams=function addCSRFTknToTaskParams(params){if(params){var tkn=mstrmojo.getCSRFToken();if(tkn&&tkn.length>0){params.validateRandNum=tkn;}}return params;};mstrmojo.getInstance=function getInstance(config){var Clazz=mstrmojo.hash.walk(config.scriptClass,window);if(Clazz){return new Clazz(config);}return null;};}());(function(){mstrmojo.array=mstrmojo.provide("mstrmojo.array",{indexOf:function K(R,T){var S=0,Q=(R&&R.length)||0;for(;S<Q;S++){if(R[S]==T){return S;}}return -1;},indexOfMulti:function N(U,X){if(!X){return{indices:null,map:{},count:0};}var V=X.length,W=new Array(V),Q={},Y=0;for(var T=0,S=(U&&U.length)||0;T<S;T++){var Z=U[T];for(var R=0;R<V;R++){if(X[R]===Z){W[R]=T;Q[R]=T;Y++;break;}}}return{indices:W,map:Q,count:Y};},forEach:function G(R,U,T){for(var S=0,Q=(R&&R.length)||0;S<Q;S++){if(T){if(U.call(T,R[S],S,R)===false){break;}}else{if(U(R[S],S,R)===false){break;}}}},filter:function B(S,V,T){var R=[],W=0;for(var U=0,Q=S&&S.length||0;U<Q;U++){if(V(S[U])){R[W]=S[U];W++;if(T&&T.max&&(W>=T.max)){break;}}}return R;},find:function H(R,V,S){for(var T=0,Q=R&&R.length||0;T<Q;T++){var U=R[T];if(U&&U[V]==S){return T;}}return -1;},findBin:function E(S,W,X,R){var V=R?R:S.length,T=-1,Q,U=W[X];while(V-T>1){if(S[Q=V+T>>1][X]<U){T=Q;}else{V=Q;}}return S[V][X]===U?V:-1;},search:function P(X,T,V){var U=X.length,S=-1,R,W=T.toUpperCase(),Q=T.length;while(U-S>1){if(X[R=U+S>>1][V].substr(0,Q).toUpperCase()<W){S=R;}else{U=R;}}return U;},findMulti:function N(V,R,Y){if(!Y){return{indices:null,map:{},count:0};}var W=Y.length,X=[],Q={},Z=0;for(var U=0,T=(V&&V.length)||0;U<T;U++){var b=V[U][R];for(var S=0;S<W;S++){if(Y[S][R]===b){X[S]=U;Q[S]=U;Z++;break;}}}return{indices:X,map:Q,count:Z};},removeItem:function I(Q,S){var R=this.indexOf(Q,S);if(R>-1){this.removeIndices(Q,R,1);}return R;},removeItems:function C(Q,V,R){var T=this.findMulti(Q,V,R);if(T.count){var S=T.indices.concat().sort(this.numSorter).slice(0,T.count);for(var U=S.length-1;U>-1;U--){Q.splice(S[U],1);}}},numSorter:function J(R,Q){return Number(R)-Number(Q);},stringSorter:function O(S,R){var Q=S.toLowerCase();var T=R.toLowerCase();if(Q<T){return -1;}else{if(Q>T){return 1;}else{return 0;}}},removeIndices:function M(Q,S,R){Q.splice(S,R);},insert:function F(R,Q,S){if(!R){R=[];}if(Q==null){Q=R.length;}Array.prototype.splice.apply(R,[Q,0].concat(S));return R;},hash:function L(R){var T={};for(var S=0,Q=(R&&R.length)||0;S<Q;S++){T[R[S]]=true;}return T;},get:function A(R,T){if(!T){return null;}var S=[];for(var U=0,Q=T.length;U<Q;U++){S[U]=R[T[U]];}return S;},deepSortArr:function D(R,T,Q,S){return R.sort(function(V,U){return(!S?(V[Q][T]<=U[Q][T]):(V[Q][T]>U[Q][T]))?-1:1;});}});})();(function(){mstrmojo.all={};var _A=mstrmojo.all;var _freeIdCounter=0;function _freeId(){for(;_freeIdCounter++;){if(!_A["mstr"+_freeIdCounter]){break;}}return"mstr"+_freeIdCounter;}mstrmojo.registry=mstrmojo.provide("mstrmojo.registry",{add:function add(obj){if(!obj){return ;}var id=obj.id;if(id==null){id=_freeId();obj.id=id;}else{if(_A[id]){throw new Error("Tried to register 2 objects with same id: "+id);}}_A[id]=obj;},remove:function rmv(obj){if(obj&&obj.id!=null){delete _A[obj.id];}},dumpAll:function(){for(var o in _A){if(_A[o].id!=null){mstrmojo.dbg(_A[o].id+"("+(_A[o].scriptClass||"[unknown class]")+")");}}},ref:function ref(config,flags){if(!config){return null;}if(!flags){flags={};}var C=config;while(C){switch(typeof (C)){case"string":if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(config);}C=eval(C);break;case"function":return(flags.dontInst!==true)?new C():C;case"object":if(C.constructor===Object){var sc=C.scriptClass;if(sc){if(flags.skipLoadChecks!==true){mstrmojo.requiresCls(sc);}var cls=eval(sc);if(cls){return new cls((flags.clone===true)?mstrmojo.hash.clone(C):C);}return null;}else{return C;}}else{return C;}break;default:return null;}}}});mstrmojo.insert=mstrmojo.registry.ref;})();(function(){mstrmojo.func=mstrmojo.provide("mstrmojo.func",{composite:function C(D){if(!D||!D.length){return function(){};}return function(){for(var F=0,E=D.length;F<E;F++){D[F].apply(this,arguments);}};},wrapMethods:function B(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){D[G]=(G in D&&typeof (F)=="function")?mstrmojo.func.composite([F,D[G]]):F;});return D;},addMethods:function A(E,D){D=D||{};mstrmojo.hash.forEach(E,function(F,G){if(!(G in D)&&typeof (F)=="function"){D[G]=F;}});return D;}});})();(function(){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var D=String.fromCharCode;function A(F){F=F.replace(/\r\n/g,"\n");var E="";for(var H=0;H<F.length;H++){var G=F.charCodeAt(H);if(G<128){E+=D(G);}else{if((G>127)&&(G<2048)){E+=D((G>>6)|192);E+=D((G&63)|128);}else{E+=D((G>>12)|224);E+=D(((G>>6)&63)|128);E+=D((G&63)|128);}}}return E;}function C(E){var F="",H=0,J=0,I=0,G=0;while(H<E.length){J=E.charCodeAt(H);if(J<128){F+=D(J);H++;}else{if((J>191)&&(J<224)){I=E.charCodeAt(H+1);F+=D(((J&31)<<6)|(I&63));H+=2;}else{I=E.charCodeAt(H+1);G=E.charCodeAt(H+2);F+=D(((J&15)<<12)|((I&63)<<6)|(G&63));H+=3;}}}return F;}mstrmojo.base64=mstrmojo.provide("mstrmojo.base64",{decodeHttpHeader:function(H){var F=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(H&&H.indexOf("=?UTF-8?B?")===0){var G="",E;while((E=F.exec(H))!==null){G+=mstrmojo.base64.decode(E[1]);}return G;}return H;},encode:function(G){var E="";var N,L,J,M,K,I,H;var F=0;G=A(G);while(F<G.length){N=G.charCodeAt(F++);L=G.charCodeAt(F++);J=G.charCodeAt(F++);M=N>>2;K=((N&3)<<4)|(L>>4);I=((L&15)<<2)|(J>>6);H=J&63;if(isNaN(L)){I=H=64;}else{if(isNaN(J)){H=64;}}E+=B.charAt(M)+B.charAt(K)+B.charAt(I)+B.charAt(H);}return E;},decode:function(G){var E="",F=0;var N,L,J,M,K,I,H;G=G.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(F<G.length){M=B.indexOf(G.charAt(F++));K=B.indexOf(G.charAt(F++));I=B.indexOf(G.charAt(F++));H=B.indexOf(G.charAt(F++));N=(M<<2)|(K>>4);L=((K&15)<<4)|(I>>2);J=((I&3)<<6)|H;E+=D(N);if(I!=64){E+=D(L);}if(H!=64){E+=D(J);}}E=C(E);return E;}});})();(function(){mstrmojo.hash=mstrmojo.provide("mstrmojo.hash",{copy:function A(N,M){if(N){M=M||{};for(var O in N){M[O]=N[O];}}return M;},copyProps:function C(P,Q,N){N=N||{};if(Q){for(var O=0,M=(P&&P.length)||0;O<M;O++){var R=P[O];if(R in Q){N[R]=Q[R];}}}return N;},forEach:function F(P,O,N){if(P){for(var M in P){if(N){if(O.call(N,P[M],M,P)===false){break;}}else{if(O(P[M],M,P)===false){break;}}}}},walk:function J(Q,O){if(!O){O=mstrmojo.global;}var P=Q.split(".");if(P.length==1){return O[Q];}for(var N=0,M=P&&P.length||0;N<M;N++){O=O[P[N]];if(!O){break;}}return O;},isEmpty:function(N){if(!N){return true;}for(var M in N){if(N[M]!=null){return false;}}return true;},clear:function L(N){if(N){for(var M in N){delete N[M];}}return N;},any:function(N,O){if(N){for(var M in N){return O?M:N[M];}}return undefined;},clone:function B(Q){if(!Q){return null;}var S;if(Q.constructor===Array){S=Q.concat();var R=S[0];if(R&&typeof (R)==="object"){for(var P=0,M=S.length;P<M;P++){S[P]=this.clone(Q[P]);}}}else{S={};for(var O in Q){var N=Q[O];if(N&&typeof (N)=="object"){S[O]=this.clone(N);}else{S[O]=N;}}}return S;},cloneArray:function I(N){var O=[];for(var P=0,M=(N&&N.length)||0;P<M;P++){O[P]=this.clone(N[P]);}return O;},keyarray:function G(O,P){var M=[];if(O){for(var N in O){M.push(P?Number(N):N);}}return M;},valarray:function H(O){var M=[];if(O){for(var N in O){M.push(O[N]);}}return M;},equals:function K(S,R){var T=mstrmojo.hash,N=S&&R||(!S&&!R&&(S===R));if(N&&S){N=(S.constructor===R.constructor);if(N){if(S.constructor===Array){var Q=S.length;N=(Q===R.length);if(N&&Q){for(var O=0;O<Q;O++){N=N&&T.equals(S[O],R[O]);}}}else{if(typeof (S)==="object"){var U=T.keyarray(S),P=T.keyarray(R);N=U.length===P.length;if(N){for(var M in S){N=N&&(T.equals(S[M],R[M]));}}}else{N=(S===R);}}}}return N;},obj2array:function(Q){for(var R in Q){var P=Q[R];if(P&&typeof (P)=="object"){Q[R]=this.obj2array(P);}}if("isArray" in Q&&(Q.isArray===true)){var O=[];for(var N=0,M=Q.length;N<M;N++){O.push(Q[N]);}return O;}else{return Q;}},min:function D(P,Q,R){var M;if(P){for(var O in P){var N=Q?P[O]:O;if(R){N=Number(N);}if((M==null)||(N<M)){M=N;}}}return M;},make:function E(N,O,M){if(!N||!O){return null;}if(N.attachEventListener){return N;}if(O.makeObservable){N=O.makeObservable(N,M)||N;}else{this.copy(O.prototype,N);if(N.init){N=N.init(M)||N;}}return N;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array");var B={};var E={};mstrmojo.publisher=mstrmojo.provide("mstrmojo.publisher",{publish:function F(H,Q,L){var M=B[H]&&B[H][Q],O;if(!M){return ;}for(O in M){var J=null;if(O){J=mstrmojo.all[O];if(!J){delete M[O];continue;}}var R=M[O].methods;if(R){var P=J||mstrmojo.global,I;for(I in R){if(P[I]){P[I](L);}}}var N=M[O]&&M[O].functions,S=(N&&N.length)||0;if(S){var K;if(J){for(K=S-1;K>-1;K--){if(N[K]){N[K].apply(J,[L]);}}}else{for(K=S-1;K>-1;K--){if(N[K]){N[K](L);}}}}}},subscribe:function D(I,N,R,J){var S=B[I];if(!S){S={};B[I]=S;}var M=S[N];if(!M){M={};S[N]=M;}var K=M[J||""];if(!K){K={};M[J||""]=K;}if(typeof R==="function"){var L=K.functions;if(!L){L=[];K.functions=L;}L.push(R);}else{var H=K.methods;if(!H){H={};K.methods=H;}H[R]=true;}var Q=E,P=Q[J||""];if(!P){P={};Q[J||""]=P;}var O=P[I];if(!O){O={};P[I]=O;}O[N]=true;return{id:I,type:N,callback:R,listener:J,clear:function(){mstrmojo.publisher.unsubscribe(this);}};},unsubscribe:function C(I){var R=B[I.id],O=R&&R[I.type],L=O&&O[I.listener||""];if(!L){return ;}var K=mstrmojo.array,Q=mstrmojo.hash,P=typeof I.callback,M=false;if(P==="function"){var N=L.functions;if(N){K.removeItem(N,I.callback);if(!N.length){delete L.functions;if(Q.isEmpty(L.methods)){M=true;}}}}else{var J=L.methods;if(J){delete J[I.callback];if(Q.isEmpty(J)){delete L.methods;if(!L.functions||!L.functions.length){M=true;}}}}if(M){delete O[I.listener||""];if(Q.isEmpty(O)){delete R[I.type];}}},hasSubs:function G(K,J){var I=B[K],H=I&&I[J];return !!H;},clearSubscriptions:function A(I){if(!I){I="";}var P=B,M=mstrmojo.hash,H;if(P[I]){delete P[I];}var O=E[I];if(O){for(H in O){var N=P[H],L=O[H],K;if(!N){continue;}for(K in L){var J=N[K];if(!J){continue;}delete J[I];if(M.isEmpty(J)){delete N[K];}}}}}});mstrmojo.publisher.NO_SRC="NO_SRC";mstrmojo.publisher.CONNECTIVITY_CHANGED_EVENT="CONNECTIVITY_CHANGED";mstrmojo.publisher.RECONCILE_END_EVENT="RECONCILE_END";}());(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.requiresDescs(3852,3853,3854,3855,3856,3857,3858,3859,3860,3861,3862,3863,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,9379,9380,9381,9382,9383,9384,9385,6078,7899,7900,7901,6079,6081,6080,6082,7902,7902,6076,6077,7903);mstrmojo.locales=mstrmojo.provide("mstrmojo.locales",{load:function(B){var A=this;if(this.isLoaded){B();}else{mstrmojo.xhr.request("POST",mstrConfig.taskURL,{success:function(C){mstrmojo.hash.copy(mstrmojo.hash.obj2array(C),A);B();if(mstrmojo.expr){mstrmojo.expr.onLocaleUpdated();}mstrmojo.locales.isLoaded=true;},failure:function(C){alert(C.getResponseHeader("X-MSTR-TaskFailureMsg"));}},{taskId:"getLocaleInfo"});}},isLoaded:false,datetime:{MONTHNAME_SHORT:[mstrmojo.desc(3852,"Jan"),mstrmojo.desc(3853,"Feb"),mstrmojo.desc(3854,"Mar"),mstrmojo.desc(3855,"Apr"),mstrmojo.desc(3856,"May"),mstrmojo.desc(3857,"Jun"),mstrmojo.desc(3858,"Jul"),mstrmojo.desc(3859,"Aug"),mstrmojo.desc(3860,"Sep"),mstrmojo.desc(3861,"Oct"),mstrmojo.desc(3862,"Nov"),mstrmojo.desc(3863,"Dec")],MONTHNAME_FULL:[mstrmojo.desc(1956,"January"),mstrmojo.desc(1957,"February"),mstrmojo.desc(1958,"March"),mstrmojo.desc(1959,"April"),mstrmojo.desc(1960,"May"),mstrmojo.desc(1961,"June"),mstrmojo.desc(1962,"July"),mstrmojo.desc(1963,"August"),mstrmojo.desc(1964,"September"),mstrmojo.desc(1965,"October"),mstrmojo.desc(1966,"November"),mstrmojo.desc(1967,"December")],dayShortNames:["S","M","T","W","T","F","S"],dayNames:[mstrmojo.desc(9379,"Sunday"),mstrmojo.desc(9380,"Monday"),mstrmojo.desc(9381,"Tuesday"),mstrmojo.desc(9382,"Wednesday"),mstrmojo.desc(9383,"Thursday"),mstrmojo.desc(9384,"Friday"),mstrmojo.desc(9385,"Saturday")],DATEINPUTFORMATS:["M/d/yy","M/d/yyyy","MMM d, yy"],TIMEINPUTFORMATS:["h:mm a","H:mm","h:mm:ss a","H:mm:ss","h:mm:ss a z"],DATEOUTPUTFORMAT:"M/d/yyyy",TIMEOUTPUTFORMAT:"h:mm:ss a",AM_NAME:"AM",PM_NAME:"PM",TWODIGITYEARSTART:"2029"},number:{NUMBERINPUTFORMATS:{"0":"#,##0.###"},INTEGERINPUTFORMATS:{"0":"#,##0"},NUMBEROUTPUTFORMAT:"#0.##########",INTEGEROUTPUTFORMAT:"#0",DECIMALSEPARATOR:".",THOUSANDSEPARATOR:","},expression:{METRICVALIDATIONLEVEL:"0",PRESERVEWHITESPACE:false,Include:[{did:"1",n:"Include"},{did:"2",n:"Exclude"}],BranchQual:[{did:"19",n:"AND"},{did:"20",n:"OR"},{did:"21",n:"NOT"},{did:"19_21",n:"AND NOT"},{did:"20_21",n:"OR NOT"}],RootOperator:[{did:"19",n:"All selections"},{did:"20",n:"Any selection"}],ExprType:[{did:"2",n:"Qualify"},{did:"5",n:"Select"}],DimtyLevels:[{did:"1",n:"Default"},{did:"2",n:"Metric"},{did:"3",n:"Report"}],Attribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,76",n:"Contains",t:1},{did:"1,79",n:"Does not contain",t:1},{did:"1,77",n:"Begins with",t:1},{did:"1,80",n:"Does not begin with",t:1},{did:"1,78",n:"Ends with",t:1},{did:"1,81",n:"Does not end with",t:1},{did:"1,18",n:"Like",t:1},{did:"1,43",n:"Not Like",t:1},{did:"1,54",n:"Is Null",t:1},{did:"1,55",n:"Is Not Null",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1}],Metric:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,54",n:"Is Null",t:1},{did:"1,55",n:"Is Not Null",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1},{did:"2,1",n:"Highest",t:2},{did:"2,2",n:"Lowest",t:2},{did:"3,1",n:"Highest%",t:3},{did:"3,2",n:"Lowest%",t:3}],MDXAttribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1},{did:"1,44",n:"Not between",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1}],MDXMetric:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1}],SAPAttribute:[{did:"1,6",n:"Equals",t:1},{did:"1,7",n:"Does not equal",t:1},{did:"1,22",n:"In",t:1},{did:"1,57",n:"Not In",t:1},{did:"1,8",n:"Greater than",t:1},{did:"1,10",n:"Greater than or equal to",t:1},{did:"1,9",n:"Less than",t:1},{did:"1,11",n:"Less than or equal to",t:1},{did:"1,17",n:"Between",t:1}],Element:[{did:"1,22",n:"In List",t:1},{did:"1,57",n:"Not In List",t:1}]},validation:{requiredFieldError:mstrmojo.desc(6078,"This field is required."),invalidCharError:mstrmojo.desc(7899,"This field contains invalid characters for #."),invalidDateStringError:mstrmojo.desc(7900,"This field contains invalid date/time string."),invalidNumericFormatError:mstrmojo.desc(7901,"This field contains numeric value with incorrect format."),outofRangeError:mstrmojo.desc(6079,"This field should be # between ## and ###."),noLessMinError:mstrmojo.desc(6081,"This field should be # greater than or equal to ##."),noGreaterMaxError:mstrmojo.desc(6080,"This field should be # less than or equal to ###."),failRegexTestError:mstrmojo.desc(6082,"This field failed regular expression validation."),invalidValueInListError:mstrmojo.desc(7902,"One of the value (#) in this list is not valid."),integerDataType:mstrmojo.desc(6076,"an Integer value"),numericDataType:mstrmojo.desc(6077,"a Number value"),dateDataType:mstrmojo.desc(7903,"a Date/Time value")},color:{colors:[{n:"Black",v:"#000000"},{n:"Brown",v:"#993300"},{n:"Olive Green",v:"#333300"},{n:"Dark Green",v:"#003300"},{n:"Dark Teal",v:"#003366"},{n:"Dark Blue",v:"#000080"},{n:"Indigo",v:"#333399"},{n:"Grey-80%",v:"#333333"},{n:"Dark Red",v:"#800000"},{n:"Orange",v:"#FF6600"},{n:"Dark Yellow",v:"#808000"},{n:"Green",v:"#008000"},{n:"Teal",v:"#008080"},{n:"Blue",v:"#0000FF"},{n:"Blue-Grey",v:"#666699"},{n:"Grey-50%",v:"#808080"},{n:"Red",v:"#FF0000"},{n:"Light Orange",v:"#FF9900"},{n:"Lime",v:"#99CC00"},{n:"Sea Green",v:"#339966"},{n:"Aqua",v:"#33CCCC"},{n:"Light Blue",v:"#3366FF"},{n:"Violet",v:"#800080"},{n:"Grey-40%",v:"#969696"},{n:"Pink",v:"#FF00FF"},{n:"Gold",v:"#FFCC00"},{n:"Yellow",v:"#FFFF00"},{n:"Bright Green",v:"#00FF00"},{n:"Turquoise",v:"#00FFFF"},{n:"Sky Blue",v:"#00CCFF"},{n:"Plum",v:"#993366"},{n:"Grey-25%",v:"#C0C0C0"},{n:"Rose",v:"#FF99CC"},{n:"Tan",v:"#FFCC99"},{n:"Light Yellow",v:"#FFFF99"},{n:"Light Green",v:"#CCFFCC"},{n:"Light Turquoise",v:"#CCFFFF"},{n:"Pale Blue",v:"#99CCFF"},{n:"Lavender",v:"#CC99FF"},{n:"White",v:"#ffffff"}],userPalette:[{n:"#F00E0E",v:"#F00E0E"},{n:"#080000",v:"#080000"},{n:"#E81A1A",v:"#E81A1A"},{n:"#6E0909",v:"#6E0909"},{n:"#4F2828",v:"#4F2828"},{n:"#141212",v:"#141212"},{n:"#D60202",v:"#D60202"},{n:"#C40404",v:"#C40404"}]}});})();(function(){mstrmojo.requiresCls("mstrmojo.base64","mstrmojo.func","mstrmojo.hash");function decodeHeader(value){var rEncoded=/\=\?UTF-8\?B\?(.+?)\?\=/g;if(value&&value.indexOf("=?UTF-8?B?")===0){var decMsg="",result;while((result=rEncoded.exec(value))!==null){decMsg+=mstrmojo.base64.decode(result[1]);}return decMsg;}return value;}function encodeParams(params){var x=-1;var url=[];if(params){for(var p in params){url[++x]=p+"="+encodeURIComponent(params[p]);}}return url.join("&");}function appendUrlParams(method,baseUrl,params){if(method!=="GET"||!params){return baseUrl;}return baseUrl+"?"+encodeParams(params);}function sendXhr(xhr,method,baseUrl,params){method=method.toUpperCase();var app=mstrApp;m=null;if(typeof (microstrategy)!="undefined"&&microstrategy){m=microstrategy;}if(this.isTask){params=mstrmojo.addCSRFTokenToTaskParams(params);params.taskContentType=params.taskContentType||"json";params.taskEnv=params.taskEnv||"xhr";params.xts=new Date().getTime();baseUrl=baseUrl||mstrConfig.taskURL;}if(params&&!params.sessionState&&app&&app.sessionState){params.sessionState=app.sessionState;}var ptp=app.persistTaskParams||m&&m.persistParams;if(ptp){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo.hash.copy(ptp,params);}xhr.open(method,appendUrlParams(method,baseUrl,params),this.async);if(method!=="POST"){params=null;}else{params=encodeParams(params);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");}xhr.send(params);if(this.async===false){xhr.onreadystatechange();}}function createXhr(){var methods=[function(){return new XMLHttpRequest();},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}];for(var i=0,cnt=methods.length;i<cnt;i++){var xhr;try{xhr=methods[i]();}catch(e){continue;}createXhr=methods[i];return xhr;}throw new Error("mstrmojo.SimpleXHR: Could not create an XHR object.");}function evalResponse(rt){var _rtn=null;try{_rtn=eval("("+rt+")");}catch(ex){_rtn=rt&&mstrmojo.string.trim(rt);}return _rtn;}var MSI_SERVER_NAME_NOT_INITIALIZED=2147760371,MSI_INVALID_SESSION_ID=2147760372,E_MSI_USERMGR_USER_NOTFOUND=2147758245,E_MSI_CONNECT_FAILED=2147759877;function isSessionExpiredError(res){var c=res&&res.getResponseHeader("X-MSTR-TaskErrorCode");c=(c<0)?(4294967296+parseInt(c,10)):c;switch(c){case MSI_SERVER_NAME_NOT_INITIALIZED:case MSI_INVALID_SESSION_ID:case E_MSI_USERMGR_USER_NOTFOUND:case E_MSI_CONNECT_FAILED:return true;}return false;}function xhrSupportsProgress(xhr){return !!(xhr&&("upload" in xhr)&&("onprogress" in xhr.upload));}mstrmojo.SimpleXHR=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.SimpleXHR",isTask:true,async:true,init:function init(props){mstrmojo.hash.copy(props,this);},onreadystatechange:function onreadystatechange(xhr,callback){if(xhr.readyState!==4){return ;}if(typeof callback!=="object"){return ;}try{if((xhr.status===200)||(xhr.status===304)){this.response=callback.textResponse?xhr.responseText:evalResponse(xhr.responseText);if(typeof callback.success==="function"){callback.success(this.response);}}else{if(xhr.status==0){}else{var app=mstrApp,sessionExp=app&&app.onSessionExpired;if(sessionExp&&isSessionExpiredError(xhr)){sessionExp();}else{var _orig=xhr.getResponseHeader;xhr.getResponseHeader=function(name){return decodeHeader(_orig.apply?_orig.apply(xhr,[name]):_orig(name));};if(typeof callback.failure=="function"){callback.failure(xhr);}}}}}catch(ex){mstrmojo.err(ex);}finally{if(typeof callback.complete==="function"){callback.complete();}}},cancel:function(){var didCancel=false;var xhr=this.xhr;if(xhr){delete xhr.onreadystatechange;xhr.isAborted=true;if(xhr.readyState<4){xhr.abort();didCancel=true;}this.xhr=null;}return didCancel;},request:function request(method,baseUrl,callback,params,webSvrUrl,useResFeed,webSrvParams){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{var xhr=createXhr();xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}this.xhr=xhr;sendXhr.call(this,xhr,method,baseUrl,params);}}});mstrmojo.QueuedXHR=mstrmojo.declare(mstrmojo.SimpleXHR,null,{scriptClass:"mstrmojo.QueuedXHR",queue:null,requestInProgress:false,retryDelay:1,lookup:null,cancel:function(){var didCancel=this._super();while(this.queue.length){var x=this.queue.pop();var cb=x.callback;if(cb&&cb.complete){cb.complete();}}this.queue=[];this.requestInProgress--;return didCancel;},init:function init(){this.queue=[];this.lookup=[];},request:function request(method,baseUrl,callback,params,override,webSvrUrl,useResFeed,webSrvParams,useCache){if(webSvrUrl){if(useResFeed===true){if(!params){params={};}params.srcURL=appendUrlParams("GET",webSvrUrl,webSrvParams);this.request(method,baseUrl,callback,params);}else{mstrmojo.jsonp.request(webSvrUrl,params,callback);}}else{if(this.requestInProgress&&!override){this.queue.push({method:method,baseUrl:baseUrl,callback:callback,params:params});}else{if(this.requestInProgress){this.cancel();}this.requestInProgress++;var lu=null,oriParams=null;if(useCache){lu=this._searchForCacheRequest(params);oriParams=mstrmojo.hash.copy(params);}if(lu){try{if(callback.success){window.setTimeout(function(){callback.success(lu.res);},10);}}catch(ex){mstrmojo.err(ex);}finally{if(callback.complete){callback.complete();}this.advanceQueue();}}else{var xhr=this.xhr=createXhr();callback=mstrmojo.func.wrapMethods(callback,{complete:function(ths){return function(){ths.advanceQueue.call(ths);};}(this),success:function(ths){return function(){if(useCache){ths.lookup.push({params:oriParams,res:ths.response});}};}(this)});xhr.onreadystatechange=function(me,x,c){return function(){me.onreadystatechange.call(me,x,c);};}(this,xhr,callback);if(xhrSupportsProgress(xhr)&&callback.progress){xhr.onprogress=function(me,x,c){return function(evt){c.progress.call(me,evt);};}(this,xhr,callback);}sendXhr.call(this,xhr,method,baseUrl,params);}}}},advanceQueue:function advanceQueue(){this.requestInProgress--;if(this.queue.length===0){return ;}var req=this.queue.shift();this.request(req.method,req.baseUrl,req.callback,req.params,true);},_searchForCacheRequest:function _searchForCacheRequest(params){for(var i in this.lookup){if(mstrmojo.hash.equals(params,this.lookup[i]["params"])){return this.lookup[i];}}return null;}});mstrmojo.xhr=new mstrmojo.QueuedXHR();mstrmojo.jsonp={jsc:new Date().getTime(),timeToWait:20000,request:function(url,params,callback){var head=document.getElementsByTagName("head")[0]||document.documentElement,jsonp="jsonp"+(this.jsc++),script=document.createElement("script");params.jsonp=jsonp+"(@R@);";params.taskContentType="jsonp";params.taskEnv="jsonp";params.xts=new Date().getTime();window[jsonp]=function(response){if(!response){if(callback.timeout){callback.timeout();}}else{if(response.status===200){callback.success(response.content);}else{var res={status:response.status,getResponseHeader:function(name){switch(name){case"X-MSTR-TaskFailureMsg":return response.errorMsg;case"X-MSTR-TaskErrorCode":return response.errorCode;}}};if(mstrApp.onSessionExpired&&isSessionExpiredError(res)){mstrApp.onSessionExpired();}else{callback.failure(res);}}}if(window[jsonp]){if(callback.complete){callback.complete();}window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}head.removeChild(script);}};head.insertBefore(script,head.firstChild);script.src=appendUrlParams("GET",url,params);setTimeout(function(){window[jsonp]&&window[jsonp]();},this.timeToWait);}};})();