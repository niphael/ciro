mstrmojo.DPIManager={classes:[],registerClass:function registerClass(B,C,D,A){this.classes.push({c:B,d:C,s:D,v:A});},setDPI:function(){var A=mstrMobileApp.getDeviceDPI();mstrmojo.array.forEach(this.classes,function(B){B.c.prototype.layoutConfig[B.d][B.s]=B.v[A]+"px";});this.classes=[];}};(function(){function G(S,V,U){var W=this._layoutWidgets[V],Z=S.slot,X=W.f,Y=W.p,T=(X&&X[Z]!==undefined),R=(Y&&Y[Z]!==undefined);if(Z&&((!U&&T)||R)){return T?X[Z]:(W.x*parseInt(Y[Z],10)/100)+"px";}return S[(V==="h")?"height":"width"];}function Q(T,S,R){if(T.ignoreLayout){return ;}if(T.setDimensions){T.setDimensions(S,R);}else{if(T.set){T.set("height",S);T.set("width",R);}}}function I(U){var S=this.children,W,Y;for(W=0,Y=(S&&S.length)||0;W<Y;W++){var T=S[W],Z=T.slot;if(Z){var X=G.call(this,T,"h",U),a=G.call(this,T,"w",U);this.setSlotDimensions(Z,X,a);Q(T,X,a);var R=G.call(this,T,"h",U),V=G.call(this,T,"w",U);if(R!==X||V!==a){Q(T,R,V);}this.setSlotDimensions(Z,R,V);}}this.afterLayout();}function F(X,T,V){var W=X.slot,U=T&&T.a;if(!U||U[W]===undefined){return ;}var R=this[W]["offset"+V],S=U[W];if(R===S){return ;}T.x-=(R-S);U[W]=R;}function N(R){this.beforeLayout();var S=this._layoutWidgets,T=R.src;F.call(this,T,S.h,"Height");F.call(this,T,S.w,"Width");I.call(this,true);}function E(T,W){if(!T){return null;}var R=this.children,d=W.toLowerCase(),X=parseInt(this[d],10),a,b,V,S,Y,Z,U,f,c;for(c in T){f=T[c];if(f.match(/px$/)){X-=parseInt(f,10);a=a||{};a[c]=f;}else{if(f.match(/\%$/)){b=b||{};b[c]=f;}else{V=V||{};V[c]=f;}}}if(V&&b){for(Y=0,Z=(R&&R.length)||0;Y<Z;Y++){U=R[Y];c=U.slot;if(U.slot&&V[c]&&!U.ignoreLayout){S=S||{};if(U.hasRendered){S[c]=this[U.slot]["offset"+W];X-=S[c];}else{S[c]=0;U.attachEventListener((U instanceof mstrmojo.Container)?"childrenRendered":"renderComplete",this.id,N);}}}}return{f:a,p:b,a:S,x:X};}mstrmojo._HasLayout={_mixinName:"mstrmojo._HasLayout",height:"auto",width:"auto",beforeLayout:mstrmojo.emptyFn,afterLayout:mstrmojo.emptyFn,layoutConfig:null,init:function O(R){this._super(R);this.layoutConfig=mstrmojo.hash.clone(this.layoutConfig);},preBuildRendering:function M(){var T=this.cssText||"";var R=this.height;if(R&&R!=="auto"){T+="height:"+this.height+";";}var S=this.width;if(S&&S!=="auto"){T+="width:"+this.width+";";}this.cssText=T;return(this._super)?this._super():true;},postBuildRendering:function B(){this.doLayout();return this._super();},doLayout:function A(){var R=this.layoutConfig;if(!R){return ;}this.beforeLayout();this._layoutWidgets={h:E.call(this,R.h,"Height"),w:E.call(this,R.w,"Width")};I.call(this,false);},browserResized:function L(R){this.setDimensions(R.h,R.w);return true;},onwidthChange:function P(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.width=this.width;this.doLayout();},onheightChange:function D(){var R=this.domNode;if(!R||!this.layoutConfig){return ;}R.style.height=this.height;this.doLayout();},adjustParentDimensions:function C(){var S=this.parent,R=S&&S._layoutWidgets;if(R){F.call(S,this,R.h,"Height");F.call(S,this,R.w,"Width");}},setDimensions:function K(T,S){if(this.height!==T||this.width!==S){this.height=T;this.width=S;var R=this.domNode;if(R){R.style.height=T;R.style.width=S;this.doLayout();}return true;}return false;},setSlotDimensions:function H(U,T,S){var R=this[U]&&this[U].style;if(!R){return ;}if(T!==undefined&&R.height!==T){R.height=T;}if(S!==undefined&&R.width!==S){R.width=S;}}};mstrmojo._HasLayout.getSlotSize=function J(U,V){var S=U&&U.prototype.layoutConfig;if(S){var T=S.h,R=S.w;return{h:(T&&T[V])||undefined,w:(R&&R[V])||undefined};}return null;};}());(function(){mstrmojo._IsPopup={visible:false,opener:null,onOpen:null,onClose:null,open:function B(E,D){if(this.updatePopupConfig){this.updatePopupConfig(D,E);}else{if(D){for(var C in D){this.set(C,D[C]);}}}this.set("opener",E);if(!this.hasRendered){this.render();}if(this.nudge){this.domNode.style.top="-10000px";}this.set("visible",true);if(this.nudge){this.nudge();}if(this.onOpen){this.onOpen();}},close:function A(C){if(this.onClose){this.onClose(C);}this.set("visible",false);this.set("opener",null);}};})();(function(){mstrmojo.boxmodel={rangeIntersect:function C(H,F,G,E){if(H<G){return G<=F;}else{if(H>G){return H<=E;}else{return true;}}},px2Inches:function A(F,E){E=parseInt(E,10);return parseFloat((E/F.zf/F.dpi).toFixed(4),10);},offset:function D(G,F){var I=G,E=0,H=0;while(G){E+=G.offsetLeft;H+=G.offsetTop;G=G.offsetParent;if(G===F){break;}}for(e=I&&I.parentNode;e&&e!=F;e=e.parentNode){if(e.scrollTop){H-=e.scrollTop;}if(e.scrollLeft){E-=e.scrollLeft;}}return{left:E,top:H};},convert2px:function B(H,F){if(!/px$/.test(F)){var E=document.createElement("img"),G;E.style.zIndex=-1;E.style.left=F;H.appendChild(E);G=E.style.pixelLeft;H.removeChild(E);return G+"px";}else{return F;}}};})();mstrmojo.LoadedExternalJSURLs={};function LoadScriptsExternalJSCallback(){mstrmojo.LoadedExternalJSURLs[mstrmojo._LoadsScript.esScripts.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(mstrmojo._LoadsScript.esScripts,mstrmojo._LoadsScript.callback,mstrmojo._LoadsScript.esScritsContext);mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=false;}mstrmojo._LoadsScript=mstrmojo.provide("mstrmojo._LoadsScript",{_meta_usesSuper:false,requiresMethod:function rqMth(B){if(!B){return ;}if(typeof (this[B])==="function"){return true;}else{var A=this[B]||(this.methods&&(this.methods[B]||this.methods["*"]));if(typeof (A)==="string"){this.requiresCls(A);return typeof (this[B])==="function";}return false;}},requiresCls:function req(mixins,callback){if(mixins){if(typeof (mixins)=="string"){mixins=[mixins];}mstrmojo.requiresCls.apply(mstrmojo,mixins);var p=this.constructor.prototype,pm=p.mixins;if(!pm){p.mixins={};pm=p.mixins;}var mx=mstrmojo.mixin;for(var i=0,len=mixins.length;i<len;i++){var fqcn=mixins[i];if(!pm[fqcn]){var m=eval(mixins[i]);mx(m,p);pm[fqcn]=true;if(m.__onmixin__){m.__onmixin__.apply(this,[]);}}}if(callback){callback.apply(this,[]);}}},requiresContrib:function reqCb(C,B){var A=this[C];if(A){var E,D=false;if(typeof (A)=="string"){E=mstrmojo.registry.ref(A);this[C]=E;D=true;}else{E=A;}if(E&&(D||B)){E.parent=this;if(E.startup){E.startup();}}return E;}return null;},requiresExternalScripts:function requiresES(E,F,B){if(E&&E instanceof Array){if(E.length==0){F&&F.call(B);return ;}if(E[0].forceReload&&E[0].forceReload==false&&mstrmojo.LoadedExternalJSURLs[E[0].url]){E.splice(0,1);return this.requiresExternalScripts(E,F,B);}var A=document.createElement("script"),C=!!document.all;A.type="text/javascript";A.src=E[0].url;if(!E[0].callbackParamName){if(C){A.onreadystatechange=function(){if(A.readyState=="loaded"||A.readyState=="complete"){A.onreadystatechange=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}}};}else{A.onload=function(){A.onload=null;if(E.length>1){mstrmojo.LoadedExternalJSURLs[E.splice(0,1)[0].url]=true;mstrmojo._LoadsScript.requiresExternalScripts(E,F);}else{if(E.length==1){mstrmojo.LoadedExternalJSURLs[E[0].url]=true;if(F){F.call(B);}}}};}}else{if(E[0].callbackParamName.length!=0){if(mstrmojo._LoadsScript.ExternalJSCallbackIsBusy&&mstrmojo._LoadsScript.ExternalJSCallbackIsBusy==true){var D=this;window.setTimeout(function(){D.requiresExternalScripts(E,F,B);},500);return ;}mstrmojo._LoadsScript.ExternalJSCallbackIsBusy=true;A.src+="&"+E[0].callbackParamName+"=LoadScriptsExternalJSCallback";mstrmojo._LoadsScript.esScripts=E;mstrmojo._LoadsScript.callback=F;mstrmojo._LoadsScript.esScritsContext=B;}}document.getElementsByTagName("head")[0].appendChild(A);}}});(function(){mstrmojo._HasTooltip=mstrmojo.provide("mstrmojo._HasTooltip",{tooltip:"",richTooltip:null,useRichTooltip:false,tooltipNode:null,postBuildRendering:function(){var B;if(this._super){B=this._super();}if(this.useRichTooltip){var D=this.tooltipNode||this.domNode,C=mstrmojo.dom,A=D&&D.getAttribute("title");if(A){D.setAttribute("title","");}if(!this._ontooltipover){var E=this.id;this._ontooltipover=function(G){var F=mstrmojo.all[E];F.showTooltip(G,self);};this._ontooltipout=function(G){var F=mstrmojo.all[E];F.hideTooltip(G,self);};}C.attachEvent(D,"mouseover",this._ontooltipover);C.attachEvent(D,"mouseout",this._ontooltipout);}return B;},showTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.open(this,B,A);},hideTooltip:function(B,A){mstrmojo.requiresCls("mstrmojo.tooltip");mstrmojo.tooltip.close();},unrender:function(A){var C=this.tooltipNode||this.domNode,B=mstrmojo.dom;if(C&&this._ontooltipover){B.detachEvent(C,"mouseover",this._ontooltipover);}if(C&&this._ontooltipout){B.detachEvent(C,"mouseout",this._ontooltipout);}if(this._super){this._super(A);}}});})();(function(){var R=Math;function z(G,b){return b||(G||window).event;}var Aa=!!document.all,q=navigator.userAgent,g=!Aa&&!!q.match(/Firefox/),m=0,r=!!q.match(/Android/),AU=!!q.match(/iPad/),AO=!!document.createTouch||r,p=!!q.match(/PlayBook/),S=!!q.match(/Windows Phone/),V=Aa&&!!q.match(/MSIE 10/),Ab=!Aa&&!!q.match(/Trident.*rv/),s=Aa&&!V,f=g?"-moz-":Aa?"":"-webkit-",AF=g?"Moz":V?"":Aa?"ms":"webkit",AM=(V?"t":"T"),AI=AF+AM+"ransition",AY=AV(),AR=AC(),y=W(),A=Q(),n=h();function AV(){return AF+AM+"ransform";}function AC(){return AI+"Property";}function W(){return AI+"Duration";}function Q(){return(V||g)?"transitionend":"webkitTransitionEnd";}function h(){return AF+"BoxShadow";}function AL(){if(!m&&g){var G=q.match(/.*Firefox\/([\d|\.]*).*/);if(G){m=parseFloat(G[1],10);}}return m;}function AZ(){var Ad=0,Ah=0,Ae=window,Af=document,G=Af.body,Ag=Af.documentElement;if(typeof Ae.pageYOffset=="number"){Ah=Ae.pageYOffset;Ad=Ae.pageXOffset;}else{if(G&&(G.scrollLeft||G.scrollTop)){Ah=G.scrollTop;Ad=G.scrollLeft;}else{if(Ag&&(Ag.scrollLeft||Ag.scrollTop)){Ah=Ag.scrollTop;Ad=Ag.scrollLeft;}}}return{x:Ad,y:Ah};}function AD(G){G=G||0;G=String(G);return((G.indexOf("%",0))!=-1)?G:(G+"px");}function AJ(d,Ag,Af,Ae,Ad){if(!mstrmojo.dom.isWinPhone){Ae=(Ae||false||this.isHWAccelerated);}else{Ae=false;}var b=Ad+(Ae?"3d":"")+"(",G=Ae?(","+Af+")"):")";return b+d+","+Ag+G;}var L=1,AS=2,Y=3,D=4,K=5;function v(Ag,Af,Aj){var Ai=Ag.style,b=Ai.display,Ae=this.windowDim(),Ad=AZ();Ai.display="block";var Ah=Ae.w-Ag.clientWidth,Ak=Ae.h-Ag.clientHeight,G={4:0,5:Ah,3:Ah/2},d={1:0,3:Ak/2,2:Ak};Ai.left=G[Af]+Ad.x+"px";Ai.top=d[Aj]+Ad.y+"px";Ai.display=b;}mstrmojo.Enum_Keys={BACKSPACE:8,TAB:9,ENTER:13,CTRL:17,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46};mstrmojo.dom=mstrmojo.provide("mstrmojo.dom",{userAgent:q,isIE:Aa,isIE6:Aa&&!!q.match(/MSIE 6/),isIE7:Aa&&!!q.match(/MSIE 7/),isIE8:Aa&&!!q.match(/MSIE 8/),isIE9:Aa&&!!q.match(/MSIE 9/),isIE10:V,isIEW3C:Ab,isNSIE:Aa&&!V,isDXIE:s,isFF:g,isWK:!!q.match(/AppleWebKit/),isSafari:!!q.match(/Safari/)&&!q.match(/Chrome/),isHWAccelerated:!r,isAndroid:r,isIPad:AU,isPlayBook:p,isWinPhone:S,supportsTouches:AO,TOUCHSTART:AO?"touchstart":"mousedown",TOUCHMOVE:AO?"touchmove":"mousemove",TOUCHEND:AO?"touchend":"mouseup",TOUCHCANCEL:AO?"touchcancel":"",RESIZE:AO?"orientationchange":"resize",CSS3_PREFIX:f,CSS3_BOXSHADOW:n,CSS3_TRANSFORM:AY,CSS3_TRANSITION:AI,CSS3_TRANSITION_PROPERTY:AR,CSS3_TRANSITION_DURATION:y,CSS3_TRANSITION_END:A,cssFeatures:{GRADIENTS:"gd",ROUND_CORNERS:"rc",TEXT_ROTATION:"tr",DROP_SHADOW:"sh"},supports:function B(b){var G=this.isFF&&AL();switch(b){case this.cssFeatures.GRADIENTS:return(this.isIE||this.isIEW3C||this.isWK||G>=3.6||this.isWinPhone);case this.cssFeatures.ROUND_CORNERS:return(this.isWK||this.isFF||this.isWinPhone||this.isIE10);case this.cssFeatures.TEXT_ROTATION:case this.cssFeatures.DROP_SHADOW:return(this.isIE||this.isWK||G>=3.5||this.isWinPhone||this.isIE10||this.isIEW3C);}return false;},replace:function F(d,G){if(!d||!G){return ;}var b=d.parentNode;if(b){b.replaceChild(G,d);}},attachEvent:function u(d,b,Ad,G){if(d.addEventListener){return d.addEventListener(b,Ad,!!G);}else{return d.attachEvent("on"+b,Ad);}},detachEvent:function AP(d,b,Ad,G){if(!d){return ;}if(d.removeEventListener){d.removeEventListener(b,Ad,!!G);}else{d.detachEvent("on"+b,Ad);}},attachOneTimeEvent:function Z(Ad,b,Ae,G){var d=function(Af){Ae(Af);mstrmojo.dom.detachEvent(this,b,d,G);};this.attachEvent(Ad,b,d,G);Ad=null;return d;},captureDomEvent:function AH(Af,Ad,b,Ae,d){var G=mstrmojo.all[Af];if(G){G.captureDomEvent(Ad,b,Ae,d);}},translate:function O(d,b,Af,Ae,G,Ad){G=(G&&" "+G)||"";d.style[((mstrmojo.dom.isWinPhone||mstrmojo.dom.isIE9||mstrmojo.dom.isIE10)?"ms":"webkit")+"Transform"]=this.createTranslateString(b,Af,Ae,Ad)+G;},createTranslateString:function T(G,Ad,d,b){G=AD(G);Ad=AD(Ad);d=AD(d);return AJ(G,Ad,d,b,"translate");},createScaleString:function x(G,Ad,d,b){G=G||0;Ad=Ad||0;d=d||0;return AJ(G,Ad,d,b,"scale");},_bufferSize:200,_bufferConnects:{},attachBufferedEvent:function E(d,G,Ad,Af){var b=d.id+"-"+G,Ae=this._bufferConnects[b];if(!Ae){Ae=this._bufferConnects[b]={elId:d.id,eventName:G,timer:null,bufferSize:Af,listeners:[],callback:function(Ag){mstrmojo.dom._callback(Ag,mstrmojo.global,b);return true;}};this.attachEvent(d,G,Ae.callback);}Ae.listeners.push(Ad);},_callback:function N(Ae,G,d){if(!Ae){Ae=G.event;}var Ad=this._bufferConnects[d],Af=Ad&&Ad.timer;if(Ad&&!Af){var b=(Ad.bufferSize===null)?this._bufferSize:Ad.bufferSize;if(Ad.bufferSize){Ad.timer=G.setTimeout(function(){mstrmojo.dom.updateBuffers(d);},b);}else{mstrmojo.dom.updateBuffers(d);}}},updateBuffers:function AT(Ad){var Ae=this._bufferConnects[Ad],b=Ae&&Ae.listeners;for(var d=0,G=b&&b.length||0;d<G;d++){b[d]();}if(Ae&&Ae.timer){delete Ae.timer;}},detachBufferedEvent:function a(Af,d,Ag){if(!Af){return ;}var Ae=Af.id+"-"+d,Ah=this._bufferConnects[Ae],b=Ah&&Ah.listeners,G=(b&&b.length)||0;if(G){for(var Ad=G-1;Ad>-1;Ad--){if(b[Ad]==Ag){b.splice(Ad,1);}}if(!b.length){this.detachEvent(Af,d,Ah.callback);delete this._bufferConnects[Ae];if(Ah.timer){mstrmojo.global.clearTimeout(Ah.timer);}}}},eventTarget:function AA(G,b){b=z(G,b);return b.target||b.srcElement;},ctrlKey:function AW(G,b){return z(G,b).ctrlKey;},shiftKey:function AB(G,b){return z(G,b).shiftKey;},getButton:function AN(G,b){return((z(G,b)).button==2)?2:1;},getMousePosition:function i(Af,Ae){Ae=Ae||window;var Ad,Ai;if(mstrmojo.dom.isIE){Af=Af||Ae.event;var Ag=document,G=Ag.body,Ah=Ag.documentElement;Ad=Af.clientX+G.scrollLeft+(Ah.scrollLeft||0);Ai=Af.clientY+G.scrollTop+(Ah.scrollTop||0);}else{Ad=Af.pageX;Ai=Af.pageY;}return{x:Ad,y:Ai};},position:function(b,d){var Af={x:0,y:0};if(b&&b.getBoundingClientRect){try{Af=b.getBoundingClientRect();}catch(Ae){Af={left:0,top:0,right:0,bottom:0,height:0,width:0};}Af={x:Af.left,y:Af.top,w:Af.right-Af.left,h:Af.bottom-Af.top};if(this.isIE6||this.isIE7){var G=b.ownerDocument;if(G){var Ah=G.documentElement,Ag=Ah.getBoundingClientRect();Af.x-=Ag.left;Af.y-=Ag.top;}}}if(d){var Ad=AZ();Af.x+=Ad.x;Af.y+=Ad.y;}return Af;},delta:function J(d,G){G=G||document.body;var b=this.position(d),Ad=this.position(G);return{x:Math.round(b.x-Ad.x),y:Math.round(b.y-Ad.y)};},windowDim:function Ac(){var G=0,Ad=0,Ae=window,Af=document,Ag=Af.documentElement,b=Af.body;if(typeof (Ae.innerWidth)=="number"){G=Ae.innerWidth;Ad=Ae.innerHeight;}else{if(Ag&&(Ag.clientWidth||Ag.clientHeight)){G=Ag.clientWidth;Ad=Ag.clientHeight;}else{if(b&&(b.clientWidth||b.clientHeight)){G=b.clientWidth;Ad=b.clientHeight;}}}return{w:G,h:Ad};},center:function AG(G){v.call(this,G,Y,Y);},bottomCenter:function H(G){v.call(this,G,Y,AS);},clearBrowserHighlights:function P(G){G=G||self;if(Aa){var Ag=G.document,Af=Ag&&Ag.selection,Ad=Af&&Af.empty;if(Ad){try{Af.empty();}catch(d){}}}else{var b=G.getSelection,Ae=b&&G.getSelection();if(Ae&&!Ae.isCollapsed){if(Ae.empty){Ae.empty();}else{if(Ae.removeAllRanges){Ae.removeAllRanges();}}}}},findAncestorByAttr:function AK(Ae,d,b,G){var Af=b?Ae:Ae&&Ae.parentNode;while(Af&&(Af!=G)){var Ad=Af.getAttribute&&Af.getAttribute(d);if(Ad!=null){return{node:Af,value:Ad};}Af=Af.parentNode;}return null;},findAncestorByName:function AX(d,Af,b,G){Af=Af&&Af.toLowerCase();var Ad=b?d:d&&d.parentNode;while(Ad&&(Ad!=G)){var Ae=Ad.nodeName;if(Ae&&(Ae.toLowerCase()==Af)){return Ad;}Ad=Ad.parentNode;}return null;},contains:function M(Ad,Ae,b,G){var d=Ae;if(!b){d=d.parentNode;}while(d){if(d==Ad){return true;}if(d===G){break;}d=d.parentNode;}return false;},preventDefault:function AQ(G,b){if(!b){b=G.event;}if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}},stopPropogation:function k(G,b){if(!b){b=G.event;}if(b.stopPropogation){b.stopPropogation();}else{b.cancelBubble=true;}},firstTouch:function C(G,b){return b&&b.touches&&b.touches.length?b.touches[0]:(b||G.event);},firstChangedTouch:function I(G,b){return b&&b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:(b||G.event);},isLandscape:function X(){return !this.supportsTouches||(Math.abs(window.orientation)===90);},findWidget:function(G){while(G){var b=G.mstrmojoId;if(b!=null){return mstrmojo.all[b];}G=G.parentNode;}return null;},setCaret:function(G,d){if(G.setSelectionRange){G.focus();G.setSelectionRange(d,d);}else{if(G.createTextRange){var b=G.createTextRange();b.move("character",d);b.select();}}}});var AE=mstrmojo.dom,c=window,l=document,U=l&&l.documentElement,o=l&&l.body;if(c.innerWidth){AE.getHorizontalScroll=function(){return c.pageXOffset;};AE.getVerticalScroll=function(){return c.pageYOffset;};}else{if(U&&U.clientWidth){AE.getHorizontalScroll=function(){return U.scrollLeft;};AE.getVerticalScroll=function(){return U.scrollTop;};}else{if(o.clientWidth){AE.getHorizontalScroll=function(){return o.scrollLeft;};AE.getVerticalScroll=function(){return o.scrollTop;};}}}})();(function(){var L=/\{\@([^\}]+)\}/gm,H=/\</gm,P=/\>/gm,D=/\S/,O=["$","^","=","!",":","/",".","*","+","?","|","(",")","[","]","{","}","\\"],E=new RegExp("(\\"+O.join("|\\")+")","g"),Q={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;",u0009:"&#x09;","\n":"&#x0A;","\r":"&#x0D;",'"':"&quot;"},C={"&":{k:"&(?!#?\\w+;)",v:"&amp;"},"<":"&lt;",">":"&gt;"," ":"&nbsp;","\n":"<br/>","\r":"&nbsp;&nbsp;&nbsp;&nbsp;","'":"&#039;",'"':"&quot;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&nbsp;":" ","<br/>":"\n","&nbsp;&nbsp;&nbsp;&nbsp;":"\r","&#039;":"'","&quot;":'"'};var J=function(S){if(S==null){return"null";}var T=typeof (S);if(T!="object"){return T;}else{if(S.length===undefined){return"object";}else{return"array";}}};var R={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};mstrmojo.string=mstrmojo.provide("mstrmojo.string",{multiReplace:function F(T,V){if(!T){return"";}var U=[];for(var S in V){U.push(S.k||S);}return T.replace(new RegExp(U.join("|"),"g"),function(W){var X=V[W];return X.v||X;});},trim:function N(S){return(S&&S.replace)?S.replace(/^\s+/,"").replace(/\s+$/,""):S;},ellipsize:function A(U,T){var S=this.trim(U.substr(0,(T||1)-1));if(S!==U){S+="&hellip;";}return S;},isEmpty:function I(S){return(S==null)||!(D.test(S));},regEscape:function M(S){return S.replace(E,"\\$1");},encodeXMLAttribute:function(S){return mstrmojo.string.multiReplace(S,Q);},encodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,C);},decodeHtmlString:function(S){return mstrmojo.string.multiReplace(S,K);},htmlAngles:function(S){S=String(S);if(S!=null){return S.replace(H,"&lt;").replace(P,"&gt;");}return S;},apply:function G(S,T){if(!S){return"";}return S.replace(L,function U(V,W){return(W in T&&T[W]!==null)?T[W]:"";});},json2xml:function(f,b,V){if(!(b instanceof Array)){b=[b];}var T=V&&V.isSerializable,Z=(V.convertBoolean===false)?false:true;var c=[],S=[],U,g,l;for(var Y=0,h=b.length;Y<h;Y++){var k=b[Y];for(U in k){if(T){var a=T(U,b,Y);if(a!==true){if(a===false){continue;}else{if(a.att){c.push(a.att);}if(a.child){S.push(a.child);}continue;}}}g=k[U];l=J(g);switch(l){case"array":S.push("<"+U+">");for(var W=0,X=g.length;W<X;W++){var d=V.getArrItemName(U,g,W)||W;S.push(this.json2xml(d,g[W],V));}S.push("</"+U+">");break;case"object":S.push(this.json2xml(U,g,V));break;case"string":c.push(U+'="'+mstrmojo.string.encodeXMLAttribute(g)+'"');break;case"boolean":c.push(U+'="'+((Z)?(g?"-1":"0"):g)+'"');break;case"null":if(!V.skipNull){c.push(U+'="'+V.nullValue+'"');}break;default:c.push(U+'="'+g+'"');break;}}}return"<"+f+" "+c.join(" ")+">"+S.join("")+"</"+f+">";},escape4HTMLText:function B(Z){if(!Z||!Z.replace){return Z;}var W=/\"/gm;var U="&quot;";var a=/\&/gm;var Y="&amp;";var X=/\</gm;var S="&lt;";var V=/\>/gm;var T="&gt;";return Z.replace(a,Y).replace(W,U).replace(X,S).replace(V,T);},parseUri:function(W,T){T=T||R;var S=T.parser[((T.strictMode)?"strict":"loose")].exec(W),V={},U=14;while(U--){V[T.key[U]]=S[U]||"";}V[T.q.name]={};V[T.key[12]].replace(T.q.parser,function(Y,X,Z){if(X){V[T.q.name][X]=Z;}});return V;}});})();(function(){mstrmojo.requiresCls("mstrmojo.string");var D=mstrmojo.string,F=1;mstrmojo.ListBuilder=mstrmojo.provide("mstrmojo.ListBuilder",{newContext:function E(G){var I=G.itemMarkupFunction;if(!I){var H=G.itemMarkup||(G.itemField&&'<div class="mstrmojo-text">{@'+G.itemField+"}</div>");I=H?function(K,J,L){return D.apply(H,K);}:null;}return{itemStatus:[],itemFunc:I};},build:function A(I,H,J,G){H.itemStatus[G]=F;return H.itemFunc(J,G,I);},onadd:function B(I,G,H){if(G){mstrmojo.array.insert(G.itemStatus,H.index,new Array(H.value.length));}},onremove:function C(I,G,H){if(G){G.itemStatus.splice(H.index,H.value.length);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.array","mstrmojo.string");var F=mstrmojo.dom,L=mstrmojo.string;mstrmojo.css=mstrmojo.provide("mstrmojo.css",{DISPLAY_TABLE:F.isNSIE?"block":"table",DISPLAY_CELL:F.isNSIE?"block":"table-cell",MINHEIGHT:F.isIE6?"height":"minHeight",addClass:function H(V,U){if(!V){return ;}if(U.constructor!==Array){U=[U];}var R=V.className||"",X=" "+R+" ",S=false;for(var T=0,Q=U.length;T<Q;T++){var W=U[T];if(!X.match(new RegExp("\\s"+W+"\\s"))){R+=" "+W;S=true;}}if(S){V.className=L.trim(R);}},removeClass:function M(U,T){if(!U){return ;}if(T.constructor!==Array){T=[T];}var R=" "+(U.className||"")+" ";for(var S=0,Q=T.length;S<Q;S++){R=R.replace(new RegExp("\\s"+T[S]+"\\s","g")," ");}U.className=L.trim(R);},addWidgetCssClass:function G(T,R){var Q=T.cssClass,S=(Q&&Q.split(" "))||[];if(R.constructor!==Array){R=[R];}T.cssClass=S.concat(R).join(" ");},toggleClass:function N(S,R,Q){if(Q){this.addClass(S,R);}else{this.removeClass(S,R);}},applyShadow:function D(U,V,T,S,Q){var R=U.style;if(F.isDXIE){R.filter+="progid:DXImageTransform.Microsoft.dropshadow(OffX="+V+"px, OffY="+T+"px, Color='"+Q+"')";}else{if(F.isFF||F.isWK||F.isIE10){R[F.CSS3_BOXSHADOW]=V+"px "+T+"px "+S+"px "+Q;}}},removeShadow:function O(R){var Q=R.style;if(F.isDXIE){}else{if(F.isFF||F.isWK||F.isIE10){Q[F.CSS3_BOXSHADOW]="";}}},setOpacity:function A(R,T){if(F.isDXIE&&!F.isIE9){var U=R.currentStyle.filter;var Q=null;if(U.length>0){Q=R.filters["DXImageTransform.Microsoft.Alpha"];}if(Q){Q.opacity=T;Q.enabled=(T!=100);}else{if(T<100){var S="progid:DXImageTransform.Microsoft.Alpha(Opacity="+T+")";R.style.filter=(U?U:"")+" "+S;}}}else{R.style.opacity=T/100-(F.isIE9?0.00001:0);}},buildGradient:function C(R,T,Q){if(F.supports(F.cssFeatures.GRADIENTS)){var S={};if(F.isDXIE){S.n="filter";S.v="progid:DXImageTransform.Microsoft.Gradient(GradientType="+R+",StartColorStr='"+T+"',EndColorStr='"+Q+"')";}else{if(F.isFF){S.n="background-image";S.v="-moz-linear-gradient("+((R===0)?"top":"left")+","+T+","+Q+")";}else{if(F.isWK){S.n="background";S.v="-webkit-gradient(linear,"+((R===0)?"left top, left bottom":"left top, right top")+",from("+T+"),to("+Q+"))";}else{if(F.isIE10||F.isIEW3C){S.n="background";S.v="linear-gradient("+((R===0)?"to bottom":"to right")+","+T+","+Q+")";}}}}return S;}return null;},buildRoundCorners:function K(V,U){if(F.supports(F.cssFeatures.ROUND_CORNERS)){var R=V+"px";var X=R+((U)?" "+R+" 0 0":"")+";";if(F.isFF){return"-moz-border-radius:"+X;}else{if(F.isWinPhone||F.isIE10){return"border-radius:"+X;}else{if(F.isWK){if(!U){return"-webkit-border-radius:"+R+";";}else{var W=["left","right"],T=[],Q=-1;for(var S=0;S<2;S++){T[++Q]="-webkit-border-top-"+W[S]+"-radius:"+R;T[++Q]="-webkit-border-bottom-"+W[S]+"-radius:0";}return T.join(";");}}}}}return"";},getBorderWidthsOrPaddings:function E(R,U){var V={t:0,r:0,b:0,l:0,h:0,w:0};if(!R){return V;}var S=R.split(" "),Q=S.length;for(var T=0;T<Q;T++){S[T]=Math.round(U*parseFloat(S[T],10)/72);}if(Q<4){if(Q===1){S[1]=S[2]=S[3]=S[0];}else{S[3]=S[1];if(Q===2){S[2]=S[0];}}}V.t=S[0];V.r=S[1];V.b=S[2];V.l=S[3];V.h=V.t+V.b;V.w=V.l+V.r;return V;},getBorderWidths:function I(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},getPaddings:function J(R,Q){return this.getBorderWidthsOrPaddings(R,Q);},parkAfterFade:function P(Q){var R=Q.target.style;if(R.opacity==0){R.left="-10000px";window.setTimeout(function(){R.opacity=0.99;},0);return true;}return false;},getStyleValue:function B(Q,S){if(Q.currentStyle){S=S=="float"?"styleFloat":S;value=Q.currentStyle[S];}else{if(document.defaultView&&document.defaultView.getComputedStyle){S=S=="float"?"cssFloat":S;var R=document.defaultView.getComputedStyle(Q,null);value=R?R[S]:null;}}return value;},getComputedStyle:function(Q,S){var R=(window.getComputedStyle)?function(T,U){return window.getComputedStyle(T,U||null);}:function(T){return T.currentStyle||{};};mstrmojo.css.getComputedStyle=R;return R(Q,S);}});})();(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom");var M=mstrmojo.string,T=mstrmojo.dom;var N=mstrmojo.useFrames?null:document.createElement("span");var B=/\mstrAttach\:([\w\,]+)/g;var R;function O(X){if(R===undefined){R=(mstrApp!==undefined&&mstrApp.isTouchApp&&mstrApp.isTouchApp())||false;}return X.replace(B,function W(c,f){var Z=f.split(","),a=[],Y=Z.length,b;for(b=0;b<Y;b++){var d=Z[b];if(d){if(R){if(d.indexOf("mouse")>-1){continue;}else{if(d==="click"){d="touchend";}}}a.push("on"+d+"=\"mstrmojo.dom.captureDomEvent('{@id}','"+d+"', self, event)\"");}}return a.join(" ");});}var P="preBuildRendering",D="buildRendering",A="postBuildRendering";function E(Y){var X=Y.markupString;if(X.match(/mstrAttach:/)){X=O(X);if(Y.markupString===Y.constructor.prototype.markupString){Y.constructor.prototype.markupString=X;}}var W=M.apply(X,Y);if(W){if(mstrmojo.useFrames){var Z=(Y.domNode&&Y.domNode.ownerDocument)||self.document;if(!N||N.ownerDocument!==Z){N=Z.createElement("span");}}N.innerHTML=W;var a=N.firstChild;a.mstrmojoId=Y.id;return a;}return null;}function J(Y){var X=Y.markupSlots,W,Z;if(X){W={};for(Z in X){W[Z]=X[Z].apply(Y,[]);}}return W;}mstrmojo._HasMarkup=mstrmojo.provide("mstrmojo._HasMarkup",{onRender:mstrmojo.emptyFn,onUnRender:mstrmojo.emptyFn,render:function G(){if((this[P]&&this[P]()===false)||(this[D]()===false)||(this[A]&&this[A]()===false)){return false;}this.hasRendered=!!this.domNode;this.onRender();var W="renderComplete";if(mstrmojo.publisher.hasSubs(this.id,W)){this.raiseEvent({name:W});}return true;},buildDom:function S(){return E(this);},preBuildRendering:mstrmojo.emptyFn,buildRendering:function C(){var W=this.domNode,X=this.buildDom();this.domNode=X;if(this.postBuildDom){this.postBuildDom();}if(this.slotNames){this.removeSlots(this.slotNames);}this.addSlots(J(this));this.paint();if(X){var a=W;if(!a){a=this.placeholder;if(a){if(typeof a==="string"){a=document.getElementById(a);}delete this.placeholder;}}if(a){T.replace(a,X);}}var Y="onchildRenderingChange",Z=this.parent;if(Z&&Z[Y]){Z[Y](this);}return true;},postBuildRendering:mstrmojo.emptyFn,unrender:function Q(Y){if(this.hasRendered){if(!Y){try{var W=this.domNode;if(W.parentNode){W.parentNode.removeChild(W);}if(mstrmojo.dom.isIE&&W.outerHTML!=="undefined"){W.outerHTML="";}}catch(X){}}this.domNode=null;this.removeSlots(this.slotNames);this.hasRendered=false;this.onUnRender();}},paint:function V(){var X=this.markupMethods;if(!X){return ;}var a=this,b=function(h){var d=X[h];if(d){try{d.apply(a,[true]);}catch(g){throw new Error(["Error in markup method.","Widget id: "+a.id,"Method name: "+h,"Err: "+g.message].join("\n\n"));}}};var Z=X.sequence,W,Y,c;if(Z){W=Z.length||0;for(Y=0;Y<W;Y++){b(Z[Y]);}}else{for(c in X){b(c);}}},refresh:function F(W){if(this.hasRendered){var X=this.domNode;this.unrender(true);this.placeholder=X;if(W){W();}this.render();}},set:function L(Z,W){this._super(Z,W);if(this.domNode){var X=this.markupMethods,Y=X&&X["on"+Z+"Change"];if(Y){Y.apply(this);}}return this;},slotNames:null,addSlots:function I(X){var W=this.slotNames,Y;if(!W){W={};this.slotNames=W;}for(Y in X){this[Y]=X[Y];W[Y]=true;}},removeSlots:function K(W){if(W){var X=this.slotNames,Y;for(Y in W){delete this[Y];if(X){delete X[Y];}}}},captureDomEvent:function H(Y,W,Z,X){if(this.enabled!==false){this.raiseEvent({name:Y,hWin:W,e:Z||W.event,config:X});}},playEffect:function U(X){var W=this[X];if(W&&W.constructor===Object){W=mstrmojo.insert(mstrmojo.hash.clone(W));W.widget=this;this[X]=W;}if(W){W.play();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.dom");var A=mstrmojo.dom;function E(J,I){var G=[];if(J){for(var F in J){var H=Number(F);if(H>=I){G.push(H);}}}G.sort(mstrmojo.array.numSorter);return G;}mstrmojo.ListSelector=mstrmojo.provide("mstrmojo.ListSelector",{premousedown:function D(L,F,N){var I=N.hWin,J=N.e,G=A.eventTarget(I,J),M=L.listMapper.findIndex(L,F,G);if(M>-1){var H=L.multiSelect,K=A.ctrlKey(I,J),O=A.shiftKey(I,J);if(K||O){A.clearBrowserHighlights(I);}if(H&&(K||(L.selectionPolicy==="toggle"))){L.toggleSelect(M);}else{if(H&&O){L.rangeSelect(M);}else{L.singleSelect(M);}}}},premouseup:function C(H,K,G){var F=G.hWin,J=G.e,L=A.ctrlKey(F,J),I=A.shiftKey(F,J);if(L||I){A.clearBrowserHighlights(F);}},onadd:function B(I,H){var M=H&&H.value&&H.value.length;if(M){var G=H.index,K=I.selectedIndices,L=E(K,G);for(var J=L.length-1;J>-1;J--){var F=L[J];K[F+M]=true;delete K[F];}if(I.selectedIndex>=G){I.selectedIndex+=M;}}},onremove:function B(Q,S){var O=S&&S.value&&S.value.length;if(O){var R=S.index,I=R+O-1,M=Q.selectedIndices,L=Q.selectedIndex,G=[],T=[],P=false;if(M){for(var H in M){var K=Number(H);if(K>I){G.push(K);}else{if(K>=R){T.push(K);P=true;}}}}G.sort(mstrmojo.array.numSorter);for(var J=0,N=G.length;J<N;J++){var F=G[J];M[F-O]=true;delete M[F];}if(L>I){Q.selectedIndex-=O;}if(P){Q.removeSelect(T);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var T=mstrmojo.dom,S,G=mstrmojo.global.document;function P(V){S.startDragCheck(self,V);}var A,O,J="mstrmojo-dnd-avatar",I;function K(X,V,W){if(W!=null){O.innerHTML=W;}I.left=X.x+"px";I.top=X.y+"px";}function H(V,W){if(!A){A=G.createElement("div");I=A.style;A.className=J;A.innerHTML='<div class="'+J+'-inner"></div>';O=A.firstChild;G.body.appendChild(A);}K(W,true,V);I.display="block";}function D(){if(A){I.display="none";}}function B(V){var W=++S.ctxt.moveCount;if(W>=S.minMoves){S.stopDragCheck(self,V);S.startDrag(self,V);}}function E(V){S.stopDragCheck(self,V);}function M(V){S.onDragMove(self,V);}function Q(V){S.stopDrag(self,V);}function N(V){if(!V){return ;}if(!V.hWin){V.hWin=window;}if(!V.e){V.e=V.hWin.event;}V.node=T.eventTarget(V.hWin,V.e);V.pos=T.getMousePosition(V.e,V.hWin);return V;}function F(W){var V=T.findWidget(W);while(V){if(V.draggable){return V;}V=V.parent;}return null;}function U(W,X){var V=T.findWidget(W);while(V){if(V.dropZone){if(V.allowDrop&&V.allowDrop(X)){return V;}}V=V.parent;}return null;}function L(V){if(this.set){this.set("allowingDrop",true);}}function C(V){if(this.set){this.set("allowingDrop",false);}}var R=C;mstrmojo.dnd=mstrmojo.provide("mstrmojo.dnd",{minMoves:3,enable:function(){if(!mstrmojo.dndEnabled){T.attachEvent(G,"mousedown",P);mstrmojo.dndEnabled=true;}},disable:function(){T.detachEvent(G,"mousedown",P);},startDragCheck:function(V,W){delete this.ctxt;var X=N({hWin:V,e:W});this.ctxt={src:X,moveCount:0};if(this.minMoves){T.attachEvent(G,"mousemove",B);T.attachEvent(G,"mouseup",E);}else{this.startDrag(V,W);}},stopDragCheck:function(V,W){T.detachEvent(G,"mousemove",B);T.detachEvent(G,"mouseup",E);},startDrag:function(V,X){var Z=this.ctxt;Z.id=new Date();var Y=Z.src,W=F(Y.node);if(!W){return ;}Y.widget=W;Y.data=W.getDragData&&W.getDragData(Z);if(W.ondragstart){if(W.ondragstart(Z)===false){return ;}}T.clearBrowserHighlights();T.preventDefault(self,X);T.attachEvent(G,"mousemove",M);T.attachEvent(G,"mouseup",Q);if(W&&!W.ownAvatar){H(Y.data&&Y.data.html,Y.pos);}},stopDrag:function(V,Z){T.detachEvent(G,"mousemove",M);T.detachEvent(G,"mouseup",Q);var a=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,a);X.widget=W;a.tgt=X;if(W){if(W.ondrop){W.ondrop(a);}else{R.apply(W,[a]);}}var Y=a.src.widget;if(Y&&Y.ondragend){Y.ondragend(a);}if(Y&&!Y.ownAvatar){D();}},onDragMove:function(V,Z){if(T.isSafari){T.clearBrowserHighlights();}var b=this.ctxt,X=N({hWin:V,e:Z}),W=U(X.node,b);X.widget=W;var a=b&&b.tgt&&b.tgt.widget;b.tgt=X;if(a!==W){if(a){if(a.ondragleave){a.ondragleave(b);}else{C.apply(a,[b]);}}if(W){if(W.ondragenter){W.ondragenter(b);}else{L.apply(W,[b]);}}}else{if(W){if(W.ondragover){W.ondragover(b);}}}var Y=b.src.widget;if(Y&&Y.ondragmove){Y.ondragmove(b);}if(Y&&!Y.ownAvatar){K(X.pos,!!W);}}});S=mstrmojo.dnd;S.enable();})();(function(){mstrmojo.requiresCls("mstrmojo.dom");var A=false,P=mstrmojo.dom,S=16;mstrmojo._HasContextMenu=mstrmojo.provide("mstrmojo._HasContextMenu",{cm:null,cmPos:null,itemField:"n",itemIdField:"did",itemChildrenField:"items",dynamicUpdate:false,queryChecked:function(T){return false;},queryEnabled:function(T){return true;},queryVisible:function(T){return true;},executeCommand:function O(T){},item2textCss:function E(T){return T.cssClass||T.cmdId||("cmd"+T[this.itemIdField]);},showContextMenu:function J(){if(!A){mstrmojo.requiresCls("mstrmojo.ContextMenu");A=true;}var Z=this._subMenu,X=this.getMenuPosition();if(!Z){var b=(this.menuZIndex||this.zIndex||10)+1,V={left:X.x+"px",top:X.y+"px",zIndex:b,visible:false,dynamicUpdate:this.dynamicUpdate,itemField:this.itemField,itemIdField:this.itemIdField,itemChildrenField:this.itemChildrenField,_cmSource:this.getContextMenuSource(),items:this.getContextMenuItems(),cssClass:this.getContextMenuCssClass(),placeholder:document.body.appendChild(document.createElement("div")),parent:this};Z=new mstrmojo.ContextMenu(V);Z.render();this._subMenu=Z;}else{Z.set("left",X.x+"px");Z.set("top",X.y+"px");}if(this.dynamicUpdate){var U=Z.ctxtBuilder.itemWidgets,W=U&&U.length,T,Y,a=this.getContextMenuSource();for(T=0;T<W;T++){Y=U[T];if(a.queryVisible){Y.set("visible",a.queryVisible(Y.data));}if(a.queryChecked){Y.set("checked",a.queryChecked(Y.data));}if(a.queryEnabled){Y.set("enabled",a.queryEnabled(Y.data));}}}Z.set("visible",true);this.callOnContextMenuOpen();this.adjustMenuPosition();this.attachMousedownEvent();},hideContextMenu:function I(){var T=this._subMenu;if(T&&T.visible){this._subMenu.set("visible",false);this.callOnContextMenuClose();}},adjustMenuPosition:function N(){var T=this._subMenu,W=this._subMenu.domNode,V=W.offsetHeight,U=W.offsetWidth,Z=P.windowDim(),Y=P.position(W,false),X=P.position(W,true);if((Y.x+U+S)>Z.w){T.set("left",(Z.w-U-S+(X.x-Y.x))+"px");}if((Y.y+V+S)>Z.h){T.set("top",(Z.h-V-S+(X.y-Y.y))+"px");}},attachMousedownEvent:function L(){var T=this;if(!this._close_handler){this._close_handler=function(){if(!T.isOnMySubmenu(P.eventTarget(self,arguments[0]))){T.closeMenuTree();}};}P.attachEvent(document.body,"mousedown",this._close_handler);},isOnMySubmenu:function M(X){var U=this._subMenu;if(!U){return false;}if(P.contains(U.domNode,X,true,document.body)){return true;}var Y=U.ctxtBuilder.itemWidgets,T=Y&&Y.length,W,V;for(W=0;W<T;W++){V=Y[W];if(V.isOnMySubmenu(X)){return true;}}return false;},callOnContextMenuOpen:function D(){if(this.onContextMenuOpen){this.onContextMenuOpen();}},callOnContextMenuClose:function C(){if(this.onContextMenuClose){this.onContextMenuClose();}},getContextMenuItems:function R(){return this.cm;},getContextMenuCssClass:function B(){return this.cmCssClass||"";},getContextMenuSource:function H(){return this;},getMenuPosition:function F(){if(this.cmPos){return this.cmPos;}var T=P.position(this.domNode,true);return{x:Math.round(T.x),y:Math.round(T.y+T.h)};},isSeparatorItem:function G(T){return T[this.itemIdField]===-1||T[this.itemField]==="-";},hasSubmenu:function K(T){return !!T[this.itemChildrenField];},closeMenuTree:function Q(V){var U=this.activeMenuItem,T=this._cmSource||this;if(!U){if(V){this.activeMenuItem=V;}else{T.hideContextMenu();}return ;}if(U===V){return ;}if(V){this.activeMenuItem=V;if(V.parent.parent===U){return ;}if(V.parent===U.parent){U.hideContextMenu();return ;}}else{V=T;this.activeMenuItem=null;}U.hideContextMenu();while(U!==T){U=U.parent.parent;if(U!==V||T===V){U.hideContextMenu();if(T===V){P.detachEvent(document.body,"mousedown",this._close_handler);}}if(U.parent===V.parent){break;}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.hash");var R=mstrmojo.dom,P=mstrmojo.hash;var M=100;var E=R.supportsTouches?0.5:1;var F=1;var Q=100;var N={onvscrollVisibleChange:function(){var U=this.vscrollNode,V=U&&U.style;if(!V){return ;}if(this.vscrollVisible){var T=this.maxPos,W=this.clientSize;V.height=Math.round(W.y*W.y/T.y)+"px";V.left=(W.x-5)+"px";V.display="block";V.opacity=0.5;}else{V.opacity=0;}},onhscrollVisibleChange:function(){var V=this.hscrollNode,U=V&&V.style;if(!U){return ;}if(this.hscrollVisible){var T=this.maxPos,W=this.clientSize;U.width=Math.round(W.x*W.x/T.x)+"px";U.top=(W.y-5)+"px";U.display="block";U.opacity=0.5;}else{U.opacity=0;}}};var K=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,W=0;if(this.scrollsVert){W=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style[R.CSS3_TRANSFORM]="translateY("+Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px)";}}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style[R.CSS3_TRANSFORM]="translateX("+Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px)";}}this.scrollChild.style[R.CSS3_TRANSFORM]="translate3d(-"+parseInt(T,10)+"px, -"+parseInt(W,10)+"px, 0px)";},ondeceleratingChange:function(){this.scrollChild.style[R.CSS3_TRANSITION]=this.decelerating?(R.CSS3_PREFIX+"transform 0.2s linear"):"";}},P.copy(N));var G=P.copy({onposChange:function(){var V=this.clientSize,U=this.maxPos,T=0,X=0,W=this.scrollboxNode;if(this.scrollsVert){X=this.pos.y;if(this.vscrollVisible){this.vscrollNode.style.top=Math.round((V.y-(V.y*V.y/U.y))*this.pos.y/U.y)+"px";}W.scrollTop=parseInt(X,10);}if(this.scrollsHoriz){T=this.pos.x;if(this.hscrollVisible){this.hscrollNode.style.left=Math.round((V.x-(V.y*V.x/U.x))*this.pos.x/U.x)+"px";}W.scrollLeft=parseInt(T,10);}}},P.copy(N));mstrmojo._TouchScrolling=mstrmojo.provide("mstrmojo._TouchScrolling",{FRICTION:0.65,BOUNCEFRICTION:0.5,usesTouches:false,bounces:true,scrollsHoriz:true,scrollsVert:true,pos:null,preBuildRendering:function L(){this.usesTouches=(mstrmojo.dom.supportsTouches&&this.usesTouches&&(this.scrollsHoriz||this.scrollsVert));if(this.usesTouches){this.pos={x:0,y:0};}if(this._super){this._super();}},postBuildRendering:function C(){if(this._super){this._super();}if(this.usesTouches){var W=this.scrollboxNode,V=this.itemsContainerNode||W.firstChild;if(W&&W!==V){this.scrollChild=V;var T=W.style;T.position="relative";T.overflow="hidden";var U=V.style;U.position="absolute";U.left=0;U.top=0;this.markupMethods=P.copy(R.isSafari?K:G,P.copy(this.markupMethods));this.attachTouchEvents();}}},unrender:function(T){if(this.usesTouches){this.detachTouchEvents();}this._super(T);},attachTouchEvents:function(){var U=this.touchNode||this.scrollboxNode;if(U){if(!this._tsCallback){var T=this;this._tsCallback=function(V){T.touchesBegin(self,V);};this._tmCallback=function(V){T.touchesMoved(self,V);};this._teCallback=function(V){T.touchesEnd(self,V);};}R.attachEvent(U,R.TOUCHSTART,this._tsCallback);this._tsNode=U;}},detachTouchEvents:function(){var T=this._tsNode;if(T){R.detachEvent(T,R.TOUCHSTART,this._tsCallback);delete this._tsNode;}},touchesBegin:function I(T,V){var U=V.target&&V.target.tagName;if(U&&(U==="SELECT"||U==="INPUT")){return ;}R.preventDefault(T,V);this.stopDeceleration();this.startTime=new Date();this.startTimePos={x:this.pos.x,y:this.pos.y};this.startTouchPos=R.getMousePosition(R.firstTouch(T,V),T);this.dragging=false;R.attachEvent(window,R.TOUCHMOVE,this._tmCallback);R.attachEvent(window,R.TOUCHEND,this._teCallback);},touchesMoved:function D(b,d){var Z=R.getMousePosition(R.firstTouch(b,d),b);R.preventDefault(b,d);if(!this.dragging){var T=5,h=Math.abs;if((this.scrollsHoriz&&h(Z.x-this.pos.x)>T)||(this.scrollsVert&&h(Z.y-this.pos.y)>T)){this.dragging=true;this.dragStartTime=new Date();this.startTouchPos=Z;var V=this.scrollboxNode,Y={x:V.clientWidth,y:V.clientHeight},f={x:V.scrollWidth,y:V.scrollHeight};this.clientSize=Y;this.scrollSize=f;this.maxPos={x:Math.max(f.x-Y.x,0),y:Math.max(f.y-Y.y,0)};this.showScroll();}}if(this.dragging){R.stopPropogation(b,d);var c=this.startTimePos,X=this.startTouchPos,a=this.maxPos;var W={x:this.scrollsHoriz?Math.max(Math.min(c.x-(Z.x-X.x),a.x),0):0,y:this.scrollsVert?Math.max(Math.min(c.y-(Z.y-X.y),a.y),0):0};this.set("pos",W);this.nextLastDragPos=this.lastDragPos;this.lastDragPos=Z;var U=new Date(),g=this.lastDragTime;this.nextLastDragTime=g;this.lastDragTime=U;if((U-g)>Q){this.startTime=this.lastDragTime;this.dragStartTime=this.startTime;this.startTimePos={x:W.x,y:W.y};this.startTouchPos=Z;}}},touchesEnd:function H(T,U){R.preventDefault(T,U);R.detachEvent(window,R.TOUCHMOVE,this._tmCallback);R.detachEvent(window,R.TOUCHEND,this._teCallback);if(this.dragging){this.dragging=false;R.stopPropogation(T,U);if((new Date())-this.lastDragTime<=Q){this.startDeceleration(T,U);}else{this.hideScroll();}}},startDeceleration:function B(Y,Z){var W=R.getMousePosition(R.firstChangedTouch(Y,Z),Y),c=((mstrmojo.dom.supportsTouches===null)?this.lastDragPos:this.nextLastDragPos)||W,b={x:W.x-c.x,y:W.y-c.y},T=((mstrmojo.dom.supportsTouches===null)?this.lastDragTime:this.nextLastDragTime),d=T?(new Date())-T:0,V={x:d?Number(b.x*M*E/d).toFixed(2):0,y:d?Number(b.y*M*E/d).toFixed(2):0};var a=this,U=function(f){return(a.scrollsHoriz&&Math.abs(f.x)>=F)||(a.scrollsVert&&Math.abs(f.y)>=F);};if(U(V)){this.velocity=V;this.friction={x:this.FRICTION,y:this.FRICTION};this.set("decelerating",true);var X=function(){a.decelerate();if(!U(a.velocity)){a.stopDeceleration();a=null;}};X();if(this.decelerating){this.decelerationTimer=window.setInterval(X,M);}}else{this.hideScroll();}},stopDeceleration:function A(){this.set("decelerating",false);delete this.velocity;if(this.decelerationTimer){window.clearTimeout(this.decelerationTimer);delete this.decelerationTimer;}this.hideScroll();},decelerate:function S(){var W=this.pos,V=this.velocity,U=this.friction,Z=this.maxPos,X={x:W.x-V.x,y:W.y-V.y},b=this.bounces,T=this.BOUNCEFRICTION;var a=X.x;if(a<0||a>Z.x){X.x=(a<0)?0:Z.x;V.x*=(b)?-T:0;U.x=T;}var Y=X.y;if(Y<0||Y>Z.y){X.y=(Y<0)?0:Z.y;V.y*=(b)?-T:0;U.y=T;}this.set("pos",X);this.velocity={x:U.x*V.x,y:U.y*V.y};},hideScroll:function J(){this.set("vscrollVisible",false);this.set("hscrollVisible",false);},showScroll:function O(){var T=this.maxPos;if(this.scrollsVert&&T.y&&this.vscrollNode){this.set("vscrollVisible",true);}if(this.scrollsHoriz&&T.x&&this.hscrollNode){this.set("hscrollVisible",true);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx={enabled:true};var E=mstrmojo.dom;mstrmojo.fx._Effect=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.fx._Effect",duration:500,interval:50,delay:null,target:null,getTarget:null,widget:null,slot:null,preStart:null,postStart:null,onCancel:null,onEnd:null,revertOnCancel:true,isPlaying:false,started:false,init:function R(W){mstrmojo.hash.copy(W,this);},play:function C(){this.isPlaying=true;this.started=false;if(this.delay){var W=this;this.delayTimer=window.setTimeout(function(){W._start();W=null;},this.delay);}else{this._start();}},pause:function H(){if(this.delayTimer){window.clearTimeout(this.delayTimer);delete this.delayTimer;}if(this.timer){window.clearInterval(this.timer);delete this.timer;}this.isPlaying=false;},cancel:function U(){this.pause();if(this.started){if(this.revertOnCancel){this.counter=0;this.exec();}if(this.onCancel){this.onCancel();}this.started=false;}},_start:function F(){this.started=true;this._doTarget();this.steps=Math.max(Math.ceil(this.duration/this.interval),1);var W=this.ease;if(typeof (W)=="string"){this.ease=mstrmojo.registry.ref(W);}if(this._doPreStart()===false){this.started=false;this.isPlaying=false;return ;}this.counter=0;this.exec();this.counter++;this._doPostStart();if(this.counter>=this.steps){this._end();}else{var X=this;if(this.timer){window.clearInterval(this.timer);}this.timer=window.setInterval(function Y(){if(X){X.exec();X.counter++;if(X.counter>=X.steps){X._end();X=null;}}},this.interval);}},exec:null,_end:function D(){this.pause();this.started=false;if(this.onEnd){this.onEnd();}},_doTarget:function T(){if(this.getTarget){this.target=this.getTarget.apply(this,[]);}else{if(this.widget){this.target=this.widget[this.slot||"domNode"];}else{if(this.target){var X=this.target;if(X&&this.slot&&X.scriptClass){var Y=X[this.slot];if(Y){this.widget=X;this.target=Y;}}}}}if(!this.target){var W=this;while(W=W.parent){if(!W||W.domNode){break;}}if(W){this.widget=W;this.target=W[this.slot||"domNode"];}}},_doPreStart:function N(){if(this.preStart){return this.preStart();}},_doPostStart:function S(){if(this.postStart){this.postStart();}}});function M(Z,a){var X=Z.children;for(var Y=0,W=(X&&X.length)||0;Y<W;Y++){X[Y][a]();}}mstrmojo.fx.Parallel=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Parallel",init:function R(Z){this._super(Z);var Y=this.children;mstrmojo.registry.refArray(Y);for(var X=0,W=(Y&&Y.length)||0;X<W;X++){Y[X].parent=this;}},_start:function F(){this.started=true;if(this.preStart){this.preStart();}M(this,"play");if(this.postStart){this.postStart();}},pause:function H(){M(this,"pause");},cancel:function U(){M(this,"cancel");}});mstrmojo.fx.AnimateProp=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.AnimateProp",props:null,_start:function O(){var Y=this.props;for(var Z in Y){var X=Y[Z],W=X.ease;if(typeof (W)=="string"){X.ease=mstrmojo.registry.ref(W,{dontInst:true});}}this._super();},exec:function P(){var Z=this.props;for(var a in Z){var X=Z[a],W=(X.ease||mstrmojo.ease.sin)(this.counter,X.start,X.stop-X.start,this.steps-1);if(X.fn){W=X.fn(W);}if(X.suffix){W+=X.suffix;}var Y=X.isStyle===false?this.target:this.target.style;Y[a]=W;}}});mstrmojo.fx.Typewriter=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Typewriter",charGroupSize:1,srcProp:"text",_doPreStart:function(){this._super();this._dynStop=false;if(this.stop==null){var a=this.srcProp,Y;if(a){var W=this.widget||this.parent;Y=W&&W[a];if((Y!=null)&&(typeof (Y)!=="string")){Y=String(Y);}}this.stop=Y;this._dynStop=true;}if(this.stop==null){this.stop="";}var Z=this.target,b=null,X=1;if(Z){Z.innerHTML="";b=document.createTextNode("");Z.appendChild(b);X=Math.max(Math.floor(this.stop.length/this.steps),1);}this.targetTextNode=b;this.charGroupSize=X;},exec:function(){var X=this.targetTextNode;if(!X){return ;}var W;if(this.counter>=this.steps-1){W=this.stop;}else{if(this.counter===0){W="";}else{W=this.stop.substring(0,this.charGroupSize*this.counter)+"_";}}X.nodeValue=W;},_end:function D(){this._super();if(this._dynStop){this.stop=null;delete this._dynStop;}},cancel:function U(){if(this._dynStop){this.stop=null;delete this._dynStop;}}});mstrmojo.requiresCls("mstrmojo.dom");mstrmojo.fx.Fade=mstrmojo.declare(mstrmojo.fx._Effect,null,{scriptClass:"mstrmojo.fx.Fade",start:null,stop:null,ease:null,suffix:null,exec:function P(W){if(W==null){W=(this.ease||mstrmojo.ease.sin)(this.counter,this.start,this.stop-this.start,this.steps-1);}if(E.isIE&&!E.isWinPhone){this.target.style.filter="alpha(opacity="+parseInt(W*100,10)+")";}else{this.target.style.opacity=W;}}});mstrmojo.fx.FadeOut=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeOut",start:1,stop:0,revertOnCancel:true,cssDisplay:"block",_end:function D(){if(this.cssDisplay){this.target.style.display="none";this.exec(this.start);}this._super();},cancel:function U(){if(this.started&&this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();}});mstrmojo.fx.FadeIn=mstrmojo.declare(mstrmojo.fx.Fade,null,{scriptClass:"mstrmojo.fx.FadeIn",start:0,stop:1,revertOnCancel:true,cssDisplay:"block",_doPostStart:function V(){if(this.cssDisplay){this.target.style.display=this.cssDisplay;}this._super();},cancel:function(){if(this.started&&this.revertOnCancel&&this.cssDisplay){this.target.style.display="none";}this._super();}});function I(Y,X,Z){var W=Math.pow(10,Z||2);if(X){return parseInt(W*Y/X,10)/W;}else{return parseInt(W*Y,10)/W;}}mstrmojo.ease={linear:function L(X,W,Z,Y){if(X===Y){return W+Z;}else{if(X===0){return W;}else{return W+Z*I(X,Y);}}},sin:function A(X,W,Z,Y){return W+Z*Math.sin((Math.PI/2)*X/Y);},cos:function B(X,W,Z,Y){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));},sincos:function K(X,W,Z,Y){if(X>Y/2){return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}else{return W+Z*Math.sin((Math.PI/2)*X/Y);}},cossin:function Q(X,W,Z,Y){if(X>Y/2){return W+Z*Math.sin((Math.PI/2)*X/Y);}else{return W+Z*Math.cos((Math.PI/2)*(1-X/Y));}},bounce:function G(X,W,Z,Y){if((X/=Y)<(1/2.75)){return Z*(7.5625*X*X)+W;}else{if(X<(2/2.75)){return Z*(7.5625*(X-=(1.5/2.75))*X+0.75)+W;}else{if(X<(2.5/2.75)){return Z*(7.5625*(X-=(2.25/2.75))*X+0.9375)+W;}else{return Z*(7.5625*(X-=(2.625/2.75))*X+0.984375)+W;}}}},shake:function J(X,W,Z,Y){if(X<Y/2){return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*X/Y;}else{return W+Z*I(Math.sin(2*Math.PI*X/8),null,2)*2*(1-X/Y);}}};})();(function(){mstrmojo.requiresCls("mstrmojo.registry");mstrmojo._PagingList=mstrmojo.provide("mstrmojo._PagingList",{usePaging:false,page:0,totalPages:1,_set_page:function(B,A){if(this.page!==A&&this.usePaging){if(A>=0&&A<this.totalPages){this.page=A;}return true;}return false;},_inScroll:false,_inPaging:false,onscroll:function(){if(this.usePaging&&!this._inPaging){this._inScroll=true;this.set("page",this.listMapper.whichPage(this));this._inScroll=false;}if(this._super){this._super();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.hash");var B=false,D="mstrmojo.Binding",A="bindings",C=mstrmojo.registry;function E(K){for(var L in K){var J=K[L];if(J&&J.disable){J.destroy();}}}function F(K,M){if(!B){mstrmojo.requiresCls(D);B=true;}for(var N in K){var J=K[N];if(J==null){continue;}var L=typeof (J);if(L==="string"||L==="function"){J={destination:N,source:J,scriptClass:D};}J.parent=M;J=C.ref(J,{skipLoadChecks:true});K[N]=J;J.enable();}}mstrmojo._HasBindings=mstrmojo.provide("mstrmojo._HasBindings",{_meta_usesSuper:false,initBindings:function G(){this.hasInitBindings=true;var K=mstrmojo.hash.copy(this[A]);if(K){delete this[A];this._set_bindings(A,K,true);if(this.postCreateBindings){this.postCreateBindings();}}var M=this.children;if(M){for(var L=0,J=M.length;L<J;L++){var N=M[L];if(N&&N.initBindings){N.initBindings();}}}},destroyBindings:function I(){var J=this.bindings;if(J){E(J);delete this.bindings;}},_set_bindings:function H(L,J){var K=this[A];if(J!==K){if(K){E(K);}this[A]=J;if(J){F(J,this);}return true;}return false;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash");mstrmojo._HasPopup={openPopup:function B(G,D){var C=!!G&&(typeof (G)==="string")&&!G.match(/\./)&&!!this[G],I=mstrmojo.registry.ref(C?this[G]:G,true);if(I&&I.open){if(C){this[G]=I;}this.disposables.push(I);var F=I.slot&&this[I.slot];if(F){if(I.parent!==this){if(this.addChildren){this.addChildren(I);}else{var H=false,E=I.domNode||I.placeholder;if(E&&typeof (E)==="string"){E=document.getElementById(E);}if(!E){H=true;E=document.createElement("span");I.placeholder=E;}if(H||(E.parentNode!==F)){F.appendChild(E);}}}}I.open(this,D);this._lastOpened=I;}},closePopup:function A(){var C=this._lastOpened;if(C&&C.visible&&C.close){C.close();delete this._lastOpened;}}};})();(function(){mstrmojo.requiresCls("mstrmojo.hash");var O=/this\.([\w\.\[\]\'\"\-]+)/m,D=/this\./m,M=/mstrmojo\.all\[[\'\"]([\w]+)[\'\"]\]\.([\w\.\[\]\'\"\-]+)/m,R=/mstrmojo\.all\[/m,L=/mstrmojo\.all\.([\w]+)\.([\w\.\[\]\'\"\-]+)/m,B=/mstrmojo\.all\./m,C=/\[(\d+)\]/g,E=/\[\'([\w\-]+)\'\]/g,P=/\[\"([\w\-]+)\"\]/g,H=/([\[\]].*)/;mstrmojo.Binding=mstrmojo.declare(null,null,{scriptClass:"mstrmojo.Binding",parent:null,source:null,destination:null,enabled:false,setter:"set",executing:0,init:function N(S){mstrmojo.hash.copy(S,this);mstrmojo.registry.add(this);},destroy:function F(){mstrmojo.publisher.clearSubscriptions(this.id);mstrmojo.registry.remove(this);},exec:function K(){this.executing++;var W=this._sourceFn;if(!W){var V=this.source;if(V!=null){if(typeof (V)=="string"){if(!(V.match("return "))&&!(V.match(/\;\s*\S/))){V="return "+V;}W=new Function(V);}else{if(typeof (V)=="function"){W=V;}}this._sourceFn=W;}}var S,X=this.parent;if(W){try{S=W.apply(X,[]);}catch(U){}}var T=this.setter,Y=this.destination;if(T==null){X[Y]=S;}else{if(typeof (T)=="string"){X[T](Y,S);}else{if(typeof (T)=="function"){T.apply(X,[Y,S]);}}}this.executing--;},enable:function A(){if(!this.enabled){this.exec();var T=this._chains;if(!T){this._parseChains();T=this._chains;}for(var S in T){this._attachChain(T[S]);}this.enabled=true;}},disable:function J(){if(this.enabled){var T=this._chains;if(T){for(var S in T){this._detachChain(T[S]);}}this.enabled=false;}},_chains:null,_parseChains:function(){this._chains={};var U=this._chains;var T=this.source;if(T&&(typeof (T)=="function")){T=T.toString&&T.toString();}if(!T){return ;}function S(b,f,V,X){var W=b,Z;while(Z=W.match(f)){var c=Z[0],a=c.length,d=true;c=c.replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"");for(var Y in U){if(Y.substr(0,a)===c){d=false;break;}else{if(c.indexOf(Y)===0){delete U[Y];}}}if(d){U[c]={host:(V==null)?null:Z[V],parts:Z[X].replace(C,".$1").replace(E,".$1").replace(P,".$1").replace(H,"").split(".")};}W=W.substr(Z.index+a);}}if(D.test(T)){S(T,O,null,1);}if(R.test(T)){S(T,M,1,2);}if(B.test(T)){S(T,L,1,2);}},_attachChain:function Q(S,U){if(!S.evt2idx){S.evt2idx={};}if(!S.idx2evt){S.idx2evt=[];}var d=S.evt2idx,h=S.idx2evt,Z=S.parts;var f=(U>=0)?U:0,b=this.id,W=mstrmojo.all,c=(U>0)?W[h[f-1].context][Z[f-1]]:(S.host?W[S.host]:this.parent),T=Z[f];var V=mstrmojo.array;while(c&&T){if(c.attachEventListener){var g=c[T+"_bindEvents"]||(T+"Change");if(typeof (g)=="string"){g=[g];}var Y=[];for(var a=0,X=g.length;a<X;a++){Y[a]=c.attachEventListener(g[a],b,"_callback");}for(var a=0;a<g.length;a++){d[c.id+"_"+g[a]]=f;}h[f]={context:c.id,evts:g,subs:Y};}c=c[T];T=S.parts[++f];}},_detachChain:function G(S,T){var U=mstrmojo.all,k=S.idx2evt,d=S.evt2idx,a=this.id;var Y=(T>-1)?T:0,b=k.length;if(Y<b){for(;Y<b;Y++){var Z=k[Y];if(!Z){break;}var W=Z.context,c=U[W],h=Z.evts;if(c&&c.detachEventListener){var l=Z.subs;for(var g=0,V=l.length;g<V;g++){c.detachEventListener(l[g]);}}k[Y]=null;for(var X=0,f=h.length;X<f;X++){delete d[W+"_"+h[X]];}}}},_callback:function I(T){this.exec();if(!T||!T.name||!T.src){return ;}var U=T.src.id+"_"+T.name,W=this._chains;for(var X in W){var V=W[X],S=V.evt2idx[U];if(S!=null){this._detachChain(V,S+1);this._attachChain(V,S+1);}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.hash");var C=mstrmojo.array,L=mstrmojo.hash;function F(V,T){var W=[],Q=V.selectedIndices,P=V.allIdx;var R,S,U=V.items;if(V.multiSelect&&(P>-1)&&(C.indexOf(T,V.allIdx)>-1)){for(R=0,S=U.length;R<S;R++){if(!Q[R]){W.push(R);Q[R]=true;V.selectedIndex=R;V.selectedItem=U[R];}}}else{for(R=0,S=T.length;R<S;R++){var X=T[R];if(!Q[X]){Q[X]=true;W.push(X);V.selectedIndex=X;V.selectedItem=U[X];}}}return W;}function B(R){var Q=[],S=R.selectedIndices;for(var P in S){delete S[P];Q.push(parseInt(P,10));}R.selectedIndex=-1;R.selectedItem=null;return Q;}function N(V,U){var S=[],Q=V.selectedIndices,X=C.indexOf,P=V.allIdx;if(V.multiSelect&&(P>-1)&&(X(U,P)>-1)){return B(V);}if(U.length>0&&Q[P]){if(X(U,P)<0){U.push(P);}}for(var R=0,T=U.length;R<T;R++){var W=U[R];if(Q[W]){delete Q[W];S.push(W);if(V.selectedIndex==W){V.selectedIndex=-1;V.selectedItem=null;}}}return S;}function A(S,R){var P=S.selectedIndices;if(!P){P={};S.selectedIndices=P;}if(!R){R={};}var U=S.selectedIndex,T=[],V;for(var Q in P){if(!R[Q]){V=parseInt(Q,10);delete P[Q];T.push(V);if(U==V){S.selectedIndex=-1;S.selectedItem=null;}}}var X=[],W=S.items;for(Q in R){if(!P[Q]){V=parseInt(Q,10);P[Q]=true;X.push(V);S.selectedIndex=V;S.selectedItem=W&&W[V];}}return{add:X,rmv:T};}function H(Q,P,R){if(Q.raiseEvent&&((P&&P.length)||(R&&R.length))){Q.raiseEvent({name:"change",added:P,removed:R});}}mstrmojo._ListBase2Selections=mstrmojo.provide("mstrmojo._ListBase2Selections",{multiSelect:false,selectedIndices:null,selectedIndex:-1,selectedItem:null,selectedIndices_bindEvents:"change",selectedIndex_bindEvents:"change",selectedItem_bindEvents:"change",allowUnlistedValues:true,insertUnlistedValuesAt:-1,allIdx:-1,singleSelect:function O(P,Q){if(!this.selectedIndices[P]||(this.selectionPolicy==="reselect")||(P!==this.allIdx&&this.selectedIndices[this.allIdx])){var R=B(this),S=F(this,[P]);if(Q!==true){H(this,S,R);}}},toggleSelect:function J(P,Q){var S,R;if(this.selectedIndices[P]){R=N(this,[P]);}else{S=F(this,[P]);}if(Q!==true){H(this,S,R);}},rangeSelect:function G(P,Q){this.singleSelect(P,Q);},clearSelect:function I(P){var Q=B(this);if(P!==true){H(this,null,Q);}},select:function E(R,P){var Q=A(this,C.hash(R));if((P!==true)&&(Q.add.length||Q.rmv.length)){H(this,Q.add,Q.rmv);}},addSelect:function M(R,P){if(R==null){return ;}if(R.constructor!==Array){R=[R];}var Q=F(this,R);if(P!==true){H(this,Q,null);}return Q;},removeSelect:function K(R,P){if(R==null){return ;}if(R.constructor!=Array){R=[R];}var Q=N(this,R);if(P!==true){H(this,null,Q);}return Q;},_set_selectedIndices:function(S,Q,P){if(this.selectedIndices===Q){return false;}var R=A(this,Q);if(R.add.length||R.rmv.length){if(P!==true){H(this,R.add,R.rmv);}}return false;},_set_selectedIndex:function(S,Q,P){var R={};if(Q>-1){R[Q]=true;}return this._set_selectedIndices(null,R,P);},_set_selectedItem:function(W,T,S){var R=T&&(typeof (T)=="object"),V=this.itemIdField,Q=-1,U=this.items;if(R&&V!=null){Q=C.find(U,V,T[V]);}else{if(T!=null){Q=C.indexOf(U,T);}}if((Q===-1)&&(T!=null)&&this.allowUnlistedValues){var P=this.insertUnlistedValuesAt;if(P==null||P<0){P=(U&&U.length)||0;}Q=P;this.add([T],Q);}return this._set_selectedIndex(null,Q,S);},initSelections:function D(T,Q,P,S,R){if(!this.selectedIndices){this.selectedIndices={};this.selectedIndex=-1;}if(T){this._set_selectedIndices(null,T,R);}else{if(Q){this.select(Q,R);}else{if(S){this._set_selectedItem(null,S,R);}else{if(P!=null){this._set_selectedIndex(null,P,R);}}}}},sortSelectedIndices:function(){return L.keyarray(this.selectedIndices,true).sort(C.numSorter);},removeSelectedItems:function(){var R=this.sortSelectedIndices(),P=R.length,S=R[P-1],Q=this.remove(R);S=Math.min(S+1-P,this.items.length-1);if(S>=0){this.singleSelect(S);}return Q;},getSelectedItems:function(){return C.get(this.items,this.sortSelectedIndices())||[];},setSelectedItems:function(Q,d){if(!Q||!Q.length){return ;}var S=this.items||[],u=this.itemIdField!=null?C.findMulti(S,this.itemIdField,Q):C.indexOfMulti(S,Q),V=Q.length,T=V-u.count,r=this.allowUnlistedValues,b=this.insertUnlistedValuesAt,X=(r&&(b>-1))?T:0;if(b<0){b=S.length;}var R=[],U=[],g=u.map;if(T&&r){var q=0;for(var f=0;f<V;f++){if(g[f]==null){R.push(Q[f]);U.push(b+q++);}}this.add(R,b);}var W=[];for(var l in g){var p=g[l];if(p>=b){p+=X;}W.push(p);}var s=W.concat(U),Y=this.addSelect(s,!d);if(!d){var Z=C.hash(Y),h=this.selectedIndices,a=[];for(var o in h){if(!Z[o]){a.push(parseInt(o,10));}}var P=this.removeSelect(a,true);H(this,Y,P);}}});})();(function(){mstrmojo.requiresCls("mstrmojo.publisher");var C=mstrmojo.publisher;mstrmojo._Provider=mstrmojo.provide("mstrmojo._Provider",{_meta_usesSuper:false,audibles:{"*":true},set:function F(N,H){var G=false,K=this["_set_"+N],I=this[N];if(K){G=K.apply(this,arguments);}else{this[N]=H;G=(I!==H);}if(G){var L=N+"Change",M=this.audibles||{},J=(M[N]===true)||((M[N]!==false)&&(M["*"]!==false));if(J&&(this["pre"+L]||this["on"+L]||this["post"+L]||C.hasSubs(this.id,L))){this.raiseEvent({name:L,prop:N,value:H,valueWas:I});}}return this;},raiseEvent:function B(H){var M=H&&H.name;if(!M){return null;}H.src=this;if(this.preHandleEvent){this.preHandleEvent(H);}var K=["pre","on","post"],L=false,I,G;for(I=0,G=K.length;I<G;I++){var J=K[I]+M;if(this[J]){if(this[J](H)===false){L=true;break;}}}if(!L){if(this.postHandleEvent){this.postHandleEvent(H);}C.publish(this.id,M,H);}return H;},attachEventListener:function A(G,H,I){return C.subscribe(this.id,G,I,H);},detachEventListener:function E(G){C.unsubscribe(G);},destroy:function D(){C.clearSubscriptions(this.id);if(this._super){this._super();}}});}());(function(){mstrmojo.requiresCls("mstrmojo.registry","mstrmojo.array","mstrmojo.publisher");var H=mstrmojo.registry,C=mstrmojo.array,K=mstrmojo.publisher;function M(O,P){if(P){P.parent=O;return H.ref(P);}return null;}function J(O,P){if(P&&P.alias!=null){O[P.alias]=P;}}function D(P,Q){var O=Q.alias;if(Q.parent===P){delete Q.parent;}if((O!=null)&&(P[O]===Q)){delete P[O];}}function E(S,P){var O=P&&P.length,R,Q;if(O){R=[];for(Q=0;Q<O;Q++){var T=M(S,P[Q]);if(!T){continue;}R.push(T);J(S,T);}}return R;}mstrmojo._HasChildren=mstrmojo.provide("mstrmojo._HasChildren",{_meta_usesSuper:false,initChildren:function I(){var O="children",P=this[O];if(!P){return ;}this[O]=null;this._set_children(O,P,true);if(this.postCreateChildren){this.postCreateChildren();}},_set_children:function A(R,P,O){var Q=this.children;if(P!==Q){if(Q){this.removeChildren(null,O);}this.addChildren(P,0,O);}return false;},destroyChildren:function N(R){var Q=this.children,O=(Q&&Q.length)||0,P;if(O){for(P=O-1;P>-1;P--){var S=Q[P];if(S&&S.destroy){S.destroy(R);if(!R){D(this,S);}}}if(!R){Q.length=0;}}},invalidateChildren:function F(){mstrmojo.array.forEach(this.children,function(O){O.invalidate();});},invalidate:function L(){this.invalidateChildren();},addChildren:function G(T,P,Q){if(!T){return T;}var S=T.constructor===Array,O=E(this,S?T:[T]);if(O&&O.length){var R=this.children||[];if(P==null){P=R.length;}this.children=C.insert(R,P,O);if(!Q&&(this.onaddChild||K.hasSubs(this.id,"addChild"))){this.raiseEvent({name:"addChild",value:O,index:P});}}return S?O:(O&&O[0]);},removeChildren:function B(U,Q){var S=this.children,T=U?[U]:(this.children||[]).concat(),P=T.length,O=-1,R;if(P){for(R=P-1;R>-1;R--){D(this,T[R]);}if(U){O=C.removeItem(S,U);}else{if(S){S.length=0;O=0;}}if(!Q&&(this.onremoveChild||K.hasSubs(this.id,"removeChild"))){this.raiseEvent({name:"removeChild",value:T,index:O});}}return O;}});}());(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.string");var K=mstrmojo.locales,D=mstrmojo.string,M=window.mstrConfig,E=function(){return mstrmojo.locales.number.THOUSANDSEPARATOR;},F=function(){return mstrmojo.locales.number.DECIMALSEPARATOR;},I=M.units,L={CM:1,IN:2,MM:3,PT:4,PC:5,PX:6},C={DEFAULT:-2,FIXED:0,CURR:1,PERCENT:4,FRACTION:5,SCIENTIFIC:6,GENERAL:9};var N=96;String.prototype.reverse=function(){var P="";for(var O=this.length;O>0;--O){P+=this.charAt(O-1);}return P;};mstrmojo.num=mstrmojo.provide("mstrmojo.num",{isInt:function G(O){var R=E(),Q=new RegExp("^(-)?[0-9]{1,3}(\\"+R+"[0-9]{3})*$"),P=new RegExp("^(-)?[0-9]+$");return(String(O).indexOf(R)&&Q.test(O))||P.test(O);},isNumeric:function A(R,S){var Q=F(),T=E(),P=new RegExp("^(-)?[0-9]{1,3}(\\"+T+"[0-9]{3})*(\\"+Q+"[0-9]+)?$"),O=new RegExp("^(-)?[0-9]*(\\"+Q+")?[0-9]+$");return(String(R).indexOf(T)&&P.test(R))||O.test(R);},parseInteger:function B(O,P){if(!this.isInt(O)){return Number.NaN;}return parseInt(String(O).replace(E(),""),P);},parseNumeric:function J(O){if(!this.isNumeric(O)){return Number.NaN;}return parseFloat(String(O).replace(E(),"").replace(F(),"."));},inNumericRange:function H(P,Q,O){P=this.parseNumeric(P);O=(O!=null)?this.parseNumeric(String(O)):Number.NaN;Q=(Q!=null)?this.parseNumeric(String(Q)):Number.NaN;if(O!=Number.NaN&&(P>O||isNaN(P))){return 1;}if(Q!=Number.NaN&&(P<Q||isNaN(P))){return -1;}return 0;},convertToUSUnits:function(R,Q,P){var O=R;Q=Q||I;switch(parseInt(Q,10)){case L.CM:O=parseFloat(this.toString(R))/2.54+"";break;case L.MM:O=parseFloat(this.toString(R))/25.4+"";break;case L.PT:O=parseFloat(this.toString(R))/72+"";break;case L.PC:O=parseFloat(this.toString(R))/6+"";break;case L.PX:O=parseFloat(this.toString(R))/N+"";break;}return P?O:this.toLocaleString(O);},convertToLocalUnits:function(R,Q,P){var O;Q=Q||I;switch(parseInt(Q,10)){case L.CM:O=(parseFloat(this.toString(R))*2.54).toFixed(4)+"";break;case L.MM:O=(parseFloat(this.toString(R))*25.4).toFixed(4)+"";break;case L.PT:O=(parseFloat(this.toString(R))*72).toFixed(4)+"";break;case L.PC:O=(parseFloat(this.toString(R))*6).toFixed(4)+"";break;case L.PX:O=(parseFloat(this.toString(R))*N)+"";break;default:O=parseFloat(this.toString(R)).toFixed(4)+"";}return P?O:this.toLocaleString(O);},convertUnits:function(P,Q,O){return this.convertToLocalUnits(Q,this.convertToUSUnits(P,O,true),true);},toLocaleString:function(O){return(O+"").replace(".",F());},toString:function(Q,O){if(O===true){var P=this.getThousandSepRegex();if(P){Q=String(Q).replace(P,"");}}return String(Q).replace(F(),".");},getThousandSepRegex:function(){if(this.thousandSeparatorRegex==null){this.thousandSeparatorRegex=new RegExp(E().replace(/(\W){1}/g,"\\$1"),"g");}return this.thousandSeparatorRegex;},addSeparators:function(Q,P){var O=P;if(P=="."||P=="*"||P=="\\"){O="\\"+P;}return Q.reverse().replace(/(\d{3})/g,"$1"+P).reverse().replace(new RegExp("^(-)?"+O),"$1");},format:function(S,R,V,O){var U="",T=(R>0)?".":"",P=[];V=(V)?V:"";for(var Q=0;Q<R;Q++){P.push("0");}P=P.join("");switch(S){case C.PERCENT:U="0"+T+P+"%";break;case C.SCIENTIFIC:U="0"+T+P+"E+00";break;default:U='"'+V+'"#,##0'+T+P;}return this.formatByMask(U,O);},formatByMask:function(o,AC){var d=String(o).split(";"),Z="",Q=d[0],X="\u00A4";if(isNaN(AC)){return AC;}var r=Q.indexOf("E+"),W=Q.indexOf("%"),g=Q.match(/\".*\"/),h=Q.indexOf("?/?")>-1,l=(r!=-1)?C.SCIENTIFIC:((W!=-1)?C.PERCENT:((g)?C.CURR:h?C.FRACTION:C.FIXED)),c="",z="",a=false,O=new String(AC),V=parseFloat(AC);if(g){c=Q.replace(/\".*\"/,g[0].substring(1,g[0].length-1)).replace(Q.replace(g[0],""),X);}if(V<0){O=O.substring(1,O.length);V=-V,a=true;if(d.length>1){var T=d[1].replace(/\[.*\]/,"");z=T.replace(d[0],X);}}var U=function(m,i){return(i)?i.replace(X,m):"-"+m;};if(l==C.FRACTION){var x,u,AB,b=10,k,f=0,p,y,R,P=false,n;if(o.indexOf("# ")>-1){P=true;}for(x=5;x>0;x--){n="/";for(u=0;u<x;u++){n+="?";}if(o.indexOf(n)>-1){for(u=1;u<x;u++){b*=10;}break;}}if(P){f=Number(Number(V).toFixed(0));V-=f;}y=b/2;AB=-1;p=V*b;for(x=b;x>=2;x--){R=(p*x)/b;R=R-Math.floor(R);R=R*b;if(Math.abs(R-b)<R){R=Math.abs(R-b);}R=R/x;if(R<y){y=R;AB=x;}else{if((R==y)&&(R==0)){y=R;AB=x;}}}k=Math.round(AB*p/b);for(x=AB;x>=2;x--){if((k%x==0)&&(AB%x==0)){k=k/x;AB=AB/x;break;}}if(AB==b){AB=1;k=0;}if(k==0){AB=1;}if(k==AB){if(P){Z=""+(f+1);}else{Z="1";}}else{if(P&&f>0){Z=f+" "+k+"/"+AB;}else{Z=k+"/"+AB;}}}else{if(l==C.SCIENTIFIC){var AD=Math.floor(Math.log(V)/Math.LN10),s=V/Math.pow(10,AD),AE=Q.substring(0,r),Y=AE.indexOf(".");Z+=Number(s).toFixed((Y!=-1)?AE.length-Y-1:0);Z=((a)?U(Z,z):Z)+"E"+((AD>0)?"+":"")+AD;}else{if(l==C.PERCENT){Q=Q.substring(0,Q.length-1);O=String(V*100);}var Y=Q.indexOf("."),S=0;if(Y!=-1){var AF=Q.substr(Y+1,Q.length).match(/\d+/);if(AF&&AF.length>0){S=AF[0].length;}}Z=String(Number(parseFloat(O).toFixed(S)));var AA=Z.split(".");var q=Q.match(/#.+##/);if(q!==null){AA[0]=this.addSeparators(AA[0],E());}Z=AA.join(F());if(l==C.CURR){Z=c.replace(X,Z);}if(l==C.PERCENT){Z+="%";}if(a){Z=U(Z,z);}}}return Z;},generateUniqueID:function(O){var Q="0123456789ABCDEF".split(""),R=[];for(var P=0;P<O;P++){R[P]=Q[0|Math.random()*16];}return R.join("");},countOfDecimals:function(P,Q){var O=String(P);return O.length-(O.indexOf(Q!==undefined?Q:F())+1);}});})();(function(){mstrmojo.requiresCls("mstrmojo.locales");var V=function(){return mstrmojo.locales.datetime;},J=mstrmojo.string;mstrmojo.date=mstrmojo.provide("mstrmojo.date",{monthNumbers:{Jan:1,Feb:2,Mar:3,Apr:4,May:5,Jun:6,Jul:7,Aug:8,Sep:9,Oct:10,Nov:11,Dec:12},REGEXPS:{DATES:{},TIMES:{}},CACHE:{PARSEDATE:{CONTAINS:{},EQUALS:{}},PARSETIME:{CONTAINS:{},EQUALS:{}}},isDate:function W(Z,d,Y){var b=this.parseDate(Z,Y);var c=!!(b&&this.doesDateExist(b.month,b.day,b.year));if(d){if(c){var a=this.formatDateInfo(b,V().DATEOUTPUTFORMAT);if(Y){return{match:b.match,formatted:a};}else{return a;}}else{return null;}}else{return !!c;}},formatDateInfo:function P(b,d){if(!d){return"";}var Y=b.day,c=b.month,a=b.year;var Z=d.replace(/dd/g,this.formatInteger(Y,2)).replace(/d/g,Number(Y)).replace(/yyyy/g,Number(a)).replace(/yy/g,this.formatInteger(Number(a)%100,2)).replace(/MMM/g,"~~~~").replace(/MM/g,"@@").replace(/M/g,"^").replace(/MMMM/g,V().MONTHNAME_FULL[Number(c)-1]).replace(/\~\~\~\~/g,V().MONTHNAME_SHORT[Number(c)-1]).replace(/\@\@/g,this.formatInteger(c,2)).replace(/\^/g,Number(b.month));return Z;},parseDate:function X(l,d,h){if(l==null){return false;}if(typeof (l)!="string"){l=String(l);}l=J.trim(l);var Y=this.CACHE.PARSEDATE[d?"CONTAINS":"EQUALS"],a=Y[l];if(a||(a===null)){return a;}var Z=null;var g;if(h){g=[h];}else{g=[].concat(V().DATEINPUTFORMATS);g.unshift(V().DATEOUTPUTFORMAT);}for(var b=0,c=g.length;b<c;b++){var f=this._buildRegExp4DateFormat(g[b]),k=f&&l.match(d?f.reContains:f.reEquals);if(k){Z={match:k[0],year:f.yearIndex&&this.fourDigitYear(k[f.yearIndex]),day:f.dayIndex&&parseInt(Number(k[f.dayIndex])),month:f.monthIndex&&this.numericMonth(k[f.monthIndex])};break;}}Y[l]=Z;return Z;},isTime:function H(Z,c,Y){var d=this.parseTime(Z,Y);var b=!!(d&&this.doesTimeExist(d.hour,d.min,d.sec));if(c){if(b){var a=this.formatTimeInfo(d,V().TIMEOUTPUTFORMAT);if(Y){return{match:d.match,formatted:a};}else{return a;}}else{return null;}}else{return !!b;}},parseTime:function I(m,d,k){if(m==null){return false;}if(typeof (m)!="string"){m=String(m);}m=J.trim(m);var Y=this.CACHE.PARSETIME[d?"CONTAINS":"EQUALS"],a=Y[m];if(a||(a===null)){return a;}var Z=null;var h;if(k){h=[k];}else{h=[].concat(V().TIMEINPUTFORMATS);h.unshift(V().TIMEOUTPUTFORMAT);}for(var b=0,c=h.length;b<c;b++){var g=this._buildRegExp4TimeFormat(h[b]),l=g&&m.match(d?g.reContains:g.reEquals);if(l){var f=g.ampmIndex&&l[g.ampmIndex];Z={match:l[0],hour:g.hourIndex&&this.capitalHour(l[g.hourIndex],f),min:g.minIndex&&parseInt(Number(l[g.minIndex])),sec:g.secIndex&&parseInt(Number(l[g.secIndex]))};break;}}Y[m]=Z;return Z;},formatTimeInfo:function Q(b,Z){if(!Z){return"";}var a=!(Number(b.hour)%12)?12:(Number(b.hour)%12),Y=Z.replace(/HH/g,this.formatInteger(b.hour,2)).replace(/H/g,Number(b.hour)).replace(/hh/g,this.formatInteger(a,2)).replace(/h/g,a).replace(/mm/g,this.formatInteger(Number(b.min)||0,2)).replace(/m/g,Number(b.min)||0).replace(/ss/g,this.formatInteger(Number(b.sec)||0,2)).replace(/s/g,Number(b.sec)||0).replace(/a/g,(Number(b.hour)<12)?V().AM_NAME:V().PM_NAME);return Y;},doesTimeExist:function F(d,Z,c){var b=parseInt(d);if(b>=0&&b<=23){var Y=parseInt(Z);if(Y>=0&&Y<=59){if(!c){return true;}var a=parseInt(c);if(a>=0&&a<=59){return true;}}}return false;},capitalHour:function C(Y,Z){Y=parseInt(Number(Y));if(Z&&(Z.match(V().AM_NAME)||Z.match(/AM/i))){return Y%12;}else{if(Z&&(Z.match(V().PM_NAME)||Z.match(/PM/i))){return 12+(Y%12);}else{return Y;}}},isDateAndOrTime:function T(Y,Z){return this.isDateTime(Y,Z)||this.isDate(Y,Z)||this.isTime(Y,Z);},isDateTime:function B(i,Y){var c=this.parseDateAndOrTime(i),g=c&&c.date,b=c&&c.time,f=!!g&&!!b&&this.doesDateExist(g.month,g.day,g.year)&&this.doesTimeExist(b.hour,b.min,b.sec);if(Y){if(f){var Z=this.formatDateInfo(g,V().DATEOUTPUTFORMAT),a=this.formatTimeInfo(b,V().TIMEOUTPUTFORMAT),h=i.indexOf(g.match),d=i.indexOf(b.match);return(d<h)?a+" "+Z:Z+" "+a;}else{return null;}}else{return !!f;}},parseDateAndOrTime:function O(Z,Y,d){var a=this.parseDate(Z,true,Y);var b=J.trim((a&&a.match)?Z.replace(a.match,""):Z),c=this.parseTime(b,false,d);if(!a&&!c){return null;}else{return{date:a,time:c};}},inDateTimeRange:function N(a,c,g){var Z=this.parseDateAndOrTime(a),d=Z&&Z.date,h=Z&&Z.time;if(!d&&!h){return 0;}if(c!=null){var b=this.parseDateAndOrTime(c);if(d&&b&&b.date){var i=this.compareDate(d,b.date);if(i<0){return -1;}else{if(i==0){if(h&&b.time&&(this.compareTime(h,b.time)<0)){return -1;}}}}}if(g!=null){var Y=this.parseDateAndOrTime(g);if(d&&Y&&Y.date){var f=this.compareDate(d,Y.date);if(f>0){return 1;}else{if(f==0){if(h&&Y.time&&(this.compareTime(h,Y.time)>0)){return 1;}}}}}return 0;},compareDate:function A(a,Y){if(a==Y){return 0;}var b=typeof (a)=="string"?this.parseDate(a):a,Z=typeof (Y)=="string"?this.parseDate(Y):Y;if(!b){return -1;}if(!Z){return 1;}return(b.year-Z.year)||(b.month-Z.month)||(b.day-Z.day)||0;},compareTime:function K(Z,Y){if(Z==Y){return 0;}var b=typeof (Z)=="string"?this.parseTime(Z):Z,a=typeof (Y)=="string"?this.parseTime(Y):Y;if(!b){return -1;}if(!a){return 1;}return(b.hour-a.hour)||(b.min-a.min)||(b.sec-a.sec)||0;},compareDateTime:function S(Z,Y){return this.compareDate(Z,Y)||this.compareTime(Z,Y);},compareDateAndOrTime:function D(g,d){if(g==d){return 0;}var Z=typeof (g)=="string"?this.parseDateAndOrTime(g):g,Y=typeof (d)=="string"?this.parseDateAndOrTime(d):d;if(!Z){return -1;}if(!Y){return 1;}var f=Z.date,c=Y.date,b=Z.time,a=Y.time;return this.compareDate(f,c)||this.compareTime(b,a);},_buildRegExp4DateFormat:function M(a){if(!a){return null;}var c=this.REGEXPS.DATES[a];if(!c){if(!this.REGEXPS.MONTHNAME_FULL){this.REGEXPS.MONTHNAME_FULL=V().MONTHNAME_FULL.join("|");this.REGEXPS.MONTHNAME_SHORT=V().MONTHNAME_SHORT.join("|");}c=this.REGEXPS.DATES[a]={};c.formatStr=a;var Z=c.reStr=a.replace(/([^M|d|y|\s])/g,"\\$1").replace(/dd/g,"~~~~").replace(/d/g,"(\\d{1,2})").replace(/\~\~\~\~/g,"(\\d\\d)").replace(/yyyy/g,"(\\d\\d\\d\\d)").replace(/yy/g,"(\\d\\d)").replace(/MMMM/g,"@@@@").replace(/MMM/g,"@@@").replace(/MM/g,"(\\d\\d)").replace(/M/g,"(\\d{1,2})").replace("@@@@","("+this.REGEXPS.MONTHNAME_FULL+")").replace("@@@","("+this.REGEXPS.MONTHNAME_SHORT+")");c.reEquals=new RegExp("^"+Z+"$");c.reContains=new RegExp("^"+Z+"\\b");var d=[{key:"monthIndex",index:a.indexOf("M")},{key:"dayIndex",index:a.indexOf("d")},{key:"yearIndex",index:a.indexOf("y")}];d.sort(function(g,f){return g.index-f.index;});var Y=1;for(var b=0;b<3;b++){c[d[b].key]=d[b].index>-1?Y++:null;}}return c;},_buildRegExp4TimeFormat:function E(b){if(!b){return null;}var d=this.REGEXPS.TIMES[b];if(!d){if(!this.REGEXPSTR_AMPM){this.REGEXPSTR_AMPM=[V().AM_NAME,V().PM_NAME,String(V().AM_NAME).toLowerCase(),String(V().PM_NAME).toLowerCase()].join("|");}d=this.REGEXPS.TIMES[b]={};d.formatStr=b;var a=b.replace(/\'\'/g,'"');var f=a.match(/\'(.+?)\'/g);a.replace(/\'(.+?)\'/g,"*");a=a.replace(/([^H|h|m|s|z|Z|a|\s])/g,"\\$1").replace(/HH|hh/g,"(\\d\\d)").replace(/H|h/g,"(\\d{1,2})").replace(/mm/g,"(\\d\\d)").replace(/m/g,"(\\d{1,2})").replace(/ss/g,"(\\d\\d)").replace(/s/g,"(\\d{1,2})").replace(/a/gi,"("+this.REGEXPSTR_AMPM+")").replace(/z|Z/g,"(.+?)");for(var c=1,Y=f&&f.length||0;c<Y;c++){a=a.replace(/\*/,f[c]);}a=a.replace(/\"/g,"'");d.reEquals=new RegExp("^"+a+"$");d.reContains=new RegExp(a);var g=[{key:"hourIndex",index:b.search(/h|H/)},{key:"minIndex",index:b.indexOf("m")},{key:"secIndex",index:b.indexOf("s")},{key:"ampmIndex",index:b.indexOf("a")},{key:"zoneIndex",index:b.search(/z|Z/)}];g.sort(function(i,h){return i.index-h.index;});var Z=1;for(var c=0;c<5;c++){d[g[c].key]=g[c].index>-1?Z++:null;}}return d;},doesDateExist:function L(b,Y,Z){var a=new Date(Z,b-1,Y);return Z==a.getFullYear()&&b==a.getMonth()+1&&Y==a.getDate();},fourDigitYear:function R(Z){Z=parseInt(Number(Z));if(!isNaN(Z)){var Y=(V().TWODIGITYEARSTART%100)||0;if(Z>=0&&Z<=Y){Z=2000+Z;}else{if(Z>Y&&Z<100){Z=1900+Z;}}}return Z;},numericMonth:function U(c){var b=parseInt(Number(c)),a=mstrmojo.array;if(!isNaN(b)){return b;}var Y=c&&c.length||0,Z=-1;if(Y){if(Y<=3){Z=a.indexOf(V().MONTHNAME_SHORT,c);}if(Z==-1){Z=a.indexOf(V().MONTHNAME_FULL,c);}}return Z+1;},formatInteger:function G(a,Z){var d=String(a),c=Math.max(Z-d.length,0);if(c>0){var Y=[d];for(var b=1;b<=c;b++){Y.push("0");}d=Y.reverse().join("");}return d;},getFirstDateOfMonth:function(Z,Y){return new Date(Z,Y-1,1);},getDateObject:function(f,Y,c,a,b,Z){f=f||0;Y=Y||1;c=c||1;a=a||0;b=b||0;Z=Z||0;return new Date(f,Y-1,c,a,b,Z);},getDateFromDateInfo:function(Y){return this.getDateObject(Y.date&&Y.date.year,Y.date&&Y.date.month,Y.date&&Y.date.day,Y.time&&Y.time.hour,Y.time&&Y.time.min,Y.time&&Y.time.sec);},getDateJson:function(Y){return{year:Y.getFullYear(),month:Y.getMonth()+1,day:Y.getDate(),hour:Y.getHours(),min:Y.getMinutes(),sec:Y.getSeconds()};},isLeapYear:function(Y){return !(Y%400)||(!(Y%4)&&!!(Y%100));},getDaysOfMonth:function(a,Y){var Z=[31,28,31,30,31,30,31,31,30,31,30,31];if(Y==2&&this.isLeapYear(a)){return 29;}return Z[Y-1];},getPreMonth:function(Z,Y){if(Y===1){return{y:Z-1,m:12};}return{y:Z,m:Y-1};},getNextMonth:function(Z,Y){if(Y===12){return{y:Z+1,m:1};}return{y:Z,m:Y+1};}});})();(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.locales");var X=mstrmojo.array,M=mstrmojo.meta.TP,L=mstrmojo.hash,D={ANDOR:14,MQ:10,MC:12,AQ:2,AL:6,AC:9,AE:5,F:13,R:21,B:20,XML:1},B={};for(var R in D){B[D[R]]=true;}var V={};V[D.AQ]="a";V[D.AL]="a";V[D.AC]="a";V[D.AE]="a";V[D.MQ]="m";V[D.MC]="m";V[D.F]="f";V[D.R]="r";V[D.XML]="p";var G={};G[D.MQ]=["not","m","fn","fnt","cs","dmy"];G[D.MC]=["not","m","fn","fnt","m2","m3","p","dmy"];G[D.AE]=["not","a","fn","es","a2","fm2","p"];G[D.AQ]=["not","a","fm","fn","cs"];G[D.AL]=["not","a","fm","fn","cs"];G[D.AC]=["not","a","fm","a2","fm2","a3","fm3","fn","cs"];G[D.R]=["not","r"];G[D.F]=["not","f"];G[D.XML]=["not","n","p"];var J={};J[D.MQ]="METRIC_FNS";J[D.MC]="METRIC_FNS";J[D.AQ]="FORM_FNS";J[D.AL]="FORM_FNS";J[D.AC]="FORM_FNS";J[D.AE]="ELEM_FNS";var K={FILTER:1,REPORT:3,METRIC:4,FOLDER:8,PROMPT:10,FUNCTION:11,ATTR:12,FACT:13,DIM:14,FORM:21,ROLE:43},W={FILTER:256,CUSTOMGROUP:257,PROMPT:2560,PROMPT_BOOLEAN:2561,PROMPT_LONG:2562,PROMPT_STRING:2563,PROMPT_DOUBLE:2564,PROMPT_DATE:2565,PROMPT_OBJECTS:2566,PROMPT_ELEMENTS:2567,PROMPT_EXPRESSION:2568,PROMPT_EXPRESSION_DRAFT:2569,PROMPT_DIMTY:2570,PROMPT_BIGDECIMAL:2571,REPORT_GRID:768,REPORT_GRAPH:769,REPORT_ENGINE:770,REPORT_TEXT:771,REPORT_DATAMART:772,REPORT_BASE:773,REPORT_GRIDGRAPH:774,REPORT_NONINTERACTIVE:775,REPORT_CUBE:776},P={a:K.ATTR,a2:K.ATTR,m:K.METRIC,m2:K.METRIC,r:K.REPORT,f:K.FILTER,p:K.PROMPT};var Q={};Q[D.MQ]=K.METRIC;Q[D.MC]=K.METRIC;Q[D.AQ]=K.ATTR;Q[D.AL]=K.ATTR;Q[D.AC]=K.ATTR;Q[D.AE]=K.ATTR;Q[D.F]=K.FILTER;Q[D.R]=K.REPORT;var F=function(Y){var H=Y.length,a={};for(var Z=0;Z<H;Z++){var b=Y[Z];a[b.did]=b.n;}return a;},C=function(Z){var H=Z.length;for(var a=0;a<H;a++){var Y=Z[a];if("tp" in Y){Y.t=Y.tp;}}return Z;},S=function(Z,b){var H=Z.length;for(var a=0;a<H;a++){var Y=Z[a];if("tp" in Y){if(b){Y.t=b;}else{delete Y.t;}}}return Z;},U=function(Y,a){if(!a){a=[];}a.length=0;for(var Z=0,H=Y.length;Z<H;Z++){a[Z]=Y[Z];}return a;},I={0:[{did:"1,76"},{did:"1,79"},{did:"1,77"},{did:"1,80"},{did:"1,78"},{did:"1,81"},{did:"1,18"},{did:"1,43"}],1:[{did:"2,1"},{did:"2,2"},{did:"3,1"},{did:"3,2"}]};METRIC_PROHIBITED={0:[{did:"1,22"},{did:"1,57"}]};mstrmojo.expr=mstrmojo.provide("mstrmojo.expr",{ET:D,ETs:B,ET2TGT:V,ET2COND:G,ET2TP:Q,FN:{EQUAL:6,NOT_EQUAL:7,GREATER:8,LESS:9,GREATER_EQUAL:10,LESS_EQUAL:11,IN_LIST:22,NOT_IN_LIST:57,BETWEEN:17,NOT_BETWEEN:44,IS_NULL:54,IS_NOT_NULL:55,AND:19,OR:20,NOT:21},FNT:{DEF:1,RANK:2,PER:3},FN_SEP:",",TP:K,STP:W,DMY_TP:{ATTR:-1,DIM:-2},DTP:{UNKNOWN:-1,INTEGER:1,UNSIGNED:2,NUMERIC:3,DECIMAL:4,REAL:5,DOUBLE:6,FLOAT:7,CHAR:8,VARCHAR:9,LONGVARCHAR:10,BINARY:11,VARBIN:12,LONGVARBIN:13,DATE:14,TIME:15,TIMESTAMP:16,SHORT:21,LONG:22,MBCHAR:23,BOOLEAN:24,PATTERN:25,BIGDECIMAL:30},METRIC_DTP:3,FN_DTP:{NUM:0,CHAR:1,DATE:2},DTP2PROMPT_STP:{"-1":W.PROMPT,1:W.PROMPT_LONG,2:W.PROMPT_LONG,3:W.PROMPT_LONG,4:W.PROMPT_DOUBLE,5:W.PROMPT_DOUBLE,6:W.PROMPT_DOUBLE,7:W.PROMPT_DOUBLE,8:W.PROMPT_STRING,9:W.PROMPT_STRING,10:W.PROMPT_STRING,14:W.PROMPT_DATE,15:W.PROMPT_DATE,16:W.PROMPT_DATE,21:W.PROMPT_LONG,22:W.PROMPT_LONG,23:W.PROMPT_STRING,24:W.PROMPT_BOOLEAN,30:W.PROMPT_BIGDECIMAL},DTP2FN_DTP:{"-1":0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:1,9:1,10:1,11:0,12:0,13:0,14:0,15:0,16:0,21:0,22:0,23:1,24:0,25:1,30:0},fnCstCount:function A(Y,H){var Z=this.FN;switch(Y){case Z.BETWEEN:case Z.NOT_BETWEEN:return 2;case Z.IS_NULL:case Z.IS_NOT_NULL:return 0;default:return 1;}},fn_List:function O(Y,H){var Z=this.FN;return Y==Z.IN_LIST||Y==Z.NOT_IN_LIST;},fn_AC_MC:function T(Y,H){var Z=this.FN;return(Y==Z.EQUAL)||(Y==Z.NOT_EQUAL)||(Y==Z.GREATER)||(Y==Z.LESS)||(Y==Z.GREATER_EQUAL)||(Y==Z.LESS_EQUAL);},fnName:function N(c,b,Y,a){var H=this[J[c]];if(H&&H.constructor===Object){H=H[this.DTP2FN_DTP[a]]||H["*"];}var Z=X.find(H,"did",(Y||1)+this.FN_SEP+b);if(Z>-1){return H[Z].n;}return"";},findTargets:function E(g,a,m){if(!m){m={};}if(g){for(var f in P){var s=g[f];if(s){if(!s[M]){s[M]=P[f];}m[s[a]]=s;}}if(g.dmy){var c=this.TP.ATTR,n=this.DMY_TP.ATTR,Z=g.dmy.uts;for(var r=0,Y=(Z&&Z.length)||0;r<Y;r++){var d=Z[r];if(d&&d.utp===n){var b=d.utgt;if(!b.t){b.t=c;}m[b[a]]=b;}}}var H=g.nds,l,p;for(l=0,p=(H&&H.length)||0;l<p;l++){this.findTargets(H[l],a,m);}var o=g.cs,q=o&&o.length;if(q){for(l=0;l<q;l++){this.findTargets(o[l],a,m);}}}return m;},onLocaleUpdated:function(){var Y=mstrmojo.locales.expression,H=mstrmojo.expr;H.BRANCH_FNS=L.copy(F(Y.BranchQual),H.BRANCH_FNS);H.ELEM_FNS=U(S(Y.Element,"fn"),H.ELEM_FNS);H.METRIC_FNS={"*":S(X.filter(Y.Metric,function(Z){return Z.did&&(X.find(METRIC_PROHIBITED["0"],"did",Z.did)<0);}))};H.FORM_FNS={0:S(X.filter(Y.Attribute,function(Z){return Z.did&&(X.find(I["0"],"did",Z.did)<0);})),1:S(X.filter(Y.Attribute,function(Z){return Z.did&&(X.find(I["1"],"did",Z.did)<0);})),2:S(X.filter(Y.Attribute,function(Z){return Z.did&&(X.find(I["0"],"did",Z.did)<0)&&(X.find(I["1"],"did",Z.did)<0);}))};H.DIMTYLEVELS=U(S(Y.DimtyLevels),H.DIMTYLEVELS);}});mstrmojo.expr.onLocaleUpdated();})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var B=mstrmojo.dom;function C(H){if(B.isWK){document.onselectstart=function(I){if(!H){I.preventDefault();}return H;};}}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function F(){return this.domNode;},getMovingTarget:function G(){return this.domNode;},ondragstart:function A(K){var J=this.getMovingHandle(),H=this.getMovingTarget().style;var I=B.contains(J,K.src.node,true,document.body);if(I){C(false);J.style.cursor="move";this._leftPos=parseInt(H.left,10);this._topPos=parseInt(H.top,10);this._hWidth=J.clientWidth;this._hHeight=J.clientHeight;}return I;},ondragmove:function E(K){var J=K.tgt.pos,H=K.src.pos,I=this.getMovingTarget().style;I.left=this.left=Math.max(this._leftPos+J.x-H.x,-this._hWidth+40)+"px";I.top=this.top=Math.max(this._topPos+J.y-H.y,-this._hHeight+10)+"px";},ondragend:function D(H){C(true);this.getMovingHandle().style.cursor="default";delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}});}());(function(){mstrmojo.requiresCls("mstrmojo.array","mstrmojo.dom","mstrmojo.css");var A=1,J="mstrmojo-itemwrap",I="&nbsp;",S=mstrmojo.array;function F(W,Z,Y){Z=this.wrapperParentNode(Z);if(Z&&Y&&Z!==Y){var V=W.domNode,X=Y.parentNode;while(X){if(X===Z){return Y;}else{if(X===V){break;}}Y=X;X=Y.parentNode;}}return null;}function M(X,b,a){var W=X.items&&X.items.length,Y=this.wrapperNodes(b),V=S.findBin(Y,a,"offsetTop",W);for(var Z=V;Z<W;Z++){if(Y[Z].offsetHeight){return Z;}}return -1;}function B(V){if(!V.pageSize||V.pageSize<=0){var W=V.scrollboxNode;V.pageSize=W&&W.clientHeight||0;}return V.pageSize;}function T(V,W){if(V.usePaging){V.totalPages=1;var Y=V.itemsContainerNode,X=B(V);if(V.usePaging&&Y&&X){V.totalPages=Math.ceil((Y.clientHeight-parseInt(Y.style&&Y.style.paddingBottom||0,10))/X);}if(Y){V.itemsContainerNode.style.paddingBottom=X+"px";}}}mstrmojo.ListMapper=mstrmojo.provide("mstrmojo.ListMapper",{markupPrefix:"",markupSuffix:"",itemWrapperPrefix:function(V){return'<div class="'+this.getWrapperCss(V)+'">';},itemWrapperSuffix:"</div>",itemWrapperPrefill:"&nbsp",wrapperNodes:function C(V){return V.childNodes;},wrapperParentNode:function D(V){return V;},createWrapperNode:function G(V){var W=V.ownerDocument,X=W.createElement("div");return X;},findScrollRange:function L(m,Z,l,q,W,c,r,o){if(!Z){return{start:0,end:0};}var f=this.wrapperNodes(m),k=parseInt(Z/2,10),Y=parseInt(Math.log(Z)/Math.log(2),10),X=0,V=Z-1,g=l+q,d=f[0].offsetTop,b;for(var n=1;n<=Y;n++){b=f[k].offsetTop-d+o;if(b<l){X=k;}else{if(b>g){V=k;}}var a=Math.round(Z/Math.pow(2,n+1));k+=(b>l)?-a:a;k=Math.min(Math.max(0,k),Z-1);}return{start:X,end:V};},findWrapper:function K(X,V){var W=this.wrapperNodes(X);return W&&W[V];},findIndex:function E(V,Y,X){var W=this._nd2iw(V,Y,X);return W?this._iw2idx(V,Y,W):-1;},itemOffsetTop:function U(W,a,V,Y){if(!Y){var X=this.wrapperNodes(a);Y=X&&X[V];if(!Y){return 0;}}var Z=a.firstChild;if(!Z||(Z===Y)){return 0;}else{return Y.offsetTop-Z.offsetTop;}},whereDrop:function R(c,V,X,b,W){var Y=this._nd2iw(c,V,X),d,a,f;if(Y){a=this._iw2idx(c,V,Y);d=a;f=this.itemOffsetTop(c,V,null,Y);var Z=Y.offsetHeight;if(b.y>W.top+f+Z/2){d++;f+=Z;}}else{return c.dropCuePos;}return{left:0,top:f,idx:d,idxActual:a};},getWrapperCss:function(V){return J;},postBuildRendering:function(Z,Y,X,W,V){T(W,this);},buildItemWrappers:function O(f,b,i,d,a,l){var m=this.itemWrapperPrefix(i),h=this.itemWrapperSuffix,Z=m+this.itemWrapperPrefill+h,Y=[this.markupPrefix],W=1,V=i.selectedIndices||{},o=function n(p,k){for(var q=p;q<k;q++){Y[W++]=m;var r=b.build(i,d,f[q],q);if(V[q]){r=r.replace(/class\=\"([^\"]*)\"/,'class="$1 selected"');}Y[W++]=r;Y[W++]=h;}};var c=(f&&f.length)||0;a=a&&b?Math.min(a,c):0;if(a){o(0,a);}l=l&&b?Math.min(l,c-a):0;var g=c-l;for(var X=a;X<g;X++){Y[W++]=Z;}if(l){o(g,c);}Y.push(this.markupSuffix);return Y;},fillItemWrappers:function H(X,h,d,o,g,W,b,n){var f=(h&&h.length)||0,m=this.wrapperNodes(X),q=g.itemStatus,V=mstrmojo.css,Z=o.selectedIndices||{};for(var c=W,l=Math.min(b+1,f),a=0;c<l;c++){if(q[c]!==A){m[c].innerHTML=d.build(o,g,h[c],c);if(Z[c]){var Y=m[c].firstChild;if(Y){V.addClass(Y,["selected"]);}}a++;if(a===n){break;}}}return a;},onadd:function N(f,V,Z,g){if(V&&g){var a=g.value.length,b=this.wrapperNodes(V),d=b[g.index],Y=this.getWrapperCss(f);for(var X=0;X<a;X++){var W=this.createWrapperNode(V);W.className=Y;W.innerHTML=I;if(d){this.wrapperParentNode(V).insertBefore(W,d);}else{this.wrapperParentNode(V).appendChild(W);}}T(f,this);}},onremove:function P(Y,b,V,X){if(b&&X){var a=this.wrapperNodes(b);if(a){var d=X.value.length;for(var Z=X.index+d-1,W=X.index;Z>=W;Z--){this.wrapperParentNode(b).removeChild(a[Z]);}}T(Y,this);}},onchange:function Q(h,X,c,l){if(X&&l){var d=this.wrapperNodes(X);if(d){var W=mstrmojo.css,m=c.itemStatus,k;for(var b=0,V=l.removed,g=V&&V.length;b<g;b++){k=V[b];if(m[k]){W.removeClass(d[k].firstChild,["selected"]);}}for(var Z=0,f=l.added,Y=f&&f.length;Z<Y;Z++){k=f[Z];if(m[k]){W.addClass(d[k].firstChild,["selected"]);}}}}},_nd2iw:F,_iw2idx:M,toPage:function(V,X){var W=V.scrollboxNode;if(V.usePaging&&W){W.scrollTop=X*B(V);}else{mstrmojo.alert("paging is not setup, can not perform paging.");}},whichPage:function(V){var W=V.scrollboxNode,X=B(V);return Math.round((W&&X&&W.scrollTop/X)||0);},toItem:function(Z,a){var X=Z&&Z.itemsContainerNode,f=Z.scrollboxNode,V=this.itemOffsetTop(Z,X,a),b=this.wrapperNodes(X)[a].clientHeight,W=f.clientHeight,d=f.scrollTop,Y=d;if(V<d){Y=V;}else{if(d+W-b<V){Y=Math.min(V,V-W+b);}}f.scrollTop=Y;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo.ListBuilder");var E=mstrmojo.hash,H=mstrmojo.registry,G=1;mstrmojo.WidgetListBuilder=mstrmojo.provide("mstrmojo.WidgetListBuilder",mstrmojo.mixin({newContext:function F(J){var K=J.itemFunction;if(!K){var I=J.itemConfig;K=I?function(M,L,N){var O=E.clone(I);O.data=M;O.parent=N;return H.ref(O);}:null;}return{itemStatus:[],itemWidgets:[],itemFunc:K};},build:function A(K,J,N,I){var L=J.itemFunc(N,I,K);if(L){J.itemStatus[I]=G;J.itemWidgets[I]=L;if(L.set){var M=K.selectedIndices;if(M&&M[I]){L.set("selected",true);}}}return L;},onadd:function C(K,I,J){if(I){mstrmojo.array.insert(I.itemWidgets,J.index,new Array(J.value.length));}this._super(K,I,J);},onremove:function D(L,J,K){if(J){var O=J.itemWidgets.splice(K.index,K.value.length);for(var N=0,I=O.length;N<I;N++){var M=O[N];if(M&&M.destroy){delete M.parent;M.destroy();}}}this._super(L,J,K);},onchange:function B(S,J,P,T){if(T){var N=P.itemWidgets,L;for(var O=0,I=T.removed,R=I&&I.length;O<R;O++){L=N[I[O]];if(L&&L.set){L.set("selected",false);}}for(var M=0,Q=T.added,K=Q&&Q.length;M<K;M++){L=N[Q[M]];if(L&&L.set){L.set("selected",true);}}}}},mstrmojo.hash.copy(mstrmojo.ListBuilder)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var D=1,B="mstrmojo-itemwrap";mstrmojo.ListMapperHoriz=mstrmojo.provide("mstrmojo.ListMapperHoriz",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0"><tbody><tr>',markupSuffix:"</tr></tbody></table>",itemWrapperPrefix:function(H){return'<td class="'+this.getWrapperCss(H)+'">';},getWrapperCss:function(H){return"mstrmojo-itemwrap-td";},itemWrapperPrefill:"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",itemWrapperSuffix:"</td>",wrapperNodes:function G(H){return this.wrapperParentNode(H).cells;},wrapperParentNode:function F(H){return H.firstChild.rows[0];},createWrapperNode:function E(H){var I=H.ownerDocument,J=I.createElement("td");return J;},findScrollRange:function C(U,L,S,X,I,P,Y,W){var Q=this.wrapperNodes(U),R=parseInt(L/2,10),K=parseInt(Math.log(L)/Math.log(2),10),J=0,H=L-1,T=I+P,M=Q[0].offsetLeft,O;for(var V=1;V<=K;V++){O=Q[R].offsetLeft-M+Y;if(O<=I){J=R;}else{if(O>=T){H=R;}}var N=Math.round(L/Math.pow(2,V+1));R+=(O>I)?-N:N;R=Math.min(Math.max(0,R),L-1);}return{start:J,end:H};},findIndex:function A(I,M,K){if(M&&K){var H=I.domNode,L=this.wrapperParentNode(M),J=K.parentNode;while(J){if(J===L){return mstrmojo.array.findBin(this.wrapperNodes(M),K,"offsetLeft",I.items&&I.items.length);}else{if(J===H){break;}}K=J;J=K.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));})();(function(){mstrmojo.requiresCls("mstrmojo.locales","mstrmojo.expr","mstrmojo.date","mstrmojo.num","mstrmojo.string");mstrmojo.validation={STATUSCODE:{UNKNOWN:-1,VALID:0,INVALID:1,INVALID_EMPTY:2,INVALID_CHAR:3,INVALID_OUTOFRANGE:4,INVALID_REGEX:5,INVALID_VALIDATOR:6,INVALID_BAD_NUMERICFORMAT:7,INVALID_BAD_DATESTRING:8},TRIGGER:{NONE:0,ONBLUR:1,ONKEYUP:2,VALUESET:4,ALL:7},REGEXP:{US_ZIP:/^\d{5}([- ]?\d{4})?$/,EMAIL_ADDRESS:/^([a-zA-Z0-9\_\.\-])+@(([a-zA-Z0-9\-])+[\.])+([a-zA-Z0-9]{2,4})+$/,SOCIAL_SECURITY_NUMBER:/^((?!000)(?!666)\d{3})(\s|\-)?((?!00)\d{2})\2((?!0000)\d{4})$/,PHONE_NUMBER:/^(?!-)[ \d\-\(\)\.\+]+$/,FILE_NAME:new RegExp('^[^:*?"<>|/\\\\()]+$'),FOLDER_PATH_WIN:new RegExp('^([a-zA-Z]:|\\\\\\\\[^:*?"<>|/\\\\]+|[^:*?"<>|/\\\\]*)(\\\\[^:*?"<>|/\\\\]+)*(\\\\){0,1}$'),FOLDER_PATH_UNIX:new RegExp('^(/){0,1}([^:*?"<>|/\\\\]+/)*([^:*?"<>|/\\\\]+){0,1}$'),PRINTER_PATH_SINGLE:new RegExp('^[^$%:*?"<>|/\\\\]*$'),PRINTER_PATH_MULTIPLE:new RegExp('^((/|\\\\\\\\)[^$%:*?"<>|/\\\\]+)((/|\\\\)[^$%:*?"<>|/\\\\]+)*(/|\\\\){0,1}$')},VALIDATOR:{DEMO:function L(c){var b=parseInt(c,10),d=mstrmojo.validation.STATUSCODE;if(b===0||b===1||b>10){return{code:d.VALID};}return{code:d.INVALID,msg:"This field must be either 0, 1 or greater than 10"};},VALIDATE_PHONENO:function H(b){var d=this.dtp,c=String(b).replace(/[^\d]/g,"");if(c.length<10){return{code:E.INVALID,msg:mstrmojo.desc(9203)};}if(!J.REGEXP.PHONE_NUMBER.test(b)){return{code:E.INVALID,msg:mstrmojo.desc(9204)};}return{code:E.VALID};},VALIDATE_ZIPCODE:function G(b){var d="",c=this.dtp;if(!J.REGEXP.US_ZIP.test(b)){if(J.isNumeric(c)||J.isInt(c)){d=mstrmojo.desc(9208);}else{if(J.isString(c)){d=mstrmojo.desc(9206);}}return{code:E.INVALID,msg:d};}return{code:E.VALID};},VALIDATE_EMAIL:function P(b){var c=b.indexOf("@");if(c===-1){return{code:E.INVALID,msg:mstrmojo.desc(9197)};}if(b.substring(c).indexOf(".")===-1){return{code:E.INVALID,msg:mstrmojo.desc(9198)};}return J.REGEXP.EMAIL_ADDRESS.test(b)?{code:E.VALID}:{code:E.INVALID,msg:mstrmojo.desc(9207)};},VALIDATE_SSN:function O(b){var d=this.dtp,c;if(J.isNumeric(d)||J.isInt(d)){c=String(b).replace(/[^\d]/g,"");if(c.length!=9){return{code:E.INVALID,msg:mstrmojo.desc(9209)};}}if(!J.REGEXP.SOCIAL_SECURITY_NUMBER.test(b)){return{code:E.INVALID,msg:mstrmojo.desc(9210)};}return{code:E.VALID};}},isInt:function(b){return B[b]==1;},isNumeric:function(b){return B[b]==2||B[b]==5;},isString:function(b){return B[b]==3;}};var V=window.mstrConfig,I=V.listSep,W=mstrmojo.expr,K=W.DTP,J=mstrmojo.validation,F=J.TRIGGER,E=J.STATUSCODE,X=mstrmojo.css,Q=mstrmojo.num,N=mstrmojo.string,a=mstrmojo.date,B={"-1":-1,1:1,2:1,3:2,4:2,5:2,6:2,7:2,8:3,9:3,10:3,11:4,12:4,13:4,14:6,15:6,16:6,21:2,22:2,23:3,24:4,25:3,30:5};function D(l,m){var h=l.dtp,k=l.constraints,o=k.allowedFormatChars?k.allowedFormatChars:"",g=(B[h]==1),b=(B[h]==2),d=(B[h]==6),n=mstrmojo.locales.number.THOUSANDSEPARATOR,f=mstrmojo.locales.number.DECIMALSEPARATOR,i;if(g){if(!l._intRegExp){o+="0-9-"+(l.isList?I:"")+n;l._intRegExp=new RegExp("[^"+o+"]");}i=l._intRegExp;}if(b){if(!l._numericRegExp){o+="0-9-"+(l.isList?I:"")+f+n;l._numericRegExp=new RegExp("[^"+o+"]");}i=l._numericRegExp;}if(d){}return !!i&&i.test(m);}function Y(l,n){var h=l.dtp,k=l.constraints,g=(B[h]==1),b=(B[h]==2),d=(B[h]==6),f=k.min,m=k.max,i;if(f==undefined&&m==undefined){return false;}if(g||b){return Q.inNumericRange(n,f,m)!==0;}if(d){return a.inDateTimeRange(n,f,m)!==0;}return false;}function Z(c,b){return !Q.isNumeric(b);}function A(f,c){var d=(f.dtp===K.DATE),b=(f.dtp===K.TIME);return(d?!a.isDate(c):(b?!a.isTime(c):!a.isDateAndOrTime(c)));}mstrmojo._CanValidate=mstrmojo.provide("mstrmojo._CanValidate",{constraints:null,required:false,dtp:K.INTEGER,isList:false,autoFormat:false,validationStatus:null,init:function S(b){this._super(b);if(!this.constraints){this.constraints={};}var d=this.constraints;if(!("trigger" in d)){d.trigger=F.NONE;}},_set_value:function(h,d){var f=this.value,c=(f!==d);if(c){this.value=d;var g=this.constraints.trigger,b=(g&F.VALUESET)>0;if(b){this.validate(d);}}return c;},validate:function M(){var d=(this.value!==null&&this.value!==undefined)?this.value:"",h=this.isList?d.split(I):[d],g,c,k;for(var f=0,b=h.length;f<b;f++){g=this.doValidation(h[f]);c=(g.code>E.VALID);if(c){if(b>1){g.msg=mstrmojo.locales.validation.invalidValueInListError.replace("#",h[f]?h[f]:" ");}break;}}k=c?"onInvalid":"onValid";if(!c&&this.autoFormat){this.format();}this.set("validationStatus",g);if(this[k]){this[k](g);}},format:function T(){var h=this.dtp,d=(B[h]==6);if(!d){return ;}var l=mstrConfig.listSep,o=this.value||"",c=this.isList?o.split(l):[o],n=h===14,m=[],b,f=mstrmojo.locales.datetime;for(var g=0,k=c.length;g<k;g++){o=c[g];b=a.parseDateAndOrTime(o);if(b){if(n&&b.date){m.push(a.formatDateInfo(b.date,f.DATEOUTPUTFORMAT));}else{m.push((b.date?a.formatDateInfo(b.date,f.DATEOUTPUTFORMAT):"")+" "+(b.time?a.formatTimeInfo(b.time,f.TIMEOUTPUTFORMAT):""));}}}this.set("value",m.join(l));},isValid:function R(){var b=this.validationStatus;if(!b){this.validate();}return this.validationStatus.code===E.VALID;},clearValidation:function U(){this.set("validationStatus",{code:E.VALID});if(this.onClearValidation){this.onClearValidation();}},doValidation:function C(p){var m=this.constraints,n=m.regExp,f=m.validator,b={id:this.id,code:E.VALID,msg:""},l=this.dtp,k=(B[l]==1),d=(B[l]==2||B[l]==5),g=(B[l]==3),h=(B[l]==6),i=N.isEmpty(p),o=String(p).length;err="",_VAL=mstrmojo.locales.validation;if(this.required&&i){b.code=E.INVALID_EMPTY;b.msg=_VAL.requiredFieldError;return b;}p=N.trim(p);if(!i&&D(this,p)){if(k){err=_VAL.integerDataType;}if(d){err=_VAL.numericDataType;}if(h){err=_VAL.dateDataType;}b.code=E.INVALID_CHAR;b.msg=_VAL.invalidCharError.replace("#",err);return b;}if(!i&&h&&A(this,p)){b.code=E.INVALID_BAD_DATESTRING;b.msg=_VAL.invalidDateStringError;return b;}if(!i&&(d||k)&&Z(this,p)){b.code=E.INVALID_BAD_NUMERICFORMAT;b.msg=_VAL.invalidNumericFormatError;return b;}if(!i&&(k||d||h)&&Y(this,p)){b.code=E.INVALID_OUTOFRANGE;if(m.min!=null&&m.max!=null){err=_VAL.outofRangeError.replace("#","").replace("##",m.min).replace("###",m.max);}else{if(m.min!=null){err=_VAL.noLessMinError.replace("##",m.min).replace("#","");}else{if(m.max!=null){err=_VAL.noGreaterMaxError.replace("###",m.max).replace("#","");}}}b.msg=err;return b;}if(g&&m.minLen!=null&&m.maxLen!=null){if(o<m.minLen||o>m.maxLen){b.code=E.INVALID;b.msg=mstrmojo.desc(9211).replace(/#/,m.minLen).replace(/##/,m.maxLen);return b;}}if(n&&!n.test(p)){b.code=E.INVALID_REGEX;b.msg=mstrmojo.desc(9205);return b;}var q=f&&f.apply(this,[p]);if(q){b.code=q.code;b.msg=q.msg;return b;}return b;}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.registry","mstrmojo._Provider","mstrmojo.array");var G=mstrmojo.hash,A=mstrmojo.registry,F=mstrmojo.array;mstrmojo.Obj=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Obj",init:function E(H){this.disposables=[];G.copy(H,this);if(this.postApplyProperties){this.postApplyProperties();}A.add(this);if(this.postCreate){this.postCreate();}},destroy:function B(H){this._super(H);F.forEach(this.disposables,function(I){if(I.destroy){I.destroy(H);}else{if(I.clear){I.clear();}}});this.disposables=[];A.remove(this);}});var C=mstrmojo.Obj;C.free=function D(H){if(H instanceof C){H.destroy();}};}());(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.array","mstrmojo.registry","mstrmojo.publisher","mstrmojo._Provider");var G=mstrmojo.hash,A=mstrmojo.array,B=mstrmojo.registry,D=mstrmojo.publisher;mstrmojo.Arr=mstrmojo.declare(null,[mstrmojo._Provider],{scriptClass:"mstrmojo.Arr",postApplyProperties:null,postCreate:null,length_bindEvents:["add","remove"],init:function H(K){var J;if(K&&K.data){J=K.data;delete K.data;}else{if(K){J=K;K=null;}}if(!J||J.constructor!==Array){J=[];}G.copy(mstrmojo.Arr.prototype,J);if(K){G.copy(K,J);}if(J.postApplyProperties){J.postApplyProperties();}B.add(J);if(J.postCreate){J.postCreate();}return J;},destroy:function E(){D.clearSubscriptions(this.id);B.remove(this);},add:function I(L,J,K){var M=L&&L.length;if(M){if(J==null){J=this.length;}A.insert(this,J,L);if(!K&&(this.onadd||D.hasSubs(this.id,"add"))){this.raiseEvent({name:"add",value:L,index:J});}}},remove:function F(J,L,K){if(L==null){L=1;}if((J!=null)&&L){var M=this.splice(J,L);if(!K&&(this.onremove||D.hasSubs(this.id,"remove"))){this.raiseEvent({name:"remove",value:M,index:J});}}}});mstrmojo.Arr.makeObservable=function C(J,K){if(!J){return ;}if(!K){K={};}K.data=J;return this.prototype.init(K);};})();(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo.Binding","mstrmojo._HasBindings","mstrmojo._HasMarkup","mstrmojo._HasTooltip");var B=mstrmojo.Widget=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasBindings,mstrmojo._HasMarkup,mstrmojo._HasTooltip],{scriptClass:"mstrmojo.Widget",domNode:null,hasRendered:false,visible:true,enabled:true,tooltip:"",cssClass:"",cssText:"",cssDisplay:"block",init:function A(D){this._super(D);var E=this.parent;if(!E||E.hasInitBindings){this.initBindings();}},destroy:function C(D){if(this.hasRendered){this.unrender(D);}if(this.bindings){this.destroyBindings();}this._super();},invalidate:mstrmojo.emptyFn});B.cssTextMarkupMethod=function(){this.domNode.style.cssText=this.cssText||"";};B.visibleMarkupMethod=function(){this.domNode.style.display=(this.visible)?this.cssDisplay:"none";};B.heightMarkupMethod=function(){this.domNode.style.height=this.height||"";};B.widthMarkupMethod=function(){this.domNode.style.width=this.width||"";};}());(function(){mstrmojo.requiresCls("mstrmojo.Obj","mstrmojo._LoadsScript","mstrmojo._HasChildren","mstrmojo.Binding","mstrmojo._HasBindings");mstrmojo.Model=mstrmojo.declare(mstrmojo.Obj,[mstrmojo._LoadsScript,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.Model",init:function A(C){this._super(C);if(this.children){this.initChildren();}if(!this.parent){this.initBindings();}},destroy:function B(C){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(C);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");var C=1;mstrmojo._hasWidgetListMapper={buildItemWrappers:function A(H,G,F,E,J,I){E.first=J;E.last=I;return this._super(H,G,F,E,0,0);},postBuildRendering:function B(K,I,H,G,F){var J=F.first;if(J){this.fillItemWrappers(K,I,H,G,F,0,J);}if(F.last){var E=I&&I.length||0,L=Math.max(Math.max(0,E-F.last),J);this.fillItemWrappers(K,I,H,G,F,L,E);}if(this._super){this._super(K,I,H,G,F);}},fillItemWrappers:function D(F,N,K,R,M,E,I,Q){var L=(N&&N.length)||0,P=this.wrapperNodes(F),S=M.itemStatus;for(var J=E,O=Math.min(I+1,L),H=0;J<O;J++){if(S[J]!==C){var G=K.build(R,M,N[J],J);if(G){G.placeholder=P[J].firstChild;G.render();}H++;if(H===Q){break;}}}return H;},onchange:null};mstrmojo.WidgetListMapper=mstrmojo.provide("mstrmojo.WidgetListMapper",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.WidgetListMapper.RENDERED=C;mstrmojo.requiresCls("mstrmojo.ListMapperHoriz");mstrmojo.WidgetListMapperHoriz=mstrmojo.provide("mstrmojo.WidgetListMapperHoriz",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperHoriz)));})();(function(){mstrmojo.requiresCls("mstrmojo.ListMapper");mstrmojo.ListMapperTable=mstrmojo.provide("mstrmojo.ListMapperTable",mstrmojo.hash.copy({markupPrefix:'<table class="mstrmojo-itemwrap-table" cellspacing="0" cellpadding="0">',markupSuffix:"</table>",itemWrapperPrefix:function(E){return'<tbody class="'+this.getWrapperCss(E)+'">';},itemWrapperPrefill:"<tr><td>&nbsp;</td></tr>",itemWrapperSuffix:"</tbody>",wrapperNodes:function D(E){return this.wrapperParentNode(E).tBodies;},wrapperParentNode:function C(E){return E.getElementsByTagName("table")[0];},createWrapperNode:function B(E){var F=E.ownerDocument,G=F.createElement("tbody");return G;},findIndex:function A(G,J,I){if(J&&I){var F=G.domNode,E=this.wrapperParentNode(J),H=I.parentNode;while(H){if(H===E){return mstrmojo.array.findBin(this.wrapperNodes(J),I,"offsetTop",G.items&&G.items.length);}else{if(H===F){break;}}I=H;H=I.parentNode;}}return -1;}},mstrmojo.hash.copy(mstrmojo.ListMapper)));mstrmojo.requiresCls("mstrmojo.WidgetListMapper");mstrmojo.WidgetListMapperTable=mstrmojo.provide("mstrmojo.WidgetListMapperTable",mstrmojo.mixin(mstrmojo._hasWidgetListMapper,mstrmojo.hash.copy(mstrmojo.ListMapperTable)));})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom","mstrmojo.hash","mstrmojo.css");var D=mstrmojo.dom,E=mstrmojo.hash,B=mstrmojo.css;mstrmojo.Button=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Button",iconClass:"",innerIconClass:"",title:"",text:"&nbsp;",enabled:true,selected:false,cssDisplay:"block",markupString:'<div id="{@id}" class="mstrmojo-Button {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:touchstart,click,mousedown,mouseup><div class="mstrmojo-Button-text {@innerIconClass}"></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},onenabledChange:function(){B[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){B[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.textNode.innerHTML=this.text;},onwidthChange:function(){var F=this.width;if(F){this.domNode.style.width=F;}}},oniconClassChange:function C(G){if(this.hasRendered&&this.domNode){var F=G.valueWas,H=G.value;this.domNode.className=this.domNode.className.replace(F,"")+" "+H;}},onclick:mstrmojo.emptyFn,ontouchend:function A(F){this.onclick(F);}});mstrmojo.Button.newIconButton=function(H,K,I,F,J){var G={scriptClass:"mstrmojo.Button",title:H,cssClass:K,text:"",onclick:I};if(F){G.bindings=F;}E.copy(J,G);return G;};mstrmojo.Button.newInteractiveButton=function(G,H,J,I){var F={scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-InteractiveButton",text:G,glowClass:"glow"};if(H){F.onclick=H;}if(J&&(D.isFF||D.isWK)){E.copy({onmousedown:function(){B.applyShadow(this.domNode,0,0,10,J);},onmouseup:function(){B.removeShadow(this.domNode);}},F);}E.copy(I,F);return F;};}());(function(){mstrmojo.requiresCls("mstrmojo.Widget");mstrmojo.Label=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Label",text:null,markupString:'<div id="{@id}" class="mstrmojo-Label {@cssClass}" style="{@cssText}" mstrAttach:click></div>',cssDisplay:"block",markupMethods:{ontextChange:function(){this.domNode.innerHTML=(this.text!=null)?this.text:"";},oncssTextChange:function(){this.domNode.style.cssText=(this.cssText!=null)?this.cssText:"";},onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";}},autoHide:false,_set_text:function A(D,B){if(this.autoHide){this.set("visible",(B!=null)&&(B!==""));}var C=this.text;this.text=B;return C!=B;}});})();(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.dom");var B="mstrmojo-Image";mstrmojo.Image=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.Image",markupString:'<div id="{@id}" class="'+B+' {@cssClass}" style="{@cssText}" mstrAttach:click><image src="{@src}" mstrAttach:load /></div>',markupSlots:{imgNode:function(){return this.domNode.firstChild;}},markupMethods:{onsrcChange:function(){var C=this.imgNode;if(C){C.src=this.src||"../javascript/mojo/css/images/1ptrans.gif";}},oncssClassChange:function(){var C=this.domNode;if(C){C.className=this.cssClass||B;}},onvisibleChange:mstrmojo.Widget.visibleMarkupMethod},src:"",getImageSize:function A(){var C=this.imgNode;return{w:C.clientWidth,h:C.clientHeight};}});mstrmojo.Image.baseCssClass=B;}());(function(){mstrmojo.requiresCls("mstrmojo.boxmodel","mstrmojo.array","mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Widget","mstrmojo.Arr","mstrmojo._HasLayout","mstrmojo._ListBase2Selections","mstrmojo.ListSelector","mstrmojo._TouchScrolling","mstrmojo._PagingList");var Z=mstrmojo.hash,f=mstrmojo.array,d=mstrmojo.boxmodel,b=mstrmojo.dom;function A(i,l,h){var k=i.listSelector;if(k){k[l](i,i.itemsContainerNode,h);}}function K(i,h){var k=i.lastPagePos;if(!k||k.dragId!==h){k=d.offset(i.itemsContainerNode);k.dragId=h;i.lastPagePos=k;var l=i.scrollboxNode;i.lastScrollPos={left:l.scrollLeft,top:l.scrollTop,width:l.clientWidth,height:l.clientHeight};}}function N(l,o,i){var k=o&&o.node;if(k===l.dropCueNode||k===l.dropCueNode.firstChild){return l.dropCuePos;}var m=l.listMapper;var h=m&&m.whereDrop(l,l.itemsContainerNode,k,o.pos,{left:l.lastPagePos.left-l.lastScrollPos.left,top:l.lastPagePos.top-l.lastScrollPos.top,width:l.lastScrollPos.width,height:l.lastScrollPos.height});var n=l.dropCuePos;return((i!==false)&&n&&h&&(n.idx===h.idx)&&(n.left===h.left)&&(n.top===h.top))?n:h;}var g="attachEventListener";function C(i,h){if(i.makeObservable){h=h||[];if(!h[g]){mstrmojo.hash.make(h,i.itemsScriptClass||mstrmojo.Arr);}}return h;}function G(i,h){if(h&&h[g]){i._sub_its=h;i._sub_add=h[g]("add",i.id,"preadd");i._sub_rmv=h[g]("remove",i.id,"preremove");}}function F(h){if(h._sub_its){var i=mstrmojo.publisher;i.unsubscribe(h._sub_add);i.unsubscribe(h._sub_rmv);delete h._sub_add;delete h._sub_rmv;delete h._sub_its;}}mstrmojo.ListBase2=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._ListBase2Selections,mstrmojo._TouchScrolling,mstrmojo._PagingList,mstrmojo._HasLayout],{scriptClass:"mstrmojo.ListBase2",items:null,markupString:'<div id="{@id}" class="mstrmojo-ListBase2 {@cssClass}" style="position:relative;{@cssText}" mstrAttach:mousedown,mouseup,dblclick><div class="mstrmojo-ListBase2-itemsContainer" style="position:relative;{@itemsContainerCssText}">{@itemsHtml}</div><div class="mstrmojo-ListBase2-dropCue {@cssClass}"><div class="mstrmojo-ListBase2-dropCue-inner"></div></div></div>',markupSlots:{scrollboxNode:function(){return this.domNode;},itemsContainerNode:function(){return this.domNode.firstChild;},dropCueNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},ondropCuePosChange:function(){var i=this.dropCueNode,h=i&&i.style;if(!h){return ;}var l=this.dropCuePos,k=!!l;if(k){h.left=l.left+"px";h.top=l.top+"px";}h.display=k?"block":"none";},onpageChange:function(){if(this.usePaging&&!this._inScroll){this._inPaging=true;this.listMapper.toPage(this,this.page);this._inPaging=false;}}},autoHide:false,renderOnScroll:false,firstRenderBlockSize:50,renderBlockSize:50,listMapper:null,listBuilder:null,listSelector:mstrmojo.ListSelector,animate:false,itemsEffect:null,containerResizable:true,init:function Y(n){this._super(n);this.items=this.initItems(this.items);var m=this.selectedIndices,k=this.selectedIndicesList,l=this.selectedIndex,p=this.selectedItem;this.selectedIndices={};this.selectedIndex=-1;delete this.selectedIndicesList;delete this.selectedItem;if(m||k||(l>-1)||p){this.initSelections(m,k,l,p);}if(this.postInitItems){this.postInitItems();}},initItems:function H(h){return C(this,h);},preBuildRendering:function V(){var m=this.listBuilder,p=m.newContext(this);this.ctxtBuilder=p;var i=this.markupSlots,l=!!(this.renderOnScroll&&this.renderBlockSize&&i&&i.scrollboxNode),k=this.items,h=(k&&k.length)||0,n=l?this.firstRenderBlockSize:h,o=l?this.firstRenderBlockSize:0;this._eros=l;this.paused=false;this.itemsHtml=this.listMapper.buildItemWrappers(k,m,this,p,n,o).join("");this.itemsContainerCssText="visibility: hidden";if(this._super){this._super();}},postBuildRendering:function D(){delete this.itemsHtml;var o=this.listMapper;if(o&&o.postBuildRendering){o.postBuildRendering(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder);}G(this,this.items);if(this._eros||this.usePaging){if(!this._cb_scroll){var q=this.id;this._cb_scroll=function(){var i=mstrmojo.all[q];i.onscroll();};}mstrmojo.dom.attachEvent(this.scrollboxNode,"scroll",this._cb_scroll);this.onscroll();}if(this.animate){for(var l=0,k=["itemsEffect","scrollEffect"],h=k.length;l<h;l++){var p=k[l],m=this[p];if(m&&m.constructor===Object){m=mstrmojo.insert(mstrmojo.hash.clone(m));m.widget=this;this[p]=m;}}if(this.itemsEffect){this.itemsEffect.play();}}this.itemsContainerNode.style.visibility="inherit";if(this.containerResizable&&this.itemsContainerNode.scrollWidth<this.domNode.scrollWidth){this.itemsContainerNode.style.width=this.domNode.scrollWidth+"px";}if(this._super){this._super();}},unrender:function W(m){F(this);if(this._eros){mstrmojo.dom.detachEvent(this.scrollboxNode,"scroll",this._cb_scroll);delete this._cb_scroll;}for(var k=0,l=["itemsEffect","scrollEffect"],h=l.length;k<h;k++){var n=this[l[k]];if(n&&n.isPlaying){n.cancel();}}this._super(m);},pauseScrollRendering:function O(k,h,i){if(k!==false){k=true;}if(this.paused===!!k){return ;}this.paused=!!k;if(k){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}}else{this.fill(h,i);}},onscroll:function J(){if(this.paused){return ;}if(this._eros){if(!this._fillTmr){var h=this;this._fillTmr=self.setTimeout(function(){h.fill();h=null;},50);}}if(this._super){this._super();}},fill:function a(h,m){if(this._fillTmr){window.clearTimeout(this._fillTmr);delete this._fillTmr;}var n=(this.items&&this.items.length)||0;if(!n){if(m){m();}}else{var k=this.scrollboxNode,o=this.itemsContainerNode,l=mstrmojo.boxmodel.offset(o,k),q=this.listMapper,p=q.findScrollRange(o,n,(this.usesTouches&&this.pos&&parseInt(this.pos.y,10))||k.scrollTop,k.clientHeight,(this.usesTouches&&this.pos&&parseInt(this.pos.x,10))||k.scrollLeft,k.clientWidth,l.left,l.top);if(this.fillAt(p.start,p.end)){if(h){h();}var i=this.id;this._fillTmr=window.setTimeout(function(){mstrmojo.all[i].fill(h,m);},100);}else{if(m){m();}}}},fillAt:function L(k,i){var h=this.listMapper;if(h){return h.fillItemWrappers(this.itemsContainerNode,this.items,this.listBuilder,this,this.ctxtBuilder,k,i,this.renderBlockSize);}else{return false;}},add:function Q(i,h){if(!i||!i.length){return -1;}var k=this.items;if(h==null){h=Z.min(this.selectedIndices,false,true);if(h!==null&&h!==undefined){h++;}}if(h==null||h===-1){h=(k&&k.length)||0;}if(k&&k.add){k.add(i,h);}else{this.set("items",k?f.insert(k.concat(),h,i):i);}return h;},preadd:function B(l){if(this.hasRendered){var o=this.listMapper;if(o){o.onadd(this,this.itemsContainerNode,this.ctxtBuilder,l);}var n=this.listBuilder;if(n){n.onadd(this,this.ctxtBuilder,l);}var k=this.listSelector;if(k){k.onadd(this,l);}if(this._eros){this.onscroll();}else{var m=l.index,h=l.value.length;this.fillAt(m,m+h-1);}}if(this.onadd){this.onadd(l);}if(this._super){this._super(l);}},remove:function T(h){if(h==null){return -1;}if(h.constructor!==Array){return this._remove(h);}var l=this.items;if(l){var k;if(l.remove){for(k=h.length-1;k>-1;k--){l.remove(h[k],1);}}else{l=l.concat();for(k=h.length-1;k>-1;k--){l.splice(h[k],1);}this.set("items",l);}return h[0];}return -1;},_remove:function T(k){var i=this.items;if(!i||(k==null)){return -1;}var h;if(!isNaN(k)){h=k;}else{h=this.itemIndex(k);}if(h>-1){if(i.remove){i.remove(h,1);}else{i=i.concat();i.splice(h,1);this.set("items",i);}}return h;},duplicate:function X(n,i,k){var l=this.items,h=-1;if(!l||(n==null)){return -1;}if(!isNaN(n)){if(i===null||i===undefined){i=n+1;}n=l[n];}else{if(i===null||i===undefined){i=this.itemIndex(n)+1;}}if(n){var m;m=Z.copy(k,Z.clone(n));h=this.add([m],i);}return h;},preremove:function M(i){if(this.hasRendered){var l=this.listMapper;if(l){l.onremove(this,this.itemsContainerNode,this.ctxtBuilder,i);}var k=this.listBuilder;if(k){k.onremove(this,this.ctxtBuilder,i);}var h=this.listSelector;if(h){h.onremove(this,i);}if(this._eros){this.onscroll();}}if(this.onremove){this.onremove(i);}if(this._super){this._super(i);}},move:function R(m,r){function p(s,i){return(r>=s)&&(r<=s+i);}var q=(this.items&&this.items.length)||0;if(r===-1||r==null||isNaN(r)){r=q;}else{r=Math.min(r,q);}var l,h,o,n;if(m.constructor===Array){h=m;o=m;n=(h&&h.length)||0;if(p(m[0],m.length)){return false;}l=f.get(this.items,m);}else{if(typeof (m)==="object"){l=[m];n=1;h=this.itemIndex(l[0]);o=[h];if(p(h,1)){return false;}}else{h=m;o=[m];n=1;if(p(h,1)){return false;}l=[this.items[h]];}}for(var k=0;k<n;k++){if(o[k]<=r){r--;}}if(l[0]!=null){this.remove(h);this.add(l,r);}return true;},itemIndex:function E(h){if(h==null){return -1;}var i=this.itemIdField;return i?f.find(this.items,i,h[i]):f.indexOf(this.items,h);},prechange:function S(l){if(this.hasRendered){var k=[this.listBuilder,this.listMapper];for(var m=0,h=k.length;m<h;m++){var n=k[m];if(n&&n.onchange){n.onchange(this,this.itemsContainerNode,this.ctxtBuilder,l);}}}},makeObservable:false,_set_items:function I(o,h){var m=this.items;h=this.initItems(h);this.items=h;if(m!==h){var l=this,k=function(){if(l.autoHide){l.set("visible",!!(h&&h.length));}l=null;},i=this.hasRendered;if(i){this.refresh(k);}else{k();}}return m!==h;},premousedown:function c(h){A(this,"premousedown",h);},premouseup:function P(h){A(this,"premouseup",h);},scrollTo:function U(i){var h,k=this.listMapper;if(k&&k.toItem){if(!isNaN(i)){h=i;}else{h=this.itemIndex(i);}if(h>=0){k.toItem(this,h);}}},draggable:false,getDragData:function(m){K(this,m.id);var k=N(this,m.src),i=k&&k.idxActual;if((i>-1)&&this.selectedIndices[i]){var l=this.sortSelectedIndices(),h=f.get(this.items,l)||[];switch(h.length){case 1:return Z.copy(h[0],{html:h[0][this.itemDisplayField],index:l[0]});case 0:return null;default:return Z.copy({html:h.length+" selections",indices:l},h);}}},dropZone:false,ondragenter:function(h){K(this,h.id);this.set("dropCuePos",N(this,h.tgt));},ondragover:function(h){this.set("dropCuePos",N(this,h.tgt));},ondragleave:function(h){this.set("dropCuePos",null);},ondragstart:function(h){if(!(h&&h.src&&h.src.data)){return false;}},allowCopy:false,ondragend:function(l){var i=l&&l.tgt,h=i&&i.widget;if(h===this){}else{if(this.tree&&h&&h.tree===this.tree){if(!this.allowCopy||!b.ctrlKey(i.hWin,i.e)){var k=l.src&&l.src.data;if(k&&(k.indices||(k.index!==null))){this.remove(k.indices||k.index);}}}}},ondrop:function(q){var v=q&&q.src,p=v&&v.data;if(p){var k=N(this,q.tgt,false),r=k&&k.idx,l=(p&&p.constructor===Array);var n=this.items;r=Math.min(r,(n&&n.length)||0);var u=true;if(v.widget===this){u=this.move(this.sortSelectedIndices(),r);}else{this.add(l?p:[p],r);}if(u){var o=l?p.length:1,h={};for(var m=0;m<o;m++){h[r+m]=true;}this.set("selectedIndices",h);}}this.set("dropCuePos",null);}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.Widget");var A=mstrmojo.dom;mstrmojo.InlineEditBox=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.InlineEditBox",text:null,editMode:false,allowEdit:true,okSave:false,emptyHint:"Enter your text here.",markupString:'<div id="{@id}" class="mstrmojo-InlineEditBox {@cssClass}" style="{@cssText}" mstrAttach:click><div class="mstrmojo-InlineEditBox-text">{@text}</div><div class="mstrmojo-InlineEditBox-edit"><input type="text" class="mstrmojo-InlineEditBox-input" mstrAttach:keyup/><img class="mstrmojo-InlineEditBox-ok" src="../images/1ptrans.gif" title="Save"/><img class="mstrmojo-InlineEditBox-cancel" src="../images/1ptrans.gif" title="Cancel"/></div></div>',markupSlots:{textNode:function(){return this.domNode.firstChild;},editNode:function(){return this.domNode.lastChild;},inputNode:function(){return this.domNode.lastChild.firstChild;},okNode:function(){return this.domNode.lastChild.childNodes[1];},cancelNode:function(){return this.domNode.lastChild.lastChild;}},markupMethods:{ontextChange:function(){this.textNode.innerHTML=this.text||this.emptyHint||"";},oneditModeChange:function(){var G=this.editMode,D=this.domNode,C=this.textNode,F=this.editNode;mstrmojo.css.toggleClass(D,["edit"],G);if(G){C.style.display="none";F.style.display="block";var C=this.inputNode,E=C.style;C.value=this.text||"";E.width=(D.clientWidth-(this.okSave?(this.okNode.offsetWidth+this.cancelNode.offsetWidth):0))+"px";E.height=D.clientHeight+"px";C.focus();if(C.createTextRange){var H=C.createTextRange(),B=C.value.length;H.move("character",B);H.select();}}else{C.style.display="block";F.style.display="none";}},onokSaveChange:function(){var B=this.okSave?"inline":"none";this.okNode.style.display=B;this.cancelNode.style.display=B;},onallowEditChange:function(){mstrmojo.css.toggleClass(this.domNode,["disable"],!this.allowEdit);}},preclick:function(B){var D=B.e,C=A.eventTarget(B.hWin,D);if(C===this.okNode){this.save();}else{if(C===this.cancelNode){this.cancel();}else{if(this.editMode!=this.allowEdit){this.set("editMode",this.allowEdit);}}}},prekeyup:function(B){var D=B.e,C=D.keyCode||D.charCode;if(C==mstrmojo.Enum_Keys.ENTER){this.save();}else{if(C==mstrmojo.Enum_Keys.ESCAPE){this.cancel();}}},_attachEvents:function(){var B=this;if(this.editMode){if(!this._save_handler){this._save_handler=function(){var C=A.eventTarget(self,arguments[0]);if(!A.contains(B.domNode,C,true,document.body)){B.save();}};}A.attachEvent(document.body,"mousedown",this._save_handler);}else{if(this._save_handler){A.detachEvent(document.body,"mousedown",this._save_handler);}}},postBuildRendering:function(){if(this._super){this._super();}this._em_sub=this.attachEventListener("editModeChange",this.id,"_attachEvents");},destroy:function(){this.detachEventListener(this._em_sub);if(this._super){this._super();}},save:function(){this.set("text",this.inputNode.value);this.set("editMode",false);if(this.onSave){this.onSave();}},cancel:function(){this.set("editMode",false);if(this.onCancel){this.onCancel();}}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.registry","mstrmojo._HasContextMenu","mstrmojo.Widget");var P=mstrmojo.dom,B=mstrmojo.css,M=16;mstrmojo.ContextMenuItem=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasContextMenu],{scriptClass:"mstrmojo.ContextMenuItem",SUBMENU_SHIFT:3,visible:true,checked:false,enabled:true,buildDom:function(){var U=document.createElement("tr"),V=this.data,Y=this._cmSource,R,S;U.id=this.id;U.className="mstrmojo-ContextMenuItem "+(Y.isSeparatorItem(V)?"separator":Y.item2textCss(V));var W=this,X=function(){W.handleMouseOver();},T=function(){W.handleMouseOut();},Q=function(){W.handleClick();};P.attachEvent(U,"mouseover",X);P.attachEvent(U,"mouseout",T);P.attachEvent(U,"click",Q);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-left";S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-text";if(Y.isSeparatorItem(V)){S=document.createElement("img");S.src="../images/1ptrans.gif";}else{S=document.createElement("div");S.className="mstrmojo-CMI-content";R.innerHTML=V.itemWidget?"&nbsp":V[this.itemField];}R.appendChild(S);R=document.createElement("td");U.appendChild(R);R.className="mstrmojo-CMI-right "+(this.hasSubmenu?"sm":"");S=document.createElement("img");S.src="../images/1ptrans.gif";R.appendChild(S);return U;},buildRendering:function K(){this._super();var Q=this.data.itemWidget;if(Q){Q.placeholder=this.domNode.cells[1].children[0];Q.data=this.data;Q=mstrmojo.insert(Q);Q.render();Q.parent=this;this.itemWidget=Q;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";},oncheckedChange:function(){B.toggleClass(this.domNode,["checked"],this.checked);},onenabledChange:function(){B.toggleClass(this.domNode,["disabled"],!this.enabled);}},getMenuPosition:function I(){var Q=P.position(this.domNode,true);return{x:Math.round(Q.x+Q.w-this.SUBMENU_SHIFT),y:Math.round(Q.y)};},getContextMenuItems:function C(){return this.data[this.itemChildrenField];},getContextMenuCssClass:function E(){return this.data.cmCssClass||"";},callOnContextMenuOpen:function L(){var Q=this.data;if(Q.onContextMenuOpen){Q.onContextMenuOpen.apply(this,[]);}},callOnContextMenuClose:function A(){var Q=this.data;if(Q.onContextMenuClose){Q.onContextMenuClose.apply(this,[]);}},attachMousedownEvent:function J(){},getContextMenuSource:function O(){return this._cmSource;},adjustMenuPosition:function G(){var Q=this._subMenu,T=this._subMenu.domNode,S=T.offsetHeight,R=T.offsetWidth,W=P.windowDim(),V=P.position(T,false),U=P.position(T,true);if((V.x+R+M)>W.w){Q.set("left",(P.position(this.domNode,true).x-R)+"px");}if((V.y+S+M)>W.h){Q.set("top",(W.h-S-M+(U.y-V.y))+"px");}},handleMouseOver:function N(){var Q=this,R=function(){if(Q.hasSubmenu){Q.showContextMenu();}Q._cmSource.closeMenuTree(Q);Q._mouseOverTimer=null;};if(this._cmSource.activeMenuItem!==this){this._mouseOverTimer=window.setTimeout(R,80);}},handleMouseOut:function H(){if(this._mouseOverTimer){window.clearTimeout(this._mouseOverTimer);this._mouseOverTimer=null;}},closeMenuTree:function D(){this._cmSource.closeMenuTree();},handleClick:function F(){if(this.hasSubmenu){return ;}var Q=this._cmSource,R=this.data;if(!this.itemWidget){if(!Q.isSeparatorItem(R)&&Q.queryEnabled(R)){if(Q.executeCommand){Q.executeCommand(this.data);}Q.closeMenuTree();}}else{}}});})();(function(){mstrmojo.requiresCls("mstrmojo.publisher","mstrmojo.Widget","mstrmojo._HasChildren");var F=mstrmojo.publisher;mstrmojo.Container=mstrmojo.declare(mstrmojo.Widget,[mstrmojo._HasChildren],{scriptClass:"mstrmojo.Container",defaultChildSlot:"containerNode",init:function I(L){this._super(L);if(this.children){this.initChildren();}var M=this.parent;if(!M||M.hasInitBindings){this.initBindings();}},destroy:function G(L){if(this.children){this.destroyChildren(true);}if(this.bindings){this.destroyBindings();}this._super(L);},unrender:function J(N){var O=this.children,L=(O&&O.length)||0,M;for(M=L-1;M>-1;M--){O[M].unrender(true);}this._super(N);},postBuildRendering:function K(){var L=this._super?this._super():undefined;if(L!==false){this.renderChildren();L=true;}return L;},renderChildren:function C(){var N=this.children,L=(N&&N.length)||0,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render(null);}}},childRenderCheck:function H(M){if(M&&!M.hasRendered){var L=M.slot||this.defaultChildSlot;return !!this[L];}return false;},addChildren:function E(O,M,N){var L=this._super(O,M,N);if(L){this.childRenderOnAddCheck(L);}return L;},removeChildren:function A(S,O){var R=S?[S]:(this.children||[]),L=R.length,P;for(P=L-1;P>-1;P--){var N=R[P],M=N&&N.domNode;if(M){var Q=this[(N.slot||this.defaultChildSlot)];if(M.parentNode===Q){Q.removeChild(M);}}}return this._super(S,O);},childRenderOnAddCheck:function B(N){if(this.hasRendered&&N){var L=N.length,M;for(M=0;M<L;M++){var O=N[M];if(this.childRenderCheck(O)){O.render();}else{if(O&&O.hasRendered){this.onchildRenderingChange(O);}}}}},preserveChildDomOrder:true,onchildRenderingChange:function D(M){var T=M&&M.domNode;if(!T){return ;}var N=this.defaultChildSlot,W=M.slot||N,O=this[W],L=this.children;if(!O){if(T.parentNode){T.parentNode.removeChild(T);}}else{if(T.parentNode===O){return ;}if(!this.preserveChildDomOrder){O.appendChild(T);}else{var P,R;for(R=L.length-1;R>=0;R--){var U=L[R];if(U===M){break;}if(W===(U.slot||N)){var V=U.domNode;if(V&&V.parentNode===O){P=V;}}}if(P){O.insertBefore(T,P);}else{O.appendChild(T);}}}if(F.hasSubs(this.id,"childrenRendered")){var S=L.length,Q;for(Q=0;Q<S;Q++){if(!L[Q].domNode){return ;}}this.raiseEvent({name:"childrenRendered"});}}});}());(function(){mstrmojo.requiresCls("mstrmojo.Widget","mstrmojo.css");var C=mstrmojo.css;function I(R){var Q=R.inputNode;var P=(R.value!=null)?String(R.value):"";if(P!==Q.value){Q.value=P;}if(Q.mstrmojoEmpty){C.removeClass(Q,[R.emptyClass]);Q.mstrmojoEmpty=null;}}function E(Q){var P=Q.inputNode;P.value=Q.emptyText||"";C.addClass(P,[Q.emptyClass]);P.mstrmojoEmpty=true;}function G(Q){var P=Q.inputNode;if(P){Q.readingDom=true;Q.set("value",P.value);Q.readingDom=false;}}var M={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};mstrmojo.TextBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.TextBox",value:"",type:"text",hint:"",readOnly:false,size:"",maxLength:"",cssDisplay:"inline",tabIndex:"",autoComplete:true,autoCorrect:true,autoCapitalize:true,placeholderText:"",markupString:'<input id="{@id}" placeholder="{@placeholderText}" class="mstrmojo-TextBox {@cssClass}"  style="{@cssText}" title="{@tooltip}" type="{@type}" value="" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}"min="{@min}" max="{@max}" placeholder="{@hint}" mstrAttach:focus,keyup,blur,paste,cut,input,click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?this.cssDisplay:"none";},oncssClassChange:function(){this.inputNode.className="mstrmojo-TextBox "+(this.cssClass||"");},onhintChange:function(){this.inputNode.setAttribute("placeholder",this.hint);},onenabledChange:function(){this.inputNode.disabled=!this.enabled;mstrmojo.css.toggleClass(this.inputNode,"disabled",!this.enabled);},onvalueChange:function(){var P=this.value,Q=(P===null)||(P==="");if(Q){if(!this.hasFocus){E(this);}else{this.inputNode.value="";}}else{I(this);}},ontooltipChange:function(){this.domNode.title=this.tooltip;},onreadOnlyChange:function(){this.inputNode.readOnly=this.readOnly;}},emptyText:"",emptyClass:"mstrmojo-empty",postBuildRendering:function B(){this._super();var P=this.inputNode;P.setAttribute("autocomplete",this.autoComplete?"on":"off");P.setAttribute("autocorrect",this.autoCorrect?"on":"off");P.setAttribute("autocapitalize",this.autoCapitalize?"on":"off");},focus:function O(){this.inputNode.focus();},prefocus:function J(){this.hasFocus=true;I(this);},preblur:function D(){window.setTimeout(function(){},200);this.hasFocus=false;G(this);var P=this.value;if((P===null||P==="")&&this.emptyText){E(this);}},prekeyup:function A(Q){var P=Q.hWin,R=Q.e||P.event;G(this);var S=M[R.keyCode];if(this["on"+S]){this["on"+S](Q);}},preinput:function A(Q){var P=Q.hWin,R=Q.e||P.event;G(this);},prepaste:function N(){this.delaySetValue(this);},precut:function L(){this.delaySetValue(this);},delaySetValue:function K(P){window.setTimeout(function(){G(P);},100);},setInvalidState:function H(P){mstrmojo.css.addClass(this.inputNode,["err"]);if(P){this.domNode.setAttribute("title",P);}},cleanUp:function F(){this.inputNode.value="";mstrmojo.css.removeClass(this.domNode,["err"]);this.domNode.setAttribute("title",this.tooltip);}});}());(function(){mstrmojo.requiresCls("mstrmojo.Container");mstrmojo.VBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.VBox",markupString:'<table id="{@id}" class="mstrmojo-VBox {@cssClass}" style="{@cssText}" cellspacing="0" cellpadding="0"><tr><td></td></tr></table>',markupSlots:{containerNode:function(){return this.domNode.rows[0].cells[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var D="slot";mstrmojo.HBox=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.HBox",cellCssClass:"",cellSpacing:0,cellPadding:0,markupString:'<table id="{@id}" class="mstrmojo-HBox {@cssClass}" style="{@cssText}" cellspacing="{@cellSpacing}" cellpadding="{@cellPadding}">{@colHTML}<tr>{@tableHtml}</tr></table>',colHTML:"",markupSlots:{containerNode:function(){return this.domNode.rows[0];}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},buildRendering:function B(){this.tableHtml="";var N=[],F=this.children,K=(F&&F.length)||0,I;if(K){var G=0,J=this.cellCssClass?' class="mstrmojo-HBox-cell '+this.cellCssClass+'" ':"",M="<td "+J+"></td>";for(I=0;I<K;I++){N[G++]=M;F[I].slot=D+I;}this.tableHtml=N.join("");}this._super();if(K){var L={},H=this.containerNode.cells;for(I=0;I<K;I++){L["slot"+I]=H[I];}this.addSlots(L);}},addChildren:function E(K,F,G){if(!K){return K;}if(F===undefined||isNaN(F)||F<0){var J=this.children;F=(J&&J.length)||0;}var I=0,H;if(K.constructor===Array){for(I=0,H=K.length;I<H;I++){K[I].slot=D+(F+I);}}else{K[I].slot=D+F;}return this._super(K,F,G);},childRenderCheck:function C(G){if(G&&!G.hasRendered){var F=G.slot||this.defaultChildSlot;return !!this[F]||F.match(/^slot[\d]+$/);}return false;},onchildRenderingChange:function A(I){var F=(I&&I.src)||I,L=F&&F.domNode;if(L){var Q=F.slot;if(!this[Q]){var J=Q&&Q.match(/^slot([\d]+)$/);if(J){var O=parseInt(J[1],10),N=this.containerNode,P=N.cells,M=(P&&P.length)||0,K={};for(var H=M;H<=O;H++){var G=N.insertCell(H);K["slot"+H]=G;if(this.cellCssClass){G.className=this.cellCssClass;}}this.addSlots(K);}}}this._super(I);}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container");var A=mstrmojo.Widget;mstrmojo.Box=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Box",markupString:'<div id="{@id}" class="mstrmojo-Box {@cssClass}" style="{@cssText}"></div>',markupSlots:{containerNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:A.visibleMarkupMethod,onheightChange:A.heightMarkupMethod,onwidthChange:A.widthMarkupMethod}});}());(function(){mstrmojo.requiresCls("mstrmojo.ListBase2");function B(E){var I=E.ctxtBuilder;if(I){var H=I.itemWidgets,G;for(G=H.length-1;G>-1;G--){var F=H[G];if(F){F.destroy(true);}}}}mstrmojo.WidgetListBase=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.WidgetListBase",unrender:function C(G){var I=this.ctxtBuilder;if(I){var H=I.itemWidgets,F;for(F=H.length-1;F>-1;F--){var E=H[F];if(E&&E.hasRendered){E.unrender(true);}}}this._super(G);},refresh:function A(E){B(this);if(this._super){this._super(E);}},destroy:function D(E){B(this);this._super(E);}});})();(function(){mstrmojo.requiresCls("mstrmojo.ListBase2","mstrmojo.ListMapper","mstrmojo.ListBuilder","mstrmojo.ListSelector");mstrmojo.List=mstrmojo.declare(mstrmojo.ListBase2,null,{scriptClass:"mstrmojo.List",renderOnScroll:true,listMapper:mstrmojo.ListMapper,listBuilder:mstrmojo.ListBuilder,listSelector:mstrmojo.ListSelector,itemIdField:"dssid",itemField:"n",itemMarkup:null,itemMarkupFunction:null});})();(function(){mstrmojo.requiresCls("mstrmojo.Button");mstrmojo.HTMLButton=mstrmojo.declare(mstrmojo.Button,null,{scriptClass:"mstrmojo.HTMLButton",markupString:'<input id="{@id}" type="button" class="mstrmojo-text mstrmojo-HTMLButton {@cssClass} {@iconClass}" title="{@title}" style="{@cssText}" mstrAttach:click />',markupSlots:{inputNode:function(){return this.domNode;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"inline":"none";},onenabledChange:function(){mstrmojo.css[this.enabled?"removeClass":"addClass"](this.domNode,["disabled"]);},onselectedChange:function(){mstrmojo.css[this.selected?"addClass":"removeClass"](this.domNode,["selected"]);},ontextChange:function(){this.inputNode.value=this.text!=null?this.text:"";},oniconClassChange:function(){this.domNode.className="mstrmojo-text mstrmojo-HTMLButton "+this.cssClass+" "+this.iconClass+(this.enabled?"":" disabled");}}});})();(function(){mstrmojo.requiresCls("mstrmojo.WidgetListBase","mstrmojo.WidgetListMapper","mstrmojo.WidgetListBuilder");mstrmojo.WidgetList=mstrmojo.declare(mstrmojo.WidgetListBase,null,{scriptClass:"mstrmojo.WidgetList",renderOnScroll:true,listMapper:mstrmojo.WidgetListMapper,listBuilder:mstrmojo.WidgetListBuilder,itemConfig:null,itemFunction:null,initBindings:function(){this._super();var E=this.ctxtBuilder,D=E&&E.itemWidgets;if(D){for(var C=0,A=D.length;C<A;C++){var B=D[C];if(B&&B.initBindings){B.initBindings();}}}}});})();(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo.func","mstrmojo.array","mstrmojo.Button","mstrmojo.HBox","mstrmojo.dom","mstrmojo.Box");var H=mstrmojo.func.composite,F=mstrmojo.dom;mstrmojo.Dialog=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.Dialog",title:"",buttons:null,alignment:"center",btnAlignment:"right",zIndex:10,modal:true,markupString:'<div id="{@id}" class="mstrmojo-Dialog {@cssClass}" tabindex="0" mstrAttach:click><div class="win mstrmojo-Editor" style="{@cssText}"><div class="mstrmojo-Editor-titlebar"><div class="mstrmojo-Editor-title">{@title}</div></div><div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div><div class="mstrmojo-Editor-tip"></div></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},curtainNode:function(){return this.domNode.childNodes[1];},titleNode:function(){return this.domNode.firstChild.firstChild;},containerNode:function(){return this.domNode.firstChild.childNodes[1];},buttonNode:function(){return this.domNode.firstChild.lastChild;},tipNode:function(){return this.domNode.lastChild;}},markupMethods:{onzIndexChange:function(){this.editorNode.style.zIndex=this.zIndex;this.curtainNode.style.zIndex=this.zIndex-1;},onwidthChange:function(){this.editorNode.style.width=this.width||"auto";},onvisibleChange:function(O){if(O){return ;}var M=this.visible,N=M?"block":"none";this.editorNode.style.display=N;if(this.modal){this.curtainNode.style.display=N;}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";},ontitleChange:function(){this.titleNode.firstChild.innerHTML=this.title||"";}},preBuildRendering:function I(){var M;var N=this.buttons;if(N&&!this.btnHbox){for(M in N){N[M].cssClass="mstrmojo-Editor-button";}this.addChildren([{scriptClass:"mstrmojo.HBox",cssText:"float:"+this.btnAlignment,slot:"buttonNode",alias:"btnHbox",children:N},{scriptClass:"mstrmojo.Label",cssClass:"mstrmojo-clearMe",slot:"buttonNode"}]);}if(this.modal){this.cssClass+=" modal";}return this._super();},buildRendering:function D(){var M=this.placeholder;if(this._super()){if(!this.parent&&!M){document.body.appendChild(this.domNode);}return true;}return false;},getResizeHandler:function G(){var M=this.id;return function(){var N=mstrmojo.all[M];N.resizeDialog();N.positionDialog();};},postBuildRendering:function B(){this._super();if(this.modal&&this.visible){this.curtainNode.style.display="block";}if(!this._resizeHandler){var M=this._resizeHandler=this.getResizeHandler();F.attachEvent(window,"resize",M);}this.resizeDialog();this.positionDialog();this.domNode.focus();return true;},resizeDialog:function J(){if(this.modal){this.resizeCurtain();}},resizeCurtain:function E(){var N=this,R=N.curtainNode,M=document.body,P=document.documentElement,Q=R.style,O=N.curtainPosition;Q.width=Math.max(M.clientWidth,P.scrollWidth)+"px";if(O&&O.h){Q.height=O.h+"px";}else{Q.height=Math.max(M.clientHeight,P.scrollHeight)+"px";}if(O&&O.y){Q.top=O.y+"px";}N.raiseEvent({name:"resizeCurtain"});},positionDialog:function K(){if(!this.left||!this.top){var M=this.editorNode;F.center(M);if(this.alignment==="top"){M.style.top="10px";}}},destroy:function(N){var M=this._resizeHandler;if(M){F.detachEvent(window,"resize",M);}this._super(N);}});if(window.mstrConfig&&!window.mstrConfig.simpleDialog){mstrmojo.confirm=function A(P,N,O){var Q="mojoConfirmx9",M=function(){mstrmojo.all[Q].destroy();};mstrmojo.array.forEach(N,function(R){var S=R.onclick;R.onclick=S?H([M,S]):M;});mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:N,children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.alert=function C(P,M,O){var Q="mojoAlertx9";try{mstrmojo.all[Q].destroy();}catch(N){}mstrmojo.insert({scriptClass:"mstrmojo.Dialog",id:Q,title:O||mstrmojo.desc(3610),width:"475px",buttons:[mstrmojo.Button.newInteractiveButton(mstrmojo.desc(1442),function(){mstrmojo.all.mojoAlertx9.destroy();if(M){M();}},"#666666")],children:[{scriptClass:"mstrmojo.Label",text:P}]}).render();};mstrmojo.toast=function L(Q,O){var R="mojoToast9",P,N=O||3000;try{mstrmojo.all[R].destroy();}catch(M){}mstrmojo.insert({id:R,scriptClass:"mstrmojo.Label",cssClass:"toastCss",text:Q}).render();P=mstrmojo.all[R].domNode;document.body.appendChild(P);F.bottomCenter(P);window.setTimeout(function(){mstrmojo.all[R].destroy();},N);};mstrmojo.mask={};mstrmojo.mask.show=function(){mstrmojo.mask.win=mstrmojo.insert({scriptClass:"mstrmojo.Box",cssClass:"fullscreen-mask"});mstrmojo.mask.win.render();document.body.appendChild(mstrmojo.mask.win.domNode);};mstrmojo.mask.hide=function(){mstrmojo.mask.win.destroy();};}}());(function(){mstrmojo.requiresCls("mstrmojo.TextBox","mstrmojo._CanValidate");var A=mstrmojo.css,D=mstrmojo.validation,H=D.TRIGGER,G=D.STATUSCODE,E=mstrmojo.TextBox.prototype.markupMethods;mstrmojo.ValidationTextBox=mstrmojo.declare(mstrmojo.TextBox,[mstrmojo._CanValidate],{scriptClass:"mstrmojo.ValidationTextBox",validationDelay:500,markupMethods:{onvisibleChange:E.onvisibleChange,onvalueChange:E.onvalueChange,onenabledChange:E.onenabledChange,onreadOnlyChange:E.onreadOnlyChange,ontooltipChange:E.ontooltipChange,onvalidationStatusChange:function(){var M=this.validationStatus;if(!M){return ;}var L=this.inputNode,J=(M.code>G.VALID),K=this.constraints.invalidCssClass;A.toggleClass(L,K?K:["mstrmojo-TextBox-ErrValidation"],J);if(J){L.setAttribute("title",M.msg);}else{if(this._original_tooltip!==undefined&&this._original_tooltip!==null){L.setAttribute("title",this._original_tooltip);}}}},postBuildRendering:function I(){if(this._super){this._super();}this._original_tooltip=this.inputNode.title;},prekeyup:function B(J){if(this._super){this._super(J);}var L=(this.constraints.trigger&H.ONKEYUP)>0;if(L){if(this.validationDelay>0){if(this._valDelayTimer){window.clearTimeout(this._valDelayTimer);}if(!this._validateHandler){var K=this;this._validateHandler=function(){K.validate();if(K._valDelayTimer){window.clearTimeout(K._valDelayTimer);delete K._valDelayTimer;}};}this._valDelayTimer=window.setTimeout(this._validateHandler,this.validationDelay);}else{this.validate();}}},preinput:function(J){if(this._super){this._super(J);}var K=(this.constraints.trigger&H.ONKEYUP)>0;if(K){this.validate();}},preblur:function F(J){if(this._super){this._super(J);}var K=(this.constraints.trigger&H.ONBLUR)>0;if(K){this.validate();}},clearValidation:function C(){if(this._super){this._super();}var K=this.inputNode,J=this.constraints.invalidCssClass;A.removeClass(K,J?J:["mstrmojo-TextBox-ErrValidation"]);K.title=this._original_tooltip;}});})();(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.css","mstrmojo.fx","mstrmojo.Dialog","mstrmojo._IsPopup","mstrmojo._HasPopup","mstrmojo._IsMovable");var D=mstrmojo.dom;mstrmojo.Editor=mstrmojo.declare(mstrmojo.Dialog,[mstrmojo._IsPopup,mstrmojo._HasPopup,mstrmojo._IsMovable],{scriptClass:"mstrmojo.Editor",title:"",help:"",autoClose:false,showTitle:true,openEffect:null,closeEffect:null,markupString:'<div id="{@id}" class="mstrmojo-Editor-wrapper"><div class="mstrmojo-Editor {@cssClass}" style="z-index:{@zIndex};{@cssText}" mstrAttach:mousedown>{@titlebarHTML}<div class="mstrmojo-Editor-content"></div><div class="mstrmojo-Editor-buttons"></div></div><div class="mstrmojo-Editor-curtain"></div></div>',titleMarkupString:'<div style="position:absolute;width:100%;"><table cellspacing="0" cellpadding="0" class="mstrmojo-Editor-titlebar"><tr><td class="mstrmojo-Editor-titleCell"><div class="mstrmojo-Editor-title"></div></td><td><a href="#" target="_new" class="mstrmojo-Editor-help"><img class="mstrmojo-Editor-help" src="../images/1ptrans.gif" title="'+mstrmojo.desc(1143,"help")+'"></img></a></td><td><div class="mstrmojo-Editor-close" title="'+mstrmojo.desc(2102,"Close")+'"></div></td></tr></table></div><div class="mstrmojo-Editor-titleSpacer"></div>',markupSlots:{editorNode:function(){return this.domNode.firstChild;},titlebarNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild:null;},titleNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[0].firstChild:null;},helpNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[1].firstChild:null;},closeNode:function(){return this.showTitle?this.domNode.firstChild.firstChild.firstChild.rows[0].cells[2].firstChild:null;},containerNode:function(){return this.domNode.firstChild.childNodes[2];},buttonNode:function(){return this.domNode.firstChild.childNodes[3];},curtainNode:function(){return this.domNode.lastChild;}},markupMethods:{ontitleChange:function(){if(this.showTitle){this.titleNode.innerHTML=this.title;}},onzIndexChange:function(){var G=this.zIndex;this.editorNode.style.zIndex=G;this.curtainNode.style.zIndex=G-1;},onvisibleChange:function(J){if(J){return ;}var G=this.visible,H="closeEffect",I="none";if(G){H="openEffect";I="block";}if(this[H]){this.playEffect(H);}else{this.editorNode.style.display=I;if(this.modal){this.curtainNode.style.display=I;}}},onhelpChange:function(){if(this.showTitle){if(this.help===null){this.helpNode.style.display="none";}this.helpNode.href=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm")+"#"+(this.help||"");}},onleftChange:function(){this.editorNode.style.left=this.left||"";},ontopChange:function(){this.editorNode.style.top=this.top||"";}},preBuildRendering:function C(){if(!this.slot&&!this.placeholder){this.placeholder=document.body.appendChild(document.createElement("div"));this._curtain_to_body=true;}this.titlebarHTML=(this.showTitle)?this.titleMarkupString:"<div></div><div></div>";return this._super();},getMovingHandle:function E(){return this.titlebarNode;},getMovingTarget:function F(){return this.editorNode;},onPreClose:function(){return true;},premousedown:function B(G){var H=D.eventTarget(G.hWin,G.e);if(H===this.closeNode){if(this.onPreClose()){this.close();}}},_set_visible:function A(L,I){var H=(this[L]!==I);if(H){this[L]=I;var K=this._close_handler;if(I){if(this._curtain_to_body){this.resizeDialog();this.positionDialog();}if(this.autoClose){var J=this;K=this._close_handler=K||function(M){var N=D.eventTarget(self,M);if(N&&N.parentNode&&!D.contains(J.editorNode,N,true,document.body)){J.close();}};D.attachEvent(document.body,"mousedown",K);}}else{var G=this._curtain_handler;if(G){D.detachEvent(window,"resize",G);}if(K){D.detachEvent(document.body,"mousedown",K);}}}return H;}});mstrmojo.Editor.openEffect_fadeIn={scriptClass:"mstrmojo.fx.AnimateProp",slot:"curtainNode",props:{backgroundColor:{start:255,stop:0,fn:function(G){G=Math.round(G);return["rgb(",G,",",G,",",G,")"].join("");}}},preStart:function(){var H=this.target,G=this.widget;G.editorNode.style.display="block";if(!G.modal){return false;}H.style.display="block";mstrmojo.css.setOpacity(H,60);return true;}};mstrmojo.Editor.closeEffect_fadeOut={scriptClass:"mstrmojo.fx.FadeOut",slot:"curtainNode",start:0.6,stop:0,preStart:function(){var G=this.widget;G.editorNode.style.display="none";return !!G.modal;}};}());(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.ContextMenuItem","mstrmojo.WidgetList","mstrmojo.ListMapperTable");var H=false,B=20;function G(J,K){var L=J.itemsContainerNode;L.scrollTop=Math.min(Math.max(L.scrollTop+K,0),L.scrollHeight-L.offsetHeight);}function I(K,J){if(!K._scrollInter){var L=B*(J?-1:1);K._scrollInter=window.setInterval(function(){G(K,L);},50);}}function E(J){if(J._scrollInter){window.clearInterval(J._scrollInter);J._scrollInter=null;}}mstrmojo.ContextMenu=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.ContextMenu",zIndex:100,visible:true,makeObservable:true,markupString:'<div id={@id} class="mstrmojo-ContextMenu {@cssClass}" style="z-index: {@zIndex};{@cssText}"><div class="mstrmojo-CM-scrollup" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], true)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], true)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], true)" ></div><div class="mstrmojo-CM-itemsContainer">{@itemsHtml}</div><div class="mstrmojo-CM-scrolldown" onmousedown="mstrmojo.all.{@id}.onmousedownarrow(self, arguments[0], false)" onmouseup="mstrmojo.all.{@id}.onmouseuparrow(self, arguments[0], false)"onclick="mstrmojo.all.{@id}.onclickarrow(self, arguments[0], false)" ></div></div>',markupSlots:{scrollupNode:function(){return this.domNode.firstChild;},itemsContainerNode:function(){return this.domNode.childNodes[1];},scrolldownNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){var K=this.domNode,P=this.itemsContainerNode,N=this.scrollupNode,M=this.scrolldownNode;K.style.display=this.visible?"block":"none";if(this.visible){N.style.display="none";M.style.display="none";P.style.overflow="auto";P.style.height="auto";var J=mstrmojo.dom.windowDim().h,O=K.offsetHeight,L=K.offsetWidth;if(J<O){N.style.display="block";N.style.minWidth=L+"px";M.style.display="block";M.style.minWidth=L+"px";P.style.overflow="hidden";P.style.height=(J-42)+"px";}}},onleftChange:function(){this.domNode.style.left=(this.left!=null)?this.left:"";},ontopChange:function(){this.domNode.style.top=(this.top!=null)?this.top:"";}},listMapper:mstrmojo.WidgetListMapperTable,itemFunction:function C(N,J,L){if(!H){mstrmojo.requiresCls("mstrmojo.ContextMenuItem");H=true;}var K={data:N,parent:L,hasSubmenu:L._cmSource.hasSubmenu(N),dynamicUpdate:L.dynamicUpdate,_cmSource:L._cmSource,zIndex:L.zIndex,itemIdField:L.itemIdField,itemField:L.itemField,itemChildrenField:L.itemChildrenField,itemFunction:L.itemFunction},M=new mstrmojo.ContextMenuItem(K);return M;},onmousedownarrow:function A(L,K,J){I(this,J);},onclickarrow:function F(L,K,J){G(this,B*(J?-1:1));},onmouseuparrow:function D(L,K,J){E(this);}});})();(function(){mstrmojo.requiresCls("mstrmojo.HTMLButton","mstrmojo._HasContextMenu","mstrmojo.ContextMenu");mstrmojo.MenuButton=mstrmojo.declare(mstrmojo.Button,[mstrmojo._HasContextMenu],{preclick:function A(B){this.showContextMenu();},openPopupMenu:function(){this.showContextMenu();}});})();(function(){mstrmojo.requiresCls("mstrmojo.hash","mstrmojo.dom","mstrmojo.css","mstrmojo.Model","mstrmojo.Container","mstrmojo.List","mstrmojo.WidgetList","mstrmojo.HTMLButton","mstrmojo.Arr","mstrmojo.Label","mstrmojo.Box","mstrmojo.VBox","mstrmojo.HBox","mstrmojo.MenuButton","mstrmojo.ValidationTextBox","mstrmojo.InlineEditBox","mstrmojo.Editor","mstrmojo.Image","mstrmojo.dnd");var f=mstrmojo.dom,S=mstrmojo.string,a=mstrmojo.hash,i=mstrmojo.array,O="attachEventListener",AJ="detachEventListener",A=["bc","bs","bw"],R=["bgc"].concat(A),x=["ff","fs","fc","fb","fi","fso","ful"],z="../style/mstr/images/table_icon.png",AO=30,AE=36,U=10,AP=1,c=2,d=3,m=4,L=5,v=6,AQ=7,k=8,Z=9,K=10,q=11,E=12,AN=13,Y=14,g=1,y=2,V=-1,n=1,M=11,H=2,AC=21,b=22,AL=3,C=4,u=5,G=6,AK=7,X=8,AG=81,T=82,AB=83,W=84,AI=85,AD=9,N={txt:1,trx:2,nav_t:3,nav_st:4,sel:5};function h(AR,AS){return AR.bone.exec(AS);}function I(AR){if(AR.def&&AR.fmt){h(AR,{id:"setTableDef",v:{def:AR.persist()},umNow:true});}}function AM(AS,AT,AR){return AS.bone.queryState(AT,AR);}function Q(AR,AS){while(AR){if(AR[AS]){return AR;}AR=f.findWidget(AR.domNode.parentNode);}return null;}function s(AS,AR){var AT=AS[AR-1],AV=AS[AR],AU="next";if(AT){AT.set(AU,AV[AU]);}AV.removeObj();AS.remove(AR);}function AA(AR){var AT="mstrTCIcon",AS=mstrmojo.all[AT];if(!AS){AS=new mstrmojo.Editor({id:AT,title:"Configure cell icon",children:[{scriptClass:"mstrmojo.Label",cssDisplay:"inline",text:"Source:"},{scriptClass:"mstrmojo.ValidationTextBox",alias:"urlInput",cssText:"width:200px;",constraints:{},required:true,dtp:mstrmojo.expr.DTP.CHAR,bindings:{value:"this.parent.url"},onvalueChange:function(){this.parent.set("url",this.value);}},{scriptClass:"mstrmojo.Label",cssText:"background-color:grey;",bindings:{src:"this.parent.url"},onsrcChange:function(){var AU=this.preViewNode;if(AU){AU.src=this.src;}},onRender:function(){var AU=document.createElement("img");AU.src=this.parent.url||"";AU.style.margin="auto";AU.style.display="block";this.preViewNode=AU;this.domNode.appendChild(AU);}},{scriptClass:"mstrmojo.HTMLButton",text:"OK",slot:"buttonNode",cssClass:"mstrmojo-Editor-button",cssText:"float:right;",onclick:function(){var AU=this.parent;AU.opener.set("iconUrl",this.parent.url);AU.close();}},{scriptClass:"mstrmojo.HTMLButton",text:"Cancel",slot:"buttonNode",cssClass:"mstrmojo-Editor-button",cssText:"float:right;",onclick:function(){this.parent.close();}}]});}AS.open(AR,{url:AR.iconUrl});}function l(AU,AT){var AS=[{n:mstrmojo.desc(11181),did:M},{n:mstrmojo.desc(11183),did:n},{n:"-",did:V},{n:mstrmojo.desc(11182),did:AC},{n:mstrmojo.desc(11184),did:H},{n:"-",did:V},{n:"Configure icon...",did:AD},{n:"Change Cell Style",cmCssClass:"mstrmojo-TC-CXM",did:X,items:[{n:"Plain Text",did:AG,sty:N.txt},{n:"Navigation with Title only",did:AB,sty:N.nav_t},{n:"Navigation with Subtitle",did:W,sty:N.nav_st},{n:"Selector",did:AI,sty:N.sel}]},{n:"Change Input Style",did:AL},{n:"Configure navigation...",did:AK},{n:"Configure selector...",did:G},{n:mstrmojo.desc(5356),did:C},{n:mstrmojo.desc(8240),did:u}],AW=AU.e,AV=AU.hWin,AX=f.getMousePosition(AW,AV),AY="mstrTC-CXM",AR=mstrmojo.all[AY];if(!AR){AR=new mstrmojo.MenuButton({cmCssClass:"mstrmojo-TC-CXM",zIndex:1000,id:AY,cm:AS,dynamicUpdate:true,queryVisible:function(Aa){var Ac=this.tgt,AZ;switch(Aa.did){case V:return true;case M:return !!Q(Ac,"isGroup");case AK:var Ab=Q(Ac,"isCell");sty=Ab&&Ab.model.sty;return sty==N.nav_t||sty==N.nav_st;case n:AZ=Q(Ac,"isGroup");Ab=Q(Ac,"isCell");return Ab&&AZ&&AZ.model&&AZ.model.cells.length>1;case H:AZ=Q(Ac,"isGroup");return AZ&&this.view.model.groups.length>1;case b:AZ=Q(Ac,"isGroup");return AZ;case AD:case X:return false;case u:case AC:case C:case AG:case T:case AB:case W:return true;}return false;},queryChecked:function(AZ){switch(AZ.did){case AG:case T:case AB:case W:case AI:var Aa=Q(this.tgt,"isCell");sty=Aa&&Aa.model.sty;return sty==AZ.sty;}return false;},executeCommand:function(Ac){var AZ=this.view.model,Ag=this.tgt,Af=Q(Ag,"isCell"),Ab=Q(Ag,"isGroup"),Ae=Ab&&Ab.model,Ad=function(Ah){Af.model.set("is",Ah);};switch(Ac.did){case M:if(Ab&&Ae){Ae.addCell(Ab.getBottom());}break;case n:if(Ae&&Af){Ae.removeCell(i.indexOf(Ae.cells,Af.model));}break;case AC:if(AZ){AZ.addGroup(this.view.getBottom());}break;case H:if(Ab){AZ.removeGroup(i.indexOf(AZ.groups,Ab.model));}break;case b:if(Ae){Ae.removeTitle();}break;case AK:var Aa=Q(Ag,"isCell");if(Aa){h(AZ,{id:"edtLinks",v:{key:Aa.model.indn.key}});}break;case AD:AA(Af.model);break;case u:h(AZ,{id:"transactionEdit"});break;case G:var Aa=Q(Ag,"isCell");if(Aa){h(AZ,{id:"selectorEdit",v:{key:Aa.model.seln.key}});}case C:h(AZ,{id:"edtProps"});break;case AG:case T:case AB:case W:case AI:Af.model.set("sty",Ac.sty);break;}}});}AR.set("cmPos",AX);AR.set("view",AT);AR.set("tgt",f.findWidget(f.eventTarget(AV,AW)));AR.render();AR.showContextMenu();f.stopPropogation(AV,AW);f.preventDefault(AV,AW);}mstrmojo.platform.FormatUnit=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.FormatUnit",tableFormat:null,formatFont:true,formatShape:false,init:function(AS){if(this._super){this._super(AS);}var AU=x,AR=R,AT=this,AV=[];if(this.formatFont){AV=AV.concat(AU);}if(this.formatShape){AV=AV.concat(AR);}i.forEach(AV,function(AW){AT[O](AW+"Change",AT.id,"persist");});},persist:function(){I(this.tableFormat.parent);}});mstrmojo.platform.TableFormat=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.TableFormat",init:function(AR){if(this._super){this._super(AR);}var AR={tableFormat:this},AT=mstrmojo.platform.FormatUnit,AS=this.g,AU=this.c;if(AS){a.make(AS,mstrmojo.Model);a.make(AS.t,AT,AR);a.make(AS.r,AT,{tableFormat:this,formatShape:true,formatFont:false});}if(AU){a.make(AU,mstrmojo.Model);a.make(AU.t,AT,AR);if(AU.st){a.make(AU.st,AT,AR);}if(this.c.v){a.make(AU.v,AT,AR);}}},persist:function(){var AS=this,AR={isSerializable:function(AV,AU,AT){switch(AV){case"h":case"ff":case"fs":case"fc":case"fb":case"fi":case"fso":case"ful":case"bgc":case"bc":case"bs":case"bw":case"r":case"t":case"st":case"v":case"c":case"g":return true;}return false;},convertBoolean:true};return S.json2xml("fmt",this,AR);}});mstrmojo.platform.TableModel=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.platform.TableModel",fmt:null,smk:"",dck:"",init:function(AR){this._super(AR);this.groups=[];a.make(this.groups,mstrmojo.Arr);if(this.fmt){this.fmt.parent=this;this.fmt=new mstrmojo.platform.TableFormat(this.fmt);}this._setDef(false);},ondefChange:function(AR){this._setDef(true);},_setDef:function(AR){var AT=0,AW=this.def,AU=this.sg,AS=AW&&AW.gs,AY=AS&&AS.length;this.smk=AW&&AW.smk;this.dck=AW&&AW.dck;if(AR){this.groups.splice(0,this.groups.length);}var AX=null,AV;for(;AT<AY;AT++){AS[AT].parent=this;AS[AT].tableModel=this;AV=new mstrmojo.platform.GroupModel(AS[AT]);this.groups.add([AV]);if(AX){AX.set("next",AV);}AX=AV;}if(AU){AU.tableModel=this;this.set("selGroupModel",new mstrmojo.platform.TableSelectorGroupModel(AU));this.groups[O]("add",this.selGroupModel.id,"ontgsChange");this.groups[O]("remove",this.selGroupModel.id,"ontgsChange");this.selGroupModel.ontgsChange=function(){var AZ=this.tableModel.groups.length-1,Aa=this.tableModel.groups[AZ];Aa&&this.set("top",parseFloat(Aa.t)+parseFloat(Aa.h)+5+"px");};}I(this);},onfmtChange:function(AR){this._setFmt(true);},_setFmt:function(AR){var AT=0,AS=this.fmt||{};AS.parent=this;this.fmt=new mstrmojo.platform.TableFormat(AS);},addGroup:function(AV){var AU=h(this,{id:"newGroup",v:{top:AV,th:parseInt(this.fmt.g.h),ch:parseInt(this.fmt.c.h),fmt:this.fmt}})||{},AS=this.groups,AR=AS.length-1,AT;AU.parent=this;AU.tableModel=this;AT=new mstrmojo.platform.GroupModel(AU);AS[AR].set("next",AT);AS.add([AT]);},removeGroup:function(AR){s(this.groups,AR);},getTRXObjs:function(){var AR={};i.forEach(this.groups,function(AS){i.forEach(AS.cells,function(AT){if(AT.vn.key){AR[AT.vn.key]=AT.tn.text;}});});return AR;},setTRXObjs:function(){},persist:function(){var AS=this,AR={isSerializable:function(AZ,AW,AT){switch(AZ){case"tp":return true;case"fmt":return{child:(AS.fmt&&AS.fmt.persist())||null};case"groups":var AY='<def smk="'+AS.smk+'" dck="'+AS.dck+'"><gs>',AU=AS.groups,AX=AU.length,AV=0;for(;AV<AX;AV++){AY+=AU[AV].persist();}return{child:AY+"</gs></def>"};}return false;},convertBoolean:true};return S.json2xml("table",this,AR);}});mstrmojo.platform._HasRWObj=mstrmojo.provide("mstrmojo.platform._HasRWObj",{removeObj:function(){var AU=this,AT=this.children,AR=this.tableModel,AS=this.key;if(AR&&AS){h(AR,{id:"remove",v:{key:AS}});}this.set("key",null);if(AT){i.forEach(AT,function(AV){if(AV.removeObj){AV.removeObj();}});}}});mstrmojo.platform.TableFieldModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChidlren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.TableFieldModel",requiredFields:["tableModel","fmtModel"],key:"",top:"",left:"",width:"",height:"",isLine:false,heightAsFont:true,formats:["R","F","P","S"],onFormatChange:function(AT){var AU=AT.prop,AV="set"+AU,AR=this.tableModel,AS=this.key;if(AR&&AS){h(AR,{id:AV,v:{key:AS,prop:AU,value:this[AU]}});}},onPropChange:function(AR){if(this.tableModel&&this.key){h(this.tableModel,{id:"setProp",v:{key:this.key,prop:AR,value:this[AR]}});}},_onPropChange:function(AS,AR){if(this.tableModel&&this.key){h(this.tableModel,{id:AS,v:{key:this.key,prop:AR,value:this[AR]}});}},onfsChange:function(){if(i.indexOf(this.formats,"F")>-1&&this.tableModel&&this.heightAsFont){this.set("height",AM(this.tableModel,"pxFromPt",this.fs));}},ontopChange:function(){this.onPropChange("top");},onleftChange:function(){this.onPropChange("left");},onwidthChange:function(){if(i.indexOf(this.formats,"S")>-1||i.indexOf(this.formats,"W")>-1){this.onPropChange("width");}},onheightChange:function(){if((i.indexOf(this.formats,"S")>-1||i.indexOf(this.formats,"H")>-1)&&!this.isLine){this.onPropChange("height");}},init:function(AU){if(this._super){this._super(AU);}var AS=this.fmtModel,AW=[];if(i.indexOf(this.formats,"R")>-1){AW=AW.concat(R);}if(i.indexOf(this.formats,"F")>-1){AW=AW.concat(x);}a.copyProps(AW,AS,this);this.initPos();this.bindings=this.bindings?this.bindings:{};var AT=this.bindings;i.forEach(AW,function(AX){AT[AX]="this.fmtModel."+AX;});AW=R.concat(x);var AR=this.isLine,AV=this;i.forEach(AW,function(AX){if(AR&&AX=="bgc"){return ;}AV[O](AX+"Change",AV.id,"onFormatChange");});if(!this.parent){this.initBindings();}},initPos:function(){var AS=this,AR=function(AT){if(AS.key&&AS.tableModel){AS[AT]=AM(AS.tableModel,AT,AS.key);}};if(i.indexOf(this.formats,"P")>-1){AR("top");AR("left");}if(i.indexOf(this.formats,"S")>-1){AR("width");AR("height");}if(i.indexOf(this.formats,"W")>-1){AR("width");}if(i.indexOf(this.formats,"H")>-1){AR("height");}AR("text");},ontextChange:function(){if(this.key&&this.tableModel){h(this.tableModel,{id:"setText",v:{key:this.key,fmla:this.text}});}},prekeyChange:function(){var AS=this,AR=function(AT){if(AS.key&&AS.tableModel){AS.set(AT,AM(AS.tableModel,AT,AS.key));}};AR("top");AR("left");AR("width");AR("height");if(this.key&&this.tableModel){this.set("text",AM(this.tableModel,"text",this.key));}}});mstrmojo.platform.GroupModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.GroupModel",cells:[],requiredFields:["tableModel"],children:[{alias:"title",scriptClass:"mstrmojo.platform.TableFieldModel",heightAsFont:true,formats:["P","S","F"],bindings:{key:"this.parent.tk"},postApplyProperties:function(){var AR=this.parent.parent;this.tableModel=AR;this.fmtModel=AR.fmt.g.t;this.key=this.parent.tk;}},{alias:"rn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","R"],bindings:{gm:"this.parent"},postApplyProperties:function(){var AR=this.parent.parent;this.tableModel=AR;this.fmtModel=AR.fmt.g.r;this.key=this.parent.rk;},updateHeight:function(){var AT=this.gm,AZ=AT.cells,AY=AZ&&AZ.length,AU=0,AV=0,AS=this.fmtModel,AW=0;if(AS.bs!=="none"){AW=AM(this.tableModel,"pxFromPt",AS.bw);}AV=AW;for(;AU<AY;AU++){var AX=AZ[AU];AV+=parseFloat(AX.h)+AW;}this.set("height",AV+"px");var AR=AT.title;if(AR.key){AV+=parseFloat(AE);}this.gm.set("h",AV+"px");}}],init:function(AZ){if(this._super){this._super(AZ);}if(this.children){this.initChildren();}var Ab=this.cells,Aa=this.parent;this.cells=[];a.make(this.cells,mstrmojo.Arr,{tableModel:Aa,removeObj:function(){i.forEach(this,function(Ac){Ac.removeObj();});}});for(var AU=0;AU<Ab.length;AU++){var AY=Ab[AU];AY.parent=this;AY.tableModel=Aa;AY=new mstrmojo.platform.CellModel(AY);this.cells.add([AY]);}this.initBindings();var AS=Aa.fmt,AR=this.id,AW=this.rn,AV=this.cells,AX=AV.length,AT=0;for(;AT<AX;AT++){AV[AT].initBindings();}this.registerListeners();AW[O]("removeCell",AR,"onremoveCell");AW[O]("addCell",AR,"onaddCell");AS.g.r[O]("bsChange",AR,"_onborderChange");AS.g.r[O]("bwChange",AR,"_onborderChange");AS.g.t[O]("fsChange",AR,"adjustTitleTop");},_onborderChange:function(AS){var AR=this.parent.fmt.g.r;bw=AR.bw,bs=AR.bs,w=(bs=="none")?0:AM(this.parent,"pxFromPt",bw);this.cells[0].set("t",parseFloat(this.t)+(this.title.key?parseFloat(AE):0)+w+"px");},adjustTitleTop:function(){var AT=this.parent.fmt.g.t,AR=AT.fs,AV=parseFloat(AM(this.tableModel,"pxFromPt",AR)),AS=this.title,AU=parseFloat(this.t);offset=(AE>AV)?(AE-AV)/2:0;if(AS&&AS.key){AS.set("top",(AU+offset)+"px");}},registerListeners:function(){var AR=this.cells,AS=this.rn,AT=AR.length;i.forEach(AR,function(AW,AU){var AV=AR[AU+1];AW.set("next",AV);if(!AV){AW.t_sub=AW[O]("tChange",AS.id,"updateHeight");AW.h_sub=AW[O]("hChange",AS.id,"updateHeight");}else{if(AW.t_sub&&AW.h_sub){AW[AJ](AW.t_sub);AW[AJ](AW.h_sub);}}});},onremoveCell:function(AS){this.registerListeners();var AR=AS.index,AT=this.cells[AR];if(!AR&&AT){AT.ln.removeObj();}},onaddCell:function(AS){this.registerListeners();var AR=AS.index,AU=this.cells[AR];c1=this.cells[AR+1];if(!AR){AU.ln.removeObj();if(c1){var AT=h(this.parent,{id:"addLine",v:{top:c1.t,left:this.rn.left,fmt:this.parent.fmt}});c1.ln.set("key",AT.key);}}else{if(!AU.ln.key){var AT=h(this.parent,{id:"addLine",v:{top:AU.t,left:this.rn.left,fmt:this.parent.fmt}});AU.ln.set("key",AT.key);}}},ontChange:function(AS){var AT=this.t,AR=this.title,AU=this.rn;if(AR&&AU){if(AR.key){this.adjustTitleTop();AU.set("top",parseFloat(AT)+parseFloat(AE)+"px");}else{AU.set("top",AT);}if(this.next){this.next.set("t",parseFloat(AT)+parseFloat(this.h)+"px");}else{var AV=this.tableModel&&this.tableModel.selGroupModel;AV&&AV.set("top",parseFloat(AT)+parseFloat(this.h)+5+"px");}}},onhChange:function(AR){if(this.next){this.next.set("t",parseFloat(this.t)+parseFloat(this.h)+"px");}else{var AS=this.tableModel&&this.tableModel.selGroupModel;AS&&AS.set("top",parseFloat(this.t)+parseFloat(this.h)+5+"px");}},onwidthChange:function(AV){var AU=this.width,AT=this.parent,AS=AM(AT,"removeBorders",{v:AU,fmt:AT.fmt.g.r})+"px",AR=this.title;if(AR&&AR.key){AR.set("width",AU);}this.rn.set("width",AU);i.forEach(this.cells,function(AW){AW.set("width",AS);});},addCell:function(AU){var AS=h(this.parent,{id:"newCell",v:{top:AU,ch:this.parent.fmt.c.h,fmt:this.parent.fmt,line:true}})||{},AR=this.cells,AT=AR[AR.length-1],AV;AS.parent=this;AS.tableModel=this.tableModel;AV=new mstrmojo.platform.CellModel(AS);AV.initBindings();AR.add([AV]);},removeObj:function(){var AR=this.cells;i.forEach(AR,function(AT,AS){s(AR,AS);});if(this._super){this._super();}if(this.next){this.next.set("t",this.t);}},removeCell:function(AR){s(this.cells,AR);},persist:function(){var AS=this,AR={isSerializable:function(AZ,AW,AT){switch(AZ){case"rk":case"tk":case"t":case"h":return true;case"cells":var AY="",AV=AS.cells,AX=AV.length,AU=0;for(;AU<AX;AU++){AY+=AV[AU].persist();}return{child:AY};}return false;},convertBoolean:true};return S.json2xml("g",this,AR);}});mstrmojo.platform.CellModel=mstrmojo.declare(mstrmojo.Obj,[mstrmojo.platform._HasRWObj,mstrmojo._HasChildren,mstrmojo._HasBindings],{scriptClass:"mstrmojo.platform.CellModel",requiredFields:["tableModel"],top:"",sty:N.txt,style:g,children:[{alias:"ln",scriptClass:"mstrmojo.platform.TableFieldModel",isLine:true,formats:["P","S","R"],onkeyChange:function(){this.parent.lk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.g.r;this.key=this.parent.lk;}},{alias:"icn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S"],requiredFields:["tableModel"],bindings:{url:function(){var AS=this.key,AR=this.tableModel;return AM(AR,"img",AS);}},postApplyProperties:function(){this.key=this.parent.ick;},onkeyChange:function(){this.parent.ick=this.key;}},{alias:"tn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","F"],bindings:{fmtModel:"this.tableModel.fmt.c.t"},onkeyChange:function(){this.parent.tk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.t;this.key=this.parent.tk;}},{alias:"stn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","S","F"],bindings:{key:"this.parent.stk",fmtModel:"this.tableModel.fmt.c.st"},onkeyChange:function(){this.parent.stk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.st;this.key=this.parent.stk;}},{alias:"vn",scriptClass:"mstrmojo.platform.TableFieldModel",formats:["P","W","F"],bindings:{fmtModel:"this.tableModel.fmt.c.v"},onkeyChange:function(){this.parent.vk=this.key;},postApplyProperties:function(){this.fmtModel=this.tableModel.fmt.c.v;this.key=this.parent.vk;}},{alias:"indn",scriptClass:"mstrmojo.platform.TableFieldModel",requiredFields:["tableModel"],formats:["P","S"],postApplyProperties:function(){this.key=this.parent.ink;},onkeyChange:function(){this.parent.ink=this.key;}}],init:function(AY){if(this._super){this._super(AY);}var AR=this.children;if(AR){for(var AU=0,AW=AR.length;AU<AW;AU++){AR[AU].tableModel=this.tableModel;}this.initChildren();}if(!this.parent){this.initBindings();}var AX=this.ln,Ab=this.tableModel,Ac=Ab.fmt,AS=Ac.c,AZ=Ac.g,Aa=this.tn,AT=this.vn,AV=this.parent.rn;if(AV){AV[O]("widthChange",AX.id,function(){var Ad=AM(Ab,"removeBorders",{v:AV.width,fmt:AZ.r});AX.set("width",Ad+"px");});this.width=AV.width;}AS.t[O]("fsChange",this.id,"_onposChange");AS.st[O]("fsChange",this.id,"_onposChange");AS.v[O]("fsChange",this.id,"_onposChange");AT[O]("textChange",this.id,function(){this.set("vph",AT.text);I(Ab);});this.tableModel[O]("trxInfoChange",this.id,"updateTix");this.updateTix();},updateTix:function(){var AR=this.tableModel.trxInfo,AS=this.vk,AT=null;tixType=null;if(AR&&AS){i.filter(AR.tscObjs,function(AU){if(AS==AU.key&&AU.tix!=null){tixType=AU.ctl&&AU.ctl.pr&&AU.ctl.pr.t;AT=AU.tix;return true;}return false;},{max:1});}this.set("tix",AT);this.set("tixType",tixType);},ontixTypeChange:function(){var AR=this.tixType&&(this.tixType+"");if(AR==k){this.set("style",y);this.set("h","80px");}else{this.set("style",g);this.set("h","44px");}},onstyleChange:function(){this.onwidthChange();this._onposChange();},oniconUrlChange:function(){if(this.icn.key){this.icn.set("url",this.iconUrl);h(this.parent.parent,{id:"setImg",v:{key:this.icn.key,url:this.iconUrl}});}},ontChange:function(AR){this._onposChange(AR);},onhChange:function(AR){this._onposChange(AR);},onwidthChange:function(AS){var AV=parseFloat(this.icn.width||AM(this.tableModel,"defaultCellPadding")),AR=(parseFloat(this.width)-parseFloat(AV)*2)/2,AW=this.vn,AU=this.indn,AT=this.sty;if(AT==N.txt||AT==N.trx){if(this.style==g){AW.set("left",AR+parseFloat(this.tn.left)+"px");AW.set("width",AR+"px");}else{AW.set("left",this.tn.left);AW.set("width",AR*2+"px");}}else{if(AT==N.nav_t||AT==N.nav_st){AU.set("left",parseFloat(this.width)-parseFloat(AU.width)+"px");}}this.tn.set("width",AR+"px");},_onposChange:function(Ac){var Ad=this.parent.parent,AS=Ad.fmt.c,AR=this.h,AU=function(Ae){var Ag=parseFloat(AM(Ad,"pxFromPt",Ae)),Af=parseFloat(AR);return(Af>Ag)?((Af-Ag)/2):0;},AV=function(Ai,Ag){var Af=parseFloat(AM(Ad,"pxFromPt",Ai)),Ae=parseFloat(AM(Ad,"pxFromPt",Ag)),Ah=parseFloat(AR),Aj=(Ah>Af+Ae)?((Ah-Af-Ae)/2):0;return{t1:Aj,t2:Aj+Af};},AT=function(Ai,Ag){var Af=parseFloat(AM(Ad,"pxFromPt",Ai)),Ae=parseFloat(AM(Ad,"pxFromPt",Ag)),Ah=parseFloat(AR),Aj=Ah-Af-Ae;if(Aj<10){t=(Ah-Af-Ae)/2;}else{t=(Ah-Af-Ae-10)/2;}return{t1:t,t2:t+Af+10};},AZ=function(Af){var Ag=parseFloat(Af),Ae=parseFloat(AR);return(Ae>Ag)?((Ae-Ag)/2):0;},Ab=parseFloat(this.t);if(this.ln.key){this.ln.set("top",this.t);}this.icn.set("top",Ab+AZ(this.icn.height||0)+"px");switch(this.sty){case N.txt:case N.trx:if(this.style==g){this.vn.set("top",Ab+AU(this.vn.fs)+"px");this.tn.set("top",Ab+AU(this.tn.fs)+"px");}else{var AX=AT(this.tn.fs,this.vn.fs);this.tn.set("top",Ab+AX.t1+"px");this.vn.set("top",Ab+AX.t2+"px");}break;case N.nav_t:this.tn.set("top",Ab+AU(this.tn.fs)+"px");this.indn.set("top",Ab+AZ(this.indn.height)+"px");break;case N.nav_st:var AX=AV(this.tn.fs,this.stn.fs);this.tn.set("top",Ab+AX.t1+"px");this.stn.set("top",Ab+AX.t2+"px");this.indn.set("top",Ab+AZ(this.indn.height)+"px");break;case N.sel:break;}var AW=this.next;if(AW){var AY=this.parent.parent.fmt.g.r,Aa=(AY.bs=="none")?0:AM(this.parent.parent,"pxFromPt",AY.bw);AW.set("t",parseFloat(this.t)+parseFloat(this.h)+Aa+"px");}I(this.parent.parent);},onstyChange:function(Ac){var AU=Ac.valueWas,AY=this,AT=AY.parent.parent.fmt.c,Ab=false,AZ=function(){var Ad=h(AY.parent.parent,{id:"addIndicator",v:{top:AY.t,cellHeight:AY.h}});AY.indn.set("key",Ad.key);AY.indn.set("url",Ad.url);},AW=function(){var Ae=parseFloat(AY.tn.left)+"px",Ag=AY.tn.height,Ad=AY.tn.width,Af=h(AY.parent.parent,{id:"addCellSubtitle",v:{cellHeight:AY.h,top:AY.t,left:Ae,height:Ag,width:Ad,fmt:AT}});AY.stn.set("key",Af.key);AY.tn.set("top",Af.t);AY.tn.set("height",Af.h);},AS=function(){var Ae=parseFloat(AY.tn.left)+parseFloat(AY.tn.width)+"px",Ag=AY.h,Ad=AY.tn.width,Af=h(AY.parent.parent,{id:"addSelector",v:{cellHeight:AY.h,top:AY.t,left:Ae,height:Ag,width:Ad,fmt:AT}});AY.seln.set("key",Af.key);},AR=function(){var Ad=parseFloat(AY.t),Af=parseFloat(AY.h),Ae=Af-parseFloat(AY.tn.height);Ae=Ae?Ae:0;AY.tn.set("top",(Ae/2)+Ad+"px");};switch(this.sty){case N.txt:case N.trx:if(AU==N.nav_t||AU==N.nav_st){var AV=parseFloat(this.tn.left)+parseFloat(this.tn.width)+"px",AX=this.tn.height,Aa=this.tn.width;ret=h(this.parent.parent,{id:"addCellValue",v:{cellHeight:this.h,top:this.t,left:AV,height:AX,width:Aa,fmt:this.parent.parent.fmt.c.v}});this.vn.set("key",ret.key);AR();this.indn.removeObj();}if(AU==N.nav_st){this.stn.removeObj();}break;case N.nav_t:if(AU==N.txt||AU==N.trx){AZ();this.vn.removeObj();}else{if(AU==N.nav_st){this.stn.removeObj();AR();}}break;case N.nav_st:if(AU==N.nav_t){AW();}else{if(AU==N.txt||AU==N.trx){AW();AZ();this.vn.removeObj();}}break;case N.sel:if(this.stn.key){this.stn.removeObj();}if(this.indn.key){this.indn.removeObj();}if(this.vn.key){this.vn.removeObj();}AS();Ab=true;break;}I(this.parent.parent);if(Ab){h(this.parent.parent,{id:"postAddSelector"});}},persist:function(){var AR={isSerializable:function(AU,AT,AS){switch(AU){case"sty":case"ick":case"tk":case"stk":case"vk":case"vph":case"lk":case"ink":case"selk":case"tp":case"t":case"h":case"trx":return true;}return false;},skipNull:true,convertBoolean:true};return S.json2xml("c",this,AR);}});mstrmojo.platform._HasFormatsMarkup=mstrmojo.provide("mstrmojo.platform._HasFormatsMarkup",{visible:true,formats:["R","F","P","S","W"],methods:{R:{onbgcChange:function(){if(this.bgc){this.domNode.style.backgroundColor=this.bgc;}},onbsChange:function(){if(this.bs){this.domNode.style.borderStyle=this.bs;}},onbcChange:function(){if(this.bc){this.domNode.style.borderColor=this.bc;}},onbwChange:function(){if(this.bw){this.domNode.style.borderWidth=this.bw+"pt";}}},F:{onffChange:function(){if(this.ff){this.domNode.style.fontFamily=this.ff;this.inputNode.style.fontFamily=this.ff;}},onfsChange:function(){if(this.fs){this.domNode.style.fontSize=this.fs+"pt";this.inputNode.style.fontSize=this.fs+"pt";}},onfcChange:function(){if(this.fc){this.domNode.style.color=this.fc;}this.inputNode.style.color=this.fc;},onfbChange:function(){var AR=this.fb?"bold":"normal";this.domNode.style.fontWeight=AR;this.inputNode.style.fontWeight=AR;},onfiChange:function(){var AR=this.fi?"italic":"normal";this.domNode.style.fontStyle=AR;this.inputNode.style.fontStyle=AR;},onfsoChange:function(){this._applyFontDecorationChange();},onfulChange:function(){this._applyFontDecorationChange();}},P:{onleftChange:function(){if(this.left){this.domNode.style.left=this.left;}}},S:{onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}}},W:{onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;}}},H:{onheightChange:function(){if(this.height){this.domNode.style.height=this.height;}}}},_applyFontDecorationChange:function(){var AR="";AR+=this.fso?"line-through":"";AR+=this.ful?" underline":"";if(AR==""){AR="none";}this.domNode.style.textDecoration=AR;this.inputNode.style.textDecoration=AR;},postCreate:function(){if(this._super){this._super();}var AR=["formats","width","height","left"],AS={};AR=AR.concat(R);AR=AR.concat(x);i.forEach(AR,function(AT){AS[AT]="this.model."+AT;});this.bindings=a.copy(AS,this.bindings);},preBuildRendering:function(){if(this._super){this._super();}var AT={onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";}},AS=this.formats;for(var AR in AS){AT=a.copy(this.methods[AS[AR]],AT);}this.markupMethods=a.copy(AT,a.copy(this.markupMethods));}});mstrmojo.platform.TableSelector=mstrmojo.declare(mstrmojo.Label,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableSelector",preBuildRendering:function(){if(this._super){this._super();}if(i.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}},postBuildRendering:function(){}});mstrmojo.platform.TableTextField=mstrmojo.declare(mstrmojo.InlineEditBox,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableTextField",type:0,model:null,emptyHint:"",postCreate:function(){this._super();this.bindings=a.copy({width:function(){var AR=this.model.width,AS=this.model.tableModel.textPaddings.h;return(AR?Math.max(parseFloat(AR)-parseFloat(AS),0):0)+"px";},height:function(){var AR=this.model.height,AS=this.model.tableModel.textPaddings.v;return(AR?Math.max(parseFloat(AR)-parseFloat(AS),0):0)+"px";}},this.bindings);},preBuildRendering:function(){this._super();if(i.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}this.markupMethods=a.copy({ontextChange:function(){this.textNode.innerHTML=this.text||this.emptyHint||"";var AR=!this.text;this.textNode.style.fontSize=AR?"10pt":"";this.textNode.style.color=AR?"#999999":"";}},a.copy(this.markupMethods));this.markupMethods.onheightChange=function(){};},onSave:function(){this.model.set("text",this.text);}});mstrmojo.platform.GroupTitleField=mstrmojo.declare(mstrmojo.platform.TableTextField,null,{scriptClass:"mstrmojo.platform.GroupTitleField",preBuildRendering:function(){this._super();this.markupMethods=a.copy({onheightChange:function(){var AS=AE+"px",AR=this.domNode;if(AS&&AR){AR.style.height=AS;AR.style.lineHeight=AS;}},onwidthChange:function(){var AS=this.width,AR=this.domNode;if(AR&&AS&&!/NaN/.test(AS)){AR.style.width=parseInt(AS)/2+"px";}}},a.copy(this.markupMethods));}});mstrmojo.platform.CellIcon=mstrmojo.declare(mstrmojo.Image,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.CellIcon",preBuildRendering:function(){this.markupMethods=a.copy({onleftChange:function(){if(this.left){this.domNode.style.left=this.left;}},onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;this.imgNode.style.width=this.width;}},onheightChange:function(){if(this.height){this.domNode.style.height=this.height;this.imgNode.style.height=this.height;}},onvisibleChange:function(){this.domNode.style.display=this.visible?"":"none";}},a.copy(this.markupMethods));if(i.indexOf(this.formats,"P")>-1){this.markupMethods=a.copy({onrelativeTopChange:function(){if(this.relativeTop){this.domNode.style.top=this.relativeTop;}}},a.copy(this.markupMethods));}}});mstrmojo.platform.TableCell=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableCell",markupString:'<div id="{@id}" class="mi-tc-c {@cssClass}" style="{@cssText}" mstrAttach:contextmenu,dblclick><div class="mi-tc-c-icon"></div><div class="mi-tc-c-nm"></div><div class="mi-tc-c-ph"></div><div class="mi-tc-c-ind"></div><div class="mi-tc-c-sel"></div><div class="mi-tc-c-trxi"></div><div ch="1" class="mi-tc-c-handler"></div></div>',markupSlots:{iconNode:function(){return this.domNode.firstChild;},titleNode:function(){return this.domNode.childNodes[1];},valueNode:function(){return this.domNode.childNodes[2];},indicatorNode:function(){return this.domNode.childNodes[3];},selectorNode:function(){return this.domNode.childNodes[4];},trxIndicatorNode:function(){return this.domNode.childNodes[5];},handlerNode:function(){return this.domNode.lastChild;}},markupMethods:{onbsChange:function(){if(this.bs){this.domNode.style.borderTopStyle=this.bs;}},onbcChange:function(){if(this.bc){this.domNode.style.borderTopColor=this.bc;}},onbwChange:function(){if(this.bw){this.domNode.style.borderTopWidth=this.bw+"pt";}},onheightChange:function(){var AR=parseFloat(this.height);if(AR){this.domNode.style.height=AR+"px";this.handlerNode.style.top=(AR-3)+"px";}},onresizableChange:function(){this.handlerNode.style.display=this.resizable?"block":"none";}},cssDisplay:"block",isCell:true,resizable:false,children:[{scriptClass:"mstrmojo.platform.CellIcon",alias:"ci",slot:"iconNode",bindings:{model:"this.parent.model.icn",visible:"this.model.key",src:function(){var AR=this.model.url;return AR||z;},relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";}}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"ct",slot:"titleNode",bindings:{model:"this.parent.model.tn",text:"this.model.text",relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";}},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"cst",slot:"titleNode",bindings:{model:"this.parent.model.stn",text:"this.model.text",relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";},visible:function(){var AS=this.parent.model.sty,AR=this.model.key;return AS==N.nav_st&&AR;}},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.platform.TableTextField",alias:"cv",slot:"valueNode",bindings:{model:"this.parent.model.vn",text:"this.model.text",visible:function(){var AS=this.parent.model.sty,AT=this.parent.model.tix,AR=this.parent.model.tixType;return !AR||(AR==AP||AR==k||AR==AN);},relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";},allowEdit:function(){var AS=this.parent.model.sty,AR=this.parent.model.tixType;return(AS==N.txt||AS==N.trx)&&AR!=AN;}},ontextChange:function(){if(this.model){this.model.set("text",this.text);}}},{scriptClass:"mstrmojo.Label",cssClass:"trxindicator",slot:"trxIndicatorNode",bindings:{model:"this.parent.model.vn",visible:"this.parent.model.tix && this.parent.model.tix>0"}},{scriptClass:"mstrmojo.platform.TableSelector",alias:"csel",slot:"selectorNode",text:"Selector",bindings:{model:"this.parent.model.seln",visible:"this.model.key",relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";}}},{scriptClass:"mstrmojo.platform.CellIcon",alias:"indicator",slot:"indicatorNode",linkable:true,bindings:{model:"this.parent.model.indn",src:function(){var AR=this.model.url;return AR||z;},relativeTop:function(){var AS=parseFloat(this.model.top),AT=parseFloat(this.parent.model.t),AR=AS-AT;return(AR?AR:0)+"px";},visible:function(){var AR=this.parent.model.sty;return AR!=N.txt&&AR!=N.trx;}}}],onwidthChange:function(){var AV=parseFloat(this.ci.width||AM(this.model.tableModel,"defaultCellPadding")),AR=(parseFloat(this.width)-parseFloat(AV)*2)/2,AT=this.cv.model,AU=this.indicator.model,AS=this.model.sty;if(AS==N.txt||AS==N.trx){AT.set("left",AR+parseFloat(this.ct.model.left)+"px");AT.set("width",AR+"px");}else{if(AS==N.nav_t||AS==N.nav_st){AU.set("left",parseFloat(this.width)-parseFloat(AU.width)+"px");}}this.ct.model.set("width",AR+"px");},ontopChange:function(){var AR=this.top;this.model.set("t",AR);},ontixTypeChange:function(AT){var AU=mstrmojo.css,AS=this.tixType&&(this.tixType+""),AR={"3":"trx-list"};if(this.cv&&this.cv.textNode){if(AS==AN){this.cv.textNode.innerHTML=mstrmojo.desc(11180);}if(AS==AP||AS==k){this.cv.textNode.innerHTML=this.cv.text;}}AU.removeClass(this.domNode,["trx-list"]);AS&&AR[AS]&&AU.addClass(this.domNode,AR[AS]);},postBuildRendering:function(){this._super();this.ontixTypeChange();}});function AF(AS,AU,AR){var AT=AR.src,AV=AT&&AT.data,AW=AV&&AV.cell;if(!AW){return AU&&AU.apply(AS,[AR]);}}mstrmojo.platform.TableCellList=mstrmojo.declare(mstrmojo.WidgetList,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableCellList",cssClass:"mi-tc-c-l",alias:"cs",renderOnScroll:false,resizable:false,draggable:true,dropZone:true,preBuildRendering:function(){if(this._super){this._super();}this.markupMethods=a.copy({onwidthChange:function(){if(this.width){this.domNode.style.width=this.width;this.itemsContainerNode.style.width=this.width;}}},a.copy(this.markupMethods));},onwidthChange:function(){if(this._super){this._super();}var AU=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets,AW=AU&&AU.length,AT=0;var AS=this.model.tableModel,AR=AS.fmt.g.r,AV=(AR.bs=="none")?0:AM(AS,"pxFromPt",AR.bw);for(;AT<AW;AT++){AU[AT].set("width",parseFloat(this.width)-AV*2+"px");}},ontopChange:function(AR){var AU=this.ctxtBuilder&&this.ctxtBuilder.itemWidgets,AV=AU&&AU.length,AT=parseFloat(this.top),AS=0,AW;for(;AS<AV;AS++){AW=AU[AS].model;AW.set("t",AT+"px");AT=AT+parseFloat(AW.h);}},onadd:function(AR){this.model.raiseEvent({name:"addCell",index:AR.index});this._onchange(AR);},onremove:function(AR){this.model.raiseEvent({name:"removeCell",index:AR.index});this._onchange(AR);},_onchange:function(AZ){var AT=this.table.gs.ctxtBuilder.itemWidgets;for(var AU=0;AU<AT.length;AU++){if(AT[AU]==this.group){var AY=AZ.index,AW=this.ctxtBuilder.itemWidgets,AX=AW.length,AS=this.group.model.title;var AR=parseFloat((AS.key&&AE)||0),Aa=parseFloat(this.group.model.t)+AR,AV=0;j=0;for(;j<AX;j++){if(j>=AY){AW[j].model.set("t",Aa+"px");}Aa+=parseInt(AW[j].height);AV+=parseInt(AW[j].height)+1;}this.model.set("height",AV+"px");this.group.model.set("h",AV+AR+"px");}}I(this.table.model);},postCreate:function(){if(this._super){this._super();}a.copy({bgc:"this.model.bgc",bc:"this.model.bc",bs:"this.model.bs",bw:"this.model.bw",top:"this.model.top",width:"this.model.width",height:"this.model.height",left:"this.model.left"},this.bindings);},itemFunction:function(AT,AR,AS){return new mstrmojo.platform.TableCell({model:AT,parent:AS,width:AS.width,top:AT.t,h:AT.h,bindings:{tix:"this.model.tix",tixType:"this.model.tixType",height:"this.model.h",resizable:"this.parent.resizable",bs:function(){var AV=this.model.ln.key,AU=this.parent.model.bs;return AV?AU:"none";},bc:function(){var AU=this.model.ln.key,AV=this.parent.model.bc;return AU&&AV;},bw:function(){var AU=this.model.ln.key,AV=this.parent.model.bw;return AU&&AV;}}});},getDragData:function r(AS){var AT=AS.src,AU=AT.node,AR=AU.getAttribute("ch")&&f.findWidget(AU);if(AR){return{cell:AR,h:AR.model.h,resize:true};}else{if(this._super){return this.dropZone&&this._super(AS);}}return null;},allowDrop:function D(AR){var AS=AR.src,AT=AS&&AS.data,AU=AT&&AT.cell;if(AU){return this.resizable;}else{return AT.parent.id==this.model.gm.id;}},ondragstart:function(AY){var AW=AY.src,AX=AW&&AW.data,AT=AX&&AX.cell;if(AX&&AX.resize){var AS=this;function AU(){var Ab=document.createElement("div"),Aa=Ab.style,AZ=AS.domNode;Ab.className="mstrmojo-TC-avatar";Aa.height=AZ.clientHeight+"px";AZ.appendChild(Ab);AS.avatar=Ab;return Ab;}mstrmojo.css.addClass(AT.domNode,"dragging");var AR=this.avatar||AU();AR.style.display="block";this.ownAvatar=true;}else{var AS;if(AW&&AW.node){AS=Q(f.findWidget(AW.node),"isCell");}var AV=(AS&&AS.domNode.innerText)||"";AX.set("html",AV);}return this._super(AY);},ondragenter:function F(AR){AF(this,this._super,AR);},ondragover:function p(AR){AF(this,this._super,AR);},ondragleave:function P(AR){AF(this,this._super,AR);},ondrop:function o(AR){AF(this,this._super,AR);},ondragmove:function J(AR){var AV=AR.src,AW=AV&&AV.data,AX=AW&&AW.cell;if(AX){var AT=AR.tgt,AS=AT.pos.y-AV.pos.y,AU=Math.max(parseFloat(AX.model.h)+AS,AO)+"px";AX.domNode.style.height=AU;this.avatar.style.top=f.position(AX.domNode,true).y+parseFloat(AU)-f.position(this.domNode,true).y+"px";AW.h=AU;}else{if(this._super){this._super(AR);}}},ondragend:function B(AR){var AS=AR.src,AT=AS&&AS.data,AU=AT&&AT.cell;if(AU){AU.model.set("h",AT.h);mstrmojo.css.removeClass(AU.domNode,"dragging");this.avatar.style.display="none";this.ownAvatar=false;}else{if(this._super){this._super(AR);}}}});mstrmojo.platform.TableGroup=mstrmojo.declare(mstrmojo.VBox,null,{scriptClass:"mstrmojo.platform.TableGroup",markupString:'<div id="{@id}" class="mi-tc-g {@cssClass}" style="{@cssText}" mstrAttach:mousemove,mouseover,mouseout,selectstart><div class="mi-tc-g-hd"></div><div class="mi-tc-g-cs"></div></div>',markupSlots:{headerNode:function(){return this.domNode.firstChild;},cellsNode:function(){return this.domNode.lastChild;}},markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?mstrmojo.css.DISPLAY_TABLE:"none";}},title:null,cells:[],isGroup:true,top:null,children:[{scriptClass:"mstrmojo.HBox",cssClass:"mi-tc-g-hd-ctn",colHTML:'<colgroup><col style="width:50%;"><col style="width:50%;"></colgroup>',slot:"headerNode",alias:"gh",children:[{scriptClass:"mstrmojo.platform.GroupTitleField",slot:"groupTitleNode",cssClass:"mi-tc-g-nm",alias:"gt",isGroupTitle:true,bindings:{model:"this.parent.parent.model.title",visible:"this.model.key",text:"this.model.text"},ontextChange:function(){this.model.set("text",this.text);}},{scriptClass:"mstrmojo.Button",cssClass:"mi-button-add",text:mstrmojo.desc(11181),slot:"newCellNode",alias:"newCell",bindings:{top:"this.parent.gt.model.top",visible:"this.parent.parent.table.model.curGroup == this.parent.parent.model"},onclick:function(){var AR=this.parent.parent;AR.model.addCell(AR.getBottom());},postCreate:function(){this.markupMethods=a.copy({ontopChange:function(){if(this.top){this.domNode.style.top=this.top;}}},a.copy(this.markupMethods));}}]},{scriptClass:"mstrmojo.platform.TableCellList",slot:"cellsNode",alias:"cs",bindings:{model:"this.parent.model.rn",items:"this.parent.model.cells",key:"this.parent.model.rn.key",table:"this.parent.table",group:"this.parent",top:"this.model.top"}}],bindings:{title:"this.model.title",cells:"this.model.cells"},updateTop:function(){this.set("top",parseInt(this.getBottom())-parseInt(this.getAndUpdateHeight())+"px");},onRender:function(){this.top=parseInt(this.getBottom())-parseInt(this.getAndUpdateHeight())+"px";this.height=this.getAndUpdateHeight();},ontopChange:function(AS){this.gh.gt.model.set("top",this.top);var AR=this.model.title,AV=(AR.key&&AE)||0;this.cs.model.set("top",parseInt(this.top)+parseInt(AV)+"px");var AW=this.cs.ctxtBuilder.itemWidgets,AU=parseInt(this.top)+parseInt(AV),AT=0;for(var AT=0;AT<AW.length;AT++){AW[AT].set("top",AU+"px");AU+=parseInt(AW[AT].height);}},onwidthChange:function(){this.cs.model.set("width",parseInt(this.width)+"px");},getAndUpdateHeight:function(){var AR=this.model.title,AU=parseInt((AR.key&&AE)||0),AT=this.cs.ctxtBuilder.itemWidgets,AV=AT.length,AS=0;for(;AS<AV;AS++){AU+=parseInt(AT[AS].height);}this.height=AU+"px";return AU+"px";},getBottom:function(){return parseFloat(this.model.t)+parseFloat(this.model.h)+"px";},onmouseover:function(){var AR=this;AR.table.model.set("curGroup",AR.model);},onmouseout:function(){var AR=this;AR.table.model.set("curGroup",null);},onselectstart:function(AR){var AU=AR.e,AT=AR.hWin,AS=f.eventTarget(AT,AU);if(AS.tagName&&AS.tagName.toLowerCase()==="input"){f.stopPropogation(AT,AR.e);}}});mstrmojo.platform.TableGroupList=mstrmojo.declare(mstrmojo.WidgetList,null,{scriptClass:"mstrmojo.WidgetList",cssClass:"mi-tc-g-l",alias:"gs",renderOnScroll:false,makeObservable:true,draggable:true,dropZone:true,ownAvatar:true,itemFunction:function(AT,AR,AS){var AU=AR?AS.ctxtBuilder.itemWidgets[AR-1].top:"0px";return new mstrmojo.platform.TableGroup({table:AS.parent,model:AT,top:AU,parent:AS,bindings:{height:function(){var AX=this.model.title.key,AY=AE,AV=this.model.rn.height,AW=this.model.rn.bs,AZ=this.model.rn.bw;return parseFloat((AX&&AY)||0)+parseFloat(AV)+((AW=="none")?0:parseFloat(AZ)*2)+"px";}}});},onadd:function(AR){I(this.parent.model);this._onchange(AR);},onremove:function(AR){I(this.parent.model);},allowDrop:function D(AR){var AS=AR.src;if(AS&&AS.widget){return AS.widget===this;}},ondragstart:function(AV){var AS=AV.src,AU=AS&&AS.data,AR=mstrmojo.dom.findWidget(AS.node);while(AR){if(AR.scriptClass=="mstrmojo.platform.TableGroup"){break;}AR=AR.parent;}if(AR){var AT=AR.domNode.cloneNode(true);AT.style.position="absolute";mstrmojo.css.addClass(AT,"avatar-dragging");AT.style.zIndex="1000";document.body.appendChild(AT);this.avatar=AT;}return this._super(AV);},ondragmove:function(AR){var AS=AR.tgt,AU=mstrmojo.dom.getMousePosition(AS.e,AS.hWin),AT=this.avatar;if(AT){AT.style.left=(AU.x+2)+"px";AT.style.top=(AU.y+2)+"px";}return this._super&&this._super(AR);},ondragend:function(AR){var AS=this.avatar;if(AS){AS.parentNode.removeChild(AS);}return this._super(AR);},_onchange:function(Ac){var AS=this.items,Ad=0,AV=0;for(var AU=0;AU<AS.length;AU++){AS[AU].next=null;}for(var AU=0;AU<AS.length;AU++){var AY=AS[AU],AZ=AY.cells,AR=AY.title,AX=parseFloat((AR.key&&AE)||0),Aa=parseFloat(AY.h),AW=Ad+AX;AY.set("t",Ad+"px");for(var AT=0;AT<AZ.length;AT++){var Ab=AZ[AT];Ab.set("t",AW+"px");AW+=parseInt(Ab.h);}AY.set("next",AS[AU+1]);Ad+=Aa;}}});mstrmojo.platform.TableSelectorGroupModel=mstrmojo.declare(mstrmojo.Model,null,{scriptClass:"mstrmojo.platform.TableSelectorGroupModel",init:function AH(AR){if(this._super){this._super(AR);}if(AR.smt){this.smt.tableModel=this.tableModel;AR.smt.formats=["P","W"];this.set("smt",new mstrmojo.platform.TableFieldModel(AR.smt));}if(AR.dsc){this.dsc.tableModel=this.tableModel;AR.dsc.formats=["P","W"];this.set("dsc",new mstrmojo.platform.TableFieldModel(AR.dsc));}},ontopChange:function(){var AR=this.top;if(!AR){return ;}this.smt&&this.smt.set("top",this.top);this.smt&&this.dsc.set("top",this.top);},onwidthChange:function(){if(!this.width||/NaN/.test(this.width)){return ;}var AS=parseInt(this.width),AR=this.buttonInterval,AT=(AS-AR)/2;if(this.smt){this.smt.set("width",AT+"px");this.smt.set("left",this.marginLeft+AT+this.buttonInterval+"px");}if(this.dsc){this.dsc.set("width",AT+"px");}}});mstrmojo.platform.TableSelectorButton=mstrmojo.declare(mstrmojo.HTMLButton,[mstrmojo.platform._HasFormatsMarkup],{scriptClass:"mstrmojo.platform.TableSelectorButton"});mstrmojo.platform.TableSelectorGroup=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableSelectorGroup",markupString:'<div class="mi-tc-selectors-group"><div class="mi-tc-selectors-submit"></div><div class="mi-tc-selectors-cancel"></div></div>',markupSlots:{submitNode:function(){return this.domNode.firstChild;},discardNode:function(){return this.domNode.lastChild;}},onmodelChange:function(){this.__renderSelectors();},postBuildRendering:function(){this.__renderSelectors();},__renderSelectors:function(){if(!this.model){return ;}this.addChildren(new mstrmojo.platform.TableSelectorButton({text:"Submit",alias:"submit",parent:this,slot:"submitNode",bindings:{text:"this.parent.model.smt.dpTxt",model:"this.parent.model.smt"}}));this.addChildren(new mstrmojo.platform.TableSelectorButton({text:"Cancel",cssText:"left:"+this.model.marginLeft+"px",alias:"discard",parent:this,slot:"discardNode",bindings:{text:"this.parent.model.dsc.dpTxt",model:"this.parent.model.dsc"}}));this.renderChildren();}});mstrmojo.platform.TableControl=mstrmojo.declare(mstrmojo.Container,null,{scriptClass:"mstrmojo.platform.TableControl",markupString:'<div id="{@id}" class="mstrmojo-TC {@cssClass}" style="{@cssText}" mstrAttach:click,mousemove,mouseout,mouseover,contextmenu><div></div><div class="mi-tc-selectors"></div><div class="mi-tc-btns"><div class="mi-tc-btn-ng"></div><div class="mi-tc-btn-nc"></div></div></div>',markupSlots:{newGroupNode:function(){return this.domNode.lastChild.firstChild;},newCellNode:function(){return this.domNode.lastChild.ChildNodes;},selectorGroupNode:function(){return this.domNode.childNodes[1];},groupsNode:function(){return this.domNode.firstChild;}},markupMethods:{},cssDisplay:"block",def:{items:[]},model:null,fmt:{},children:[{scriptClass:"mstrmojo.Button",cssClass:"mi-button-add",text:mstrmojo.desc(11182),slot:"newGroupNode",alias:"newGroup",onclick:function(){this.parent.model.addGroup(this.parent.getBottom());}},{scriptClass:"mstrmojo.platform.TableGroupList",slot:"groupsNode",bindings:{items:"this.parent.model.groups"}},{scriptClass:"mstrmojo.platform.TableSelectorGroup",slot:"selectorGroupNode",alias:"selectorGroup",bindings:{width:"this.parent.width",model:"this.parent.model.selGroupModel"}}],getBottom:function(){var AR=this.gs.ctxtBuilder.itemWidgets;return AR[AR.length-1].getBottom();},resize:function(AS,AR){AS&&this.set("height",AS);AR&&this.set("width",AR);},onwidthChange:function(AS){var AR=this.width,AT=this.model.selGroupModel;i.forEach(this.model.groups,function(AU){AU.set("width",AR);});if(AT){AT.set("width",AR);}},oncontextmenu:function(AR){l(AR,this);}});})();