(function(){mstrmojo.requiresCls("mstrmojo.StackContainer","mstrmojo._IsRwDocument","mstrmojo._HasBuilder","mstrmojo._HasLayout","mstrmojo._HasPopup","mstrmojo._DocOIVMMethods","mstrmojo.array","mstrmojo.css");mstrmojo.Doc=mstrmojo.declare(mstrmojo.StackContainer,[mstrmojo._HasBuilder,mstrmojo._IsRwDocument,mstrmojo._HasLayout,mstrmojo._HasPopup],{scriptClass:"mstrmojo.Doc",cssClass:"mstrmojo-Doc",methods:{"*":"mstrmojo._DocOIVMMethods"},markupSlots:{containerNode:function(){return this.domNode;},popupNode:function(){return this.domNode;},drillLinkMenuNode:function(){return this.domNode;}},layoutConfig:{h:{containerNode:"100%"},w:{containerNode:"100%"}},getLayouts:function(){return this.children;},buildChildren:function buildChildren(noAddChildren){if(this._super(false)){var k=this.model.getSelectedKey(this.node),i=(k!==null)?mstrmojo.array.find(this.children,"k",k):-1,ch=(i>-1)?this.children[i]:null;if(ch){this.set("selected",ch);}return true;}return false;},restoreLayoutState:function restoreLayoutState(selectedChild){this._super(selectedChild);var childZoom=selectedChild.zf;if((this.zf!==childZoom||this.model.zf!==childZoom)&&this.updateZoom){this.zf=this.model.zf=childZoom;this.updateZoom();}},_set_selected:function _set_selected(prop,layout){if(!this.selected){return this._super(prop,layout);}if(layout){var me=this,_super=this._super,newKey=layout.k;this.getNewLayout({layoutKey:newKey},this.children,(newKey!==this.model.currlaykey),{success:function(newLayout){var old=me.selected;_super.call(me,prop,newLayout);me.raiseEvent({name:"selectedChange",prop:"selected",value:newLayout,valueWas:old});}});}return true;},onLayoutRebuilt:function onLayoutRebuilt(layout){this._set_selected("selected",layout,true);},replaceLayout:function replaceLayout(oldLayout,newLayoutNode){var idx=this.removeChildren(oldLayout);oldLayout.destroy();var c=this.builder.build([newLayoutNode],this.model);this.addChildren(c,idx);return c[0];},getSelectedLayoutWidget:function getSelectedLayout(){return this.selected;},xtabCellMenuRef:"mstrmojo.XtabCellMenu",openXtabCellMenu:function(config){if(config){config.opener=this;if(this._lockInfoWinContainer){this._lockInfoWinContainer(config);}}this.openPopup("xtabCellMenuRef",config);},closeXtabCellMenu:function closeXtabCellMenu(){this.closePopup();},drillLinkMenuRef:"mstrmojo.DrillLinkMenu",openDrillLinkMenu:function openDrillLinkMenu(config){if(config){config.opener=this;}this.openPopup("drillLinkMenuRef",config);},closeDrillLinkMenu:function closeDrillLinkMenu(){this.closePopup();},goToLink:function goToLink(link){if(link){window.open(link.url,(link.target||"_self"));}},selectorMenuRef:"mstrmojo.SelectorMenu",fpMenuRef:"mstrmojo.FilterPanelMenu",openPopupMenu:function openPopupMenu(mnRef,config){if(config){config.opener=this;}this.openPopup(mnRef,config);}});}());