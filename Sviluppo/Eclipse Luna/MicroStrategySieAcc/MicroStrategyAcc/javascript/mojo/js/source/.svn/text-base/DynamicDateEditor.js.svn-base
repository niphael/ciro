(function(){mstrmojo.requiresCls("mstrmojo.Editor","mstrmojo.locales","mstrmojo.array","mstrmojo.hash","mstrmojo.date","mstrmojo.Label","mstrmojo.Box","mstrmojo.HBox","mstrmojo.CheckBox","mstrmojo.SelectBox","mstrmojo.Table","mstrmojo.ValidationTextBox","mstrmojo.RadioList","mstrmojo.RadioListHoriz","mstrmojo.HTMLButton","mstrmojo.FieldSet");var $A=mstrmojo.array,$H=mstrmojo.hash,$D=mstrmojo.date,$LDT=mstrmojo.locales.datetime,$ABS=Math.abs,OFFSETS=[mstrmojo.desc(4046,"First"),mstrmojo.desc(9431,"Second"),mstrmojo.desc(9432,"Third"),mstrmojo.desc(9433,"Fourth"),mstrmojo.desc(9434,"Fifth")],ADJUSTMENTS=[mstrmojo.desc(9310,"weekly"),mstrmojo.desc(9311,"monthly"),mstrmojo.desc(9430,"Yearly")],DIRECTIONS=[mstrmojo.desc(9424,"plus"),mstrmojo.desc(9425,"Minus")],ENUMDSSXMLDATATYPES={DATE:14,TIME:15,DATETIME:16},DDE_TYPE={},DYT={NONE:0,WEEKLY:1,MONTHLY:2,YEARLY:3},MTP={DAY:0,THE:1,REVERSE:2},YTP={ON:0,THE:1};DDE_TYPE[ENUMDSSXMLDATATYPES.DATE]=3;DDE_TYPE[ENUMDSSXMLDATATYPES.TIME]=194;DDE_TYPE[ENUMDSSXMLDATATYPES.DATETIME]=195;function createValidationTextBoxWithLabel(props,label,position){return $H.copy({markupString:'<div class="mstrmojo-TextBoxWithLabel {@cssClass}" style="{@cssText}">'+(position?'<span class="mstrmojo-TextBox-label">'+label+"</span>":"")+'<input id="{@id}" class="mstrmojo-TextBox {@inputNodeCssClass}"  style="{@inputNodeCssText}" title="{@tooltip}" type="{@type}" value="{@value}" size="{@size}" maxlength="{@maxLength}" index="{@tabIndex}" mstrAttach:focus,keyup,blur />'+(!position?'<span class="mstrmojo-TextBox-label-right">'+label+"</span>":"")+"</div>",markupSlots:{inputNode:function(){return position?this.domNode.lastChild:this.domNode.firstChild;}}},props);}function getListControlValue(widget){return widget.items[widget.selectedIndex].v;}function getNthDayOfMonth(year,month,n,day){var temp=new Date(year,month,1),tempDay=temp.getDay();return 1+(day-tempDay)+(day>=tempDay?0:7)+(7*n);}function handleInvalidState(errorText,valid){var dde=mstrmojo.all.mstrDDE;dde.errorText.set("text",errorText);dde.errorText.set("visible",!valid);dde.buttonHBox.okButton.set("enabled",valid);}function validateInputs(){var dde=mstrmojo.all.mstrDDE,t=dde.controls,validationControls=["ddo","dmo","mdd","mrdd","mrdm","yodd","dh","dmi","st"],valid=true,txt="";$A.forEach(validationControls,function(c){var vs=t[c].validationStatus;if(vs&&vs.code!==0){txt=vs.msg;valid=false;}});handleInvalidState(txt,valid);}function resolveDate(){var dde=mstrmojo.all.mstrDDE,t=dde.controls,tp=dde.type,data=dde.data={"do":0,dyt:DDE_TYPE[tp],dmo:0,dm:0,dd:0,dw:0,dow:0,dh:0,dmi:0,dr:""},dyt=getListControlValue(t.dyt),checked=t.adj.checked;if(tp!==ENUMDSSXMLDATATYPES.TIME){var res=t.res,curr=t.curr.val,offsetProps={d:(checked?"do":"dd"),m:(checked?"dmo":"dm")},result=new Date(curr.getFullYear(),curr.getMonth(),curr.getDate(),curr.getHours(),curr.getMinutes(),curr.getSeconds()),ddo_dir=t.ddo_dir.selectedIndex===0?1:-1,ddo=parseInt(t.ddo.value,10)||0,dmo_dir=t.dmo_dir.selectedIndex===0?1:-1,dmo=parseInt(t.dmo.value,10)||0,wdow=getListControlValue(t.wdow),mdd=parseInt(t.mdd.value,10)||0,mtoff=getListControlValue(t.mtoff),mtdow=getListControlValue(t.mtdow),mrdm=parseInt(t.mrdm.value,10)||0,mrdd=parseInt(t.mrdd.value,10)||0,yodm=getListControlValue(t.yodm),yodd=parseInt(t.yodd.value,10)||0,ytoff=getListControlValue(t.ytoff),ytdm=getListControlValue(t.ytdm),ytdow=getListControlValue(t.ytdow);result.setDate(result.getDate()+(ddo_dir*ddo));result.setMonth(result.getMonth()+(dmo_dir*dmo));data[offsetProps.d]=(ddo_dir*ddo);data[offsetProps.m]=(dmo_dir*dmo);data.dyt+=(checked?dyt:DYT.NONE);if(t.adj.checked){switch(dyt){case DYT.WEEKLY:result.setDate(result.getDate()+wdow-result.getDay());data.dow=wdow;break;case DYT.MONTHLY:switch(getListControlValue(t.mtp)){case MTP.DAY:result.setDate(Math.min(mdd,$D.getDaysOfMonth(result.getFullYear(),result.getMonth()+1)));data.dd=mdd;break;case MTP.THE:result.setDate(getNthDayOfMonth(result.getFullYear(),result.getMonth(),mtoff,mtdow));data.dw=mtoff+1;data.dow=mtdow;break;case MTP.REVERSE:result.setMonth(result.getMonth()-mrdm+1);result.setDate(1-mrdd);data.dd=-mrdd;data.dm=-mrdm;break;}break;case DYT.YEARLY:switch(getListControlValue(t.ytp)){case YTP.ON:result.setMonth(yodm);result.setDate(yodd);data.dd=yodd;data.dm=yodm+1;break;case YTP.THE:result.setMonth(ytdm);result.setDate(getNthDayOfMonth(result.getFullYear(),result.getMonth(),ytoff,ytdow));data.dw=ytoff+1;data.dow=ytdow;data.dm=ytdm+1;break;}break;}}res.set("text",convertToLocaleDate(result.toLocaleDateString()));res.val=result;data.dr=$D.formatDateInfo($D.getDateJson(result),$LDT.DATEOUTPUTFORMAT);}if(tp!==ENUMDSSXMLDATATYPES.DATE){var time=t.st.value;if(t.isDynTime.checked){var currTime=t.currTime.val,resultTime=new Date(currTime.getFullYear(),currTime.getMonth(),currTime.getDate(),currTime.getHours(),currTime.getMinutes(),currTime.getSeconds()),dh_dir=t.dh_dir.selectedIndex===0?1:-1,dh=parseInt(t.dh.value,10)||0,dmi_dir=t.dmi_dir.selectedIndex===0?1:-1,dmi=parseInt(t.dmi.value,10)||0;resultTime.setHours(resultTime.getHours()+(dh*dh_dir));resultTime.setMinutes(resultTime.getMinutes()+(dmi*dmi_dir));data.dh=(dh*dh_dir);data.dmi=(dmi*dmi_dir);time=$D.formatTimeInfo($D.getDateJson(resultTime),$LDT.TIMEINPUTFORMATS[0]);}else{data.dyt=DDE_TYPE[ENUMDSSXMLDATATYPES.DATE]+(checked?dyt:DYT.NONE);var resTime=$D.parseTime(time);data.dh=resTime.hour;data.dmi=resTime.min;}t.resTime.set("text",time);data.dr+=" "+time;}if(result.getTime&&isNaN(result.getTime())){handleInvalidState(mstrmojo.desc(9009,"Your input is invalid."),false);}else{validateInputs();}}function setPlusMinusControls(controls,propName,value){controls[propName+"_dir"].set("selectedIndex",value>=0?0:1);controls[propName].set("value",$ABS(value));}function setChildrenVisibility(children,show){$A.forEach(children,function(c){c.set("visible",show);});}function setupEditor(){var ddeData=this.ddeData,tp=this.type=ddeData.tp,display=tp===ENUMDSSXMLDATATYPES.DATETIME,show=[],hide=[this.layoutsContainer];setChildrenVisibility(this.children.concat(this.preview.children[0].children),display);if(!display){switch(tp){case ENUMDSSXMLDATATYPES.DATE:show=show.concat(this.children[0],this.mainOffsets,this.adj,this.preview,this.staticPicker,this.buttonHBox,$A.get(this.preview.children[0].children,[0,1,2,3]));break;case ENUMDSSXMLDATATYPES.TIME:show=show.concat(this.timeLayoutsContainer,this.timeLayoutsContainer.dynamicTimeLayout,this.preview,this.staticPicker,this.buttonHBox,$A.get(this.preview.children[0].children,[4,5,6,7]));hide=hide.concat(this.timeLayoutsContainer.useDynamicTime,this.timeLayoutsContainer.staticTimeLayout);break;}setChildrenVisibility(show,true);setChildrenVisibility(hide,false);}else{setChildrenVisibility(hide,false);}}function initControls(){var ddeData=this.ddeData,tp=this.type=ddeData.tp,ddeType=((tp===ENUMDSSXMLDATATYPES.DATETIME)&&(ddeData.dyt<DDE_TYPE[tp]))?DDE_TYPE[ENUMDSSXMLDATATYPES.DATE]:DDE_TYPE[tp],controls=this.controls;if(tp!==ENUMDSSXMLDATATYPES.TIME){var dyt=(ddeData.dyt-ddeType)||DYT.NONE,dow=ddeData.dow||0,dd=ddeData.dd||0,dm=ddeData.dm||0,dw=ddeData.dw||0,dateOffset=(dyt===DYT.NONE?dd:ddeData["do"])||0,monthOffset=(dyt===DYT.NONE?dm:ddeData.dmo)||0;switch(dyt){case DYT.WEEKLY:controls.wdow.set("selectedIndex",dow);break;case DYT.MONTHLY:var mtp=(dw>0)?MTP.THE:(dd>0?MTP.DAY:MTP.REVERSE);controls.mtp.set("selectedIndex",mtp);switch(mtp){case MTP.DAY:controls.mdd.set("value",dd);break;case MTP.THE:controls.mtoff.set("selectedIndex",dw-1);controls.mtdow.set("selectedIndex",dow);break;case MTP.REVERSE:controls.mrdd.set("value",$ABS(dd));controls.mrdm.set("value",$ABS(dm));break;}break;case DYT.YEARLY:var ytp=dd===0?1:0;controls.ytp.set("selectedIndex",ytp);switch(ytp){case YTP.ON:controls.yodm.set("selectedIndex",dm-1);controls.yodd.set("value",dd);break;case YTP.THE:controls.ytdm.set("selectedIndex",dm-1);controls.ytoff.set("selectedIndex",dw-1);controls.ytdow.set("selectedIndex",dow);break;}break;}setPlusMinusControls(controls,"ddo",dateOffset);setPlusMinusControls(controls,"dmo",monthOffset);controls.adj.set("checked",dyt!==DYT.NONE);if(dyt>0){controls.dyt.set("selectedIndex",dyt-1);}}if(tp!==ENUMDSSXMLDATATYPES.DATE){var isStaticTime=(tp===ENUMDSSXMLDATATYPES.DATETIME&&ddeData.dyt<DDE_TYPE[tp]),dh=ddeData.dh||0,dmi=ddeData.dmi||0;controls.isDynTime.set("checked",!isStaticTime);if(isStaticTime){var resultTime=new Date();resultTime.setHours(dh);resultTime.setMinutes(dmi);controls.st.set("value",$D.formatTimeInfo($D.getDateJson(resultTime),$LDT.TIMEINPUTFORMATS[0]));}else{setPlusMinusControls(controls,"dh",dh);setPlusMinusControls(controls,"dmi",dmi);}}resolveDate();setupEditor.call(this);}function createNameValueObject(values,startIndex){var arr=[];$A.forEach(values,function(value){arr.push({n:value,v:startIndex++});});return arr;}function convertToLocaleDate(dateString){var arr=[],day,localeDay,DAYS_US=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS_US=["January","February","March","April","May","June","July","August","September","October","November","December"];if(dateString.indexOf(",")>-1){arr=dateString.split(",");if(arr.length>2){day=arr.shift();localeDay=$LDT.dayNames[$A.indexOf(DAYS_US,day)];}var date=arr[0],year=arr[1],temp=date.replace(/^\s+|\s+$/gm,"").split(" "),month=temp[0],dayCount=temp[1],localeMonth=$LDT.MONTHNAME_FULL[$A.indexOf(MONTHS_US,month)];return(localeDay?localeDay+", ":"")+localeMonth+" "+dayCount+", "+year;}return dateString;}mstrmojo.DynamicDateEditor=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.DynamicDateEditor",cssClass:"mstrmojo-DynamicDateEditor",title:mstrmojo.desc(9420,"Dynamic Date"),type:ENUMDSSXMLDATATYPES.DATE,draggable:true,help:"Dynamic_Date_Editor.htm",init:function(props){this._super(props);var mainOffsets=this.mainOffsets,do_ctr=mainOffsets.do_ctr,dmo_ctr=mainOffsets.dmo_ctr,layoutsContainer=this.layoutsContainer,layouts=layoutsContainer.layouts,monthly=layouts.children[1].monthly,yearly=layouts.children[2].yearly,timeLayoutsContainer=this.timeLayoutsContainer,time=timeLayoutsContainer.dynamicTimeLayout.children[0],preview=this.preview.children[0];this.controls={ddo_dir:do_ctr.ddo_dir,ddo:do_ctr.ddo,dmo_dir:dmo_ctr.dmo_dir,dmo:dmo_ctr.dmo,adj:this.adj,dyt:layoutsContainer.dyt,wdow:layouts.weekly.wdow,mtp:layouts.children[1].mtp,mdd:monthly.mdd,mtoff:monthly.mtoff,mtdow:monthly.mtdow,mrdd:monthly.mrdd,mrdm:monthly.mrdm,ytp:layouts.children[2].ytp,yodm:yearly.yodm,yodd:yearly.yodd,ytoff:yearly.ytoff,ytdow:yearly.ytdow,ytdm:yearly.ytdm,dh_dir:time.dh_dir,dh:time.dh,dmi_dir:time.dmi_dir,dmi:time.dmi,isDynTime:timeLayoutsContainer.useDynamicTime,st:timeLayoutsContainer.staticTimeLayout.staticTime,curr:preview.currDate,res:preview.resolvedDate,currTime:preview.currTime,resTime:preview.resolvedTime};},postBuildRendering:function postBuildRendering(){if(this._super){this._super();}initControls.call(this);},onddeDataChange:function onddeDataChange(){initControls.call(this);},getResolvedDate:function getResolvedDate(){var data=this.data;return $H.copy(data,{str:["isDyn",data.dyt,data["do"],data.dmo,data.dm,data.dd,data.dw,data.dow,data.dr,data.dh,data.dmi].join("::")});},children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9422,"Define a dynamic date"),cssText:"margin:3px"},{scriptClass:"mstrmojo.HBox",cssClass:"mainOffsets",alias:"mainOffsets",cellPadding:5,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9423,"Today")},{scriptClass:"mstrmojo.HBox",alias:"do_ctr",cellPadding:2,children:[{scriptClass:"mstrmojo.SelectBox",selectedIndex:0,alias:"ddo_dir",size:1,items:createNameValueObject(DIRECTIONS,1),onchange:resolveDate},createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",alias:"ddo",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"0"},mstrmojo.desc(707,"Day(s)"))]},{scriptClass:"mstrmojo.HBox",alias:"dmo_ctr",cellPadding:2,children:[{scriptClass:"mstrmojo.SelectBox",selectedIndex:0,alias:"dmo_dir",size:1,items:createNameValueObject(DIRECTIONS,1),onchange:resolveDate},createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",alias:"dmo",required:true,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"0"},mstrmojo.desc(710,"Months"))]}]},{scriptClass:"mstrmojo.CheckBox",alias:"adj",label:mstrmojo.desc(9426,"Apply additional adjustments"),oncheckedChange:function(){resolveDate();this.parent.layoutsContainer.set("visible",this.checked);}},{scriptClass:"mstrmojo.Box",alias:"layoutsContainer",visible:false,cssClass:"mstrmojo-DynamicDateEditor-layoutsContainer",children:[{scriptClass:"mstrmojo.SelectBox",alias:"dyt",cssClass:"dyt",size:1,selectedIndex:0,items:createNameValueObject(ADJUSTMENTS,1),onchange:function(evt){resolveDate();var idx=this.selectedIndex,l=this.parent.layouts,layouts=l.children;l.legend.innerHTML=this.items[idx].n;$A.forEach(layouts,function(layout){layout.set("visible",false);});layouts[idx].set("visible",true);}},{scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(9310,"weekly"),alias:"layouts",cssClass:"mstrmojo-DynamicDateEditor-layouts",children:[{scriptClass:"mstrmojo.Box",cssClass:"weekly",alias:"weekly",children:[{scriptClass:"mstrmojo.Label",cssText:"margin:0px 6px;",text:mstrmojo.desc(870,"Select a day:")},{scriptClass:"mstrmojo.SelectBox",size:1,selectedIndex:0,alias:"wdow",items:createNameValueObject($LDT.dayNames,0),onchange:resolveDate}]},{scriptClass:"mstrmojo.HBox",visible:false,cssClass:"monthly",children:[{scriptClass:"mstrmojo.RadioList",alias:"mtp",selectedIndex:0,items:createNameValueObject([mstrmojo.desc(872,"Day"),mstrmojo.desc(9437,"The"),mstrmojo.desc(9435,"Reverse count")],0),onchange:resolveDate},{scriptClass:"mstrmojo.Table",alias:"monthly",cellSpacing:5,rows:3,cols:2,children:[{scriptClass:"mstrmojo.ValidationTextBox",alias:"mdd",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:1,max:31},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"1",slot:"0,0"},{scriptClass:"mstrmojo.Label",text:"",slot:"0,1"},{scriptClass:"mstrmojo.SelectBox",selectedIndex:0,alias:"mtoff",size:1,onchange:resolveDate,items:createNameValueObject(OFFSETS,0),slot:"1,0"},{scriptClass:"mstrmojo.SelectBox",selectedIndex:0,alias:"mtdow",size:1,onchange:resolveDate,items:createNameValueObject($LDT.dayNames,0),slot:"1,0"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9436,"of the month"),slot:"1,1"},createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",alias:"mrdd",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0,max:31},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"1",slot:"2,0"},mstrmojo.desc(707,"Day(s)")),createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",alias:"mrdm",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"0",slot:"2,1"},mstrmojo.desc(710,"Months"))]}]},{scriptClass:"mstrmojo.HBox",visible:false,cssClass:"yearly",children:[{scriptClass:"mstrmojo.RadioList",alias:"ytp",selectedIndex:0,items:createNameValueObject([mstrmojo.desc(6030,"On"),mstrmojo.desc(9437,"The")],0),onchange:resolveDate},{scriptClass:"mstrmojo.Table",alias:"yearly",rows:3,cols:1,cellSpacing:5,children:[{scriptClass:"mstrmojo.SelectBox",slot:"0,0",selectedIndex:0,alias:"yodm",size:1,items:createNameValueObject($LDT.MONTHNAME_FULL,0),onchange:function(){var dde=mstrmojo.all.mstrDDE,controls=dde.controls,yodd=controls.yodd,res=controls.res.val;yodd.constraints.max=$D.getDaysOfMonth(res.getFullYear(),parseInt(this.selectedIndex,10)+1);yodd.validate();validateInputs();}},{scriptClass:"mstrmojo.ValidationTextBox",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:1,max:31},slot:"0,0",alias:"yodd",size:1,value:"1",onValid:resolveDate,onInvalid:validateInputs},{scriptClass:"mstrmojo.SelectBox",slot:"1,0",selectedIndex:0,alias:"ytoff",size:1,items:createNameValueObject(OFFSETS,0),onchange:resolveDate},{scriptClass:"mstrmojo.SelectBox",slot:"1,0",selectedIndex:0,alias:"ytdow",size:1,items:createNameValueObject($LDT.dayNames,0),onchange:resolveDate},{scriptClass:"mstrmojo.Label",slot:"1,0",cssText:"margin: 4px;",text:"of"},{scriptClass:"mstrmojo.SelectBox",slot:"1,0",selectedIndex:0,alias:"ytdm",size:1,items:createNameValueObject($LDT.MONTHNAME_FULL,0),onchange:resolveDate}]}]}]}]},{scriptClass:"mstrmojo.Box",alias:"timeLayoutsContainer",visible:false,children:[{scriptClass:"mstrmojo.CheckBox",alias:"useDynamicTime",label:"Use Dynamic Time",oncheckedChange:function(){resolveDate();this.parent.staticTimeLayout.set("visible",!this.checked);this.parent.dynamicTimeLayout.set("visible",this.checked);}},{scriptClass:"mstrmojo.FieldSet",legend:"Static Time",alias:"staticTimeLayout",children:[createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",alias:"staticTime",dtp:15,constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP},onValid:resolveDate,onInvalid:validateInputs,size:8,value:"12:00 AM"},"Time: ",true)]},{scriptClass:"mstrmojo.FieldSet",visible:false,legend:"Dynamic Time",alias:"dynamicTimeLayout",children:[{scriptClass:"mstrmojo.Table",rows:2,cols:4,alias:"dh_ctr",cellPadding:2,children:[{scriptClass:"mstrmojo.Label",slot:"0,0",text:"This hour"},{scriptClass:"mstrmojo.SelectBox",slot:"0,1",selectedIndex:0,alias:"dh_dir",size:1,items:createNameValueObject(DIRECTIONS,1),onchange:resolveDate},createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",slot:"0,2",alias:"dh",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"0"},"hours"),{scriptClass:"mstrmojo.Label",slot:"1,0",text:"This minute"},{scriptClass:"mstrmojo.SelectBox",slot:"1,1",selectedIndex:0,alias:"dmi_dir",size:1,items:createNameValueObject(DIRECTIONS,1),onchange:resolveDate},createValidationTextBoxWithLabel({scriptClass:"mstrmojo.ValidationTextBox",slot:"1,2",alias:"dmi",constraints:{trigger:mstrmojo.validation.TRIGGER.ONKEYUP,min:0},onValid:resolveDate,onInvalid:validateInputs,size:1,value:"0"},"minutes")]}]}]},{scriptClass:"mstrmojo.FieldSet",legend:mstrmojo.desc(3389,"Preview"),alias:"preview",children:[{scriptClass:"mstrmojo.Table",rows:4,cols:2,cellSpacing:5,children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9427,"If today's date is:"),slot:"0,0"},{scriptClass:"mstrmojo.Label",alias:"currDate",cssClass:"resultLabel",postBuildRendering:function postBuildRendering(){this.val=new Date();this.set("text",convertToLocaleDate(this.val.toLocaleDateString()));},slot:"0,1"},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9428,"The date would be resolved to:"),slot:"1,0"},{scriptClass:"mstrmojo.Label",alias:"resolvedDate",cssClass:"resultLabel",text:"",slot:"1,1"},{scriptClass:"mstrmojo.Label",visible:false,text:"If the current time is:",slot:"2,0"},{scriptClass:"mstrmojo.Label",visible:false,alias:"currTime",enabled:false,cssClass:"resultLabel",postBuildRendering:function postBuildRendering(){this.val=new Date();this.set("text",$D.formatTimeInfo($D.getDateJson(this.val),$LDT.TIMEINPUTFORMATS[0]));},slot:"2,1"},{scriptClass:"mstrmojo.Label",visible:false,text:"The time would be resolved to:",slot:"3,0"},{scriptClass:"mstrmojo.Label",visible:false,alias:"resolvedTime",cssClass:"resultLabel",text:"",slot:"3,1"}]}]},{scriptClass:"mstrmojo.Label",alias:"errorText",cssClass:"errorText",visible:false,text:""},{scriptClass:"mstrmojo.HBox",alias:"buttonHBox",cssClass:"buttonHBox",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"okButton",cssClass:"mstrmojo-Editor-button dde",cssText:"right: 46px;",text:mstrmojo.desc(1442,"OK"),onclick:function(evt){var dde=this.parent.parent;dde.okCallback(dde.getResolvedDate());dde.close();}},{scriptClass:"mstrmojo.HTMLButton",cssClass:"mstrmojo-Editor-button dde",text:mstrmojo.desc(221,"Cancel"),onclick:function(evt){this.parent.parent.close();}}]},{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(9429,"Swtich to static date"),alias:"staticPicker",cssClass:"staticPicker",onclick:function onclick(evt){this.parent.switchToStaticDatePicker();}}]});}());