(function(){mstrmojo.requiresCls("mstrmojo.dnd","mstrmojo.Editor");function savePV(me){var okbtn=me.btns.ok,calbtn=me.btns.cancel,params={taskId:"savePersonalView",messageID:me.msgID,objectType:me.objectType,objectSubType:me.objectSubType,subName:me.getName()},cb={success:function(res){okbtn.set("enabled",true);calbtn.set("enabled",true);me.close();var msg=mstrmojo.desc("2301");mstrmojo.alert(msg.replace("##","").replace("###",""));},failure:function(res){okbtn.set("enabled",true);calbtn.set("enabled",true);me.close();mstrmojo.alert(res.getResponseHeader("X-MSTR-TaskFailureMsg"));}};okbtn.set("enabled",false);calbtn.set("enabled",false);mstrmojo.xhr.request("GET",mstrConfig.taskURL,cb,params);}mstrmojo.PersonalViewSaveAs=mstrmojo.declare(mstrmojo.Editor,null,{scriptClass:"mstrmojo.PersonalViewSaveAs",title:mstrmojo.desc(9173,"Create Personal View"),name:"New Personal View",cssText:"width: 300px;",msgID:null,objectType:null,objectSubType:null,children:[{scriptClass:"mstrmojo.HBox",alias:"contPanel",children:[{scriptClass:"mstrmojo.Label",text:mstrmojo.desc(2211,"Name:")},{scriptClass:"mstrmojo.TextBox",alias:"name",cssClass:"mstrmojo-SaveAsEditor-nameInput",bindings:{value:function(){return mstrmojo.string.decodeHtmlString(this.parent.parent.name);}}}]},{scriptClass:"mstrmojo.HBox",slot:"buttonNode",alias:"btns",cssClass:"mstrmojo-Editor-buttonBar",children:[{scriptClass:"mstrmojo.HTMLButton",alias:"ok",text:mstrmojo.desc(1442,"OK"),cssClass:"mstrmojo-Editor-button",onclick:function(){savePV(this.parent.parent);},bindings:{enabled:function(){var v=this.parent.parent.contPanel.name.value;return(v&&v.length);}}},{scriptClass:"mstrmojo.HTMLButton",alias:"cancel",text:mstrmojo.desc(221,"Cancel"),cssClass:"mstrmojo-Editor-button",onclick:function(){this.parent.parent.close();}}]}],getName:function(){return this.contPanel.name.value;}});})();