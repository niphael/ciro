(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.Doc","mstrmojo.ExpressDocBuilder","mstrmojo.ToolBar","mstrmojo.OIVMPage","mstrmojo.ToolBarBuilder","mstrmojo.TabContainer","mstrmojo.ScrollingTabStrip","mstrmojo.ToolBarModel","mstrmojo.OIVMDocController","mstrmojo.DocModel");function passGraphToServerProxy(key,isAdd){var mthName=((isAdd)?"add":"remove")+"LoadingGraph";this.serverProxy[mthName](key);}mstrmojo.OIVMApp=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.OIVMApp",serverProxy:null,init:function init(props){this._super(props);if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}},start:function start(){var doc=new mstrmojo.Doc({slot:"stack"});doc.builder=new mstrmojo.ExpressDocBuilder({parent:doc});this.docId=doc.id;var tb=new mstrmojo.ToolBar({slot:"toolbar",cssClass:"mstrmojo-oivmSprite grouped",builder:mstrmojo.ToolBarBuilder});var view=new mstrmojo.OIVMPage({placeholder:this.placeholder,error:this.error,children:[tb,new mstrmojo.TabContainer({slot:"layout",layoutConfig:{h:{top:"auto",stack:"100%"},w:{top:"100%",stack:"100%"}},children:[new mstrmojo.ScrollingTabStrip({slot:"top",cssClass:"mstrmojo-layout-tabs",visible:false,bindings:{width:"this.parent.width"}}),doc]})]});if(this.hasHiddenSections){view.layoutConfig.h.toolbar="0px";}view.render();var docModelData=this.docModelData;if(docModelData&&docModelData.mstrerr){mstrmojo.err(docModelData);}else{if(!this.error){tb.model=new mstrmojo.ToolBarModel(this.tbModelData);tb.target=doc;var docModel=doc.model=new mstrmojo.DocModel(docModelData);doc.controller=docModel.controller=new mstrmojo.OIVMDocController({model:docModel});mstrApp.docModel=docModel;mstrApp.onSessionExpired=function(){var app=mstrApp,m=app.docModel;mstrmojo.requiresCls("mstrmojo.form");mstrmojo.form.send({evt:5005,src:app.name+"."+app.pageName+".5005",rwb:m.bs});};mstrmojo.hash.copy(tb.model.features,tb.target.model.features);mstrmojo.locales.load(function(){tb.buildChildren();doc.buildChildren();});if(mstrApp.pendingMojoEditor&&mstrApp.pendingMojoEditor!=""){doc["show"+mstrApp.pendingMojoEditor]();delete mstrApp.pendingMojoEditor;}var rf=doc.model.rf;if(rf>0){doc.model.controller.startAutoRefresh();}}}},onMobileDevice:function onMobileDevice(){return false;},isTouchApp:function isTouchApp(){return false;},getContentDimensions:function getContentDimensions(supportsFullScreen){return null;},getConfiguration:mstrmojo.emptyFn,addLoadingGraph:function addLoadingGraph(key){passGraphToServerProxy.call(this,key,true);},removeLoadingGraph:function removeLoadingGraph(key){passGraphToServerProxy.call(this,key);},serverRequest:function serverRequest(params,callback,config){try{callback=callback||{};config=config||{};var mthName=config.src||(arguments.calle&&arguments.calle.caller.name),fnWait=!config.silent&&config.fnWait,fnHideWait=!config.silent&&config.fnHideWait,app=this;callback=mstrmojo.func.wrapMethods(callback,{submission:function(){if(fnWait){fnWait();}},failure:function(res){if(!config.silent){res.method=mthName;mstrmojo.err(res);}},complete:function(){if(fnHideWait){fnHideWait();}}});window.setTimeout(function(){app.serverProxy.request(callback,params,!!config.override,config);},0);}catch(ex){mstrmojo.err(ex);}}});window.$MAPF=function(){return false;};}());