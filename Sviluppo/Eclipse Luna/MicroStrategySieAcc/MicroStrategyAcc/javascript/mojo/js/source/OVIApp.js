(function(){mstrmojo.requiresCls("mstrmojo.func","mstrmojo.ServerProxy","mstrmojo.XHRServerTransport","mstrmojo.ToolBar","mstrmojo.OIVMPage","mstrmojo.ToolBarBuilder","mstrmojo.TabContainer","mstrmojo.ToolBarModel","mstrmojo.OVIShell");mstrmojo.OVIApp=mstrmojo.declare(mstrmojo.Obj,null,{scriptClass:"mstrmojo.OVIApp",serverProxy:null,init:function init(props){this._super(props);if(!this.serverProxy){this.serverProxy=new mstrmojo.ServerProxy({transport:mstrmojo.XHRServerTransport});}},start:function start(){var tb=new mstrmojo.ToolBar({slot:"toolbar",cssClass:"mstrmojo-oivmSprite grouped",builder:mstrmojo.ToolBarBuilder});var viShell=new mstrmojo.OVIShell(mstrmojo.hash.copy(mstrApp.docModelData.vi,{slot:"stack"}));var view=new mstrmojo.OIVMPage({placeholder:this.placeholder,error:this.error,children:[tb,new mstrmojo.TabContainer({slot:"layout",layoutConfig:{h:{top:"auto",stack:"100%"},w:{top:"100%",stack:"100%"}},children:[viShell]})]});if(this.hasHiddenSections){view.layoutConfig.h.toolbar="0px";}view.render();var docModelData=this.docModelData;if(docModelData&&docModelData.mstrerr){mstrmojo.err(docModelData);}else{if(!this.error){tb.model=new mstrmojo.ToolBarModel(this.tbModelData);tb.target=viShell;var docModel=viShell.model=new mstrmojo.Model(docModelData);mstrApp.docModel=docModel;mstrApp.onSessionExpired=function(){var app=mstrApp,m=app.docModel;mstrmojo.requiresCls("mstrmojo.form");mstrmojo.form.send({evt:5005,src:app.name+"."+app.pageName+".5005",rwb:m.bs});};mstrmojo.hash.copy(tb.model.features,tb.target.model.features);mstrmojo.locales.load(function(){tb.buildChildren();});}}},serverRequest:function serverRequest(params,callback,config){try{callback=callback||{};config=config||{};var mthName=config.src||(arguments.calle&&arguments.calle.caller.name),fnWait=!config.silent&&config.fnWait,fnHideWait=!config.silent&&config.fnHideWait,app=this;callback=mstrmojo.func.wrapMethods(callback,{submission:function(){if(fnWait){fnWait();}},failure:function(res){if(!config.silent){res.method=mthName;mstrmojo.err(res);}},complete:function(){if(fnHideWait){fnHideWait();}}});window.setTimeout(function(){app.serverProxy.request(callback,params,!!config.override,config);},0);}catch(ex){mstrmojo.err(ex);}}});window.$MAPF=function(){return false;};}());