(function(){mstrmojo.requiresCls("mstrmojo.Widget");var $C=mstrmojo.css,_KEYCODENAME={9:"Tab",13:"Enter",27:"Esc",38:"ArrowUp",40:"ArrowDown"};mstrmojo.SearchWidget=mstrmojo.declare(mstrmojo.Widget,null,{scriptClass:"mstrmojo.SearchWidget",quickSearch:false,placeholderText:"",markupString:'<table id={@id} cellspacing=0 cellpadding=0 class="mstrmojo-SearchBox-Wrapper {@cssClass}" style="{@cssText};"><tr><td><div class="mstrmojo-SearchBox" mstrAttach:click ><input class="mstrmojo-SearchBox-input" type="text" style="width:{@width};" placeholder="{@placeholderText}" mstrAttach:keyup,blur /></div></td><td><div class="mstrmojo-SearchBox-clear" id="{@id}sbClear" mstrAttach:click></div></td><td><div class="mstrmojo-SearchBox-bg"><div class="mstrmojo-SearchBox-search" id="{@id}sbSearch" mstrAttach:click ></div></div></td></tr></table>',markupSlots:{inputNode:function(){return this.domNode.rows[0].cells[0].firstChild.firstChild;},clearNode:function(){return this.domNode.rows[0].cells[1].firstChild;}},onsearch:function onsearch(){},onclear:function onclear(){},prekeyup:function prekeyup(evt){var hWin=evt.hWin,e=evt.e||hWin.event;var pattern=this.getSearchPattern(),ep=(pattern.length===0);$C.toggleClass(this.clearNode,["show"],!ep);if(this.quickSearch){this[ep?"clearSearch":"onsearch"](pattern);}var n=_KEYCODENAME[e.keyCode];if(this["on"+n]){this["on"+n](evt);}},onEnter:function onEnter(){this.onsearch(this.getSearchPattern());},getSearchPattern:function getSearchPattern(){return mstrmojo.string.trim(this.inputNode.value);},preclick:function preclick(evt){var hWin=evt.hWin,e=evt.e||hWin.event,tgt=e.target||e.srcElement,id=tgt&&tgt.id;switch(id.replace(this.id,"")){case"sbSearch":this.onsearch(this.getSearchPattern());break;case"sbClear":this.clearSearch();break;}},clearSearch:function(){var pattern=this.getSearchPattern();this.inputNode.value="";$C.removeClass(this.clearNode,["show"]);if(this.onclear){this.onclear(pattern);}}});})();