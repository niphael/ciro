(function(){mstrmojo.requiresCls("mstrmojo.string","mstrmojo.dom","mstrmojo.css");var $DOM=mstrmojo.dom,$CSS=mstrmojo.css,clsSelected="selected";function delegateSelect(mthName,el,item,idx,widget){var hook=widget.listHooks[mthName];if(hook&&hook.call(widget,el,item,idx)){return ;}$CSS[((mthName==="select")?"add":"remove")+"Class"](el,clsSelected);}function addToCollection(propertyName,delimiter,values){var existing=this[propertyName],arr=(existing)?existing.split(delimiter):[];arr=arr.concat(values.split(delimiter));this[propertyName]=arr.join(delimiter);return arr.length-1;}mstrmojo._IsList=mstrmojo.provide("mstrmojo._IsList",{_mixinName:"mstrmojo._IsList",listHooks:{},getItemMarkup:function(item,idx){return'<{@tag} class="item {@cls}" idx="{@idx}" style="{@style}">{@n}</{@tag}>';},getItemProps:function getItemProps(item,idx){var isSelected=!!this.selectedIndices[idx];return{tag:"div",sel:isSelected,cls:(isSelected)?clsSelected:"",n:item.n||"",style:"",idx:idx,addCls:function(cls){addToCollection.call(this,"cls"," ",cls);},addStyle:function(s){addToCollection.call(this,"style",";",s);}};},itemRenderer:{render:function(item,idx,widget){item._renderIdx=idx;return mstrmojo.string.apply(widget.getItemMarkup(item,idx),widget.getItemProps(item,idx));},select:function(el,item,idx,widget){delegateSelect("select",el,item,idx,widget);},unselect:function(el,item,idx,widget){delegateSelect("unselect",el,item,idx,widget);}},onclick:function onclick(evt){try{var target=evt.target||$DOM.eventTarget(evt.hWin,evt.e),item=$DOM.findAncestorByAttr(target,"idx",true,this.domNode),idx=item&&parseInt(item.value,10);if(idx!==null&&!isNaN(idx)){if(!this.multiSelect){this.singleSelect(idx);}else{var m=(this.selectedIndices[idx])?"remove":"add";this[m+"Select"](idx);}}}catch(ex){mstrApp.onerror(ex);}}});mstrmojo._IsList.SELECTED_CLS=clsSelected;}());