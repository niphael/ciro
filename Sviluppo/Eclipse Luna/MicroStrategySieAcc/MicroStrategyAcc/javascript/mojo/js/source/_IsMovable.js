(function(){mstrmojo.requiresCls("mstrmojo.dom","mstrmojo.dnd");var $D=mstrmojo.dom;function cursorHack(rtnValue){if($D.isWK){document.onselectstart=function(e){if(!rtnValue){e.preventDefault();}return rtnValue;};}}mstrmojo._IsMovable=mstrmojo.provide("mstrmojo._IsMovable",{draggable:true,ownAvatar:true,getMovingHandle:function getMovingHandle(){return this.domNode;},getMovingTarget:function getMovingTarget(){return this.domNode;},ondragstart:function ondragstart(c){var handle=this.getMovingHandle(),targetStyle=this.getMovingTarget().style;var shouldBeginDrag=$D.contains(handle,c.src.node,true,document.body);if(shouldBeginDrag){cursorHack(false);handle.style.cursor="move";this._leftPos=parseInt(targetStyle.left,10);this._topPos=parseInt(targetStyle.top,10);this._hWidth=handle.clientWidth;this._hHeight=handle.clientHeight;}return shouldBeginDrag;},ondragmove:function ondragmove(c){var targetPosition=c.tgt.pos,srcPosition=c.src.pos,targetStyle=this.getMovingTarget().style;targetStyle.left=this.left=Math.max(this._leftPos+targetPosition.x-srcPosition.x,-this._hWidth+40)+"px";targetStyle.top=this.top=Math.max(this._topPos+targetPosition.y-srcPosition.y,-this._hHeight+10)+"px";},ondragend:function ondragend(c){cursorHack(true);this.getMovingHandle().style.cursor="default";delete this._leftPos;delete this._topPos;delete this._hWidth;delete this._hHeight;}});}());