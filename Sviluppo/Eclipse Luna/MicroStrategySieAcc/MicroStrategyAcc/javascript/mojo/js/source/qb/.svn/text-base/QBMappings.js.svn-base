(function(){mstrmojo.requiresCls("mstrmojo.Box","mstrmojo.qb.QBPreview");var _C=mstrmojo.css;var _MARGIN=20;mstrmojo.qb.QBMappings=mstrmojo.declare(mstrmojo.Box,null,{scriptClass:"mstrmojo.qb.QBMappings",markupMethods:{onvisibleChange:function(){this.domNode.style.display=this.visible?"block":"none";}},cssClass:"mstrmojo-di-datapreview",cssText:"position:relative;overflow-x:hidden;overflow-y:auto;border:0px solid lightGrey;border-width:1px;border-bottom-right-radius:6px;border-bottom-left-radius:6px;",width:0,height:0,dropZone:false,active:false,children:[{scriptClass:"mstrmojo.qb.QBPreview",alias:"content",columns:[],cssText:"width:100%"},{scriptClass:"mstrmojo.Label",alias:"notice",cssClass:"warnLabel",text:"No preview available."}],handleDataPreview:function handleDataPreview(){mstrApp.getRootController().toggleDataPreview(true);var model=mstrmojo.all.QBuilderModel,content=this.content,notice=this.notice,hasMapping=(model.mappings&&model.mappings.length>0);content.model=model;content.set("visible",hasMapping);notice.set("visible",!hasMapping);hasMapping&&content.populatePreview();},onheightChange:function(e){if(this.domNode){this.domNode.style.height=Math.max(parseInt(e.value,10)-2,0)+"px";}},postCreate:function(){mstrmojo.all.QBuilderModel.attachEventListener("dataPreview",this.id,"handleDataPreview");}});})();