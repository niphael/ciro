(function(){mstrmojo.requiresCls("mstrmojo.Table","mstrmojo.Label","mstrmojo.Box","mstrmojo.Image","mstrmojo._FillsBrowser","mstrmojo._HasLayout","mstrmojo.DI.DIFileUpload","mstrmojo.DI.DIIntro","mstrmojo.DI.DIPreview","mstrmojo.DI.DataImportModel","mstrmojo.DI.DIFooter","mstrmojo.DI.SalesforceModel");mstrmojo.requiresDescs(8571,4700,1563,1143,1085,1088,2102,61,60,9095,9096,9097,9098,8042,9099,7972,8724,9100,9101,9213,9214,9212);window.onload=function(){mstrmojo.all.DataImport.browserResized(null);};var _constants=mstrmojo.DI.DIConstants;var _model=mstrmojo.all.DIModel;if(!_model){_model=new mstrmojo.DI.DataImportModel({});}var _sfModel=mstrmojo.all.SalesforceModel;if(!_sfModel){_sfModel=new mstrmojo.DI.SalesforceModel({});}mstrmojo.DataImport=mstrmojo.declare(mstrmojo.Container,[mstrmojo._FillsBrowser,mstrmojo._HasLayout],{scriptClass:"mstrmojo.DataImport",markupString:'<div id="{@id}" class="mstrmojo-di {@cssClass}" style="background-color: #FFFFFF;"><div id="mstr_DiToolbar" class="mstrmojo-di-toolbar"></div><div id="mstr_Layout" class="mstrmojo-di-layout" style="width: 100%; overflow: hidden; padding-bottom: 20px;"></div><div id="mstr_SFTT" class="mstrmojo-di-bullet-tip" style="display: none;">'+mstrmojo.desc(9212,"Contact your administrator to configure access to Salesforce reports by enabling an https connection and setting the appropriate Salesforce parameters. See Help for more details")+'</div><div id="mstr_DiFooter" class="mstrmojo-di-footer" style="width: 100%;"></div></div>',markupSlots:{toolbar:function(){return this.domNode.firstChild;},layout:function(){return this.domNode.children[1];},footer:function(){return this.domNode.lastChild;}},height:null,width:null,minWidth:800,minHeight:500,model:_model,currentPage:null,initParams:function(params){var m=_model;m.initParams(params);},children:[{scriptClass:"mstrmojo.Box",slot:"toolbar",cssClass:"mstrmojo-di-header cf",children:[{scriptClass:"mstrmojo.Label",cssText:"float:left; font: 12px Tahoma; font-weight: bold; color: #5b5b5b; padding: 8px 0 0 10px;",text:mstrmojo.desc(9100,"Select your data source")},{scriptClass:"mstrmojo.Label",cssText:" float:left; font: 12px Tahoma; font-weight: bold; color: #5b5b5b; padding: 8px 0 0 450px;",text:mstrmojo.desc(10039,"My datasets")},{scriptClass:"mstrmojo.Button",cssClass:"mstrmojo-di-help",title:mstrmojo.desc(1143,"help"),onclick:function(){var url=(mstrApp.helpUrl||"../help/")+"WebUser/WebHelp/Lang_"+(mstrApp.helpLocaleId?mstrApp.helpLocaleId:mstrApp.localeId)+"/"+(mstrApp.userHelpPage||"MicroStrategy_Web_Help.htm")+"#"+(mstrApp.helpTopic||"import_data_page.htm");window.open(url);}}]},{scriptClass:"mstrmojo.Box",slot:"layout",children:[{scriptClass:"mstrmojo.DI.DIIntro",id:"mstrDiIntro",cssText:"width:100%;",model:_model,visible:true,bindings:{visible:function(){return this.parent.parent.model.curPg==_constants.pageType.intro;}}},{scriptClass:"mstrmojo.DI.DIFileUpload",id:"mstr_FileUpload",alias:"fileUpload",model:_model,bindings:{visible:function(){if(this.parent.parent.model.curPg==_constants.pageType.file){this.parent.parent.currentPage=this;}return this.parent.parent.model.curPg==_constants.pageType.file;}}},{scriptClass:"mstrmojo.DI.DIPreview",id:"mstrDiPreview",alias:"preview",model:_model,visible:false,bindings:{visible:function(){if(this.parent.parent.model.curPg==_constants.pageType.preview){this.parent.parent.currentPage=this;this.height=mstrmojo.all.DataImport.height;}return this.parent.parent.model.curPg==_constants.pageType.preview;}}},{scriptClass:"mstrmojo.DI.DISalesforce",id:"mstrDiSalesforce",model:_model,visible:false,bindings:{visible:function(){if(this.parent.parent.model.curPg==_constants.pageType.sfList){this.parent.parent.currentPage=this;}return this.parent.parent.model.curPg==_constants.pageType.sfList;}}}],preBuildRendering:function(){if(this._super){this._super();}var comps=window.location.href.split("&");if(comps.length>0&&comps[0].indexOf("?")>0){comps[0]=comps[0].split("?")[1];}for(var i=0;i<comps.length;i++){if(comps[i].split("=")[0]=="code"){_sfModel.code=comps[i].split("=")[1];}}mstrmojo.all.mstrDiIntro.populate();}},{scriptClass:"mstrmojo.DI.DIFooter",slot:"footer",model:_model}],browserResized:function browserResized(size){size=this.getBrowserDimensions();var thisPos={x:0,y:0};if(this.domNode){thisPos=this.getAbsPos(this.domNode);}var nw=parseInt(size.w,10)-thisPos.x-20;var nh=parseInt(size.h,10)-thisPos.y-96;nh=nh+40;nw=nw+10;if(nw<800){nw=800;}if(nh<400){nh=400;}if(this.height&&nh!==this.height){this.set("height",nh+"px");}else{this.height=nh+"px";}if(this.width&&nw!==this.width){this.set("width",nw+"px");}else{this.width=nw+"px";}if(!document.getElementById("mstr_Layout")){return true;}var style=document.getElementById("mstr_Layout").style;var offset=64;style.width=nw+"px";style.height=(nh-offset)+"px";var introPage=mstrmojo.all.mstrDiIntro;if(introPage){introPage.set("height",(nh-offset)+"px");introPage.set("width",nw+"px");introPage.resize(nw,nh);}var previewPage=mstrmojo.all.mstrDiPreview;if(previewPage){previewPage.set("height",(nh-offset)+"px");previewPage.set("width",nw+"px");previewPage.resize(nw,nh);}var sfPage=mstrmojo.all.mstrDiSalesforce;if(sfPage){sfPage.set("height",(nh-offset)+"px");sfPage.set("width",nw+"px");}return true;},postBuildRendering:function p(){if(this._super){this._super();}this.browserResized(this.getBrowserDimensions());},getAbsPos:function getAbsPos(elemOrId){var elem=(typeof elemOrId=="String")?document.getElementById(elemOrId):elemOrId;var xCoor=0;var yCoor=0;while(elem&&(!isNaN(elem.offsetLeft))&&(!isNaN(elem.offsetTop))){xCoor+=elem.offsetLeft-elem.scrollLeft;yCoor+=elem.offsetTop-elem.scrollTop;elem=elem.offsetParent;}return{x:xCoor,y:yCoor};},layoutConfig:{h:{toolbar:"30px",layout:"100%",footer:"40px"},w:{layout:"100%"}}});})();