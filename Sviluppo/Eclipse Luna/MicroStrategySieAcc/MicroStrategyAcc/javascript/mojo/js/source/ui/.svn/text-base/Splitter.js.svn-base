(function(){mstrmojo.requiresCls("mstrmojo.Container","mstrmojo._HasLayout","mstrmojo._HasOwnAvatar","mstrmojo.array","mstrmojo.dom","mstrmojo.hash");var $H=mstrmojo.hash,$D=mstrmojo.dom,HEIGHT_PROP="h",WIDTH_PROP="w",HNDRDPCT="100%",STYLE_DISPLAY_NONE="none",ENUM_OR={HORIZONTAL:0,VERTICAL:1},OR_HORIZONTAL=ENUM_OR.HORIZONTAL,CSS_CLASS_HORIZONTAL="horizontal",CSS_CLASS_VERTICAL="vertical",DEFAULT_VALUES={firstSplitNode:"300px",resizeHandle:"10px",secondSplitNode:HNDRDPCT};function buildLayoutConfig(){var config=this.config,orientation=this.orientation,splitterDim=(orientation===OR_HORIZONTAL)?WIDTH_PROP:HEIGHT_PROP,otherDim=(orientation===OR_HORIZONTAL)?HEIGHT_PROP:WIDTH_PROP,NODE_NAME="Node",newLC=this.layoutConfig||{};newLC.xt=true;newLC[splitterDim]=newLC[splitterDim]||$H.copy(DEFAULT_VALUES);newLC[otherDim]=newLC[otherDim]||{firstSplitNode:HNDRDPCT,resizeHandle:HNDRDPCT,secondSplitNode:HNDRDPCT};var splitValues=newLC[splitterDim];$H.forEach(config,function(value,key){splitValues[key+NODE_NAME]=value.v;});this.layoutConfig=newLC;}function applyDimensions(pos){var widgetPos=this._wPos,prop=(this.orientation===OR_HORIZONTAL)?"x":"y",value=pos[prop]-widgetPos[prop],config=this.config,firstSplitCfg=config.firstSplit,secondSplitCfg=config.secondSplit,firstMin=parseInt(firstSplitCfg.min,10),secondMin=parseInt(secondSplitCfg.min,10),maxValue=parseInt((this.orientation===OR_HORIZONTAL)?this.width:this.height,10)-secondMin;firstSplitCfg.v=Math.min(Math.max(value,firstMin),maxValue)+"px";secondSplitCfg.v="100%";buildLayoutConfig.call(this,config);this.doLayout();}var splitter=mstrmojo.ui.Splitter=mstrmojo.declare(mstrmojo.Container,[mstrmojo._HasLayout,mstrmojo._HasOwnAvatar],{scriptClass:"mstrmojo.ui.Splitter",markupString:'<div id="{@id}" class="mstrmojo-Splitter {@orientationCss}"><div class="mstrmojo-SplitterPanel"></div><div class="mstrmojo-SplitterHandle"></div><div class="mstrmojo-SplitterPanel"></div><div class="mstrmojo-clearingDiv"></div></div>',markupSlots:{firstSplitNode:function firstSplitPane(){return this.domNode.firstChild;},resizeHandle:function resizeHandle(){return this.domNode.children[1];},secondSplitNode:function secondSplitPane(){return this.domNode.children[2];}},orientation:OR_HORIZONTAL,config:{firstSplit:{v:"50%",min:"300px",max:undefined},secondSplit:{v:"50%",min:"300px",max:undefined}},init:function init(props){this._super(props);var isHorizontal=(this.orientation===OR_HORIZONTAL);this.orientationCss=isHorizontal?CSS_CLASS_HORIZONTAL:CSS_CLASS_VERTICAL;this.restrictedToAxis=isHorizontal?"x":"y";this.config=$H.clone(this.config);buildLayoutConfig.call(this);},toggleFirstItemVisibility:function toggleFirstItemVisibility(show){this.layoutConfig[(this.orientation===OR_HORIZONTAL)?WIDTH_PROP:HEIGHT_PROP]=show?$H.copy(DEFAULT_VALUES):{firstSplitNode:"0px",resizeHandle:"0px",secondSplitNode:HNDRDPCT};this.doLayout();},draggable:true,dropZone:false,avatarCssClass:"mstrmojo-Splitter-av",delayResizing:false,createAvatar:function createAvatar(){var div=document.createElement("div"),isHorizontal=(this.orientation===OR_HORIZONTAL),widgetPosition=this._wPos=$D.position(this.domNode),avatarThickness="2px",divNodeStyle=div.style;divNodeStyle.top=(isHorizontal?widgetPosition.y:0)+"px";divNodeStyle.left=(isHorizontal?0:widgetPosition.x)+"px";divNodeStyle.height=isHorizontal?this.height:avatarThickness;divNodeStyle.width=isHorizontal?avatarThickness:this.width;divNodeStyle.display=this.delayResizing?"block":STYLE_DISPLAY_NONE;return div;},ondragstart:function ondragstart(evt){if(evt.src.node!==this.resizeHandle){return false;}if(this._super){return this._super(evt);}return true;},ondragmove:function ondragmove(evt){if(!this.delayResizing){applyDimensions.call(this,evt.tgt.pos);}if(this._super){this._super(evt);}},ondragend:function ondragend(evt){if(this.delayResizing){applyDimensions.call(this,evt.tgt.pos);}delete this._wPos;if(this._super){this._super(evt);}}});splitter.ENUM_OR=ENUM_OR;}());