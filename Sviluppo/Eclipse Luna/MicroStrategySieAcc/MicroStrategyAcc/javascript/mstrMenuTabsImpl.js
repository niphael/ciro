mstrMenuTabsImpl.prototype=new mstrBoneImpl();mstrMenuTabsImpl.prototype.MIN_SUPPORTED_WIDTH=200;mstrMenuTabsImpl.prototype.onload=function(){try{mstrBoneImpl.prototype.onload.call(this);var b=microstrategy.bone(this.id),i;this.tabs=microstrategy.findChildrenWithAtt(this.elem,"div","ty","tab");this.content=microstrategy.findChildrenWithAtt(this.elem,"div","ty","content")[0];this.extraOptions=microstrategy.findChildrenWithAtt(this.elem,"div","ty","extraOpt")[0];this.togglers=microstrategy.findChildrenWithAtt(this.elem,"span","ty","toggler");for(i=0,len=this.tabs.length;i<len;i++){this.tabs[i].onclick=function(e){b.onclick(e);};this.tabs[i].setAttribute("o",i);}for(i=0,len=this.togglers.length;i<len;i++){this.togglers[i].onclick=function(e){b.onclick(e);};}this.togglers=microstrategy.findChildrenWithAtt(this.elem,"span","ty","toggler");this.btnToggler=document.getElementById("menuToggler");if(this.btnToggler){this.btnToggler.onclick=function(e){b.toggleSidebar();};}this.quickLaunch=document.getElementById("mscld-create");this.createImg=document.getElementById("mscld-create-menu");if(this.createImg){this.createImg.onclick=function(e){b.toggleCreatePopup();if(window.event){window.event.cancelBubble=true;}else{e.cancelBubble=true;return false;}};}var createPopup=document.getElementById("mstrCreatePopup");if(createPopup){createPopup.onmousedown=function(e){if(window.event){window.event.cancelBubble=true;}else{e.cancelBubble=true;}};createPopup.onclick=function(e){b.toggleCreatePopup(true);};}this.leftBar=document.getElementById("td_mstrWeb_dockLeft");this.leftTB=document.getElementById("leftToolbar");this.leftTBBone=microstrategy.bones.leftToolbar;this.stats=document.getElementById("dhtml_statistics");this.visible=microstrategy.getCookieSetting("lTbar")===undefined?true:microstrategy.getCookieSetting("lTbar")=="1";}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.onpostload=function(){try{this.resize();}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.onwinresize=function(){try{this.resize();}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.resize=function(){try{var leftTB=this.leftTB,leftTBBone=this.leftTBBone,bm=mstr.utils.BoxModel,node=this.content,menuToggler=this.btnToggler,quickLaunch=this.quickLaunch,extraOptions=this.extraOptions;if(node){window.setTimeout(function(){if(extraOptions){extraOptions.style.display="block";}var extraOptionsHeight=(extraOptions&&extraOptions.clientHeight)||0;node.style.height=Math.max(leftTB.clientHeight-node.offsetTop-extraOptionsHeight,0)+"px";if(mstr.utils.ISIE7){node.style.minHeight=node.style.height;}var ftBone=microstrategy.bones.tree_ftb_FolderTreeView;if(ftBone){ftBone.resize();}leftTBBone.adjustDragHandles(leftTB.clientHeight,microstrategy.getCookieSetting("ltW")||leftTB.clientWidth);},400);}}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.onclick=function(e){try{if(!e){e=window.event;}var src=getEventTarget(e),target,css=src.className,CSS_CLASS_COLLAPSED=" collapsed";if(src.getAttribute("ty")==="toggler"){target=document.getElementById(src.getAttribute("target"));src.className=css.replace(CSS_CLASS_COLLAPSED,"");if(target&&target.style){if(target.style.height==="0px"){target.style.height=getObjHeight(target.firstChild)+"px";}else{target.style.height="0px";src.className+=CSS_CLASS_COLLAPSED;}}}}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.ondocumentclick=function(e){e=e||window.event;var target=getEventTarget(e);if(target!=this.createImg){this.toggleCreatePopup(true);}};mstrMenuTabsImpl.prototype.toggleCreatePopup=function(forceHide){var createPopup=document.getElementById("mstrCreatePopup");if(createPopup&&this.leftBar){itemNodes=createPopup.getElementsByTagName("span"),itemHeight=itemNodes[0].offsetHeight,itemCount=itemNodes.length,leftBarWidth=this.leftBar.clientWidth,makeVisible=isNaN(parseInt(createPopup.style.left,10));createPopup.style.left=(makeVisible&&!forceHide)?(leftBarWidth+1+"px"):"";createPopup.style.top=(mstr.utils.ISIE7?getObjSumTop(this.createImg.parentNode,this.leftTB):this.createImg.parentNode.offsetTop)+"px";}};mstrMenuTabsImpl.prototype.toggleSidebar=function(){try{this.visible=!this.visible;this.resizeSidebar();}catch(err){microstrategy.errors.log(err);return false;}};mstrMenuTabsImpl.prototype.resizeSidebar=function(width){var show=this.visible,css=this.elem.className,CSS_CLASS_COLLAPSED=" collapsed";this.elem.className=css.replace(CSS_CLASS_COLLAPSED,"");width=(width&&(width+"px"));var leftBar=this.leftBar,leftTB=this.leftTB,stats=this.stats,newWidth;if(!show){this.elem.className+=CSS_CLASS_COLLAPSED;if(leftBar){this.leftBarWidth=width||leftBar.style.width;newWidth=leftTB.style.width=leftBar.style.width="34px";}this.toggleCreatePopup(true);}else{newWidth=leftTB.style.width=leftBar.style.width=Math.max(parseInt(width||this.leftBarWidth||0,10),this.MIN_SUPPORTED_WIDTH)+"px";}if(stats){stats.style.marginLeft=newWidth||"0";}microstrategy.updateCookieSetting("ltW",parseInt(newWidth,10));microstrategy.updateCookieSetting("lTbar",show?"1":"0");this.resize();};function mstrMenuTabsImpl(id){this.inherits=mstrBoneImpl;this.inherits(id);delete this.inherits;return this;}